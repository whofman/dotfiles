(self.webpackChunkmomentum_extension=self.webpackChunkmomentum_extension||[]).push([[483],{7788:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i,o=t[1]||"",n=t[3];if(!n)return o;if(e&&"function"==typeof btoa){var s=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[o].concat(a).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},n=0;n<this.length;n++){var s=this[n][0];null!=s&&(o[s]=!0)}for(n=0;n<t.length;n++){var a=t[n];null!=a[0]&&o[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},3483:(t,e,i)=>{"use strict";i.r(e);var o=i(4525),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade",mode:"out-in"}},[t.quoteVisible&&t.activeQuote?i("div",{key:t.quoteUuid,staticClass:"app-container app-dash quote",attrs:{"data-test":"quote"},on:{mouseenter:t.onHover,mouseleave:function(e){t.hover=!1},click:function(e){return e.preventDefault(),t.handleClick(e)}}},[i("p",{staticClass:"body"},[i("span",{ref:"body-text",staticClass:"body-text",attrs:{"data-test":"body-text"}},[t._v("“"+t._s(t.body)+"”")]),t._v(" "),i("span",{staticClass:"below",attrs:{"data-test":"below"}},[t.source?i("span",{staticClass:"source",attrs:{"data-test":"source"}},[t._v(t._s(t.source))]):t._e(),t._v(" "),i("span",{staticClass:"control control-heart",class:{active:t.isFavorite},attrs:{"data-test":"control-fav"},on:{click:function(e){return e.stopPropagation(),t.toggleFavorite(e)}}},[i("img",{staticClass:"icon-dash-heart-empty icon",attrs:{src:"img/icon-heart-empty.svg"}}),t._v(" "),i("transition",{attrs:{name:"scale"}},[t.isFavorite?i("img",{staticClass:"icon-dash-heart icon",attrs:{src:"img/icon-heart.svg"}}):t._e()])],1),t._v(" "),t.skipEnabled?i("span",{staticClass:"control control-skip",attrs:{title:"Skip Quote"}},[i("span",{staticClass:"icon-container",class:{active:t.skippingQuote},on:{click:function(e){return e.stopPropagation(),t.skipQuote(e)}}},[i("svg",{staticClass:"icon icon-skip",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 249.05 132.12"}},[i("circle",{attrs:{cx:"115.5",cy:"108.62",r:"23"}}),i("path",{attrs:{d:"M291.5,281A22.5,22.5,0,1,1,269,303.5,22.52,22.52,0,0,1,291.5,281m0-1A23.5,23.5,0,1,0,315,303.5,23.5,23.5,0,0,0,291.5,280Z",transform:"translate(-176 -194.88)"}}),i("path",{staticClass:"arrow",attrs:{d:"M399,257.5a135.18,135.18,0,0,0-41.16-42.17c-22.7-14.74-49.38-21.92-75.15-20.2a108.71,108.71,0,0,0-65.16,27c-19.91,17.5-33.76,41.79-41.18,72.19a13.52,13.52,0,0,0,9.92,16.32,13.66,13.66,0,0,0,3.21.38,13.51,13.51,0,0,0,13.11-10.3c6.07-24.92,17.1-44.54,32.76-58.31a82,82,0,0,1,49.13-20.32c20-1.33,40.81,4.32,58.65,15.9A108.07,108.07,0,0,1,374,268.51l-30,13.2,72.43,40.36,8.6-76Z",transform:"translate(-176 -194.88)"}})])])]):t._e(),t._v(" "),i("span",{staticClass:"control control-twitter",attrs:{title:"share"}},[i("i",{staticClass:"icon icon-twitter",on:{click:function(e){return e.stopPropagation(),t.shareTwitter(e)}}})])])])]):t._e()])};n._withStripped=!0;const s={name:"Quote",bb:()=>({collection:m.collect.quotes}),unreactive:()=>({skipEnabled:m.conditionalFeatures.featureEnabled("skip-qt"),intervalId:null,hover:!1}),data:()=>({activeQuoteId:"",quoteVisible:m.models.customization.get("quoteVisible"),skippingQuote:!1}),computed:{activeQuote(){return this.collection.get(this.activeQuoteId)},quoteUuid(){return this.activeQuote.get("_id")},isCustom(){return this.activeQuote.get("is_custom")},body(){return this.activeQuote.get("body")},source(){return this.activeQuote.get("source")},detailUrl(){return this.activeQuote.get("detail_url")},twitter(){return this.activeQuote.get("twitter")},twitterIntentUrl(){const t=this.activeQuote.get("twitterIntentUrl");if(t)return t;let e=this.twitter?`"${this.body}" -@${this.twitter}`:`"${this.body}" -${this.source}`;return"https://twitter.com/intent/tweet?text="+encodeURIComponent(e)+"&via=momentumdash&related=momentumdash,levibucsis,jaywaterman"},isFavorite(){return this.activeQuote.get("is_favorite")}},created(){m.models.quoteManager.firstFetch(),this.setQuote(),this.$e.listenTo(m,"newDay",this.setQuote),this.$e.listenTo(m.models.customization,"change:quoteVisible",this.changeVisibility),this.$e.listenTo(m.collect.quotes,"reset add change sync refresh",this.setQuote),this.$e.listenTo(m,"appsReady",this.wrapQuote)},mounted(){m.widgetManager.appReady("quote")},destroyed(){this.$e.stopListening(m,"newDay",this.setQuote),this.$e.stopListening(m.models.customization,"change:quoteVisible",this.changeVisibility),this.$e.stopListening(m.collect.quotes,"reset add change sync refresh",this.setQuote),this.$e.stopListening(m,"appsReady",this.wrapQuote)},methods:{changeVisibility(){this.quoteVisible=m.models.customization.get("quoteVisible")},handleClick(){this.detailUrl&&this.detailUrl.length>0&&window.open(this.detailUrl,"_blank")},onHover(){this.hover=!0,setTimeout((()=>{this.hover&&m.usage.recordHover(this.activeQuote._id,m.usage.types.QUOTE)}),500)},shareTwitter(){let t=screen.width/2-272.5,e=screen.height/2-210;window.open(this.twitterIntentUrl,"share","left="+t+",top="+e+",width=545,height=420,resizeable=0")},toggleFavorite(){let t=this.activeQuote.is_favorite=!this.isFavorite;m.models.quoteManager.toggleFavorite(t).catch((()=>this.activeQuote.is_favorite=!t)),m.sendEvent("Quote",t?"Favourite":"Un-favourite")},skipQuote(){this.skippingQuote||(this.skippingQuote=!0,setTimeout((()=>{m.models.quoteManager.skipItem().finally((()=>{this.skippingQuote=!1})),m.sendEvent("Quote","Skip")}),450))},wrapQuote(){let t=this.$refs["body-text"];if(!t)return;const e=getComputedStyle(t).lineHeight;let i=parseInt(e.substring(0,e.length-2)),o=t.offsetHeight,n=!1;if(o>1.75*i&&o<2.75*i){let e,s,a="",r=this.body.split(" ");for(e=0;e<r.length;e++)s=r[e],a+=s,!n&&a.length>(this.body.length+5)/2?(a+="<br>",n=!0):e!==r.length-1&&(a+=" ");t.innerHTML="&ldquo;"+a+"&rdquo;",o=t.offsetHeight,o>2.75*i&&(t.innerHTML="&ldquo;"+this.body+"&rdquo;")}},setQuote(){this.activeQuoteId=this.getActiveQuote()},getActiveQuote(){let t;return this.collection.length>0&&(t=this.collection.getActiveItem()),t?(m.trigger("quote:downloaded"),t.id):(m.trigger("sync:download","quote"),"")}}};i(3850);var a=(0,i(1900).Z)(s,n,[],!1,null,"f7053094",null);a.options.__file="source/addins-vue/quote/Quote.vue";const r=a.exports,l=Backbone.Model.extend({defaults:{_id:"",body:"",source:"",is_custom:!1,detail_url:"",twitter:""},idAttribute:"forDate"}),c=m.models.FeedManager.extend({initialize:function(){m.models.FeedManager.prototype.initialize.call(this,m.models.Quote,"quote")}}),u=Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("momentum-quote"),model:m.models.Quote,getActiveItem:function(){if(this.length>0){let t=m.utils.getDateString();return this.get(t)}}});m.models.Quote=l,m.collect.Quotes=u,m.collect.quotes=new u,m.models.QuoteManager=c,m.models.quoteManager=new c;const d=document.createElement("div");document.querySelector(".region.bottom").appendChild(d),new o.Z({render:t=>t(r)}).$mount(d)},4525:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var o=i(1238),n=i(1018),s=i(7366),a=i.n(s),r=i(2096);o.Z.use(n.Z,{name:"unreactive"}),o.Z.use(a()),o.Z.prototype.$e=r.Z,new o.Z({bb:()=>({conditionalFeatures:m.conditionalFeatures,teamInfo:m.models.teamInfo})}),o.Z.mixin({computed:{$plus:()=>m.conditionalFeatures.featureEnabled("plus"),$team:()=>m.conditionalFeatures.featureEnabled("team"),$admin:()=>m.models.teamInfo&&m.models.teamInfo.get("team")&&m.models.teamInfo.get("team").userIsAdmin}});const l=o.Z},8521:(t,e,i)=>{(t.exports=i(7788)(!1)).push([t.id,"\n.quote[data-v-f7053094] { height: 58px; width: auto; margin: 0 auto; padding-bottom: 2px; display: flex; align-items: center; text-align: center; box-sizing: content-box;\n}\n.body[data-v-f7053094], .below[data-v-f7053094] { margin: 0; color: rgba(255,255,255,0.9); line-height: 1.2; transition: all 0.35s var(--a-curve);\n}\n.body[data-v-f7053094] { display: block; position: relative; font-size: 1.125rem; user-select: text;\n}\n.quote:hover .body[data-v-f7053094], .quote.pseudo-hover .body[data-v-f7053094] { transform: translateY(-50%);\n}\n.below[data-v-f7053094] { position: absolute; bottom: -27px; left: 50%; font-size: 0.875rem; opacity: 0; transform: translate(-50%, -22px); white-space: nowrap;\n}\n.quote:hover .below[data-v-f7053094], .quote.pseudo-hover .below[data-v-f7053094] { opacity: 1; transform: translate(-50%, 0);\n}\n.source[data-v-f7053094] { margin-right: 4px; opacity: 0.75;\n}\n.below .control[data-v-f7053094] { height: 16px; width: 16px; padding: 6px 2px; position: relative; display: inline-block; cursor: pointer; line-height: 100%; opacity: 0.75; vertical-align: middle;\n}\n.below .control[data-v-f7053094]:hover, .below .control.active[data-v-f7053094] { opacity: 1;\n}\n.below .icon[data-v-f7053094] { height: 16px; position: absolute; top: 4px; left: 3px;\n}\n.below .icon-twitter[data-v-f7053094] { top: 4px; left: 2px; font-size: 17px;\n}\n.below .control-skip[data-v-f7053094] { width: 18px; margin-left: -2px;\n}\n.below .icon-skip[data-v-f7053094] { height: 14px; width: 18px;\n}\n.scale-enter[data-v-f7053094], .scale-leave-active[data-v-f7053094] { transform: scale(0); opacity: 0;\n}\n.scale-enter-active[data-v-f7053094], .scale-leave-active[data-v-f7053094] { transition: transform 0.25s cubic-bezier(.51,.23,.6,1.9), opacity 0.25s ease;\n}\n\n",""])},3850:(t,e,i)=>{var o=i(8521);"string"==typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals),(0,i(1372).Z)("3b09422e",o,!1,{ssrId:!0})},1372:(t,e,i)=>{"use strict";function o(t,e){for(var i=[],o={},n=0;n<e.length;n++){var s=e[n],a=s[0],r={id:t+":"+n,css:s[1],media:s[2],sourceMap:s[3]};o[a]?o[a].parts.push(r):i.push(o[a]={id:a,parts:[r]})}return i}i.d(e,{Z:()=>m});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},a=n&&(document.head||document.getElementsByTagName("head")[0]),r=null,l=0,c=!1,u=function(){},d=null,p="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,i,n){c=i,d=n||{};var a=o(t,e);return v(a),function(e){for(var i=[],n=0;n<a.length;n++){var r=a[n];(l=s[r.id]).refs--,i.push(l)}for(e?v(a=o(t,e)):a=[],n=0;n<i.length;n++){var l;if(0===(l=i[n]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete s[l.id]}}}}function v(t){for(var e=0;e<t.length;e++){var i=t[e],o=s[i.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](i.parts[n]);for(;n<i.parts.length;n++)o.parts.push(g(i.parts[n]));o.parts.length>i.parts.length&&(o.parts.length=i.parts.length)}else{var a=[];for(n=0;n<i.parts.length;n++)a.push(g(i.parts[n]));s[i.id]={id:i.id,refs:1,parts:a}}}}function f(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function g(t){var e,i,o=document.querySelector("style["+p+'~="'+t.id+'"]');if(o){if(c)return u;o.parentNode.removeChild(o)}if(h){var n=l++;o=r||(r=f()),e=w.bind(null,o,n,!1),i=w.bind(null,o,n,!0)}else o=f(),e=x.bind(null,o),i=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else i()}}var b,y=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,i,o){var n=i?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var s=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function x(t,e){var i=e.css,o=e.media,n=e.sourceMap;if(o&&t.setAttribute("media",o),d.ssrId&&t.setAttribute(p,e.id),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}}}]);
//# sourceMappingURL=483.js.map