function setBackground(e){var t=document.getElementById("tasks-layout");t.style.background="url("+e+") no-repeat center fixed",t.style["background-size"]="cover"}function setInnerHTMLLater(e,t){window.addEventListener("load",function(){var s=document.getElementById(e);s.innerHTML=t,s.style.display="block"})}function setCssClasses(e,t){document.getElementById(e).className=t}function setCss(e,t){var s=document.createElement("style");s.type="text/css",s.innerHTML=t,document.getElementById(e).appendChild(s)}function setTheme(e){var t="0.0.1.3";if(e){if(e.custom_content&&setInnerHTMLLater("tasks-extension-header",e.custom_content),e.callout_move_task&&window.addEventListener("load",function(){var e=document.getElementById("empty-tasks-message");e&&(e.className+=" placeholder-callout-move-task",e.innerHTML="Which one task would you be most satisfied to make progress on? Drag it here.")}),e.filename&&localStorage[e.filename]==t)console.log("Setting theme from file"),setBackground("images/backgrounds/"+e.filename);else if(e.filename){var s="images/backgrounds/"+e.filename,o=new XMLHttpRequest;o.open("HEAD",s,!1);try{o.send(),"404"==o.status?setBackground(e.url):(localStorage[e.filename]=t,setBackground(s))}catch(n){console.log("Setting theme from URL"),setBackground(e.url)}}else e.url&&setBackground(e.url);e.body_css_class&&setCssClasses("tasks-layout",e.body_css_class),e.css&&setCss("tasks-layout",e.css)}}try{if(localStorage.theme){console.log("Cached theme found");var theme=JSON.parse(localStorage.theme);console.time("setTheme"),setTheme(theme),console.timeEnd("setTheme")}else console.log("No cached theme found"),setTheme({filename:"mountain.jpg",body_css_class:"has-light-bg-theme"})}catch(e){console.log("setTheme failed"),console.log(e.message),console.log(e.stack),localStorage.theme&&console.log(localStorage.theme)}