/**
 * Blur Copyright (c) 2008-2015 by Abine, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information
 * of Abine, Inc. ("Confidential Information"), subject
 * to the Non-Disclosure Agreement and/or License Agreement you entered
 * into with Abine. You shall use such Confidential Information only
 * in accordance with the terms of said Agreement(s). Abine makes
 * no representations or warranties about the suitability of the
 * software. The software is provided with ABSOLUTELY NO WARRANTY
 * and Abine will NOT BE LIABLE for ANY DAMAGES resulting from
 * the use of the software.
 *
 * Contact license@getabine.com with any license-related questions.
 *
 * https://www.abine.com
 * @license
 *
 */var ABINE_DNT=ABINE_DNT||{};ABINE_DNT.tag="dntme",ABINE_DNT.version="3.0.0.43",ABINE_DNT.browser="chrome",ABINE_DNT.require=require,ABINE_DNT.define=define,ABINE_DNT.define("documentcloud/underscore",function(){return _}),ABINE_DNT.define("abine/dnt/core",["documentcloud/underscore"],function(i){var e={on:function(e,t,n){var r=this._callbacks||(this._callbacks={}),i=r[e]||(r[e]={}),a=i.tail||(i.tail=i.next={});return a.callback=t,a.context=n,i.tail=a.next={},this},off:function(e,t){var n,r,i;if(e){if(n=this._callbacks)if(t){if(r=n[e])for(;(i=r)&&(r=r.next);)if(r.callback===t){i.next=r.next,r.context=r.callback=null;break}}else n[e]={}}else this._callbacks=null;return this},trigger:function(e){var t,n,r,i,a,o=["all",e];if(!(n=this._callbacks))return this;for(;a=o.pop();)if(t=n[a])for(i="all"==a?arguments:Array.prototype.slice.call(arguments,1);t=t.next;)if(r=t.callback)try{r.apply(t.context||this,i)}catch(s){}return this},once:function(e,t,n){function r(){return i.off(e,r),t.apply(this,arguments)}var i=this;return this.on(e,r,n)}},a=function(){},r=function(e,t,n){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i.extend(r,e),a.prototype=e.prototype,r.prototype=new a,t&&i.extend(r.prototype,t),n&&i.extend(r,n),(r.prototype.constructor=r).__super__=e.prototype,r},t=function(e,t){var n=r(this,e,t);return n.extend=this.extend,n},n=function n(){this.initialize.apply(this,arguments)};return i.extend(n.prototype,e,{initialize:function o(){}}),n.extend=t,{BaseClass:n}}),ABINE_DNT.define("abine/dnt/config",["documentcloud/underscore","abine/dnt/core"],function(e,t){function r(e,t,n,r){function i(){f.trigger("update-content-policy-settings"),d()}var a=c.trackerSettings;if(a[n]||(a[n]={}),"*"==e&&"*"==n){for(var o in a[e])a[e][o]=t;for(var s in a)"*"!=s&&delete a[s];return c.blockedSites={},c.defaultBlocked=t,void i()}if("*"==e){a[n]={};var u=c.disabledSites,l=c.blockedSites;return t?(n in u&&delete u[n],c.defaultBlocked?delete a[n]["*"]:a[n]["*"]=1):(!r&&c.defaultBlocked?u[n]=1:n in u&&delete u[n],a[n]["*"]=0),t?!r&&c.defaultBlocked||(l[n]=1):n in l&&delete l[n],void i()}if("*"==n)for(var s in a)"*"!=s&&e in a[s]&&delete a[s][e];a[n][e]=t?1:0,i()}var c={defaultBlocked:!0,useSuggestions:!0,placeHolderButtonEnabled:!1,trackerSettings:{},disabledSites:{},blockedSites:{},gpc:{"*":!1}},d=e.debounce(function(){f.trigger("config-changed",c)},3e3),f=new(t.BaseClass.extend({load:function(e){for(var t in e)c[t]=e[t]},saveChanges:d,allowTracker:function(e,t,n){r(e,!1,t,n)},blockTracker:function(e,t,n){r(e,!0,t,n)},getDefaultBlocking:function(){return c.defaultBlocked},setDefaultBlocking:function(e){r("*",e,"*")},getSuggestionsEnabled:function(){return c.useSuggestions},setSuggestionsEnabled:function(e){c.useSuggestions=e,d(),this.trigger("update-content-policy-suggestions")},getDisableSites:function(){return c.disabledSites},getBlockedSites:function(){return c.blockedSites},getTrackerSettings:function(){return c.trackerSettings},setPlaceHolderButtonEnabled:function(e){c.placeHolderButtonEnabled=!!e,d()},isPlaceHolderButtonEnabled:function(){return c.placeHolderButtonEnabled},setGPC:function(e,t){c.gpc[e]=t,d()},getGPC:function(e){return e in c.gpc?c.gpc[e]:c.gpc["*"]},getTrackerDefaults:function(){var e=c.trackerSettings;e["*"]||(e["*"]={});var t={};for(var n in e["*"])t[n]=e["*"][n];return t},setTrackerDefaults:function(e){var t,n=c.trackerSettings;for(var r in n["*"]||(n["*"]={}),e)r in n["*"]||(n["*"][r]=c.defaultBlocked,t=!0);return t&&d(),t}}));return f}),ABINE_DNT.define("abine/dnt/utils",[],function(){function s(){for(var e=!1,t=0;t<r.length;t++){try{e=r[t](),r=[r[t]]}catch(n){continue}break}return e}function e(e,t,n,r){var i=s();if(i){r=void 0===r||r;var a=n?"POST":"GET";i.open(a,e,r),i.setRequestHeader("Cache-Control","no-cache"),i.setRequestHeader("Pragma","no-cache"),i.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT"),n&&(i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("Content-length",n.length));var o=function(){4==i.readyState&&(200==i.status||304==i.status||0==i.status?t(i.responseText,i):t(null,i))};r&&(i.onreadystatechange=o),i.setRequestHeader("X-DNT-Version",ABINE_DNT.version+" "+ABINE_DNT.browser+" "+ABINE_DNT.tag),i.send(n),r||o()}}var t={},n=Object.prototype.toString,i=function(e){return null==e?String(e):t[n.call(e)]||"object"},a=function(e){return null!=e&&e==e.window},f=function(e){return"[object Function]"===n.call(e)},g=Array.isArray||function(e){return"array"===i(e)},p=function(e){if(!e||"object"!==i(e)||e.nodeType||a(e))return!1;var t,n=Object.prototype.hasOwnProperty;try{if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(t in e);return t===undefined||n.call(e,t)},h=function(e,t){var n,r,i,a,o,s,u=e||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof u&&(d=u,u=t||{},l=2),"object"==typeof u||f(u)||(u={}),c===l&&(u=this,--l);l<c;l++)if(null!=(n=arguments[l]))for(r in n)i=u[r],u!==(a=n[r])&&(d&&a&&(p(a)||(o=g(a)))?(o?(o=!1,s=i&&g(i)?i:[]):s=i&&p(i)?i:{},u[r]=h(d,s,a)):a!==undefined&&(u[r]=a));return u},r=[function(){return framework.extension.getRequest()},function(){return new XMLHttpRequest}];return{extend:h,isArray:g,sendRequest:e}}),ABINE_DNT.define("abine/dnt/rules",["abine/dnt/utils"],function(e){var t;return e.sendRequest("/api-rules.json",function(e){t=JSON.parse(e)},null,!1),t}),ABINE_DNT.define("abine/dnt/tabData",["documentcloud/underscore","abine/dnt/core","abine/dnt/config"],function(u,e,a){function d(e,t){var n=0;for(var r in t.trackers)"length"!=r&&2==t.trackers[r]&&(r in t.blocked||n++);e.trigger("update-count",t.tabId,t.disabledHere,t.trackers.length,t.blocked.length,n,t.host,t.reloadRequired),e.trigger("update-count-new",{tabId:t.tabId,blocking:t.blocking,disabled:t.disabledHere,total:t.trackers.length,blocked:t.blocked.length,suggested:n,host:t.host,reloadRequired:t.reloadRequired})}function l(e,t,n){return t in e.changes?(n=e.changes[t],delete e.changes[t],e.changes.length--,0==e.changes.length&&(e.settingsChanged=!1)):(e.changes[t]=n,e.changes.length++,e.settingsChanged=!0),n}function n(e){return{tabId:e,domains:{length:0},trackers:{length:0},blocked:{length:0},disabledHere:!1,reloadRequired:!0,host:null,url:null,changes:{length:0},settingsChanged:!1,custom:{},contentScriptNotReady:!0,blockedRequests:[]}}var c={};return new(e.BaseClass.extend({get:function(e,t){if(!e)return{};if(!(e in c)){if(t)return!1;c[e]=n(e)}return c[e]},update:function(e,t,n,r,i,a,o){var s=this.get(i),u=!1;if(!t||t in s.domains||(s.domains[t]=1,s.domains.length++),!e)return!1;var l=s.trackers;if(e in l||(l[e]=r?2:1,l.length++,u=!0),n){var c=s.blocked;e in c||(c[e]=1,c.length++),s.contentScriptNotReady&&s.blockedRequests.push({name:e,url:a,type:o})}return u&&d(this,s),u},markUnmarkChanges:function(e,t){var n=this.get(e,!1);n&&l(n,t)},setCustomData:function(e,t,n){var r=this.get(e,!1);r&&(null===n?t in r.custom&&delete r.custom[t]:r.custom[t]=n)},getCustomData:function(e,t){var n=this.get(e,!1);if(n)return t in n.custom?n.custom[t]:null},updateTrackerState:function(e,t,n){for(var r in c){var i=c[r];if("*"==t||i.host==t){var a=!1;if("*"==t&&"*"==e)l(i,"global");else if("*"==e){a=!0,i.blocking=n,i.disabledHere=!n;var o=l(i,"site",u.clone(i.blocked));if("site"in i.changes)if(i.disabledHere)for(var s in i.toggledOff=!0,i.blocked)"length"!=s&&(i.blocked.length--,delete i.blocked[s]);else for(var s in i.toggledOff=!1,i.trackers)s in i.blocked||(i.blocked.length++,i.blocked[s]=1);else i.blocked=o}else if(e in i.trackers)if(n){if(e in i.blocked)continue;i.blocked.length++,i.blocked[e]=1,l(i,e),a=!0}else{if(!(e in i.blocked))continue;i.blocked.length--,delete i.blocked[e],l(i,e),a=!0}a&&d(this,i)}}},clear:function(e){e&&e in c&&delete c[e]},triggerUpdateIcon:function(e){e in c?d(this,this.get(e)):d(this,n(e))},getTabIds:function(e){var t=[];for(var n in c){var r=c[n];"*"!=e&&r.host!=e||t.push(n)}return t},start:function(e,t,n,r){this.clear(e);var i=this.get(e);return i.host=t,i.url=n,i.blocking=a.getDefaultBlocking()||i.host in a.getBlockedSites(),i.disabledHere=i.host in a.getDisableSites()||r&&!(i.host in a.getBlockedSites()),i.disabledHere&&(i.blocking=!1),i.suggestedAllow=r,delete i.reloadRequired,d(this,i),i}}))}),ABINE_DNT.define("abine/dnt/baseContentPolicy",["abine/dnt/core","abine/dnt/config","abine/dnt/rules","abine/dnt/utils"],function(e,a,t,s){function n(){var e=f.Companies;c={};for(var t=0;t<e.length;t++)for(var n=e[t].rules,r=0;r<n.length;r++)for(var i in p)"undefined"!=typeof n[r][i]&&(c[n[r].name]=n[r].name);return a.setTrackerDefaults(c)}function r(){for(var e={script:1,iframe:1,image:1},t=f.Companies,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.rules.length;i++)for(var a in e){var o=r.rules[i];a in o&&(o[a].pattern.source||(o[a].pattern=new RegExp(o[a].pattern,"i")),o[a].allowDomain&&(o[a].allowDomain.source||(o[a].allowDomain=new RegExp(o[a].allowDomain,"i"))))}f.HostingSites&&!f.HostingSites.source&&(f.HostingSites=new RegExp(f.HostingSites,"i")),f.CompoundRealms&&!f.CompoundRealms.source&&(f.CompoundRealms=new RegExp(f.CompoundRealms,"i")),f.CombinerScripts?f.CombinerScripts.source||(f.CombinerScripts=new RegExp(f.CombinerScripts,"i")):f.CombinerScripts=/(\.js[^\/](.*\.js)+)/i,d={},f.AllowedSites=f.AllowedSites||[];for(n=0;n<f.AllowedSites.length;n++)d[f.AllowedSites[n]]=1}function i(e,t){return!!(e&&e.Version&&(t||e.Version>f.Version))&&(l=null,h.Rules=f=e,r(),!0)}function o(e){if(!e)return null;var t=e.split(".");if(t.length<2||e.match(/^[0-9\.\:]+$/))return e;var n=t.pop(),r=t.pop(),i=r+"."+n;(f&&f.CompoundRealms.test(i)&&0<t.length&&(n=i,i=(r=t.pop())+"."+n),f&&f.HostingSites.test(i)&&0<t.length)&&(i=t.pop()+"."+i);return i}function u(e){var t=new RegExp("^http(?:s)?://([^/]+)","im"),n=e.match(t);return n&&1<n.length?n[1].toString():e}var l,c,d={},f=t,g="var abNoOp=function(i,a){return (a&&a.length?a[0]:null)||true;},abSC=function(n,v){document.cookie=n+'='+v+';path=/;expires='+(new Date((new Date()).getTime()+(30000*60*60*24))).toGMTString();},abGC=function(n){return document.cookie.indexOf(n+'=')!=-1;},abAddNoOpMethods=function(o,m){m=m.split(',');for(var i=0;i<m.length;i++){if(m[i].match(/^#/)){o['get'+m[i].substr(1)]=o['set'+m[i].substr(1)]=abNoOp;}else{o[m[i]]=abNoOp;}}};";g+="var abClickEvent=function(n){if(n.click){n.click();}else{var e=n.ownerDocument.createEvent('MouseEvents');e.initMouseEvent('click',true, true, n.ownerDocument.defaultView, 1,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(e);}};";var p={script:1,iframe:1,image:1},h=e.BaseClass.extend({initialize:function(e){this.setupContentPolicy(),this.setRules(e),this.loadRules(),n(),this.updateSettings()},getDomain:function(e){return o(u(e))},getHostname:function(e){return u(e)},getRulesVersion:function(){return f.Version},setRules:function(e,t){if(e){var n=i(e,t);return n?this.reloadRules():r(),n}return r(),!1},reloadRules:function(){this.loadRules(),n()&&this.updateSettings()},getTrackerNames:function(){return c},isHostAllowedBySuggestion:function(e){return e in d},setupContentPolicy:function(){},loadRules:function(){},updateSettings:function(){},updateSuggestions:function(){},getRulesJson:function(){if(!l){for(var e=s.extend(!0,{},f),t=e.Companies,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.rules.length;i++)for(var a in p){var o=r.rules[i];a in o&&(o[a].pattern&&o[a].pattern.source&&(o[a].pattern=o[a].pattern.source),o[a].allowDomain&&o[a].allowDomain.source&&(o[a].allowDomain=o[a].allowDomain.source))}e.HostingSites&&e.HostingSites.source&&(e.HostingSites=e.HostingSites.source),e.CompoundRealms&&e.CompoundRealms.source&&(e.CompoundRealms=e.CompoundRealms.source),e.CombinerScripts?e.CombinerScripts.source&&(e.CombinerScripts=e.CombinerScripts.source):e.CombinerScripts=/(\.js[^\/](.*\.js)+)/i.source,delete e.Notifications,l=JSON.stringify(e)}return l},updateGPCHeaders:function(e){if(a.getGPC()){for(var t=0;t<e.requestHeaders.length;++t)if("Sec-GPC"===e.requestHeaders[t].name.toLowerCase())return;e.requestHeaders.push({name:"Sec-GPC",value:"1"})}}});return h.Rules=f,h.abNoOp=g,h}),ABINE_DNT.define("abine/dnt/browserContentPolicy",["abine/dnt/config","abine/dnt/baseContentPolicy","abine/dnt/tabData"],function(p,h,b){function m(e,t,n){var r=!1,i=p.getTrackerSettings();return i["*"]&&1==i["*"][t]&&!n&&(r=!0),!i[e]||1!=i[e][t]&&1!=i[e]["*"]||(r=!0),!i[e]||0!=i[e][t]&&0!=i[e]["*"]||(r=!1),r}function v(e,t,n){for(var r=l[n];;){if(t in r){for(var i=r[t],a=0;a<i.length;a++){var o=i[a];if(o.pattern.source||(o.pattern=new RegExp(o.pattern,"i")),e.match(o.pattern))return o}if("*"==t)return null}var s=t.indexOf(".");t=-1==s?"*":t.substr(s+1)}}function n(t){var e={cancel:!1};if(-1==t.tabId)return e;var n=t.url;if("main_frame"==t.type){var r=this.getDomain(t.url),i=p.getSuggestionsEnabled()&&r in S;return b.start(t.tabId,r,t.url,i),e}if(!b.get(t.tabId,!0))return chrome.tabs.get(t.tabId,_.bind(function(e){var t=this.getDomain(e.url),n=p.getSuggestionsEnabled()&&t in S;b.start(e.id,t,e.url,n)},this)),e;var a=b.get(t.tabId);if(a.disabledHere)return e;if(!(r=a.host))return e;var o=this.getDomain(n);if(!o)return e;var s=null,u={sub_frame:"iframe",script:"script",xmlhttprequest:"object",image:"image",object:"object",other:"object"};"script"==t.type&&n.match(h.Rules.CombinerScripts)||(s=v(n,this.getHostname(n),u[t.type]));var l=o!=r;if(s){if(s.allowFirstParty&&!l)return e;var c,d=s.name,f=!1;p.getSuggestionsEnabled()&&s.allowDomain&&(s.allowDomain.source||(s.allowDomain=new RegExp(s.allowDomain,"i")),r.match(s.allowDomain)&&(f=!0)),(c=m(r,d,f))&&(e="image"==t.type?{redirectUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="}:"sub_frame"==t.type?{redirectUrl:"about:blank"}:"script"==t.type&&s.stub?{redirectUrl:"data:application/javascript;base64,"+k(s.stub,n)}:{cancel:!0}),e.tracker=d;var g=this;setTimeout(function(){var e=b.update(d,o,c,f,t.tabId,n,t.type);g.trigger("tracker-found",t.tabId,s.name,c,e,f,n,s.name in y)},0)}return e.third_party=l,e}function k(e,t){var i="{}";return-1!=t.indexOf("?")&&(i={},t.replace(/([^?=&]+)(=([^&]*))?/g,function(e,t,n,r){i[t]=unescape(r)}),i=JSON.stringify(i)),e="var abPrm="+i+";"+h.abNoOp+e,window.btoa(e)}var l={script:{"*":[]},image:{"*":[]},iframe:{"*":[]},object:{"*":[]},subobject:{"*":[]}},y={},S={};return h.extend({setupContentPolicy:function(){var t=this;chrome.webRequest.onBeforeRequest.addListener(function(){var e=n.apply(t,arguments);return delete e.third_party,e},{urls:["http://*/*","https://*/*"],types:["main_frame","sub_frame","script","xmlhttprequest","image","object","other"]},["blocking"]),this.initializeGpc()},initializeGpc:function(){if(!this.webNavigationInitialized){var n=this;try{chrome.webNavigation.onCommitted.addListener(function(e){var t=b.get(e.tabId);n.injectDOMSignal(e.tabId,t.host)}),chrome.webRequest.onBeforeSendHeaders.addListener(function(e){var t=b.get(e.tabId);return p.getGPC(t.host)&&e.requestHeaders.push({name:"Sec-GPC",value:"1"}),{requestHeaders:e.requestHeaders}},{urls:["http://*/*","https://*/*"]},["blocking","requestHeaders"]),n.webNavigationInitialized=!0}catch(e){n.webNavigationInitialized=!1}}},injectDOMSignal:function(e,t){var n="var scriptElement = document.createElement('script');";n+='scriptElement.textContent = "'+("try{Object.defineProperty(navigator, 'globalPrivacyControl', {value: "+(p.getGPC(t)?"true":"false")+", configurable: false, writable: false, enumerable: true});}catch(e){}")+'";',n+="document.documentElement.prepend(scriptElement);",chrome.tabs.executeScript(e,{code:n,allFrames:!0,matchAboutBlank:!0,runAt:"document_start"})},loadRules:function(){var e=h.Rules,t=e.Companies;l={script:{"*":[]},image:{"*":[]},iframe:{"*":[]},object:{"*":[]},subobject:{"*":[]}};for(var n=0;n<t.length;n++)for(var r=t[n].rules,i=0;i<r.length;i++)for(var a in l)if("undefined"!=typeof r[i][a]){var o="string"==typeof r[i][a]?r[i][r[i][a]]:r[i][a];o.name=r[i].name,o.category=r[i].category,o.allowFirstParty=r[i].allowFirstParty;for(var s=o.domains.split("|"),u=0;u<s.length;u++)s[u]in l[a]||(l[a][s[u]]=[]),l[a][s[u]].push(o)}if(y={},e.BadTrackers)for(i=0;i<e.BadTrackers.length;i++)y[e.BadTrackers[i]]=!0;if(S={},e.AllowedSites)for(i=0;i<e.AllowedSites.length;i++)S[e.AllowedSites[i]]=1}})}),ABINE_DNT.define("abine/dnt/social-button-proxy",["documentcloud/underscore","abine/dnt/core"],function(e,t){var n=new(t.BaseClass.extend({blocked:function(e,t,n,r,i,a){chrome.tabs.sendRequest(parseInt(e),{message:"tracker-blocked",trackerName:t,newTracker:r,url:i,image:a})},allow:function(e,t){chrome.tabs.sendRequest(parseInt(e),{message:"tracker-allowed",trackerName:t})}}));return chrome.extension.onRequest.addListener(function(e,t){"allow-tracker"==e.message&&n.trigger(e.message,{tabId:t.tab.id,trackerName:e.trackerName})}),n}),ABINE_DNT.define("abine/dnt/api",["abine/dnt/core","abine/dnt/browserContentPolicy","abine/dnt/config","abine/dnt/tabData","abine/dnt/utils","abine/dnt/social-button-proxy","documentcloud/underscore"],function(e,n,l,s,t,c,r){var i,d={"Facebook Connect":null,"Google +1":null,"Twitter Badge":null,LinkedIn:null},a=e.BaseClass.extend({initialize:function(e,t){l.load(e),i=new n(t),l.on("update-content-policy-settings",function(){i.updateSettings()}),l.on("update-content-policy-suggestions",function(){i.updateSuggestions()}),l.on("config-changed",function(){var e=Array.prototype.slice.call(arguments);e.unshift("config-changed"),this.trigger.apply(this,e)},this),s.on("update-count",function(){var e=Array.prototype.slice.call(arguments);e.unshift("update-count"),this.trigger.apply(this,e)},this),s.on("update-count-new",function(){var e=Array.prototype.slice.call(arguments);e.unshift("update-count-new"),this.trigger.apply(this,e)},this),i.on("tracker-found",function(e,t,n,r,i,a,o,s){var u=Array.prototype.slice.call(arguments);u.unshift("tracker-found"),this.trigger.apply(this,u),l.isPlaceHolderButtonEnabled()&&n&&t in d&&c.blocked(e,t,n,r,a,d[t],s)},this),i.on("add-script-stub",function(e,t,n,r){var i=Array.prototype.slice.call(arguments);i.unshift("add-script-stub"),this.trigger.apply(this,i)},this),i.on("trigger-script-loaded",function(e,t){var n=Array.prototype.slice.call(arguments);n.unshift("trigger-script-loaded"),this.trigger.apply(this,n)},this),i.on("request-blocked",function(e,t){var n=Array.prototype.slice.call(arguments);n.unshift("request-blocked"),this.trigger.apply(this,n)},this),c.on("allow-tracker",r.bind(function(e){var t=e.tabId,n=e.trackerName,r=s.get(t,!0);if(!r)return null;this.allow(n,r.host)},this))},updateRules:function(e,r){t.sendRequest(e,function(e){if(e&&-1!=e.indexOf('"Companies":'))try{var t=JSON.parse(e);return void(i.setRules(t)?r("updated",e):r("no-change",e))}catch(n){}r("failed",e)})},setupRules:function(e,t){if(e&&-1!=e.indexOf('"Companies":'))try{var n=JSON.parse(e);return void i.setRules(n,!0)}catch(r){}t("failed",e)},getTrackerDefaults:function(){return l.getTrackerDefaults()},setGPC:function(e,t){i.initializeGpc(),l.setGPC(e,t)},getGPC:function(e){return l.getGPC(e)},allow:function(t,e){if(!t||!e)throw"Tracker name and host are required";if("*"==t&&"*"==e)throw"Tracker name and host cannot be '*'";if(l.allowTracker(t,e,"*"==t&&i.isHostAllowedBySuggestion(e)),s.updateTrackerState(t,e,!1),l.isPlaceHolderButtonEnabled()&&t in d){var n=s.getTabIds(e);r.each(n,function(e){c.allow(e,t)})}},block:function(e,t){if(!e||!t)throw"Tracker name and host are required";if("*"==e&&"*"==t)throw"Tracker name and host cannot be '*'";l.blockTracker(e,t,"*"==e&&i.isHostAllowedBySuggestion(t)),s.updateTrackerState(e,t,!0)},getDefaultBlocking:function(){return l.getDefaultBlocking()},setDefaultBlocking:function(e){l.setDefaultBlocking(e),s.updateTrackerState("*","*",!0)},getSuggestionsEnabled:function(){return l.getSuggestionsEnabled()},setSuggestionsEnabled:function(e){l.setSuggestionsEnabled(e),i.updateSuggestions()},addListener:function(){this.on.apply(this,arguments)},removeListener:function(){this.off.apply(this,arguments)},enablePlaceHolderButton:function(){l.setPlaceHolderButtonEnabled(!0)},disablePlaceHolderButton:function(){l.setPlaceHolderButtonEnabled(!1)},setPlaceHolderButton:function(e,t,n,r,i){null===t?delete d[e]:(i=i||"*",d[e]||(d[e]={}),d[e][i]={image:t,width:n,height:r})},getTabData:function(e){var t=s.get(e,!0);if(!t)return null;var n={host:t.host,url:t.url,blocking:t.blocking,disabled:t.disabledHere,suggestedAllow:t.suggestedAllow,settingsChanged:t.settingsChanged,reloadRequired:t.reloadRequired,toggledOff:!!t.toggledOff,custom:[]};for(var r in t.custom)n.custom.push({name:r,value:t.custom[r]});var i=[];for(var r in t.trackers)"length"!=r&&i.push({name:r,suggested:2==t.trackers[r],blocked:r in t.blocked});n.trackers=i;var a=[];for(var o in t.domains)"length"!=o&&a.push(o);return n.domains=a,n},getRulesVersion:function(){return i.getRulesVersion()},triggerUpdateIcon:function(e){s.triggerUpdateIcon(e)},markSettingsChanged:function(e,t){s.markUnmarkChanges(e,t)},setCustomTabData:function(e,t,n){s.setCustomData(e,t,n)},getCustomTabData:function(e,t){return s.getCustomData(e,t)},getDomain:function(e){return i.getDomain(e)}});return ABINE_DNT.API=a});