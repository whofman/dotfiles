/**
 * Blur Copyright (c) 2008-2015 by Abine, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information
 * of Abine, Inc. ("Confidential Information"), subject
 * to the Non-Disclosure Agreement and/or License Agreement you entered
 * into with Abine. You shall use such Confidential Information only
 * in accordance with the terms of said Agreement(s). Abine makes
 * no representations or warranties about the suitability of the
 * software. The software is provided with ABSOLUTELY NO WARRANTY
 * and Abine will NOT BE LIABLE for ANY DAMAGES resulting from
 * the use of the software.
 *
 * Contact license@getabine.com with any license-related questions.
 *
 * https://www.abine.com
 * @license
 *
 */ABINE_DNTME.define("abine/views/panelBase",["documentcloud/underscore","jquery","duckbone/core","abine/timer","models","abine/window","abine/contentMessenger","abine/timer","abine/config","abine/proxies","cryptojs"],function(n,s,e,t,l,a,i,o,r,c,d){var h=300,p={};return e.View.extend({opacity:"1.0",initialize:function(){n.extend(this.events,{"mousedown #disableLink":"disableLink","mousedown .tracker-count":"showToolbarPanel","mousedown .autoFillWith":"search"}),e.View.prototype.initialize.apply(this,arguments)},adjustHeader:function(){},render:function(){return this.model&&(this.renderTemplate(),o.setTimeout(n.bind(function(){this.adjustHeader(),this.trigger("render");var e=s("input, textarea",this.el);e.placeholder&&e.placeholder(),o.setTimeout(n.bind(this.maskPasswords,this),100)},this),0)),this},autoResize:function(e){o.setTimeout(n.bind(function(){this.trigger("resize",e)},this),0)},triggerRender:function(){o.setTimeout(n.bind(function(){this.trigger("render")},this),0)},disableLink:function(e){e.preventDefault(),e.stopPropagation(),this.options.contentManager.disablePanelOnThisSite(),this.closePanel(e)},autoFillWith:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.options.contentManager.showAutoFillWith(this.options),this.closePanel(e,!0),this.trigger("remove")},search:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.options.contentManager.showSearch(this.options),this.closePanel(e,!0),this.trigger("remove")},ignoreBlur:function(e){if(void 0===e)return!!this._ignoreBlur;!1===e?(this._ignoreBlur=!1,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!1)):(this._ignoreBlur=!0,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!0))},focusField:function(){this.options.contentManager.focusField(this.options.strategyId,this.options.fieldId)},plainFocusField:function(){this.options.contentManager.plainFocusField(this.options.strategyId,this.options.fieldId)},focusFieldWithIntent:function(e){this.options.contentManager.focusFieldWithIntent(this.options.strategyId,this.options.fieldId,e)},addFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","addFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},removeFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","removeFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},bindHeaderClose:function(){s(this.el).bind("mousedown",n.bind(function(e){this.ignoreBlur(!0);var t=s(e.target),n=t.data("highlight")||t.parent().data("highlight"),a="settings";if(n&&(-1<["email","phone","card"].indexOf(n)&&(a="masking"),-1<["account","password"].indexOf(n)&&(a="accounts"),-1<["address","real_card"].indexOf(n)&&(a="wallet")),t.hasClass("close-link")||t.parent().hasClass("close-link"))this.dataTypePanel()&&(this.options.contentManager.showFieldIconsOnThisSite(),this.options.contentManager.showFieldIcon(this.options.strategyId,this.options.fieldId,!0)),this.closePanel();else if(t.hasClass("b-link")||t.parent().hasClass("b-link"))"login_helper_panel"==this.options.el.className?c.webapp.openPage("/#/accounts/"+this.options.domain):this.options.contentManager.showToolbarPanel({page:"dashboard",highlight:n}),this.closePanel();else if(t.hasClass("logo-link")||t.parent().hasClass("logo-link"))c.webapp.openDashboard(),this.closePanel();else if(t.hasClass("close-icon")||t.hasClass("close-dd"))this.closePanel();else if(t.hasClass("settings-link")||t.parent().hasClass("settings-link")){var i=t.data("add-setting")||t.parent().data("add-setting");if(i)(new l.Preference).save({key:i,value:"true"}),this.options.contentManager.messenger.trigger("broadcast:preference:reload");this.options.contentManager.showToolbarPanel({page:a,highlight:n}),this.closePanel()}},this))},showToolbarPanel:function(e){return e.preventDefault(),this.options.contentManager.showToolbarPanel({page:"trackers"}),this.closePanel(),!1},dataTypePanel:function(){return!this.ignoreExplicitClose},bindKeyEvents:function(){this.options.contentManager.bindKeyEvents(this.options.strategyId,this.options.fieldId,this.doNotCloseOnTyping,n.bind(this.handleKeyEvents,this))},handleKeyEvents:function(e){"enter"==e?(this.selectedField||0===this.selectedField)&&this.trigger("enter"+this.selectedField,{selectedField:this.selectedField,preventDefault:function(){}},this.selectedField):"down"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField+1:0):"up"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField-1:-1):"close"==e&&(this.closePanel(),delete this.selectedField)},bindPanelTextInput:function(e){s(e).unbind("focus.dntme").bind("focus.dntme",n.bind(function(){t.clearTimeout(this._blurTimer),this.ignoreBlur(!0),t.setTimeout(n.bind(function(){this.ignoreBlur(!1)},this),500)},this)),s(e).unbind("blur.dntme").bind("blur.dntme",n.bind(function(){this._blurTimer=t.setTimeout(n.bind(function(){this.ignoreBlur()?this.focusField():(this.cleanupPanel(),this.closingOnBlur(),this.closePanel()),t.setTimeout(n.bind(function(){this.ignoreBlur(!1)},this),500)},this),500)},this))},bindBaseEvents:function(){this.bindHeaderClose(),this.bindKeyEvents()},cleanupPanel:function(){},closingOnBlur:function(){},getKeyOptions:function(){return n(s(this.el).find(".mmKeyOption")).filter(function(e){return s(e).hasClass("mmKeyOption")&&"none"!==s(e).css("display")&&s(e).is("a")&&!s(e).hasClass("disabled")})},highlightOption:function(e){var t=this.getKeyOptions();e=(e+t.length)%t.length,(this.selectedField||0===this.selectedField)&&s(t[this.selectedField].children[0]).removeClass("hover"),s(t[e].children[0]).addClass("hover"),this.selectedField=e},applyFadingStyle:function(){},fadeIn:function(){},fadeOut:function(){try{this.el.style.opacity="1.0",this.el.style.marginTop="0px"}catch(e){}t.setTimeout(n.bind(function(){try{this.el.style.opacity="0.0",this.el.style.marginTop="50px"}catch(e){}},this),100);try{delete this.contentManager._currentPanelField}catch(e){}t.setTimeout(n.bind(function(){this.trigger("remove")},this),100+h)},getContentMessenger:function(){return this.messenger=this.messenger||ABINE_DNTME.contentMessenger||this.options&&this.options.contentManager&&this.options.contentManager.messenger||new i.ContentMessenger,this.messenger},triggerPanelFillEvent:function(e){this.getContentMessenger(),e.field.origin=e.origin;var t={disposableGUID:e.field.disposableGUID,name:e.field.name,origin:e.field.origin,dataType:e.field.dataType,accountId:e.accountId,value:e.field.value};e.field.element.setAttribute("abineOrigin",e.field.origin),s(this.options.formEl).attr("maskMeFilled","yes"),this.options.contentManager.triggerPanelFillEvent(this.options.formEl,t)},isVisible:function(e){try{return s(e).is(":visible")&&"hidden"!=s(e).css("visibility")}catch(t){}return!0},fillFields:function(e,t,n){this.options.contentManager.fillFields(e,this.options.strategyId,this.options.fieldId,t,n)},sendFeedbackEmail:function(e){this.options.contentManager.sendFeedbackEmail(this.options.strategyId,this.options.fieldId,e)},hidePanel:function(){this.trigger("hide")},removePanel:function(){this.trigger("remove")},closePanel:function(e){e&&e.preventDefault(),this.fadeOut(),t.setTimeout(n.bind(function(){this.options.contentManager.removePanels(this.options.contentManager.frameId||ABINE_DNTME.context,this.options.strategyId,this.options.fieldId)},this),0)},clickedInsideOfTarget:function(e,t){for(;t.parentNode&&t.id!=e;)t=t.parentNode;return t.id==e},performActions:function(t){this.getContentMessenger(),n.each(this.panelSectionActionMap[t.currentTarget.id],n.bind(function(e){if(e.target_id&&""!=e.target_id&&this.clickedInsideOfTarget(e.target_id,t.target)||e.target_id&&""==e.target_id||!e.target_id)if("open_registration_page"==e.name)this.getStarted(t,{id:this.options.dynamicPanel.id,action:e.name});else if("open_page"==e.name)c.securityManager.openPage(e.extra);else if("trigger_click"==e.name)this.messenger.send("update:panelActivity:click",{panelId:this.options.dynamicPanel.id});else if("trigger_conversion"==e.name)this.messenger.send("update:panelActivity:conversion",{panelId:this.options.dynamicPanel.id});else if("dismiss_panel"==e.name)-1!=this.options.dynamicPanel.field_type.indexOf("new-feature-added")||this.closePanel();else if("change_show_rate"==e.name)c.panelsModule.changePanelShowRate({panelId:this.options.dynamicPanel.id,extra:e.extra});else if("change_preference"==e.name){(new l.Preference).save(JSON.parse(e.extra))}else"no_action"==e.name||("open_plans_page"==e.name?this.openPlansPage("panelID"+this.options.dynamicPanel.id,null,{id:this.options.dynamicPanel.id,action:e.name}):"open_activate_cards_page"==e.name?this.openActivateCardsPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_snowman_page"==e.name?this.openSnowmanPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_new_premium_feature_added_page"==e.name&&this.openNewFeatureAdded(null,{id:this.options.dynamicPanel.id,action:e.name}))},this))},maskPasswords:function(){"Firefox"==ABINE_DNTME.config.browser&&(this.$("input[type=text]").each(function(e,t){t.setAttribute("autocomplete","off")}),this.$("input[type=password]").each(function(e,r){function t(){clearTimeout(n),n=setTimeout(function(){for(var e=c.value,t=0,n=[],a=[],i=r.value,s=r.selectionStart,l=r.selectionEnd,o=0;o<i.length;o++)9679==i.charCodeAt(o)?n.push(e[t++]):n.push(i.charAt(o)),a.push(String.fromCharCode(9679));c.value=n.join(""),r.value=a.join(""),r.selectionStart=s,r.selectionEnd=l},10)}var n,c=r.ownerDocument.createElement("input");c.type="hidden",c.name=r.name,c.id=r.id,r.id=r.id+"X",r.name=r.name+"X",r.type="text",r.setAttribute("autocomplete","off"),r.parentNode.appendChild(c),r.addEventListener("keypress",t),r.addEventListener("keyup",t),r.addEventListener("paste",t)}))},setupDynamicPanel:function(){this.panelPositions=this.options.dynamicPanel.panel_positions,this.panelSections=[],this.panelSectionActionMap={},n.each(this.panelPositions,n.bind(function(e){var t=e.panel_section;t.has_action=0<e.panel_actions.length,this.panelSectionActionMap[t.id]=[],n.each(e.panel_actions,n.bind(function(e){this.panelSectionActionMap[t.id].push(e)},this)),this.panelSections.push(t)},this))},closeHeader:function(e){e&&e.preventDefault(),this.ignoreExplicitClose||this.options.contentManager.closePanelFromHeader(this.options.strategyId,this.options.fieldId),this.closePanel(e)},getStarted:function(e,t){c.webapp.openHome(t),this.closePanel()},openTour:function(){c.webapp.openTour(),this.closePanel()},openSetupEmailPage:function(){c.webapp.openEmails(),this.closePanel()},openSettings:function(e){return e&&e.preventDefault(),c.webapp.openSettings(),this.closePanel(),!1},openLoginPage:function(e){e&&"string"!=typeof e&&(e.preventDefault&&e.preventDefault(),e=null),c.webapp.openLogin(e),this.closePanel()},openDnt2UpgradePage:function(){c.webapp.openDnt2UpgradePage(),this.closePanel()},openPasswordSetupPage:function(e){c.webapp.openPasswordSetup(e),this.closePanel()},openActivateCardsPage:function(e,t){c.webapp.openCards(t),this.closePanel()},openPlansPage:function(e,t,n){c.webapp.openPremium(e,null,n)},openSnowmanPage:function(e,t){c.webapp.openSnowman(null,t)},openNewFeatureAdded:function(e,t){c.webapp.openNewFeatureAdded(null,t)},replaceWithFavicons:function(e){function t(){n.each(function(e,t){t.style.objectFit="contain",t.setAttribute("align","center"),t.setAttribute("vertical-align","middle"),t.src=i})}var n=this.$(".replace-fav-icon");if(0<n.length){var a=d.SHA1("abine"+e),i="https://s3.amazonaws.com/abine-favicons/"+a+".png";this._imgCache=this._imgCache||{};var s=this._imgCache;if(s[a])return void t(i);var l=new Image;l.onload=function(){s[a]=!0,t(l.src)},l.src=i}},updatePanelActivity:function(e,t,n,a){if(this.options.contentManager&&this.options.contentManager.messenger&&this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:t}),a){var i="aggregate:"+t;p[i]=p[i]||{},p[i][n]=p[i][n]||{};var s=p[i][n];if(s[e])return;if("closed"==e&&(s.masked||s.disclosed))return;for(var l in s)"impression"!=l&&(s[l]=0,this.options.contentManager.messenger.send("update:panelActivity:"+l,{panelId:i,revert:!0}));s[e]=1,this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:i})}}})}),ABINE_DNTME.define("abine/password",[],function(){function s(e,t){return void 0===t&&(t=e,e=0),Math.floor(Math.random()*(t-e)+e)}function i(e,t,n){for(var a=1;a<=n;a++){var i=s(0,e.length);e=[e.slice(0,i),t[s(t.length)],e.slice(i)].join("")}return e}var l=12,o=1,r=2,c=4,d=8,h="0123456789",p="`~!@#$%^&*()_-+={}|[]\\:\";'<>?,/",m=".-_",u="ABCDEFGHJKLMNOPQRSTUVWXYZ",g=u.toLowerCase();return{generateRandomPassword:function(e,t,n){e=e||g,(!t||t<1)&&(t=l);var a="";return(n=n||o|r|c)&o&&(a=i(a,u,s(2,3))),n&c&&(a=i(a,p,s(1,3))),n&d&&(a=i(a,m,1)),n&r&&(a=i(a,h,s(1,3))),a.length<t&&(a=i(a,e,t-a.length)),a},generateSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,o|r|d)},generateNoSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,o|r)},generateNoDigitsPassword:function(){return this.generateRandomPassword(null,null,o)},generateNewOptionsPassword:function(e,t,n){var a=o;return t&&(a|=r),n&&(a|=c),this.generateRandomPassword(null,e,a)}}}),ABINE_DNTME.define("abine/proxyContentManager",["documentcloud/underscore","jquery","abine/core","abine/contentMessenger","abine/timer","models","abine/config","abine/intl","abine/proxies","abine/views/unlockPanel","abine/views/notificationPanel","abine/assets","abine/views/dntmePanel","abine/views/emailHelperPanel","abine/views/phoneHelperPanel","abine/views/changePasswordHelperPanel","abine/views/changePasswordLoginHelperPanel","abine/views/loginHelperPanel","abine/views/paymentHelperPanel","abine/views/passwordHelperPanel","abine/views/addressHelperPanel","abine/views/autoFillWithPanel","abine/views/mapFormPanel","abine/views/mapReviewPanel","abine/views/autoFillPanel","abine/views/identityHelperPanel","abine/views/searchPanel"],function(r,c,e,t,a,i,n,s,l,o,d,h,p,m,u,g,f,b,_,v,E,N,y,A,D,k,T){return{ContentManager:e.BaseClass.extend({initialize:function(e){this.href=e.href,this.host=this.href.replace(/http[s]?:\/\//i,"").replace(/\/.*/i,""),this.domain=e.domain||(this.href?abineUrl.getTLD(this.href):null),this.document=e.document||document,this.frameId=e.frameId||ABINE_DNTME.context,this.messenger=e.contentMessenger||ABINE_DNTME.contentMessenger,l.connect(this.messenger,r.bind(function(e){this.tabId=e},this)),this._locked=e.locked,ABINE_DNTME.contentuser={hasRegEmail:r.bind(function(){return!!this.preferences&&this.preferences.hasPref("regEmail")},this)},this.messenger.on("broadcast:preference:reload",r.bind(function(){this.loadUserPreferences()},this)),this.messenger.on("closePanel",r.bind(function(){this.closeCurrentPanel(),this.removePanels(this.frameId)},this))},reloadPreference:function(){this.loadUserPreferences(),this.messenger.sendToCS("CS","reloadPreference")},isLocked:function(){return this._locked},locked:function(){this._locked=!0,this.trigger("locked")},unlocked:function(){this._locked=!1,this.trigger("unlocked"),this.preferences&&this.preferences.fetchAll()},getValue:function(e,t,n,a){var i=e+":"+Math.random(),s=this;this.messenger.on(i,function l(e){s.messenger.off(i,l),a(e)}),this.messenger.sendToCS("CS","getValue",{name:e,responseKey:i,strategyId:t,fieldId:n,frameId:this.frameId})},show:function(e){this.closeCurrentPanel(),this.loadUserPreferences(r.bind(function(){this.closeCurrentPanel(),"blur"==e.name?this.showToolbarPanel(e.payload):"email"==e.name?this._currentPanelView=this.showEmailPanel(e.payload):"password"==e.name?this._currentPanelView=this.showPasswordPanel(e.payload):"change-password"==e.name?this._currentPanelView=this.showChangePasswordPanel(e.payload):"login"==e.name?this._currentPanelView=this.showLoginPanel(e.payload):"change-password-login"==e.name?this._currentPanelView=this.showChangePasswordLoginPanel(e.payload):"address"==e.name?this._currentPanelView=this.showAddressPanel(e.payload):"payment"==e.name?this._currentPanelView=this.showPaymentPanel(e.payload):"phone"==e.name?this._currentPanelView=this.showPhonePanel(e.payload):"identity"==e.name?this._currentPanelView=this.showIdentityPanel(e.payload):"unlock"==e.name?this._currentPanelView=this.showUnlockPanel(e.payload):"notification"==e.name?(this._notificationPanelShown=!0,this._showNotification(e.payload.notification,e.payload.timeout)):"autoFill"==e.name?this.showAutoFillPanel(e.payload):"search"==e.name?this._currentPanelView=this._showSearch(e.payload):"autoFillWith"==e.name?this._currentPanelView=this._showAutoFillWith(e.payload):"mapForm"==e.name&&this._showMapForm(e.payload)},this))},loadUserPreferences:function(n){function e(){var e=this.preferences.getPref("userTag")||this.preferences.getPref("dynamicTag");e&&ABINE_DNTME.config.updateTag(e);var t=this.preferences.getPref("dnt_language");t?s.setupLocale(t,function(){n.call(this)}):n.call(this)}n=n||function(){},this.preferences=new i.PreferenceCollection({}),this.preferences.bind("sync:success",r.once(r.bind(function(){e.call(this)},this))),this.preferences.bind("sync:error",r.bind(function(){e.call(this)},this)),this.preferences.fetchAll()},disablePanelOnThisPage:function(){this.messenger.sendToCS("CS","disablePanelOnThisPage")},disablePanelOnThisSite:function(){this.messenger.sendToCS("CS","disablePanelOnThisSite")},showFieldIconsOnThisSite:function(){this.messenger.sendToCS("CS","showFieldIconsOnThisSite")},closeToolbarPanel:function(){if(this.lastDNTMePanel){try{this.lastDNTMePanel.remove()}catch(e){}this.lastDNTMePanel=null}},closeCurrentPanel:function(){if(this._currentPanelView){try{this.messenger.sendToCS("CS","cleanUpAfterPanelClosed",{strategyId:this._currentPanelView.options.strategyId,fieldId:this._currentPanelView.options.fieldId}),this._currentPanelView.remove()}catch(e){}this._currentPanelView=null}},closePanelFromHeader:function(e,t){this.messenger.sendToCS("CS","closePanelFromHeader",{strategyId:e,fieldId:t})},showToolbarPanel:function(n){this._currentPanelView||this._notificationPanelShown?this.messenger.sendToCS("CS","showToolbarPanel",n):(this.closeToolbarPanel(),l.panelsModule.getDNTMePanel(n.tabId,r.bind(function(e){var t=this.lastDNTMePanel=new p({messenger:this.messenger,contentManager:this,domain:this.domain,dynamicPanel:e,compact:n.compact,cardAlertPanel:n.cardAlertPanel,showBlurGrowl:n.showBlurGrowl,page:n.page,subPage:n.subPage,highlight:n.highlight,timeout:n.timeout,switchTo:n.switchTo,notNow:this.preferences.getPref("notNowClicked"),intrusiveSplit:this.preferences.getSplitTest("intrusive01"),registered:this.preferences.getPref("hasRegistered"),premium:this.preferences.getPref("entitledToPhone"),footerCampaign:this.preferences.getPref("footerCampaign"),el:c("<div></div>",this.document).get(0)});t.messenger=this.messenger,t.bind("remove",function(){this.lastDNTMePanel=null;try{t.remove()}catch(e){}this.removePanels(this.frameId)},this),t.bind("render resize",function(){this.autoResizePanels("abineDNTMePanel",0,10)},this),t.bind("show-settings",function(e){delete n.compact,n.page="settings",e&&(n.highlight=e.highlight,n.subPage=e.subPage,n.switchTo=e.switchTo),this.showToolbarPanel(n)},this),t.bind("show-trackers",function(){delete n.compact,n.page="trackers",this.showToolbarPanel(n)},this),t.bind("show-dashboard",function(){delete n.compact,n.page="dashboard",this.showToolbarPanel(n)},this),t.bind("show-medals",function(){n.cardAlertPanel||(n.page="medals",this.showToolbarPanel(n))},this),t.bind("show-report",function(){n.cardAlertPanel||(n.page="weekly-report",this.showToolbarPanel(n))},this),t.bind("max-height",function(){this.autoResizePanels("abineDNTMePanel",0,1e3)},this),c("body",this.document).append(t.el),this.messenger.on("closeToolbarPanel",function(){t.remove()})},this)))},hookPanelEvents:function(t){t.bind("remove",function(){try{t.remove()}catch(e){}this.removePanels(this.frameId)},this),t.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this)},showEmailPanel:function(e){var t=new m({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasPassword:e.hasPassword,oldValue:e.oldValue,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showPasswordPanel:function(e){var t=new v({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.dynamicPanelsJSON,iconClick:e.iconClick,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showChangePasswordPanel:function(e){var t=new g({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,iconClick:e.iconClick,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showLoginPanel:function(e){var t=new b({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,fillAccount:e.fillAccount,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showChangePasswordLoginPanel:function(e){var t=new f({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,domain:e.domain||this.domain,iconClick:e.iconClick,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showAddressPanel:function(e){var t=new E({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showIdentityPanel:function(e){var t=new k({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,allDataTypes:e.allDataTypes,domain:e.domain||this.domain,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showPhonePanel:function(e){var t=new u({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,contentManager:this,entitledToPhone:this.preferences.isPrefTrue("entitledToPhone"),hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showPaymentPanel:function(e){var t=this.preferences,n=new _({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,authToken:!this.isLocked(),amount:e.amount,beginnerMode:t.getPref("beginnerMode"),hasRegistered:t.isPrefTrue("hasRegistered"),entitledToPayments:t.isPrefTrue("entitledToPayments"),hasEnabledPayments:t.isPrefTrue("hasEnabledPayments"),hasAuthorizedCoinbase:t.isPrefTrue("hasAuthorizedCoinbase"),entitledToPhone:t.isPrefTrue("entitledToPhone"),cardDisabled:e.maskedCardsDisabled,realCardDisabled:e.autoFillCardsDisabled,dynamicPanel:e.dynamicPanel,fromContextMenu:e.fromContextMenu,domain:e.domain||this.domain,params:e.params,el:c("<div></div>",this.document).get(0),paymentsr2:e.paymentsr2,iconClick:e.iconClick});return this.hookPanelEvents(n),c("body",this.document).append(n.el),n},showUnlockPanel:function(e){var t=new o({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,preferences:this.preferences,el:c("<div></div>",this.document).get(0)});return this.hookPanelEvents(t),c("body",this.document).append(t.el),t},showNotification:function(e){this.messenger.send("background:show:notification:forward",e)},_showNotification:function(e,t){var n=d.NotificationPanelView,a={notification:e,contentManager:this,amount:e.amount,domain:this.domain,messenger:this.messenger,el:c("<div></div>",this.document).get(0),timeout:t};if("card"==e.type){var i=1;this.preferences.hasPref("countCardNotifications")&&(i=parseInt(this.preferences.getPref("countCardNotifications"))+1),this.preferences.setPref("countCardNotifications",i),n=d.CardNotificationPanelView,i<=5&&(e.detailed=!0)}else if("checkout_growl"==e.type)n=d.CheckoutGrowlNotificationPanelView;else if("real_card"==e.type)n=d.RealCardNotificationPanelView;else if("save_card"==e.type)n=d.SaveCardNotificationPanelView;else if("email"==e.type||"post-register"==e.type){var s=1;this.preferences.hasPref("countEmailNotifications")&&(s=parseInt(this.preferences.getPref("countEmailNotifications"))+1),this.preferences.setPref("countEmailNotifications",s),s<=1&&(n=d.DetailedEmailNotificationPanelView,e.neverFade=!0)}else"login"==e.type?n=d.SaveLoginNotificationPanelView:"failed_login"==e.type?n=d.FailedLoginNotificationPanelView:"password_with_no_login"==e.type?n=d.PasswordWithNoLoginNotificationPanelView:"change_password"==e.type?n=d.ChangePasswordNotificationPanelView:"growl"==e.type?n=d.GrowlNotificationPanelView:"expire_warning"==e.type?n=d.ExpireWarningNotificationPanelView:"expire_notify"==e.type&&(n=d.ExpireNotifyNotificationPanelView);var l=new n(a),o=r.bind(function(){this.messenger.off("background:saveForm:notification:close",o);try{l.remove()}catch(e){}this.removePanels(this.frameId)},this);this.messenger.on("background:saveForm:notification:close",o),l.bind("remove",function(){this.messenger.off("background:saveForm:notification:close",o),l.remove(),this.messenger.sendToCS("CS","closeNotification",this.frameId)},this),l.bind("render resize",function(e){e=e||{extraWidth:null,extraHeight:null},this.autoResizePanels("abineNotificationPanel",e.extraWidth,e.extraHeight)},this),c("body",this.document).append(l.el)},fillFields:function(e,t,n,a,i){var s={type:e,strategyId:t,fieldId:n,values:a,origin:i};this.messenger.sendToCS("CS","fillFields",s)},sendFeedbackEmail:function(e,t,n){this.messenger.sendToCS("CS","sendFeedbackEmail",{strategyId:e,fieldId:t,data:n})},autoResizePanels:function(e,t,n){var a=this.document.body.offsetHeight;"Safari"==ABINE_DNTME.config.browser&&(a=c(this.document.body.firstChild).height()+4),this.messenger.sendToCS("CS","autoResizePanels",{className:e,extraWidth:t,extraHeight:n,documentHeight:a})},removePanels:function(e,t,n){this.messenger&&(n&&this.messenger.off("keyEvent-"+n),this.messenger.sendToCS("CS","removePanels",{id:e,strategyId:t,fieldId:n}),-1==e.indexOf("doNotRemove")&&a.setTimeout(r.bind(this.destroy,this),0))},bindKeyEvents:function(e,t,n,a){this.messenger.sendToCS("CS","bindKeyEvents",{frameId:this.frameId,strategyId:e,fieldId:t,doNotCloseOnTyping:n}),this.messenger.off("keyEvent-"+t),this.messenger.on("keyEvent-"+t,a)},ignoreBlur:function(e,t,n){this.messenger&&this.messenger.sendToCS("CS","ignoreBlur",{strategyId:e,fieldId:t,value:n})},showFieldIcon:function(e,t,n){this.messenger&&this.messenger.sendToCS("CS","showFieldIcon",{strategyId:e,fieldId:t,value:n})},focusField:function(e,t){this.messenger&&this.messenger.sendToCS("CS","focusField",{strategyId:e,fieldId:t})},plainFocusField:function(e,t){this.messenger&&this.messenger.sendToCS("CS","plainFocusField",{strategyId:e,fieldId:t})},focusFieldWithIntent:function(e,t,n){this.messenger&&this.messenger.sendToCS("CS","focusFieldWithIntent",{strategyId:e,fieldId:t,params:n,frameId:this.frameId})},showAutoFillWith:function(e){this.messenger&&this.messenger.sendToCS("CS","showAutoFillWith",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,category:e.category})},showSearch:function(e){this.messenger&&this.messenger.sendToCS("CS","showSearch",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,category:e.category})},_showAutoFillWith:function(e){var t=new N({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,panelDisabledHere:e.panelDisabledHere,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:c("<div></div>",this.document).get(0)});return t.bind("remove",function(){try{t.remove()}catch(e){}this.removePanels(this.frameId)},this),t.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),c("body",this.document).append(t.el),t},_showSearch:function(e){var t=new T({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,panelDisabledHere:e.panelDisabledHere,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:c("<div></div>",this.document).get(0)});return t.bind("remove",function(){try{t.remove()}catch(e){}this.removePanels(this.frameId)},this),t.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),c("body",this.document).append(t.el),this.messenger.on("closeToolbarPanel",function(){t.remove()}),t},showMapForm:function(e){this.messenger.sendToCS("CS","showMapForm",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,mapFirstForm:e.mapFirstForm,forms:e.forms,formId:e.formId})},_showMapForm:function(e){var t=new(e.reviewMode?A:y)({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,forms:e.forms,formId:e.formId,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:c("<div></div>",this.document).get(0)});t.bind("remove",function(){try{t.remove()}catch(e){}this.removePanels(this.frameId)},this),t.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),c("body",this.document).append(t.el),this.messenger.on("closeToolbarPanel",function(){t.remove()})},showAutoFillPanel:function(e){var t=new D({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,href:this.href,el:c("<div></div>",this.document).get(0)});t.bind("remove",function(){try{t.remove()}catch(e){}this.removePanels(this.frameId)},this),t.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),c("body",this.document).append(t.el)},destroy:function(){try{l.disconnect()}catch(e){}this.messenger&&(this.messenger.off(),this.messenger.destroy(),delete this.messenger);try{safari.extension.dispatchMessage("RemoveFrame",{sender:ABINE_DNTME.context})}catch(e){}}})}}),function(r){"use strict";var i=function(e,t){this.init("tooltip",e,t)};i.prototype={constructor:i,init:function(e,t,n){var a,i,s,l,o;for(this.type=e,this.$element=r(t),this.options=this.getOptions(n),this.enabled=!0,o=(s=this.options.trigger.split(" ")).length;o--;)"click"==(l=s[o])?this.$element.on("click."+this.type,this.options.selector,r.proxy(this.toggle,this)):"manual"!=l&&(a="hover"==l?"mouseenter":"focus",i="hover"==l?"mouseleave":"blur",this.$element.on(a+"."+this.type,this.options.selector,r.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,r.proxy(this.leave,this)));this.options.selector?this._options=r.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return(e=r.extend({},r.fn[this.type].defaults,this.$element.data(),e)
).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var t,n=r.fn[this.type].defaults,a={};if(this._options&&r.each(this._options,function(e,t){n[e]!=t&&(a[e]=t)},this),!(t=r(e.currentTarget)[this.type](a).data(this.type)).options.delay||!t.options.delay.show)return t.show();clearTimeout(this.timeout),t.hoverState="in",this.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)},leave:function(e){var t=r(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!t.options.delay||!t.options.delay.hide)return t.hide();t.hoverState="out",this.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)},show:function(){var e,t,n,a,i,s,l=r.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(l),l.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),i="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),t=this.getPosition(),n=e[0].offsetWidth,a=e[0].offsetHeight,i){case"bottom":s={top:t.top+t.height,left:t.left+t.width/2-n/2};break;case"top":s={top:t.top-a,left:t.left+t.width/2-n/2};break;case"left":s={top:t.top+t.height/2-a/2,left:t.left-n};break;case"right":s={top:t.top+t.height/2-a/2,left:t.left+t.width}}this.applyPlacement(s,i),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,a,i,s,l=this.tip(),o=l[0].offsetWidth,r=l[0].offsetHeight;l.offset(e).addClass(t).addClass("in"),n=l[0].offsetWidth,a=l[0].offsetHeight,"top"==t&&a!=r&&(e.top=e.top+r-a,s=!0),"bottom"==t||"top"==t?(i=0,e.left<0&&(i=-2*e.left,e.left=0,l.offset(e),n=l[0].offsetWidth,a=l[0].offsetHeight),this.replaceArrow(i-o+n,n,"left")):this.replaceArrow(a-r,a,"top"),s&&l.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){t.off(r.support.transition.end).detach()},500);t.one(r.support.transition.end,function(){clearTimeout(e),t.detach()})}var t=this.tip(),n=r.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return t.removeClass("in"),r.support.transition&&this.$tip.hasClass("fade")?e():t.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return r.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},tip:function(){return this.$tip=this.$tip||r(this.options.template,this.$element)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var t=e?r(e.currentTarget)[this.type](this._options).data(this.type):this;t.tip().hasClass("in")?t.hide():t.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=r.fn.tooltip;r.fn.tooltip=function(a){return this.each(function(){var e=r(this),t=e.data("tooltip"),n="object"==typeof a&&a;t||e.data("tooltip",t=new i(this,n)),"string"==typeof a&&t[a]()})},r.fn.tooltip.Constructor=i,r.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},r.fn.tooltip.noConflict=function(){return r.fn.tooltip=e,this}}(window.jQuery),ABINE_DNTME.CompiledTemplates=ABINE_DNTME.CompiledTemplates||{},ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.auto_fill_with",e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n<a href="#" class="mmKeyOption autoFillWith">\n  <div class="element">\n    <span class="auto-fill-with" style="position:relative;text-align:left;font-size: 9pt;color:#3497db;"> &nbsp;&nbsp;\n      ',n=s.mapper||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapper"),a=s["if"],(m=u.program(2,l,t)).hash={},(m.fn=m).inverse=u.program(4,o,t),((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n    </span>\n  </div>\n</a>\n"}function l(e){var t,n,a="";return a+="\n        ",t="mm_auto_fill_with_map_form",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+"\n      "}function o(e,t){var n,a,i="";return i+="\n        ",n="mm_dntme_correct_something",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?a.call(e,n,{hash:{}}):a===b?f.call(e,"intl",n,{hash:{}}):a,i+=_(n)+"\n        ",n=s.tabData||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),a=s["if"],(m=u.program(5,r,t)).hash={},(m.fn=m).inverse=u.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n      "}function r(e,t){var n,a,i="";return i+="\n            ",n=null===(n=s.tabData||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"hasOneTracker"),a=s["if"],(m=u.program(6,c,t)).hash={},(m.fn=m).inverse=u.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n            ",n=null===(n=s.tabData||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"hasTwoOrMoreTrackers"),a=s["if"],(m=u.program(8,d,t)).hash={},(m.fn=m).inverse=u.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n        "}function c(e){var t,n,a="";return a+='\n              <span class="tracker-count">&#x2714; ',t="mm_email_helper_one_tracker_blocked",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+"</span>\n            "}function d(e){var t,n,a,i="";return i+='\n              <span class="tracker-count">&#x2714; ',t=null===(t=null===(t=s.tabData||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),n="mm_email_helper_trackers_blocked",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?a.call(e,n,t,{hash:{}}):a===b?f.call(e,"intl",n,t,{hash:{}}):a,i+=_(t)+"</span>\n            "}s=s||e.helpers;var h,p,m,u=this,g="function",f=s.helperMissing,b=void 0,_=this.escapeExpression;return h=s.showMapper||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showMapper"),p=s["if"],(m=u.program(1,i,a)).hash={},(m.fn=m).inverse=u.noop,(h=p.call(t,h,m))||0===h?h:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.biometric_auth",e.template(function(e,t,s,n,a){function i(e){var t,n,a="";return a+='\n          <img src="',t="/pages/images/faceid.png",t=typeof(n=(f=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"assetUrl",t,{hash:{}}):n,a+=A(t)+'" class="loading" style="width: 55px;"/><br/>Face ID\n      '}function l(e,t){var n,a,i="";return i+="\n          ",n=(f=s.touch_id)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),a=s["if"],(b=v.program(4,o,t)).hash={},(b.fn=b).inverse=v.program(6,r,t),((n=a.call(e,n,b))||0===n)&&(i+=n),i+="\n      "}function o(e){var t,n,a="";return a+='\n              <img src="',t="/pages/images/fingerprint.png",t=typeof(n=(f=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"assetUrl",t,{hash:{}}):n,a+=A(t)+'" class="loading" style="width: 55px;"/><br/>Touch ID\n          '}function r(e){var t,n,a="";return a+='\n              <img src="',t="/pages/images/phoneid.png",t=typeof(n=(f=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"assetUrl",t,{hash:{}}):n,a+=A(t)+'" class="loading" style="width: 55px;"/><br/>\n          '}function c(e){var t,n,a="";return a+="\n          ",t="mm_payment_helper_request_faceid_auth",t=typeof(n=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+"\n      "}function d(e,t){var n,a,i="";return i+="\n          ",n=(f=s.touch_id)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),a=s["if"],(b=v.program(11,h,t)).hash={},(b.fn=b).inverse=v.program(13,p,t),((n=a.call(e,n,b))||0===n)&&(i+=n),i+="\n      "}function h(e){var t,n,a="";return a+="\n              ",t="mm_payment_helper_request_biometric_auth",t=typeof(n=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+"\n          "}function p(e){var t,n,a="";return a+="\n              ",t="mm_payment_helper_request_phoneid_auth",t=typeof(n=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+"\n          "}function m(e){var t,n,a="";return a+='\n    <div class="control-group" style="margin-left:50px;">\n      <span >',t="mm_payment_helper_master_pass_auth_message",t=typeof(n=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+'</span><br/>\n      <div id="masterPassErr" style="display:none;color:red;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",t=typeof(n=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+'"/>\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_payment_helper_master_pass_auth_verify",t=typeof(n=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n      </span>\n    </div>\n  '}s=s||e.helpers;var u,g,f,b,_="",v=this,E="function",N=s.helperMissing,y=void 0,A=this.escapeExpression,D=s.blockHelperMissing;return _+='<!-- Step 3.1 Biometric auth -->\n<div class="clearfix" id="biometricAuth" style="display:none;">\n  <div style="float:left;width:80px;margin:10px;text-align:center;font-size: 8pt;padding-top: 10px;border-right: 1px solid #eee;">\n      ',u=(f=s.face_id)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"face_id"),g=s["if"],(b=v.program(1,i,a)).hash={},(b.fn=b).inverse=v.program(3,l,a),((u=g.call(t,u,b))||0===u)&&(_+=u),_+='\n  </div>\n  <div style="float:left;margin: 10px;width:230px;text-align: center;">\n    <span id="biometricInfo" class="loading-dots" style="font-size: 12pt;display: inline-block;margin: 5px;">\n      ',u=(f=s.face_id)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"face_id"),g=s["if"],(b=v.program(8,c,a)).hash={},(b.fn=b).inverse=v.program(10,d,a),((u=g.call(t,u,b))||0===u)&&(_+=u),_+='\n    </span>\n    <span id="biometricError" style="display:none;color:red;"></span>\n    <br/>\n    <input type="button" class="btn btn-success" id="retryBiometricAuth" style="margin: 5px;" value="',u="mm_payment_helper_retry_biometric_auth",u=typeof(g=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===E?g.call(t,u,{hash:{}}):g===y?N.call(t,"intl",u,{hash:{}}):g,_+=A(u)+'"/><br/>\n    <a id="masterPassAuth" href="#">',u="mm_payment_helper_master_pass_auth",u=typeof(g=(f=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===E?g.call(t,u,{hash:{}}):g===y?N.call(t,"intl",u,{hash:{}}):g,_+=A(u)+'</a>\n  </div>\n</div>\n<!-- End Step 3.1 Biometric auth -->\n\n<!-- Step 3.2 Master password auth -->\n<div class="clearfix" id="masterPassStep" style="display:none;padding-top:15px;">\n  <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',u="/pages/images/NewIcon.png",u=typeof(g=(f=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===E?g.call(t,u,{hash:{}}):g===y?N.call(t,"assetUrl",u,{hash:{}}):g,_+=A(u)+'"/>\n  </div>\n  ',u="unlock",g=(f=s.form)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),(b=v.program(15,m,a)).hash={},(b.fn=b).inverse=v.noop,((u=f&&typeof g===E?g.call(t,u,b):D.call(t,g,u,b))||0===u)&&(_+=u),_+="\n</div>\n<!-- End Step 3.2 Master password auth -->\n"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.disable_link",e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0;return s+='<a href="#" id="disableLink" style="text-transform: none;margin-left: 10px;font-size: 9pt;text-decoration: underline;">',a="mm_dntme_disable_panel",s+=(0,this.escapeExpression)(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</a>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.field_types",e.template(function(e,t,n){n=n||e.helpers;return'<select class="fieldTypes" style="vertical-align:middle;">\n  <option value="">-- Please select --</option>\n  <option class="start" value="/unknown">Ignore</option>\n  <optgroup class="person-grp" label="Person">\n    <option value="/contact/email">Email</option>\n    <option value="/nameperson/friendly">Username or User ID</option>\n    <option value="/nameperson/full">Full Name</option>\n    <option value="/nameperson/prefix">Title (Mr/Mrs/Ms)</option>\n    <option value="/nameperson/first">First Name</option>\n    <option value="/nameperson/middle">Middle Name</option>\n    <option value="/nameperson/last">Last Name</option>\n    <option value="/nameperson/suffix">Suffix (Jr./Sr./II)</option>\n    <option value="/person/gender">Gender</option>\n  </optgroup>\n  <optgroup class="security-grp" label="Security">\n    <option value="/password">Password</option>\n    <option value="/password/differentSpecialChars">Limited Special Chars (.-_)</option>\n    <option value="/password/noSpecialChars">No Special Characters</option>\n    <option value="/password/noNumbers">No Numbers</option>\n    <option value="/passwordold">Old Password</option>\n  </optgroup>\n  <optgroup class="combined-grp" label="Combined Login/Register Form">\n    <option value="/contact/email/login">Username or Email</option>\n    <option value="/password/login">Password</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Phone Fields">\n    <option value="/contact/phone">Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode">Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange">Phone exchange yyy</option>\n    <option value="/contact/phone/local">Phone local zzzz</option>\n    <option value="/contact/phone/number">Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension">Phone extension</option>\n    <option value="/contact/phone/countrycode">Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Home Phone">\n    <option value="/contact/phone/home">Home Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/home">Home Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/home">Home Phone exchange yyy</option>\n    <option value="/contact/phone/local/home">Home Phone local zzzz</option>\n    <option value="/contact/phone/number/home">Home Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/home">Home Phone extension</option>\n    <option value="/contact/phone/countrycode/home">Home Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Work Phone">\n    <option value="/contact/phone/work">Work Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/work">Work Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/work">Work Phone exchange yyy</option>\n    <option value="/contact/phone/local/work">Work Phone local zzzz</option>\n    <option value="/contact/phone/number/work">Work Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/work">Work Phone extension</option>\n    <option value="/contact/phone/countrycode/work">Work Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Mobile Phone">\n    <option value="/contact/phone/mobile">Mobile Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/mobile">Mobile Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/mobile">Mobile Phone exchange yyy</option>\n    <option value="/contact/phone/local/mobile">Mobile Phone local zzzz</option>\n    <option value="/contact/phone/number/mobile">Mobile Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/mobile">Mobile Phone extension</option>\n    <option value="/contact/phone/countrycode/mobile">Mobile Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Fax Phone">\n    <option value="/contact/phone/fax">Fax Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/fax">Fax Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/fax">Fax Phone exchange yyy</option>\n    <option value="/contact/phone/local/fax">Fax Phone local zzzz</option>\n    <option value="/contact/phone/number/fax">Fax Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/fax">Fax Phone extension</option>\n    <option value="/contact/phone/countrycode/fax">Fax Phone country code</option>\n  </optgroup>\n  <optgroup class="card-grp" label="Credit Card Fields">\n    <option value="/financial/creditcard/number">Full Card Number</option>\n    <option value="/financial/creditcard/type">Card Type</option>\n    <option value="/financial/creditcard/issuedto">Issued To Full</option>\n    <option value="/financial/creditcard/verification">CVV/CVC/CVV2</option>\n    <option value="/financial/creditcard/expiry">Expiration Date (mm/yyyy)</option>\n    <option value="/financial/creditcard/expiry2">Expiration Date (mm/yy)</option>\n    <option value="/financial/creditcard/expirymonth">Expiration Month</option>\n    <option value="/financial/creditcard/expiryyear">Expiration Year (4 digits)</option>\n    <option value="/financial/creditcard/expiryyear2">Expiration Year (2 digits)</option>\n    <option value="/financial/creditcard/number/part1">Card Number First 4</option>\n    <option value="/financial/creditcard/number/part2">Card Number Second 4</option>\n    <option value="/financial/creditcard/number/part3">Card Number Third 4</option>\n    <option value="/financial/creditcard/number/part4">Card Number Last 4</option>\n    <option value="/financial/creditcard/number/amex/part1">AmEx Number First 4</option>\n    <option value="/financial/creditcard/number/amex/part2">AmEx Number Second 6</option>\n    <option value="/financial/creditcard/number/amex/part3">AmEx Number Third 5</option>\n    <option value="/financial/creditcard/issuedto/first">Issued To First</option>\n    <option value="/financial/creditcard/issuedto/last">Issued To Last</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Address">\n    <option value="/contact/postaladdress">Address Line 1</option>\n    <option value="/contact/postaladdressAdditional">Address Line 2</option>\n    <option value="/contact/postaladdress3">Address Line 3</option>\n    <option value="/contact/city">City</option>\n    <option value="/contact/state">State</option>\n    <option value="/contact/state/code">State Code</option>\n    <option value="/contact/postalcode">Zip/Postal Code</option>\n    <option value="/contact/country">Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Billing Address">\n    <option value="/contact/postaladdress/billing">Billing Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/billing">Billing Address Line 2</option>\n    <option value="/contact/postaladdress3/billing">Billing Address Line 3</option>\n    <option value="/contact/city/billing">Billing City</option>\n    <option value="/contact/state/billing">Billing State</option>\n    <option value="/contact/state/code/billing">Billing State Code</option>\n    <option value="/contact/postalcode/billing">Billing Zip/Postal Code</option>\n    <option value="/contact/country/billing">Billing Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Shipping Address">\n    <option value="/contact/postaladdress/shipping">Shipping Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/shipping">Shipping Address Line 2</option>\n    <option value="/contact/postaladdress3/shipping">Shipping Address Line 3</option>\n    <option value="/contact/city/shipping">Shipping City</option>\n    <option value="/contact/state/shipping">Shipping State</option>\n    <option value="/contact/state/code/shipping">Shipping State Code</option>\n    <option value="/contact/postalcode/shipping">Shipping Zip/Postal Code</option>\n    <option value="/contact/country/shipping">Shipping Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Business Address">\n    <option value="/contact/postaladdress/business">Business Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/business">Business Address Line 2</option>\n    <option value="/contact/postaladdress3/business">Business Address Line 3</option>\n    <option value="/contact/city/business">Business City</option>\n    <option value="/contact/state/business">Business State</option>\n    <option value="/contact/state/code/business">Business State Code</option>\n    <option value="/contact/postalcode/business">Business Zip/Postal Code</option>\n    <option value="/contact/country/business">Business Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Home Address">\n    <option value="/contact/postaladdress/home">Home Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/home">Home Address Line 2</option>\n    <option value="/contact/postaladdress3/home">Home Address Line 3</option>\n    <option value="/contact/city/home">Home City</option>\n    <option value="/contact/state/home">Home State</option>\n    <option value="/contact/state/code/home">Home State Code</option>\n    <option value="/contact/postalcode/home">Home Zip/Postal Code</option>\n    <option value="/contact/country/home">Home Country</option>\n  </optgroup>\n  <optgroup class="date-grp" label="Birth Date">\n    <option value="/birthdate/age">Age</option>\n    <option value="/birthdate/birthmonth">Birth Date (month)</option>\n    <option value="/birthdate/birthday">Birth Date (day)</option>\n    <option value="/birthdate/birthyear">Birth Date (year)</option>\n    <option value="/birthdate/MM-DD-YYYY">Birth Date (MM-DD-YYYY)</option>\n    <option value="/birthdate/MM/DD/YYYY">Birth Date (MM/DD/YYYY)</option>\n    <option value="/birthdate/DD-MM-YYYY">Birth Date (DD-MM-YYYY)</option>\n    <option value="/birthdate/DD/MM/YYYY">Birth Date (DD/MM/YYYY)</option>\n  </optgroup>\n  <option value="/captcha">Captcha</option>\n  <option value="/auth/otp">One Time Password</option>\n  <option value="/auth/hint">Password Hint</option>\n  <option value="/auth/question">Security Question</option>\n  <option value="/auth/answer">Security Answer</option>\n  <option value="/website">Website Url</option>\n  <option value="/company/name">Company Name</option>\n  <option value="/company/position">Company Position</option>\n  <option value="/socialSecurityNumber">SSN #</option>\n  <option value="/driverLicense">Driver License #</option>\n  <option value="/loyalty/flier">Frequent Flier #</option>\n  <option value="/loyalty/card">Loyalty Card #</option>\n  <option value="/rememberLogin">Remember Me</option>\n  <option value="/agreeTOS">Agree to TOS</option>\n  <option value="/comment">Comment</option>\n  <option value="/message">message</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.form_types",e.template(function(e,t,n){n=n||e.helpers;return'<select id="formType">\n  <option value="">-- Please Select --</option>\n  <option value="loginForm">Login Form</option>\n  <option value="registrationForm">Registration Form</option>\n  <option value="checkoutForm">Checkout Form</option>\n  <option value="changePasswordForm">Change Password Form</option>\n  <option value="otherForm">Other Form</option>\n  <option value="ignoreForm">Ignore Form</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.header",e.template(function(e,t,a,n,i){function s(e){var t,n="";return n+='data-highlight="',typeof(t=a.panelType||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelType"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"panelType",{hash:{}})),n+=u(t)+'"'}a=a||e.helpers;var l,o,r,c="",d=this,h="function",p=a.helperMissing,m=void 0,u=this.escapeExpression;return c+='<div class="newheader">\n  <div class="newlinks close-link">\n    <img class="" src="',l="/pages/images/2015panels/panel_xclose.png",l=typeof(o=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"assetUrl",l,{hash:{}}):o,c+=u(l)+'"/>\n  </div>\n  <div class="newlinks b-link" ',l=a.panelType||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelType"),o=a["if"],(r=d.program(1,s,i)).hash={},(r.fn=r).inverse=d.noop,((l=o.call(t,l,r))||0===l)&&(c+=l),c+='>\n    <img class="" src="',typeof(l=a.panelLogoSmall||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"))===h?l=l.call(t,{hash:{}}):l===m&&(l=p.call(t,"panelLogoSmall",{hash:{}})),c+=u(l)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.define("abine/views/commonhelpers",["wycats/handlebars","abine/config","abine/intl","abine/assets","abine/cobranding"],function(t,n,a,e,i){t.registerHelper("if_all",function(){for(var e=[].slice.apply(arguments),t=e.pop(),n=t.fn,a=0;a<e.length;++a)if(!e[a]){n=t.inverse;break}return n(this)}),t.registerHelper("configVar",function(e){return t.Utils.escapeExpression(n[e])}),t.registerHelper("ifContentUser",function(e,t){return"function"==typeof ABINE_DNTME.contentuser[e]&&ABINE_DNTME.contentuser[e]()?t.fn(this):t.inverse(this)}),t.registerHelper("ifBrowser",function(e,t){return n.browser==e?t.fn(this):t.inverse(this)}),t.registerHelper("unlessBrowser",function(e,t){return n.browser!=e?t.fn(this):t.inverse(this)}),t.registerHelper("intl",function(e,t){return 1<arguments.length&&(t=Array.prototype.slice.call(arguments,1)),a.getText(e,t)}),t.registerHelper("nl2br",function(e){return t.Utils.escapeExpression(e).replace(/\n/g,"<br/>")}),t.registerHelper("plural",function(e,t){1<arguments.length&&(t=Array.prototype.slice.call(arguments,1));var n=a.getText(e,t);return 1!=t[t.length-2]?2<n.length&&n.substr(n.length-3).match(/y$/)?n.substr(0,n.length-1)+"ies":n+"s":n}),t.registerHelper("date",function(e){return new Date(e).toLocaleDateString()}),t.registerHelper("panelLogoSmall",function(){return e.assetUrl(i.get("panel.logo.small"))}),t.registerHelper("panelLogoBig",function(){return e.assetUrl(i.get("panel.logo.big"))}),t.registerHelper("settingsIcon",function(e,t){var n='<div class="links '+t+'" data-highlight="'+e+'" data-add-setting="'+e+'-settings-seen">';return n+=a.getText("mm_dntme_settings"),n+="</div>"})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="loading-display">\n  <div class="progress progress-striped active">\n    <div class="bar bar-info" style="width: 100%;"></div>\n  </div>\n  <div class="loading-message">\n    ',a="mm_loading_display_Loading",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'\n  </div>\n</div>\n<div class="refreshing-display" style="display:none;">\n    <img src="',a="/pages/images/ajax_loader.gif",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'" />\n</div>'}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display}),ABINE_DNTME.define("abine/views/loading_display",["documentcloud/underscore","jquery","duckbone/core","abine/timer","abine/intl"],function(t,n,e,a,i){return e.View.extend({templateName:"loading_display_loading_display",afterInitialize:function(){this.options.customMessages||(this.options.customMessages=["mm_loading_display_LotOfAccounts","mm_loading_display_StillWorking","mm_loading_display_HangOn","mm_loading_display_Sorry"]);var e=0;this.changeMessage=a.setInterval(t.bind(function(){e>=this.options.customMessages.length?a.clearInterval(this.changeMessage):(n(this.el).find(".loading-message").html(i.getText(this.options.customMessages[e],["loading_"+this.options.pageName])),e++)},this),this.options.interval||5e3)},reset:function(){a.clearInterval(this.changeMessage),n(this.el).find(".loading-message").html(""),this.afterInitialize()},hide:function(){a.clearInterval(this.changeMessage),n(this.el).find(".loading-display").hide(),n(this.el).find(".refreshing-display").hide()},startRefreshing:function(){n(this.el).find(".refreshing-display").show()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.unlock_panel=e.template(function(e,t,i,n,a){function s(e){var t,n,a="";return a+='\n    <div class="control-group" style="margin-left:50px;">\n      <span class="login-msg">',t="mm_unlock_panel_login_message",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</span><span class="unlock-msg">',t="mm_unlock_panel_unlock_message",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</span><br/>\n      <div id="error" style="display:none;color:black;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="email" type="text" value="',typeof(t=(r=i.email)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===p?t=t.call(e,{hash:{}}):t===u&&(t=m.call(e,"email",{hash:{}})),a+=g(t)+'" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_email_simple",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'"/>\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t
)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n        <div id="email-auth-section" style="display:none;">\n          <input type="text" id="auth-code-field" style="width:140px;height:28px;margin:10px 5px" name="auth_code" placeholder="Authentication Code" />\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success login-msg" value=\'',t="mm_dntme_sign_in",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_unlock_panel_unlock",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <a id="login-different-user" class="unlock-msg" style="cursor:pointer;margin-left:20px;">',t="mm_unlock_panel_different_user",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</a>\n        <span class="retry" style="display: none;"><br/><a href="" id="forgotPassword">',t="mm_dntme_forgot_my_password",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</a></span><br/>\n      </span>\n      <div id="progress-section" style="display:none;margin-top:10px;">\n        <div class="progress progress-striped active">\n          <div class="bar bar-info" style="width: 100%;"></div>\n        </div>\n        <div class="loading-message" style="text-transform:none;text-align: center">',t="mm_loading_display_login",t=typeof(n=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</div>\n      </div>\n    </div>\n    <div style="height:8px;">&nbsp;</div>\n  '}i=i||e.helpers;var l,o,r,c,d="",h=this,p="function",m=i.helperMissing,u=void 0,g=this.escapeExpression,f=i.blockHelperMissing;return d+='<div class="panel">\n   <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',typeof(l=(r=i.panelLogoSmall)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"))===p?l=l.call(t,{hash:{}}):l===u&&(l=m.call(t,"panelLogoSmall",{hash:{}})),d+=g(l)+'"/>\n   </div>\n  ',l="unlock",o=(r=i.form)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),(c=h.program(1,s,a)).hash={},(c.fn=c).inverse=h.noop,((l=r&&typeof o===p?o.call(t,l,c):f.call(t,o,l,c))||0===l)&&(d+=l),d+='\n\n  <div class="header">\n    <div class="logo-link" style="display:none;">\n      <img class="logo" height="24px" width="24px" src="',l="/pages/images/Icon-48.png",l=typeof(o=(r=i.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?o.call(t,l,{hash:{}}):o===u?m.call(t,"assetUrl",l,{hash:{}}):o,d+=g(l)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        ',l="mm_dntme_hide_panel",l=typeof(o=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?o.call(t,l,{hash:{}}):o===u?m.call(t,"intl",l,{hash:{}}):o,d+=g(l)+'\n      </div>\n      <div id="faqLink" class="links help-link">\n        ',l="mm_dntme_help",l=typeof(o=(r=i.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?o.call(t,l,{hash:{}}):o===u?m.call(t,"intl",l,{hash:{}}):o,d+=g(l)+"\n      </div>\n    </div>\n  </div>\n\n</div>"}),ABINE_DNTME.CompiledTemplates.unlock_panel}),ABINE_DNTME.define("abine/views/unlockPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/intl","abine/responseCodes"],function(l,o,e,t,n,r,a,s,c){return n.extend({templateName:"unlock_panel",events:{"submit .unlock":"verifyPassword","click .help-link":"openFaq","click .settings-link":"openSettings","click #forgotPassword":"forgotPassword","click #login-different-user":"loginDifferentUser"},afterInitialize:function(){this.email_2fa_shown=!1,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn();var e=this.contentManager.preferences.getPref("oldEmail");this.model={panelType:"unlock",email:e||"",password:""},this.panelId=6000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),e?(o(".login-msg",this.el).hide(),o(".unlock-msg",this.el).show(),o("#email",this.el).hide()):o(".unlock-msg",this.el).hide(),this.bindBlurClose()},loginDifferentUser:function(e){e.preventDefault(),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true"),o("#email",this.el).val(""),o(".unlock-msg",this.el).hide(),o("#email",this.el).show(),o(".login-msg",this.el).show()},forgotPassword:function(e){e.preventDefault(),r.webapp.openForgotPassword(),this.trigger("close")},openFaq:function(){r.webapp.openHelp("/faq/faq-loginHelp"),this.closePanel()},openSettings:function(){this.options.contentManager.showToolbarPanel({page:"settings"}),this.closePanel()},bindBlurClose:function(){0==this.model.email.length?this.bindPanelTextInput(o(o("#password",this.el)).add(o("#email",this.el))):this.bindPanelTextInput(o(o("#email",this.el)).add(o("#password",this.el))),o(this.el).bind("mousedown",l.bind(function(e){var t=e.target.className.split(" ");l.contains(t,"close-link")&&(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.closeHeader()),this.ignoreBlur(!0)},this))},verifyPassword:function(e){this.ignoreBlur(!0),e.preventDefault(),o(this.el).find(".unlockButton").attr("disabled","disabled");var t=o("#email",this.el).val(),n=o("#password",this.el).val(),a=o("#mfa-code-field",this.el).val(),i=o("#auth-code-field",this.el).val();this.$("#progress-section").show(),this.$(".fields").hide(),this.$(".retry").show(),this.autoResize();var s={email:t,password:n,mfa_code:a,auth_code:i};r.licenseModule.login(s,l.bind(function(e){this.$("#progress-section").hide(),this.$(".fields").show(),this.processLogin(e,s,l.bind(this.unlocked,this))},this))},processLogin:function(e,t,n){if(e){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var a=s.getText("mm_dntme_register_error"),i=e.responseJSON&&e.responseJSON.data?e.responseJSON.data.errors:null;"invalid email address"==e.responseJSON.error_code?a=s.getText("mm_dntme_invalid_email_server_error"):"wrong password"==e.responseJSON.error_code?a=s.getText("mm_dntme_wrong_password"):"mfa code required"==e.responseJSON.error_code?(a="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"authorize new device"==e.responseJSON.error_code||"auth code required"==e.responseJSON.error_code||"invalid auth code"==e.responseJSON.error_code?(a="You are logging in from a new device. Please check your email and enter authentication code below:",this.email_2fa_shown?(a+="<div style='color:red;font-weight:bold;text-align:center;'>",a+="Please enter valid authentication code.",a+="</div>"):this.email_2fa_shown=!0,this.$("#login-section").hide(),this.$("#email-auth-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"auth code required"==e.responseJSON.error_code||"invalid auth code"==e.responseJSON.error_code?a="Please enter valid authentication code received in email.  Your account will be locked after 5 invalid attempts.":"no account found for email"==e.responseJSON.error_code?a=s.getText("mm_dntme_wrong_email"):"version not allowed"==e.responseJSON.error_code?a=s.getText("mm_dntme_version_not_allowed"):"account has been locked"==e.responseJSON.error_code?(this.email_2fa_shown=!1,a=s.getText("mm_dntme_account_locked"),this.$("#login-section").show(),this.$("#mfa-section, #email-auth-section").hide()):e.responseJSON.error_code==c.SCHEDULED_DOWNTIME?a=s.getText("mm_dntme_server_maintenance"):i&&i.email&&"was used for MaskMe Heavy"==i.email[0]&&(a=s.getText("mm_dntme_version_not_allowed")),this.$("#error").html(a).show(),e.responseJSON&&e.responseJSON.data&&1==e.responseJSON.data.generated_password&&this.$("#error #loginButton").click(l.bind(function(e){return r.webapp.openPasswordSetupPage(t.email),this.closePanel(),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(l.bind(function(e){return this.$(".fields, #error").toggle(),this.autoResize(),e.preventDefault(),!1},this)),this.$("#error #dnt2upgrade").click(l.bind(function(){r.webapp.openDnt2UpgradePage(),this.closePanel()},this)),this.autoResize(),n(a)}else this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.preferences.fetchAll({success:function(){r.webapp.openDashboard(!0),n()}})},closingOnBlur:function(){r.memoryStore.get("login-panel-ignored",function(e){e?e++:e=1,3<=e?(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",Date.now())):(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null))})},unlocked:function(e){e||(this.closePanel(),a.setTimeout(l.bind(this.focusField,this),100))}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.accounts",e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n    <!-- Login Emails -->\n    <a href="#" class="mmKeyOption account" data-account="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===p?n=n.call(e,{hash:{}}):n===u&&(n=m.call(e,"this.id",{hash:{}})),i+=g(n)+'"><div class="element otherblue" >\n        <span class="panelLeft" title="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===p?n=n.call(e,{hash:{}}):n===u&&(n=m.call(e,"this.getAddress",{hash:{}})),i+=g(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),a=s["if"],(d=h.program(2,l,t)).hash={},(d.fn=d).inverse=h.program(4,o,t),((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n            ",typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===p?n=n.call(e,{hash:{}}):n===u&&(n=m.call(e,"this.getAddress",{hash:{}})),i+=g(n)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">(',n="createdAt",n=typeof(a=s.live_timestamp||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"))===p?a.call(e,n,{hash:{}}):a===u?m.call(e,"live_timestamp",n,{hash:{}}):a,i+=g(n)+")</span>\n        </span>\n    </div></a>\n"}function l(e){var t,n,a="";return a+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'" style="width:40px;height:21px;"/>\n          '}function o(e){var t,n,a="";return a+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'" style="width:40px;height:21px;"/>\n          '}s=s||e.helpers;var r,c,d,h=this,p="function",m=s.helperMissing,u=void 0,g=this.escapeExpression;return r=s.accounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),c=s.each,(d=h.program(1,i,a)).hash={},(d.fn=d).inverse=h.noop,(r=c.call(t,r,d))||0===r?r:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.custom",e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n    <a href="#" class="customEmail"><div class="element" id="mask" style="height:25px;width:370px;">\n            <span class="panelLeft full">\n                <img class="iconPos" src="',n="/pages/images/2015panels/email_green.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===h?a.call(e,n,{hash:{}}):a===m?p.call(e,"assetUrl",n,{hash:{}}):a,i+=u(n)+'" style="width:44px;height:21px;"/>\n                <span class="input"><input type="text" autocomplete="off" placeholder="',n="mm_email_helper_your_custom_email",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?a.call(e,n,{hash:{}}):a===m?p.call(e,"intl",n,{hash:{}}):a,i+=u(n)+'"\n                                           data-value="',typeof(n=null===(n=s.primaryEmail||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getCustomName"))===h?n=n.call(e,{hash:{}}):n===m&&(n=p.call(e,"primaryEmail.getCustomName",{hash:{}})),i+=u(n)+"-",typeof(n=s.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===h?n=n.call(e,{hash:{}}):n===m&&(n=p.call(e,"domain",{hash:{}})),i+=u(n)+'"\n                                           class="customName no-border" id="customName"/>\n                    <select id="domain" class="customDomain no-border">\n                        ',n=s.domains||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domains"),a=s.each,(c=d.program(2,l,t)).hash={},(c.fn=c).inverse=d.noop,((n=a.call(e,n,c))||0===n)&&(i+=n),i+='\n                    </select>\n                    <button class="customSubmit" style="display: none">',n="mm_email_helper_fill",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?a.call(e,n,{hash:{}}):a===m?p.call(e,"intl",n,{hash:{}}):a,i+=u(n)+'</button>\n                    <img class="customLoading" style="display:none;" src="',n="/pages/images/ajax_loader.gif",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===h?a.call(e,n,{hash:{}}):a===m?p.call(e,"assetUrl",n,{hash:{}}):a,i+=u(n)+'"/>\n                </span>\n            </span>\n    </div></a>\n    <div class="customError" style="display:none"></div>\n'}function l(e){var t,n="";return n+='\n                            <option value="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"this.domain",{hash:{}})),n+=u(t)+'">@ ',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"this.domain",{hash:{}})),n+=u(t)+"</option>\n                        "}s=s||e.helpers;var o,r,c,d=this,h="function",p=s.helperMissing,m=void 0,u=this.escapeExpression;return o=s.domains||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domains"),r=s["if"],(c=d.program(1,i,a)).hash={},(c.fn=c).inverse=d.noop,(o=r.call(t,o,c))||0===o?o:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.disclose",e.template(function(e,t,s,n,a){function i(e){var t,n,a="";return a+='\n    <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",t=typeof(n=(d=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,a+=b(t)+'" style="width:44px;height:21px;"/>\n                    ',t="mm_email_helper_discloseEmail",t=typeof(n=(d=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"intl",t,{hash:{}}):n,a+=b(t)+"\n                </span>\n    </div></a>\n"}function l(e,t){var n,a,i="";return i+='\n    <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',n="/pages/images/2015panels/email_red.png",n=typeof(a=(d=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"assetUrl",n,{hash:{}}):a,i+=b(n)+'" style="width:44px;height:21px;"/>\n                    ',typeof(n=null===(n=(d=s.primaryEmail)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"email"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"primaryEmail.email",{hash:{}})),i+=b(n)+"\n                </span>\n    </div></a>\n    ",n=null===(n=(d=s.primaryEmail)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"altEmails"),a=s.each,(h=m.program(4,o,t)).hash={},(h.fn=h).inverse=m.noop,((n=a.call(e,n,h))||0===n)&&(i+=n),i+="\n"}function o(e){var t,n,a="";return a+='\n        <a href="#" class="mmKeyOption altEmail" data-value="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"this.email",{hash:{}})),a+=b(t)+'"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",t=typeof(n=(d=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,a+=b(t)+'" style="width:44px;height:21px;"/>\n                    ',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"this.email",{hash:{}})),a+=b(t)+"\n                </span>\n        </div></a>\n    "}s=s||e.helpers;var r,c,d,h,p="",m=this,u="function",g=s.helperMissing,f=void 0,b=this.escapeExpression,_=s.blockHelperMissing;return p+="<!--Disclose My Email-->\n",r="hasRegEmail",c=(d=s.ifContentUser)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"ifContentUser"),(h=m.program(1,i,a)).hash={},(h.fn=h).inverse=m.program(3,l,a),((r=d&&typeof c===u?c.call(t,r,h):_.call(t,c,r,h))||0===r)&&(p+=r),p}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.disposables",e.template(function(e,t,i,n,a){function s(e){var t,n,a="";return a+='\n    <a href="#" data-aliasaddress="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"this.getAddress",{hash:{}})),a+=u(t)+'" class="mmKeyOption usedEmail"><div class="element otherblue">\n                <span class="panelLeft disposable">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_blue.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"assetUrl",t,{hash:{}}):n,a+=u(t)+'" style="width:44px;height:21px;"/>\n                    ',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"this.getAddress",{hash:{}})),a+=u(t)+'\n                </span>\n        <span class="panelRight disposable">\n                    <span class="overflowText">(',t="createdAt",t=typeof(n=i.live_timestamp||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"live_timestamp",t,{hash:{}}):n,a+=u(t)+")</span>\n                </span>\n    </div></a>\n"}i=i||e.helpers;var l,o,r,c="",d=this,h="function",p=i.helperMissing,m=void 0,u=this.escapeExpression;return c+="<!-- If Masked Emails already exist for this domain -->\n",l=i.disposableEmails||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposableEmails"),o=i.each,(r=d.program(1,s,a)).hash={},(r.fn=r).inverse=d.noop,((l=o.call(t,l,r))||0===l)&&(c+=l),c}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.feedback",e.template(function(e,t,n){var a,i,s,l="",o="function",r=(n=n||e.helpers).helperMissing,c=void 0,d=this.escapeExpression;return l+='<a href="#" class="feedback"><div class="element" style="height:60px;width:350px;text-align: center">\n        <div class="panelLeft full feedback-input">\n            ',a=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),i="mm_email_helper_feedback",((a=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===o?s.call(t,i,a,{hash:{}}):s===c?r.call(t,"intl",i,a,{hash:{}}):s)||0===a)&&(l+=a),l+='\n            <div style="margin-top: 10px;">\n                <button class="btn btn-danger failed">',a="mm_email_helper_feedback_yes",l+=d(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===o?i.call(t,a,{hash:{}}):i===c?r.call(t,"intl",a,{hash:{}}):i)+'</button>\n                <button class="btn btn-success success">',a="mm_email_helper_feedback_no",l+=d(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===o?i.call(t,a,{hash:{}}):i===c?r.call(t,"intl",a,{hash:{}}):i)+'</button>\n            </div>\n        </div>\n        <div class="panelLeft full feedback-thanks-failed" style="display: none">\n            ',a="mm_email_helper_feedback_thanks_failed",l+=d(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===o?i.call(t,a,{hash:{}}):i===c?r.call(t,"intl",a,{hash:{}}):i)+'\n        </div>\n        <div class="panelLeft full feedback-thanks-ok" style="display: none">\n            ',a="mm_email_helper_feedback_thanks_ok",l+=d(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===o?i.call(t,a,{hash:{}}):i===c?r.call(t,"intl",a,{hash:{}}):i)+"\n        </div>\n</div></a>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.mask",e.template(function(e,t,s,n,a){function i(e){var t,n,a,i="";return i+="\n                  <span class=\"whatIsThisLink recommended largeOverflowText\"><span class='num-trackers'>",t=null===(t=null===(t=s.tabData||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),n="mm_email_helper_recommended",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?a.call(e,n,t,{hash:{}}):a===m?p.call(e,"intl",n,t,{hash:{}}):a,i+=u(t)+"</span>.</span>\n              "}s=s||e.helpers;var l,o,r,c="",d=this,h="function",p=s.helperMissing,m=void 0,u=this.escapeExpression;return c+='<!--Mask My Email-->\n<a href="#" class="mmKeyOption disposableEmail"><div class="element" id="mask">\n            <span class="panelLeft">\n                <img class="iconPos" src="',l="/pages/images/2015panels/email_green.png",l=typeof(o=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"assetUrl",l,{hash:{}}):o,c+=u(l)+'" style="width:44px;height:21px;"/>\n                ',l="mm_email_helper_maskMyEmail",l=typeof(o=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'\n            </span>\n    <span class="panelRight">\n              ',l=null===(l=s.tabData||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tabData"))||l===undefined||!1===l?l:ABINE_DNTME.Duckbone.Handlebars.getAttr(l,"hasFiveOrMoreTrackers"),o=s["if"],(r=d.program(1,i,a)).hash={},(r.fn=r).inverse=d.noop,((l=o.call(t,l,r))||0===l)&&(c+=l),c+='\n        <img class="loading" style="display:none;" src="',l="/pages/images/ajax_loader.gif",l=typeof(o=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"assetUrl",l,{hash:{}}):o,c+=u(l)+'"/>\n            </span>\n</div></a>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.email_helper_panel=e.template(function(e,t,s,a,n){function i(e,t){var n,a,i="";return i+='\n        <!--Server Down Error Handling-->\n        <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n            <span class="panelLeft">\n                <a>',n="mm_email_helper_serverIsDown",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"intl",n,{hash:{}}):a,i+=b(n)+'</a>\n            </span>\n            <span class="panelRight">\n                <a>',n="mm_email_helper_tryAgainLater",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"intl",n,{hash:{}}):a,i+=b(n)+'</a>\n            </span>\n        </div></span>\n\n        <!--Account disabled Error Handling-->\n        <div class="accountDisabledBtn element" style="display:none">\n            <span class="message">',n="mm_email_helper_accountDisabled",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"intl",n,{hash:{}}):a,i+=b(n)+'</span>\n            <a href=# class="enableAccount">',n="mm_email_helper_accountEnableLink",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"intl",n,{hash:{}}):a,i+=b(n)+"</a>\n        </div>\n\n        ",n=s.showFeedback||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showFeedback"),a=s["if"],(h=m.program(2,l,t)).hash={},(h.fn=h).inverse=m.program(4,o,t),((n=a.call(e,n,h))||0===n)&&(i+=n),i+="\n\n    "}function l(e){var t,n="";return n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.feedback"],"email_helper.feedback",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.custom"],"email_helper.custom",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.accounts"],"email_helper.accounts",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.disposables"],"email_helper.disposables",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.mask"],"email_helper.mask",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.disclose"],"email_helper.disclose",t,s,a))||0===t)&&(n+=t),n+="\n        "}function o(e){var t,n="";return n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.accounts"],"email_helper.accounts",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.disposables"],"email_helper.disposables",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.mask"],"email_helper.mask",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.disclose"],"email_helper.disclose",t,s,a))||0===t)&&(n+=t),n+="\n            ",t=e,((t=m.invokePartial(a["email_helper.custom"],"email_helper.custom",t,s,a))||0===t)&&(n+=t),n+="\n        "}function r(e){var t,n,a="";return a+='\n        <!-- new email register flow -->\n        <div class="progress-section" style="display:none">\n            <div class="progress progress-striped active">\n                <div class="bar bar-info" style="width: 100%;"></div>\n            </div>\n            <div class="loading-message"></div>\n        </div>\n\n        <div class="info" style="font-weight: bold;">',t="mm_dntme_enter_email",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"intl",t,{hash:{}}):n,a+=b(t)+'</div>\n        <a href="#" class="mmKeyOption registerEmail"><div class="element" id="mask">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/email_green.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,a+=b(t)+'" style="width:44px;height:21px;"/>\n            ',t="mm_email_helper_maskMyEmail",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"intl",t,{hash:{}}):n,a+=b(t)+'\n          </span>\n          <span class="panelRight whatIsThisLink">\n            ',t="mm_email_helper_whatIsThis",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"intl",t,{hash:{}}):n,a+=b(t)+'\n          </span>\n        </div></a>\n        <a href="#" class="mmKeyOption noPrimaryEmail"><div class="element" id="disclose">\n            <span class="panelLeft">\n                <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,a+=b(t)+'" style="width:44px;height:21px;"/>\n              ',t="mm_email_helper_discloseEmail",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"intl",t,{hash:{}}):n,a+=b(t)+"\n            </span>\n        </div></a>\n    "}s=s||e.helpers,a=a||e.partials;var c,d,h,p="",m=this,u="function",g=s.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="newpanel">\n    <div class="left-panel">\n    <div id="error" style="display:none;"></div>\n    ',c=s.hasRegistered||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),d=s["if"],(h=m.program(1,i,n)).hash={},(h.fn=h).inverse=m.program(6,r,n),((c=d.call(t,c,h))||0===c)&&(p+=c),p+="\n    ",c=t,((c=m.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",c,s,a))||0===c)&&(p+=c),p+="\n    </div>\n    ",c=t,((c=m.invokePartial(a["common.header"],"common.header",c,s,a))||0===c)&&(p+=c),p+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.email_helper_panel}),ABINE_DNTME.define("abine/views/emailHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes","abine/url"],function(d,h,e,n,t,r,a,c,p,l,i){function m(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,o=18e5;return t.extend({templateName:"email_helper_panel",events:{"click .recommended span":"showDNTMe","click a.registerEmail":"setupUser","click a.noPrimaryEmail":"noPrimaryEmail","click a.primaryEmail":"fillWithPrimaryEmail","click a.altEmail":"fillWithAlternateEmail","click a.disposableEmail":"fillWithDisposableEmail","click a.usedEmail":"fillWithUsedEmail","click a.account":"fillWithAccount","click a.disabled":"closePanel","click .customSubmit":"fillWithCustomEmail","click .customName":"removePlaceholder","focus .customName":"removePlaceholder","focus .customDomain":"removePlaceholder","click a.enableAccount":"enableAccount","click .errorReportLink":"makeErrorReport","click .help-link":"openHelp","click .logo-link":"openHelp","click .turn-off":"turnOffEmailPanels","click .turn-on":"turnOnEmailPanels","click .close-link":"logClose","click .success":"logSuccess","click .failed":"logFailure"},removePlaceholder:function(){var e=this.$(".customName"),t=e.attr("data-value");t&&(e.val(t),e.removeAttr("data-value"),this.$(".customSubmit").show()),this.$(".no-border").removeClass("no-border")},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},logSuccess:function(){this.logDomainFeedback("ok")},logFailure:function(){this.logDomainFeedback("failed")},logDomainFeedback:function(e){c.memoryStore.set(this.contentManager.domain+":feedback",this.model.feedbackDoneDomains+":"+this.model.recentEmailDomain),c.emailsModule.sendDomainFeedback({site_domain:this.contentManager.domain,email_domain:this.model.recentEmailDomain,status:e}),this.$(".feedback-input").hide(),this.$(".feedback-thanks-"+e).show(),this.$(".feedback .element").height("ok"==e?30:45),this.autoResize(),this.ignoreBlur(!0),r.setTimeout(d.bind(function(){this.plainFocusField(),this.ignoreBlur(!1)},this),100)},turnOffEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","false"),this.closeHeader()},turnOnEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","true"),this.closePanel()},openMaskedEmailsIn30:function(e){return e.preventDefault(),h(e.target).hasClass("num-trackers")||(c.webapp.openMaskedEmailsIn30(),this.closePanel()),!1},openPremium:function(e){
return e.preventDefault(),c.webapp.openPremium(null,"custom_email"),this.closePanel(),!1},openHelp:function(e){if(h(e.target).hasClass("num-trackers")||"disableLink"==e.target.id)return!1;c.webapp.openHelp("/email"),this.closePanel()},showDNTMe:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"trackers"}),this.closePanel()},makeErrorReport:function(){c.webapp.openHelp(""),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"email",domain:i.getSiteName(this.options.domain).toLowerCase(),primaryEmail:!1,panelsDisabled:!this.contentManager.preferences.getPref("suggestProtectedEmail"),iconClick:!!this.options.iconClick,hasRegistered:this.options.hasRegistered,disposableEmails:new n.DisposableEmailCollection,domains:new n.EmailDomainCollection,showFeedback:!1,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("email-settings-seen")},this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:d.bind(function(){this.model.tabData.hasFiveOrMoreTrackers()&&(this.model.show_settings=!1),this.model.shieldedEmails=new n.ShieldedEmailCollection,c.memoryStore.get(this.contentManager.domain+":feedback",d.bind(function(e){this.model.feedbackDoneDomains=e||"",this.model.domains.fetchAll({success:d.bind(function(){this.model.shieldedEmails.fetchAll({success:d.bind(function(){0<this.model.shieldedEmails.length&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),this.model.primaryEmail?(this.panelId=1000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.loadAccounts(this.options.hasPassword,d.bind(function(){this.model.disposableEmails=new n.DisposableEmailCollection,this.model.disposableEmails.fetchAllByDomain(this.options.domain,d.bind(function(){for(this.numMenuOptions=0;this.numMenuOptions<this.model.accounts.length;)this.bind("enter"+this.numMenuOptions++,function(e,t){this.fillWithAccount(e,t)});for(var e=this.model.disposableEmails.length,t=0;t<e;t++)this.bind("enter"+this.numMenuOptions++,function(e,t){this.fillWithUsedEmail(e,t)});this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithDisposableEmail(e)}),this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithPrimaryEmail(e)}),this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithCustomEmail(e)});for(var n=Date.now(),a=0;!this.model.showFeedback&&a<e;a++){var i=this.model.disposableEmails.models[a],s=i.get("createdAt");s&&i.get("mails")<=0&&n-(s=new Date(s)).getTime()<o&&(this.model.recentEmailDomain=i.get("domain"),this.model.showFeedback=-1==this.model.feedbackDoneDomains.indexOf(this.model.recentEmailDomain))}this.render(),r.setTimeout(d.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this),100)},this))},this))):(this.model.hasRegistered=!1,this.model.dynamicPanel?(this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0)):(this.doNotCloseOnTyping=!0,this.panelId=5000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.setupUser,this),this.bind("enter1",this.noPrimaryEmail,this)),this.render()),this.bindBaseEvents()},this)})},this)})},this))},this)})},loadAccounts:function(e,t){this.model.accounts=new n.AccountCollection,e||t(),this.model.accounts.fetchLoginsByDomain(this.options.domain,d.bind(function(){t()},this))},noPrimaryEmail:function(e){e&&e.preventDefault(),this.setupUser(e,!0)},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, .progress-section").hide(),this.$(".info, .registerEmail, .noPrimaryEmail").show(),this.$(".mmKeyOption .hover").removeClass("hover"),this.triggerRender(),delete this.selectedField},setupUser:function(l,o){l&&(l.preventDefault(),this.$(l.target).hasClass("whatIsThisLink"))?window.open("https://dnt.abine.com/#help/faq/masking-whataremaskedemails2","_blank"):(o=o||!1,this.contentManager.getValue("current.field.value",this.strategyId,this.fieldId,d.bind(function(e){function n(e,t){try{i.get(0).ownerDocument&&(o?h(".loading-message",i).text(p.getText("mm_loading_display_register_use"+Math.floor(e/5))):h(".loading-message",i).text(p.getText("mm_loading_display_register"+Math.floor(e/5))),e<t&&(s=r.setTimeout(function(){n(e+1,t)},500)))}catch(l){}}this.$(".info").hide();var t=this.$("#error");if(t.hide(),!e.match(u))return t.text(p.getText("mm_dntme_invalid_email")).show(),void this.autoResize();var a={email:e,password:m(6),password_hint:p.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_email_panel"},i=this.$(".progress-section"),s=null;n(0,20),i.show(),this.$(".registerEmail, .noPrimaryEmail").hide(),c.licenseModule.register(a,d.bind(function(e,t){this.processRegistration(e,t,a,d.bind(function(e){e?(r.clearTimeout(s),i.hide()):o?this.fillWithPrimaryEmail(l,!0):this.fillWithDisposableEmail(l,!0)},this))},this)),this.autoResize()},this)))},processRegistration:function(e,t,n,a){if(e){var i=p.getText("mm_dntme_register_error"),s=e.responseJSON&&e.responseJSON.data?e.responseJSON.data.errors:null;"invalid email address"==e.responseJSON.error_code?i=p.getText("mm_dntme_invalid_email_server_error"):e.responseJSON.error_code==l.SCHEDULED_DOWNTIME?i=p.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?i=p.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(i=p.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(i).show(),e.responseJSON&&e.responseJSON.data&&1==e.responseJSON.data.generated_password?this.$("#error #loginButton").click(d.bind(function(e){return this.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(d.bind(this.openLoginPage,this)),this.$("#error #retryEmail").click(d.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(d.bind(this.openDnt2UpgradePage,this)),this.autoResize(),a(i)}else this.contentManager.preferences.fetchAll(),this.model.shieldedEmails.fetchAll({success:d.bind(function(){0<this.model.shieldedEmails.length&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),a()},this)})},fillWithPrimaryEmail:function(e,t){if(e&&e.preventDefault(),t=t||!1,this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),t){this.fieldId&&this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");var n={msg:p.getText("mm_email_helper_nextDisclose"),targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/emailsin30",neverFade:!0};this.options.contentManager.showNotification(n)}else if(this.fieldId&&this.model.primaryEmail&&!ABINE_DNTME.contentuser.hasRegEmail())""==this.model.primaryEmail.get("email")?this.openLoginPage("primaryemail"):this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");else if(ABINE_DNTME.contentuser.hasRegEmail())return void this.openSetupEmailPage();this.closePanel()},fillWithDisposableEmail:function(e,t){if(e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.field&&this.model.primaryEmail&&""==this.model.primaryEmail.get("email"))this.openLoginPage("maskedemail");else if(!this.generatingDisposable){var n=this.options.oldValue;n.match(u)&&this.model.primaryEmail.get("email")!=n?-1!=n.indexOf("@"+ABINE_DNTME.config.disposableDomain)&&(n=null):n=null,n&&(this.ignoreBlur(!0),this.doNotCloseOnTyping=!0),this.generatingDisposable=!0,this.$(".loading").show(),this.$(".recommended").hide();var a=this.model.primaryEmail.generateDisposable(this.options.domain,t?"dnt-autoreg-panel":"dnt-panel");a.save({},{success:d.bind(function(){this.fillFields("email",a.getAddress(),{origin:"disposable",disposableGUID:a.get("guid")}),n?(this.$("#error").html(p.getText("mm_dntme_change_email_message",[this.model.primaryEmail.get("email"),n])).show(),this.$("#error #changeSetting").click(d.bind(this.openSettings,this)),this.$(".mmKeyOption, .sep, .errorBtn").hide(),this.focusField(),delete this.doNotCloseOnTyping,this.autoResize()):this.closePanel(),this.generatingDisposable=!1},this),error:d.bind(function(){this.$(".disposableEmail").hide(),this.$(".errorBtn").show()},this)})}},fillWithAccount:function(e,t){var n;if(e&&e.preventDefault(),t||0==t){var a=this.getKeyOptions();n=h(a[t]).data("account")}else n=h(e.target).closest("a").data("account");var i=d.find(this.model.accounts.models,function(e){return e.get("id")==n}),s=i.get("login_url");(!s||0==s.length||s!=this.contentManager.href&&-1==this.contentManager.href.indexOf(s))&&i.set("login_url",this.contentManager.href);var l=i.get("times_used")||0;if(i.set("times_used",l+1),i.set("pushed",0),i.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004}),i.get("mfa"))return this.contentManager.closeCurrentPanel(),this.options.fillAccount=i,this.ignoreBlur(!0),void this.contentManager.showLoginPanel(this.options);var o=i.get("email"),r=i.get("username"),c=i.get("password");r&&0!=r.length||(r=o),o&&0!=o.length||(o=r),this.fillFields("login-no-submit",{email:o,username:r,password:c},"login"),this.closePanel()},enableAccount:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#emailDisabled"}),this.closePanel(e)},fillWithUsedEmail:function(e,t){var n;if(e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),t||0==t){var a=this.getKeyOptions();n=h(a[t]).data("aliasaddress")}else n=h(e.target).closest("a").data("aliasaddress");this.fillFields("email",n,"disposable"),this.closePanel()},fillWithCustomEmail:function(e){if(e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.field&&this.model.primaryEmail&&""==this.model.primaryEmail.get("email"))this.openLoginPage("maskedemail");else if(!this.generatingDisposable){this.generatingDisposable=!0,this.$(".customLoading").show(),this.$(".customSubmit").hide();var t=this.model.primaryEmail.generateDisposable(this.options.domain,"dnt-custom-panel",this.$(".customName").val(),this.$(".customDomain").val());t.save({},{success:d.bind(function(){this.fillFields("email",t.getAddress(),{origin:"disposable",disposableGUID:t.get("guid")}),this.closePanel(),this.generatingDisposable=!1},this),error:d.bind(function(e,t){this.$(".customLoading").hide(),this.$(".customSubmit, .customError").show(),this.$(".customError").unbind("click").css("cursor","default");var n=t.message.errorCode;"custom name already taken"==n?n=p.getText("mm_email_error_already_taken"):"invalid custom name"==n?n=p.getText("mm_email_error_invalid_custom_name"):"too many custom emails created"==n?(n=p.getText("mm_email_error_too_many_custom_emails"),this.$(".customError").click(d.bind(this.openPremium,this)).css("cursor","pointer"),this.$(".disposableEmail").addClass("bold")):n=p.getText("mm_email_helper_serverIsDown"),this.$(".customError").html(n),this.generatingDisposable=!1,this.autoResize()},this)})}},fillWithAlternateEmail:function(e,t){var n;if(e&&e.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),t||0==t){var a=this.getKeyOptions();n=h(a[t]).data("value")}else n=h(e.target).closest("a").data("value");this.fillFields("email",n,"primary"),this.closePanel()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.login_helper_panel=e.template(function(e,t,s,l,n){function a(e){var t,n,a="";return a+='\n                <div class="element otherblue noAccounts" style="cursor: pointer">\n                <span class="panelLeft full" >\n                    <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'"\n                         style="width:40px;height:21px;"/>\n                No accounts saved here.  Click to Add.\n                </span>\n                </div>\n            '}function i(e,t){var n,a,i="";return i+="\n            ",n=s.loggingAccount||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),a=s["if"],(T=M.program(4,o,t)).hash={},(T.fn=T).inverse=M.program(9,d,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n            ",n=s.hasBiometricAuth||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasBiometricAuth"),a=s["if"],(T=M.program(15,u,t)).hash={},(T.fn=T).inverse=M.noop,((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n            "}function o(e,t){var n,a,i="";return i+='\n                <div class="element otherblue">\n            <span class="panelLeft" title="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===I?n=n.call(e,{hash:{}}):n===x&&(n=B.call(e,"this.getAddress",{hash:{}})),i+=C(n)+'">\n                ',n=null===(n=s.loggingAccount||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isCompanyAccount"),a=s["if"],(T=M.program(5,r,t)).hash={},(T.fn=T).inverse=M.program(7,c,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n                Logging in as ",typeof(n=null===(n=s.loggingAccount||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getAddress"))===I?n=n.call(e,{hash:{}}):n===x&&(n=B.call(e,"loggingAccount.getAddress",{hash:{}})),i+=C(n)+"...\n            </span>\n                </div>\n            "}function r(e){var t,n,a="";return a+='\n                    <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'"\n                         style="width:40px;height:21px;"/>\n                '}function c(e){var t,n,a="";return a+='\n                    <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'"\n                         style="width:40px;height:21px;"/>\n                '}function d(e,t){var n,a,i="";return i+="\n                ",n=s.accounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accounts"),a=s.each,(T=M.program(10,h,t)).hash={},(T.fn=T).inverse=M.noop,((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n            "}function h(e,t){var n,a,i="";return i+='\n                    <!-- Login Emails -->\n                    <a href="#" class="mmKeyOption account" data-account="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===I?n=n.call(e,{hash:{}}):n===x&&(n=B.call(e,"this.id",{hash:{}})),i+=C(n)+'">\n                        <div class="element otherblue">\n                        <span class="panelLeft" title="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===I?n=n.call(e,{hash:{}}):n===x&&(n=B.call(e,"this.getAddress",{hash:{}})),i+=C(n)+'">\n                          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),a=s["if"],(T=M.program(11,p,t)).hash={},(T.fn=T).inverse=M.program(13,m,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n                          ",typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===I?n=n.call(e,{hash:{}}):n===x&&(n=B.call(e,"this.getAddress",{hash:{}})),i+=C(n)+'\n                        </span>\n                            <span class="panelRight">\n                            <span class="edit" style="cursor: pointer;text-decoration: underline;"\n                                  title="Click to edit account">(',n="createdAt",n=typeof(a=s.live_timestamp||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"))===I?a.call(e,n,{hash:{}}):a===x?B.call(e,"live_timestamp",n,{hash:{}}):a,i+=C(n)+")\n                            </span>\n                        </span>\n                        </div>\n                    </a>\n                "}function p(e){var t,n,a="";return a+='\n                              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'"\n                                   style="width:40px;height:21px;"/>\n                          '}function m(e){var t,n,a="";return a+='\n                              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'"\n                                   style="width:40px;height:21px;"/>\n                          '}function u(e,t){var n,a,i="";return i+='\n                <div style="margin: 10px; margin-bottom: 0;text-align: center;" class="clearfix">\n                    <div style="margin-left: 20px;display: inline-block;">\n                        ',n=s.face_id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"face_id"),a=s["if"],(T=M.program(16,g,t)).hash={},(T.fn=T).inverse=M.program(18,f,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n                    </div>\n                </div>\n            "}function g(e){var t,n,a="";return a+='\n                            <img src="',t="/pages/images/faceid.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'" style="height: 77px;"/><br/>Face ID\n                        '}function f(e,t){var n,a,i="";return i+="\n                            ",n=s.touch_id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),a=s["if"],(T=M.program(19,b,t)).hash={},(T.fn=T).inverse=M.program(21,_,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n                        "}function b(e){var t,n,a="";return a+='\n                                <img src="',t="/pages/images/fingerprint.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'" style="height: 77px;"/><br/>Touch ID\n                            '}function _(e){var t,n,a="";return a+='\n                                <img src="',t="/pages/images/phoneid.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'" style="height: 77px;"/><br/>\n                            '}function v(e,t){var n,a,i="";return i+="\n            ",n=e,((n=M.invokePartial(l["common.biometric_auth"],"common.biometric_auth",n,s,l))||0===n)&&(i+=n),i+='\n            <div class="clearfix" id="biometricSuccess" style="display:none;margin-left: auto;margin-right: auto;width: 350px">\n                <div style="float:left;width:100px;margin:10px;text-align:center;font-size: 10pt;padding: 30px 20px;border-right: 1px solid #eee;">\n                    ',n=s.face_id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"face_id"),a=s["if"],(T=M.program(24,E,t)).hash={},(T.fn=T).inverse=M.program(26,N,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+='\n                </div>\n                <div style="float:left;margin: 10px;width:150px;text-align: center;">\n                    <img src="',n="/pages/images/tick.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?a.call(e,n,{hash:{}}):a===x?B.call(e,"assetUrl",n,{hash:{}}):a,i+=C(n)+'" style="width: 24px;display: inline-block;"/>\n                    <div style="font-size: 10pt; ">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"biometric_type"))===I?n=n.call(e,{hash:{}}):n===x&&(n=B.call(e,"this.biometric_type",{hash:{}})),i+=C(n)+' approved</div>\n                    <div style="font-size: 10pt;padding-top: 10px;">Logging into</div>\n                    <img class="favicon" style="display:none;max-width: 160px;max-height: 50px;"/>\n                    <div class="no-favicon" style="font-weight: bold;">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===I?n=n.call(e,{hash:{}}):n===x&&(n=B.call(e,"this.domain",{hash:{}})),i+=C(n)+'</div>\n                    <div class="loading-dots" style="font-size: 24pt;display: inline-block;margin-top: 20px;">\n                        <span>&bull;</span><span>&bull;</span><span>&bull;</span>\n                    </div>\n                </div>\n            </div>\n        '}function E(e){var t,n,a="";return a+='\n                        <img src="',t="/pages/images/faceid.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'" style="width: 75px;"/><br/>Face ID\n                    '}function N(e,t){var n,a,i="";return i+="\n                        ",n=s.touch_id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),a=s["if"],(T=M.program(27,y,t)).hash={},(T.fn=T).inverse=M.program(29,A,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n                    "}function y(e){var t,n,a="";return a+='\n                            <img src="',t="/pages/images/fingerprint.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'" style="width: 75px;"/><br/>Touch ID\n                        '}function A(e){var t,n,a="";return a+='\n                            <img src="',t="/pages/images/phoneid.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'" style="width: 75px;"/><br/>\n                        '}s=s||e.helpers,l=l||e.partials;var D,k,T,w="",M=this,I="function",B=s.helperMissing,x=void 0,C=this.escapeExpression;return w+='<div class="newpanel">\n    <div class="left-panel">\n        <div id="accountList">\n            ',D=s.noAccounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"noAccounts"),k=s["if"],(T=M.program(1,a,n)).hash={},(T.fn=T).inverse=M.program(3,i,n),((D=k.call(t,D,T))||0===D)&&(w+=D),w+="\n            ",D=t,((D=M.invokePartial(l["common.auto_fill_with"],"common.auto_fill_with",D,s,l))||0===D)&&(w+=D),w+="\n        </div>\n        ",D=s.hasBiometricAuth||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasBiometricAuth"),k=s["if"],(T=M.program(23,v,n)).hash={},(T.fn=T).inverse=M.noop,((D=k.call(t,D,T))||0===D)&&(w+=D),w+="\n    </div>\n\n    ",D=t,((D=M.invokePartial(l["common.header"],"common.header",D,s,l))||0===D)&&(w+=D),w+="\n</div>"}),ABINE_DNTME.CompiledTemplates.login_helper_panel}),ABINE_DNTME.define("abine/views/loginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/intl","cryptojs"],function(l,o,e,i,t,r,c,d,s){return t.extend({templateName:"login_helper_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp","click .edit":"openEdit","click .noAccounts":"showSearch","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass"},showSearch:function(){this.options.category="add",this.options.contentManager.showSearch(this.options),this.closePanel()},openHelp:function(){r.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},showFavIcon:function(){var e=this,t="https://s3.amazonaws.com/abine-favicons/"+e.model.hash+".png",n=new Image;n.onload=function(){e.$(".favicon").attr("src",t).show(),e.$(".no-favicon").hide()},n.onerror=function(){e.$(".favicon").hide(),e.$(".no-favicon").show()},n.src=t},afterInitialize:function(){var n=this;this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger;var e=this.contentManager.preferences.getPref("masked_card_auth"),t=this.contentManager.preferences.getPref("biometric_type"),a=null;"biometric"==e&&("apns.face_id"==t?a="Face ID":"apns.touch_id"==t?a="Touch ID":"apns.pin_id"==t&&(a="Mobile")),this.model={panelType:"account",domain:this.contentManager.domain,accounts:new i.AccountCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),face_id:"apns.face_id"==t,touch_id:"apns.touch_id"==t,biometric_type:a,hash:s.SHA1("abine"+this.contentManager.domain),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.ignoreExplicitClose=!1,this.model.tabData=new i.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:l.bind(function(){this.model.accounts.fetchLoginsByDomain(this.options.domain,l.bind(function(e){if(e||0==this.model.accounts.length)this.model.noAccounts=!0,this.render(),this.replaceWithFavicons(this.contentManager.domain);else{this.numMenuOptions=this.model.accounts.length,this.model.hasBiometricAuth=!1;for(var t=0;t<this.numMenuOptions;t++)this.model.accounts.models[t].get("mfa")&&a&&(this.model.hasBiometricAuth=!0,c.setTimeout(function(){n.showFavIcon()},500)),this.bind("enter"+t,function(e,t){this.fillWithAccount(e,t)},this);this.render(),c.setTimeout(l.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this),100),this.options.fillAccount&&this.fillWithAccount(null,null,this.options.fillAccount)}},this))},this)})},openEdit:function(e){e&&e.preventDefault();var t=o(e.target).closest("a").data("account");return r.webapp.openPage("/#/client/accounts/edit/"+t),this.closePanel(),!1},retryBiometricAuth:function(t,n){var a=this;c.clearTimeout(this.noResponseTimer),r.licenseModule.getGenericBiometricKey(null,function(e){e.success&&(a.biometricKey=e.key,a.sendBiometricAuthRequest(t,n))})},sendBiometricAuthRequest:function(){this.ignoreExplicitClose=!0;var e=this.biometricKey.split(":");if(2<e.length)return this.biometricKey=e[0]+":"+e[1],this.biometricToken=e[2],this.$("#biometricAuth").hide(),void this._fillAccount();this.$("#biometricAuth").show();var t=this.options.contentManager.messenger,n=this;n.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?n.$("#biometricInfo").html(d.getText("mm_payment_helper_request_faceid_auth",[n.model.biometric_type])):this.model.touch_id?n.$("#biometricInfo").html(d.getText("mm_payment_helper_request_biometric_auth",[n.model.biometric_type])):n.$("#biometricInfo").html(d.getText("mm_payment_helper_request_phoneid_auth",[n.model.biometric_type])),n.$("#biometricError").hide(),n.autoResize(),this.biometricResponseId&&t.off(this.biometricResponseId);var a="biometric:auth:response:"+Math.random();c.clearTimeout(this.noResponseTimer),this.noResponseTimer=c.setTimeout(function(){n.$("#biometricInfo").text(d.getText("mm_payment_helper_biometric_no_response")),n.autoResize()},2e4),t.on(a,function(e){if(c.clearTimeout(n.noResponseTimer),!e.ack||!n.$("#masterPassStep").is(":visible")){if(n.$("#accountList, #masterPassStep").hide(),n.$("#biometricAuth").show(),e.ack)return n.$("#biometricInfo").show(),n.$("#biometricError").hide(),n.model.face_id?n.$("#biometricInfo").html(d.getText("mm_payment_helper_request_faceid_auth_ack",[n.model.biometric_type])):n.model.touch_id?n.$("#biometricInfo").html(d.getText("mm_payment_helper_request_biometric_auth_ack",[n.model.biometric_type])):n.$("#biometricInfo").html(d.getText("mm_payment_helper_request_phoneid_auth_ack",[n.model.biometric_type])),void n.autoResize();e.success?(n.biometricToken=e.token,n.$("#biometricAuth").hide(),n._fillAccount(),t.off(a),n.biometricResponseId=null):(n.$("#biometricInfo").hide(),n.$("#biometricError").text(e.error).show()),n.autoResize()}});var i={type:"login",responseId:a,key:this.biometricKey,domain:this.options.domain,account:this._account.get("label")||this._account.get("username")||this._account.get("email")};t.send("biometric:auth",i),this.biometricResponseId=a,this.autoResize()},masterPassAuth:function(e){e&&e.preventDefault(),c.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show(),this.autoResize()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var n=this.$("#password").val();if(0==n.length)return this.$("#masterPassErr").text(d.getText("mm_payment_helper_master_pass_invalid")).show(),void this.autoResize();var a="password:auth:response:"+Math.random(),i=this.options.contentManager.messenger;return i.on(a,function(e){t.$("#accountList, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t._fillAccount(!0),i.off(a)):t.$("#masterPassErr").text(d.getText("mm_payment_helper_master_pass_invalid")).show(),i.off(a),t.autoResize()}),r.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,i.send("password:auth",{responseId:a,key:t.biometricKey,password:n,domain:t.options.domain})):t.$("#masterPassErr").text(d.getText("mm_payment_helper_master_pass_retry")).show(),t.autoResize()}),this.autoResize(),!1},fillWithAccount:function(t,e,n){var a;t&&t.preventDefault();var i=this;if(!n){if(e||0==e){var s=this.getKeyOptions();a=o(s[e]).data("account")}else a=o(t.target).closest("a").data("account");n=l.find(this.model.accounts.models,function(e){return e.get("id")==a})}(this._account=n).get("mfa")&&"biometric"==this.contentManager.preferences.getPref("masked_card_auth")?r.licenseModule.getGenericBiometricKey(null,function(e){this.$("#accountList").hide(),e.success?(i.biometricKey=e.key,i.sendBiometricAuthRequest(t)):(i.$("#biometricAuth").show(),i.$("#biometricInfo").hide(),i.$("#biometricError").text(d.getText("mm_payment_helper_biometric_auth_disabled",[i.model.biometric_type])).show()),i.autoResize()}):this._fillAccount(!0)},_fillAccount:function(e){var t=this,n=this._account,a=n.get("login_url");(!a||0==a.length||a!=this.contentManager.href&&-1==this.contentManager.href.indexOf(a))&&n.set("login_url",this.contentManager.href),n.get("page_host")||n.set("page_host",this.contentManager.host);var i=n.get("times_used")||0;n.set("times_used",i+1),n.set("pushed",0),n.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var s=n.get("email"),l=n.get("username"),o=n.get("password");l&&0!=l.length||(l=s),s&&0!=s.length||(s=l),e?(this.options.fieldType&&-1!=this.options.fieldType.indexOf("password")?this.fillFields("login",{password:o},"login"):this.fillFields("login",{email:s,username:l,password:o},"login"),this.closePanel()):(this.ignoreExplicitClose=!1,this.$("#biometricAuth").hide(),this.$("#biometricSuccess").show(),c.setTimeout(function(){t.closePanel()},8e3),t.autoResize(),this.fillFields("login",{email:s,username:l,password:o,delay:!0},"login"))}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.address_helper_panel=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n    <a href="#" class="mmKeyOption address" data-address="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"this.id",{hash:{}})),i+=b(n)+'"><div class="element" id="mask">\n        <span class="panelLeft full" title="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"this.label",{hash:{}})),i+=b(n)+'">\n            <img class="iconPos" src="',n="/pages/images/2015panels/address_green.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"assetUrl",n,{hash:{}}):a,i+=b(n)+'" style="width:42px;height:21px;"/>\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),a=s["if"],(h=m.program(2,l,t)).hash={},(h.fn=h).inverse=m.program(4,o,t),((n=a.call(e,n,h))||0===n)&&(i+=n),i+="\n        </span>\n    </div></a>\n    "}function l(e){var t;return typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"this.fullLabel",{hash:{}})),b(t)}function o(e){var t,n,a;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),n="mm_address_helper_use",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl")
)===u?a.call(e,n,t,{hash:{}}):a===f?g.call(e,"intl",n,t,{hash:{}}):a,b(t)}function r(e){var t,n,a="";return a+='\n      <a href="#" class="mmKeyOption addNew"><div class="element" id="mask">\n        <span class="panelLeft full">\n            <img class="iconPos" src="',t="/pages/images/2015panels/address_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,a+=b(t)+'" style="width:42px;height:21px;"/>\n            ',t="mm_address_helper_add_new",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"intl",t,{hash:{}}):n,a+=b(t)+"\n        </span>\n      </div></a>\n    "}s=s||e.helpers,n=n||e.partials;var c,d,h,p="",m=this,u="function",g=s.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="newpanel">\n    <div class="left-panel">\n    ',c=s.addresses||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),d=s.each,(h=m.program(1,i,a)).hash={},(h.fn=h).inverse=m.noop,((c=d.call(t,c,h))||0===c)&&(p+=c),p+="\n    ",c=s.showAddNew||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showAddNew"),d=s["if"],(h=m.program(6,r,a)).hash={},(h.fn=h).inverse=m.noop,((c=d.call(t,c,h))||0===c)&&(p+=c),p+="\n    ",c=t,((c=m.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",c,s,n))||0===c)&&(p+=c),p+="\n    </div>\n    ",c=t,((c=m.invokePartial(n["common.header"],"common.header",c,s,n))||0===c)&&(p+=c),p+="\n</div>"}),ABINE_DNTME.CompiledTemplates.address_helper_panel}),ABINE_DNTME.define("abine/views/addressHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies"],function(s,l,e,t,n,a,i){return n.extend({templateName:"address_helper_panel",events:{"click a.address":"fillWithAddress","click .help-link":"openHelp","click a.addNew":"addNewAddress"},openHelp:function(){i.webapp.openHelp("/faq/guides-autofillAddresses"),this.closePanel()},addNewAddress:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!1),i.webapp.openPage("/#/client/address/add"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000056,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"address",addresses:new t.AddressCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("address-settings-seen")},this.model.tabData=new t.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:s.bind(function(){this.model.addresses.fetchAll({success:s.bind(function(){if(0==this.model.addresses.length)this.closePanel();else{this.model.showAddNew=this.model.addresses.length<=1,this.numMenuOptions=this.model.addresses.length;for(var e=0;e<this.numMenuOptions;e++)"Masked Card"==this.model.addresses.models[e].get("label")&&(this.model.addresses.models[e].attributes.fullLabel=a.getText("mm_address_helper_abine_address")),this.bind("enter"+e,function(e,t){this.fillWithAddress(e,t)},this);this.render()}},this)})},this)})},fillWithAddress:function(e,t){var n;if(e&&e.preventDefault(),t||0==t){var a=this.getKeyOptions();n=l(a[t]).data("address")}else n=l(e.target).closest("a").data("address");var i=s.find(this.model.addresses.models,function(e){return e.get("id")==n});this.fillFields("address",i.toJSON(),"address"),"Masked Card"==i.get("label")?this.updatePanelActivity("masked",this.panelId,this.fieldId,!1):this.updatePanelActivity("discloses",this.panelId,this.fieldId,!1),this.closePanel()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel=e.template(function(e,t,s,n,a){function i(e){var t;return typeof(t=s.title||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"title"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"title",{hash:{}})),t||0===t?t:""}function l(e){var t,n;return t="mm_auto_fill_with_header",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,v(t)}function o(e,t){var n,a,i="";return i+='\n      <a href="#" class="mapField" data-idx="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"idx"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.idx",{hash:{}})),i+=v(n)+'">\n        <div class="element clearfix" id="mask">\n          <span class="panelLeft" style="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"bolder"),a=s["if"],(m=g.program(6,r,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+='">\n            ',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.label",{hash:{}})),(n||0===n)&&(i+=n),i+="\n          </span>\n          ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasChildren"),a=s["if"],(m=g.program(8,c,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n        </div>\n      </a>\n    "}function r(){return"font-weight: bold;"}function c(){return'\n          <span class="panelRight" style="font-weight: bold;font-size:11pt;">&gt;</span>\n          '}function d(){return"display:none;"}s=s||e.helpers,n=n||e.partials;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+='<div class="panel">\n\n  <div class="step1">\n    <div class="info panelTitle" style="font-weight: bold;">\n      ',h=s.title||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"title"),p=s["if"],(m=g.program(1,i,a)).hash={},(m.fn=m).inverse=g.program(3,l,a),((h=p.call(t,h,m))||0===h)&&(u+=h),u+="\n    </div>\n    ",h=s.menu||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"menu"),p=s.each,(m=g.program(5,o,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n  </div>\n  <div class="loading" style="text-align: center;padding:10px;',h=s.loading||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loading"),p=s.unless,(m=g.program(10,d,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='"><img src="',h="/pages/images/ajax_loader.gif",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/></div>\n  <a href="#" class="mapFieldFooter">\n    <div class="element">\n      <span class="panelLeft advanced">\n        ',h="mm_auto_fill_with_advanced",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+' &rarr;\n      </span>\n      <span class="panelRight back" style="font-size: 10pt;">\n        &larr; ',h="mm_auto_fill_with_go_back",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'\n      </span>\n    </div>\n  </a>\n  <div class="show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You will see panels here.<br/><br/>\n    If you would like to turn on all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="dont-show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You won\'t see this panel here again.<br/><br/>\n    If you would like to turn off all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="confirm" style="display: none;padding: 30px 5px;text-align: center">\n    Thanks!<br/>\n    <a href="#" class="done">Click here</a> to see your changes.<br/>\n    (if not, email blur-support@getabine.com)<br/><br/>\n    You have also helped improve Blur for the community.<br/>\n    <a href=# class="disable-feedback">Turn off this auto-fill feedback?</a>\n  </div>\n\n  <div class="report" style="display: none;text-align: center;padding-top:20px;">\n    <div class="report-form">\n    <div style="padding: 10px 0;">',h="mm_auto_fill_report_problem",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</div>\n    <form id="reportProblem">\n      <input id="name" type="text" placeholder="',h="mm_auto_fill_report_name",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'" style="width: 90%;" required/>\n      <input id="email" type="text" placeholder="',h="mm_auto_fill_report_email",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'" style="width: 90%;"/>\n      <textarea id="message" placeholder="',h="mm_auto_fill_report_message",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'" style="width: 90%;height:100px;" required></textarea>\n      <input id="report" type="submit" value="',h="mm_auto_fill_report_submit",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'"/>\n    </form>\n    </div>\n    <div class="report-success" style="display: none;padding: 30px 5px;text-align: center">\n      Thanks!<br/><br/>\n      You have also helped improve Blur for the community.<br/><br/><br/>\n    </div>\n  </div>\n\n  ',h=t,((h=g.invokePartial(n["common.header"],"common.header",h,s,n))||0===h)&&(u+=h),u+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel}),ABINE_DNTME.define("abine/views/autoFillWithPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes","abine/password"],function(i,c,e,s,t,a,n,d,l,o,r){return t.extend({templateName:"autofillwith_helper_panel",events:{"click .map":"map","click .mapField":"mapField","click .advanced":"advanced","click .panelTitle .formType":"changeFormType","click .back":"back","click .help-link":"openHelp","click .logo-link":"openHelp","click .change-all":"changeAll","click .done":"done","submit #reportProblem":"reportProblem","click .disable-feedback":"disableFeedback","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(e){if(c(e.target).hasClass("num-trackers"))return!1;d.webapp.openHelp("/email"),this.closePanel()},dataTypePanel:function(){return!1},disableFeedback:function(e){this.contentManager.preferences.setPref("disableMapFeedback","true"),this.done(e)},changeFormType:function(e){if(e.preventDefault(),this.showingFormTypes)this.back(e);else{this.showingFormTypes=!0;var t=this.options.formType;this.model.menu=new s.MappingMenuCollection;var n=[{label:"Change to Login Form",formType:"loginForm"},{label:"Change to Registraton Form",formType:"registrationForm"},{label:"Change to Checkout Form",formType:"checkoutForm"},{label:"Change to Address Form",formType:"addressForm"},{label:"Change to Other Form",formType:"otherForm"}],a=0;i.each(n,i.bind(function(e){t!=e.formType&&this.model.menu.add(new s.MappingMenu({label:e.label,action:"change_form_type",formType:e.formType,idx:a++}))},this)),this.render()}},done:function(e){e.preventDefault();var t=this;a.setTimeout(function(){t.focusField(),t.closePanel()},500)},changeAll:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"accounts"}),this.closePanel()},reportProblem:function(e){e.preventDefault();var t={name:this.$("#name").val(),email:this.$("#email").val(),message:"Reported using mapping panel:\n\n"+this.$("#message").val(),addLookupMetaData:!0};this.$(".report-form, .report-success").toggle(),this.sendFeedbackEmail(t),this.autoResize();var n=this;a.setTimeout(function(){n.closePanel()},8e3)},map:function(e){e.preventDefault();for(var t=e.target;!c(t).data("type");)t=t.parentNode;var n=c(t).data("type");c(".step1",this.el).hide(),c(".step2",this.el).show(),c(".step2 ."+n+"Details",this.el).show(),this.trigger("resize")},back:function(e){if(e.preventDefault(),this.showingFormTypes)return delete this.showingFormTypes,this.setupModel(),void this.render();if("root"!=this.currentRoot){if(this.currentRoot.match(/.*\.[0-9]+$/)){var t=this.currentRoot.lastIndexOf("."),n=this.currentRoot.substring(t+1);this.currentRoot=this.currentRoot.substring(0,t),-1!=(t=this.currentRoot.lastIndexOf("."))&&(this.currentRoot=this.currentRoot.substring(0,t)+"."+n),this.currentRoot.match(/^root\.[0-9]+$/)&&(this.currentRoot="root")}else this.currentRoot=this.currentRoot.substring(0,this.currentRoot.lastIndexOf("."));return this.setupModel(),void this.render()}this.$(".step1").is(":visible")?(this.ignoreBlur(!1),this.focusField(),this.closePanel()):(c(".step2 .details",this.el).hide(),c(".step2",this.el).hide(),c(".step1",this.el).show(),this.trigger("resize"))},advanced:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.ignoreBlur(!1),this.options.contentManager.showMapForm(this.options),this.closePanel(e,!0),this.trigger("remove")},blacklist:function(e){var t=this,n=new s.Blacklist({domain:this.contentManager.domain});n.fetchByDomain(!0,i.bind(function(){n.set(this.options.category,e),n.set("changed",this.options.category),n.save({},{success:function(){"card"==t.options.category&&(n.set("real_card",e),n.set("changed","real_card"),n.save()),t.contentManager.reloadPreference()}})},this))},mapField:function(e){e.preventDefault();for(var t=e.target;!c(t).hasClass("mapField");)t=t.parentNode;var n=c(t).data("idx"),a=this.model.menu.models[n];if(a.get("hasChildren"))return this.currentRoot=a.get("path"),this.setupModel(),void this.render();var i=a.get("action"),s=a.get("type"),l=a.get("formType"),o=!this.contentManager.preferences.getPref("disableMapFeedback"),r=null;if(this.$(".step1, .mapFieldFooter").hide(),"show_here"==i)return this.$(".show-here").show(),this.autoResize(),this.blacklist(!1),this.ignoreBlur(!0),void this.focusField();if("dont_show_here"==i)return this.$(".dont-show-here").show(),this.autoResize(),this.blacklist(!0),this.ignoreBlur(!0),void this.focusField();if("mask_email"==i)return this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),void this.maskEmail();if("real_email"==i)this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),r=this.allData.email;else if("strong_password"==i)this.fillFields("mapField",{dataType:s,formType:null,noFocus:!0,right_click:!0}),r=this.createPassword(s);else if("fill"==i)this.fillFields("mapField",{dataType:s,formType:l,noFocus:!0,right_click:!0}),r=a.get("value");else if("mask_card"==i);else if("show_list_accounts"==i)d.webapp.openPage("/#/accounts"),o=!1;else if("show_list_cards"==i)d.webapp.openPage("/#/real_cards"),o=!1;else if("show_list_addresses"==i)d.webapp.openPage("/#/address"),o=!1;else if("show_list_identities"==i)d.webapp.openPage("/#/identities"),o=!1;else{if("report_problem"==i)return void this.showReportProblem();if("change_form_type"==i)return delete this.showingFormTypes,this.ignoreBlur(!0),this.options.formType=l,this.fillFields("mapField",{dataType:this.options.fieldType,formType:l,noFocus:o,right_click:!0}),this.setupModel(),void this.render();"form_type"==i?this.fillFields("mapField",{dataType:this.options.fieldType,formType:l,noFocus:o,right_click:!0}):this.fillFields("mapField",{dataType:s,formType:this.options.formType,noFocus:o,right_click:!0})}if(r)return this.fillFields("current",r),void this.closePanel();o?(this.$(".confirm").show(),this.ignoreBlur(!0),this.focusField(),this.autoResize()):this.closePanel()},setupModel:function(){var e=this.options.fieldType,t=this.options.formType,n=new s.MappingMenuCollection,a=this.previousTitle||null;try{n.loadMenu(this.currentRoot,e,t,this.options.panelDisabledHere,this.allData),0<n.length&&null!=n.models[0].get("panelTitle")&&(this.previousTitle=a=n.models[0].get("panelTitle"))}catch(i){}this.model={iconClick:!!this.options.iconClick,menu:n,title:a}},maskEmail:function(){if(c(".step1").hide(),c(".loading").show(),this.primaryEmail){var e=this.primaryEmail.generateDisposable(this.options.domain,"dnt-panel");e.save({},{success:i.bind(function(){this.fillFields("current",e.getAddress(),{origin:"disposable",disposableGUID:e.get("guid")}),this.closePanel()},this),error:i.bind(function(){this.closePanel()},this)})}},showReportProblem:function(){c(".step1").hide(),c(".report").show(),this.autoResize()},createPassword:function(e){var t={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"};return e in t?r[t[e]]():r.generateNoSpecialCharsPassword()},afterInitialize:function(){this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.currentRoot="root",this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.allData={account:new s.AccountCollection,address:new s.AddressCollection,card:new s.RealCardCollection,identity:new s.IdentityCollection,phone:new s.DisposablePhoneCollection,email:null};var t=new s.ShieldedPhoneCollection,n=this;a.setTimeout(function(){var e=new s.ShieldedEmailCollection;e.fetchAll({success:function(){0<e.length&&(n.allData.email=e.at(0).get("email"),n.primaryEmail=e.at(0)),n.allData.account.fetchLoginsByDomain(n.options.domain,function(){n.allData.address.fetchAll({success:function(){n.allData.address.remove(n.allData.address.at(n.allData.address.length-1)),n.allData.card.fetchAll({success:function(){n.allData.identity.fetchAll({success:function(){t.fetchAll({success:function(){n.allData.phone.fetchAll({success:function(){if(0<t.length&&t.models[0].get("country_code")){var e=t.models[0];e.set("type","real"),n.allData.phone.add(new s.DisposablePhone(e.toJSON()))}i.each(n.allData.identity.models,function(e){if(e.get("phone")&&e.get("phone").match(/^[0-9\+\s]+$/)){var t=e.get("phone").split(" ");n.allData.phone.add(new s.DisposablePhone({country_code:t[0].replace(/[^0-9]+/g,""),number:t[1].replace(/[^0-9]+/g,""),type:"real"}))}}),n.setupModel(),n.render()}})}})}})}})}})})}})},10),this.model={iconClick:!!this.options.iconClick,loading:!0,menu:[]},this.panelId=8000011,this.updatePanelActivity("impression",this.panelId),this.render()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n    <div style="padding-left: 10px;">\n      <b>',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.label",{hash:{}})),i+=v(n)+"</b> ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasVisible"),a=s.unless,(m=g.program(2,l,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+='\n      <div style="padding-left: 10px;">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"text"),((n=typeof(a=s.nl2br||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nl2br"))===f?a.call(e,n,{hash:{}}):a===_?b.call(e,"nl2br",n,{hash:{}}):a)||0===n)&&(i+=n),i+="</div>\n    </div>\n  "}function l(){return'<span style="color:orange;">(ensure these fields are visible)</span>'}function o(e,t){var n,a,i="";return i+='\n        <tr class="field ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),a=s["if"],(m=g.program(5,r,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+='" data-signature="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.signature",{hash:{}})),i+=v(n)+'" data-type="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.dataType",{hash:{}})),i+=v(n)+'" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),a=s.unless,(m=g.program(7,c,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+='>\n          <td>\n              <span class="lbl"></span><br/>\n              <span class="sign" title="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.label",{hash:{}})),i+=v(n)+'" style="font-size:8pt;color:Grey;">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.shortLabel",{hash:{}})),i+=v(n)+'</span>\n          </td>\n          <td><select class="fill-status">\n            <option value="">-- Please Select --</option>\n            <option value="ok">Filled Correctly</option>\n            <option value="empty" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),a=s.unless,(m=g.program(9,d,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+='>Not Filled</option>\n            <option value="bad">Wrong Value</option>\n            <!--option value="isvisible">Field Invisible</option-->\n            <!--option value="mapping">Incorrect Mapping</option-->\n          </select></td>\n        </tr>\n      '}function r(){return"canFill"}function c(){return'style="display:none;"'}function d(){return"selected"}s=s||e.helpers,n=n||e.partials;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Auto Fill Form</div>\n  <div style="display: none;">\n    ',h=t,((h=g.invokePartial(n["common.form_types"],"common.form_types",h,s,n))||0===h)&&(u+=h),u+="\n    ",h=t,((h=g.invokePartial(n["common.field_types"],"common.field_types",h,s,n))||0===h)&&(u+=h),u+='\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',h="mm_map_form_type",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+': <span class="form-type"></span></div>\n\n  <div class="step1" style="">\n    <div style="text-decoration: underline">Sample data to fill:</div>\n  ',h=s.dummyData||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dummyData"),p=s.each,(m=g.program(1,i,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n  </table>\n  </div>\n  <div class="step2" style="display: none;border-top: 1px solid black;">\n    <div style="margin: 5px 0;font-weight: bold;">Please review all fields and give your feedback: <span class="allOk" style="font-weight: normal;color:blue;cursor:pointer;">[All OK]</span></div>\n    <div class="clearfix" style="max-height: 200px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n      <table>\n      ',h=s.fields||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),p=s.each,(m=g.program(4,o,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n      </table>\n    </div>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix progress-msg" style="margin: 5px;text-align: center;color: green;display: none;">\n    <img class="loading" src="',h="/pages/images/ajax_loader.gif",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/>\n    Please wait...  Filling form with sample data.\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;text-align: right;">\n    <div class="btn btn-primary fillBtn" style="margin-right:5px;">',h="mm_auto_fill_fill",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</div>\n    <div class="btn btn-info allFieldsBtn" style="margin-right:5px;display: none;">Show All Fields</div>\n    <div class="btn btn-primary saveBtn" style="margin-right:5px;display: none;">',h="mm_auto_fill_save",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</div>\n    <div class="btn cancel">',h="mm_map_form_cancel",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',h="/pages/images/dnt-ui-header-logo.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',h="/pages/images/dnt-ui-header-close.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',h="/pages/images/dnt-ui-header-help.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel}),ABINE_DNTME.define("abine/views/autoFillPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(o,r,e,c,t,n,a,i){function l(e,t){var n="",a="";return e.match(/postal|city|state|country/)?(n="Address",a="address"):e.match(/financial/)?(n="Credit Card",a="payment"):e.match(/phone/)?(n="Phone",a="phone"):e.match(/email|username|password/)&&"loginForm"==t?(n="Login",a="login-no-submit"):e.match(/email/)?(n="Email",a="email"):e.match(/password/)&&(n="Password",a="password"),e.match(/home/)&&(n="Home "+n),e.match(/shipping/)&&(n="Shipping "+n),e.match(/billing/)&&(n="Billing "+n),e.match(/business/)&&(n="Business "+n),s[n]?"string"!=typeof s[n]&&e in s[n]?{group:n,value:s[n][e],type:a}:{group:n,value:s[n],type:a}:null}var s={Email:"email-reg@abine.com",Password:{"/password/login":"#password123#","/password":"#password123#","/password/differentSpecialChars":"password-123","/password/noSpecialChars":"password123","/password/noNumbers":"passwordNoNumber","/passwordold":"loginPassword"},Login:new c.Account({username:"JohnDoe11",email:"email-login@abine.com",password:"loginPassword"}),Phone:new c.DisposablePhone({country_code:"1",number:"6162223333"}),"Home Phone":new c.DisposablePhone({country_code:"1",number:"7173334444"}),"Work Phone":new c.DisposablePhone({country_code:"1",number:"5154445555"}),"Mobile Phone":new c.DisposablePhone({country_code:"1",number:"4145556666"}),"Fax Phone":new c.DisposablePhone({country_code:"1",number:"3136667777"}),"Credit Card":new c.RealCard({number:"4539443037367905",cvc:"432",expiry_month:"10",expiry_year:"2019",first_name:"Tom",last_name:"Jerry",type:"visa"}),Address:new c.Address({address1:"50 Franklin Street",address2:"3rd Floor",city:"boston",state:"MA",zip:"02110",country:"US"}),"Billing Address":new c.Address({address1:"933 E. 56th St.",address2:"#234",city:"Chicago",state:"IL",zip:"60637",country:"US"}),"Shipping Address":new c.Address({address1:"174 W. 18th Ave.",address2:"#345",city:"Columbus",state:"OH",zip:"43210",country:"US"}),"Business Address":new c.Address({address1:"373 W. Geneva St.",address2:"#456",city:"Wms. Bay",state:"WI",zip:"53191",country:"US"}),"Home Address":new c.Address({address1:"JILA CB 440",address2:"#567",city:"Boulder",state:"CO",zip:"80309",country:"US"})};return t.extend({templateName:"autofill_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .saveBtn":"save","click .allFieldsBtn":"showAllFields","click .allOk":"allOk","click .fillBtn":"fill","click .cancel":"cancel"},logClose:function(){this.closePanel()},cancel:function(){this.closePanel()},openHelp:function(e){if(r(e.target).hasClass("num-trackers"))return!1;i.webapp.openHelp("/email"),this.closePanel()},showAllFields:function(){this.$(".field").show(),this.$(".allFieldsBtn").hide()},allOk:function(){this.$(".canFill .fill-status").val("ok")},fill:function(){var a=this;this.$(".progress-msg").show(),this.$(".fillBtn").hide(),a.autoResize(),o.async.forEachSeries(this.model.dummyData,function(e,t){var n=o.find(e.fields,function(e){return"select"!=e.type});a.options.contentManager.focusField(a.options.strategyId,n.signature),a.options.contentManager.fillFields(e.type,a.options.strategyId,n.signature,e.value),setTimeout(t,2e3)},function(){a.$(".progress-msg").hide(),a.$(".step2, .saveBtn, .allFieldsBtn").show(),a.autoResize()})},save:function(e){e.preventDefault(),this.$(".error").hide();var i={},s=!1;if(o.each(this.options.fields,function(e){i[e.signature]={signature:e.signature,label:e.label,data_type:e.dataType,can_fill:e.canFill,group:e.group}}),this.$(".field").each(o.bind(function(e,t){if(!s){var n=r(t).data("signature"),a=r("select",t).val();if(""==a&&(a=null),!a)return this.$(".error").text("Please set status for all fields.").show(),s=!0,this.$("select",t)[0].scrollIntoView(),void this.trigger("resize");i[n].status=a}},this)),!s){this.$(".saveBtn").hide(),this.$(".error").text("Please wait. Sending your feedback...").show(),this.autoResize();var l=this.contentManager;l.getValue("autofill.data",this.strategyId,this.fieldId,o.bind(function(t){var n=[],a={signature:this.model.signature,form_type:this.model.formType,domain:l.domain,url:l.href,mapper:l.preferences.getPref("autofill:mapper"),batch:l.preferences.getPref("autofill:batch"),external_id:l.preferences.getPref("autofill:form:id"),fields:n,status:"ok"};o.each(i,o.bind(function(e){t[e.signature]&&(e.value=t[e.signature].value,e.fill_type=t[e.signature].fillType),"ok"!=e.status&&e.can_fill&&(a.status="review"),n.push(e)},this)),(new c.AutofillFeedback).save(a,{success:o.bind(function(){this.closePanel()},this)})},this))}},setupModel:function(){this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,signature:this.options.formSignature,fields:this.options.fields}},afterInitialize:function(){var a=this;this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.setupModel();this.contentManager.preferences.getPref("autofill:mapper");var e=this.options.fields,i={},s=[];this.model.dummyData=s,o.each(e,function(e){if(e.dataType){var t=l(e.dataType,a.model.formType);if(t)if(e.canFill=!0,e.group=t.group,t.group in i)i[t.group].fields.push(e),e.visible&&(i[t.group].hasVisible=!0);else{var n={label:t.group,type:t.type,text:"string"==typeof t.value?t.value:t.value.getFormattedText(),value:"string"==typeof t.value?t.value:t.value.attributes,fields:[e],hasVisible:e.visible};s.push(n),i[t.group]=n}else e.canFill=!1}else e.canFill=!1}),this.on("render",o.bind(function(){var n=this.model.formType;this.$("#formType").val(n);var t=this;this.$(".field").hover(function(){var e=r(this).data("signature");t.addFieldBorder(e)},function(){var e=r(this).data("signature");t.removeFieldBorder(e)});var a={};this.$("select.fieldTypes option").each(function(e,t){a[t.value]=t.text}),this.$("#formType option").each(function(e,t){t.value==n&&r(".form-type").text(t.text)}),this.$(".field").each(function(e,t){var n=r(t).data("type");r("td span.lbl",t).text(a[n])})},this)),this.render()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel=e.template(function(e,t,a,i,n){function s(e){var t,n="";return n+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"))===m?t=t.call(e,{hash:{}}):t===g&&(t=u.call(e,"this.signature",{hash:{}})),n+=f(t)+'"\n           data-type="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"))===m?t=t.call(e,{hash:{}}):t===g&&(t=u.call(e,"this.dataType",{
hash:{}})),n+=f(t)+'">\n        <span title="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===m?t=t.call(e,{hash:{}}):t===g&&(t=u.call(e,"this.label",{hash:{}})),n+=f(t)+'">',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"))===m?t=t.call(e,{hash:{}}):t===g&&(t=u.call(e,"this.shortLabel",{hash:{}})),n+=f(t)+"</span>\n        <br/>\n        ",t=e,((t=p.invokePartial(i["common.field_types"],"common.field_types",t,a,i))||0===t)&&(n+=t),n+="\n      </div>\n    "}function l(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function o(){return'<a href="#" id="next" title="Next form">>></a>'}a=a||e.helpers,i=i||e.partials;var r,c,d,h="",p=this,m="function",u=a.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">\n    ',r="mm_map_form_title",r=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'\n    <a href="https://dnt.abine.com/#/help/mapform" target="newtab">',r="mm_map_form_title_more_info",r=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'</a>\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',r="mm_map_form_type",r=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+"<br/>\n    ",r=t,((r=p.invokePartial(i["common.form_types"],"common.form_types",r,a,i))||0===r)&&(h+=r),h+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',r="mm_map_form_fields",r=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+"</div>\n  <div>",r="mm_map_field_instructions",r=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n    ',r=a.fields||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),c=a.each,(d=p.program(1,s,n)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',r=a.prev||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),c=a["if"],(d=p.program(3,l,n)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+="\n      ",r=a.next||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),c=a["if"],(d=p.program(5,o,n)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">',r="mm_map_form_save",r=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'</div>\n      <div class="btn cancel">',r="mm_map_form_cancel",r=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'</div>\n    </div>\n  </div>\n\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',r="/pages/images/dnt-ui-header-logo.png",r=typeof(c=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"assetUrl",r,{hash:{}}):c,h+=f(r)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',r="/pages/images/dnt-ui-header-close.png",r=typeof(c=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"assetUrl",r,{hash:{}}):c,h+=f(r)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',r="/pages/images/dnt-ui-header-help.png",r=typeof(c=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"assetUrl",r,{hash:{}}):c,h+=f(r)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel}),ABINE_DNTME.define("abine/views/mapFormPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(c,d,e,t,n,a,i,s){return n.extend({templateName:"mapform_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","change #formType":"formTypeChanged","click #prev":"previousForm","click #next":"nextForm","click .save":"save","click .cancel":"cancel"},formTypeChanged:function(){var i=this.$("#formType").val(),s={loginForm:["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"],registrationForm:["person-grp","security-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],checkoutForm:["card-grp","address-grp","phone-grp","person-grp","security-grp","combined-grp","date-grp"],changePasswordForm:["security-grp","person-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],"default":["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"]},e=this.$(".fieldTypes");c.each(e,function(n){var e=d(n).val(),a=d(".start",n),t=s["default"];i in s&&(t=s[i]),c.each(t,function(e){var t=d("."+e,n);c.each(t,function(e){d(e).insertAfter(a),a=e})}),d(n).val(e)}),this.$("select.fieldTypes").chosen("destroy").chosen()},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){if(d(e.target).hasClass("num-trackers"))return!1;s.webapp.openHelp("/email"),this.closePanel()},save:function(e){e.preventDefault(),this.$(".error").hide();var i=this.$("#formType").val();if(""==i)return this.$("#formType")[0].scrollIntoView(),void this.$(".error").show();var s={},l=!1,o=0,r=0;if(this.$(".field").each(c.bind(function(e,t){if(!l){var n=d(t).data("signature"),a=d("select",t).val();if(""==a&&(a=null),!a&&"ignoreForm"!=i)return this.$(".error").text("Please set type for all fields.").show(),l=!0,this.$("select",t)[0].scrollIntoView(),void this.trigger("resize");a.match(/financial/)&&r++,a.match(/postal|city|state|country/i)&&o++,s[n]=a}},this)),!l){if("checkoutForm"==i&&o<3&&r<3)return this.$(".error").text("Checkout forms should have address and/or credit card fields.").show(),void this.trigger("resize");this.fillFields("mapForm",{formType:i,fieldTypes:s,mappingChanged:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()}},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:0<this.curIdx,next:this.curIdx+1<e.length}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId),this.setupModel();var i=this.contentManager.preferences.getPref("mapping:mapper");this.options.fields;this.on("render",c.bind(function(){var a=new t.MappedFormCollection({messenger:this.contentManager.messenger});a.fetchLocalAllByDomain(this.options.domain,c.bind(function(){var e=this.model.formType,t=this.options.formSignature;i&&(c.find(a.models,function(e){return e.get("signature")==t})||(this.$(".field").each(function(e,t){d(t).data("type","")}),e=""));this.$("#formType").val(e);var n=this;this.$(".field").hover(function(){var e=d(this).data("signature");n.addFieldBorder(e)},function(){var e=d(this).data("signature");n.removeFieldBorder(e)}),this.$(".field").each(function(e,t){var n=d(t).data("type");d("select",t).val(n)}),this.formTypeChanged()},this))},this)),this.render()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel=e.template(function(e,t,s,a,n){function i(e,t){var n,a,i="";return i+="\n        <option ",n=s.verified||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),a=s["if"],(u=f.program(2,l,t)).hash={},(u.fn=u).inverse=f.noop,((n=a.call(e,n,u))||0===n)&&(i+=n),i+=' value="',typeof(n=s.mapping_signature||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapping_signature"))===b?n=n.call(e,{hash:{}}):n===v&&(n=_.call(e,"mapping_signature",{hash:{}})),i+=E(n)+'">\n          ',typeof(n=s.created_at||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"created_at"))===b?n=n.call(e,{hash:{}}):n===v&&(n=_.call(e,"created_at",{hash:{}})),i+=E(n)+" - ",typeof(n=s.num_mappers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"num_mappers"))===b?n=n.call(e,{hash:{}}):n===v&&(n=_.call(e,"num_mappers",{hash:{}})),i+=E(n)+" mapper(s) ",n=s.verified||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),a=s["if"],(u=f.program(4,o,t)).hash={},(u.fn=u).inverse=f.noop,((n=a.call(e,n,u))||0===n)&&(i+=n),i+="\n          ",n=s.self||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"self"),a=s["if"],(u=f.program(6,r,t)).hash={},(u.fn=u).inverse=f.noop,((n=a.call(e,n,u))||0===n)&&(i+=n),i+="\n        </option>\n      "}function l(){return'style="color:green !important;font-weight: bold !important;"'}function o(){return" - approved"}function r(){return" - (you) "}function c(e){var t,n="";return n+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"this.signature",{hash:{}})),n+=E(t)+'"\n           data-type="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"this.dataType",{hash:{}})),n+=E(t)+'">\n        <span title="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"this.label",{hash:{}})),n+=E(t)+'">',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"this.shortLabel",{hash:{}})),n+=E(t)+"</span>\n        <br/>\n        ",t=e,((t=f.invokePartial(a["common.field_types"],"common.field_types",t,s,a))||0===t)&&(n+=t),n+="\n      </div>\n    "}function d(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function h(){return'<a href="#" id="next" title="Next form">>></a>'}s=s||e.helpers,a=a||e.partials;var p,m,u,g="",f=this,b="function",_=s.helperMissing,v=void 0,E=this.escapeExpression;return g+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Review Form Mapping</div>\n\n  <div class="fieldSet" style="margin-top: 5px;">Select Mapping:<br/>\n    <select id="mapping">\n      <option value="">- create new -</option>\n      ',p=s.mappings||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mappings"),m=s.each,(u=f.program(1,i,n)).hash={},(u.fn=u).inverse=f.noop,((p=m.call(t,p,u))||0===p)&&(g+=p),g+='\n    </select></div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',p="mm_map_form_type",p=typeof(m=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"intl",p,{hash:{}}):m,g+=E(p)+"<br/>\n    ",p=t,((p=f.invokePartial(a["common.form_types"],"common.form_types",p,s,a))||0===p)&&(g+=p),g+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',p="mm_map_form_fields",p=typeof(m=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"intl",p,{hash:{}}):m,g+=E(p)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;">\n    ',p=s.fields||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),m=s.each,(u=f.program(8,c,n)).hash={},(u.fn=u).inverse=f.noop,((p=m.call(t,p,u))||0===p)&&(g+=p),g+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',p=s.prev||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),m=s["if"],(u=f.program(10,d,n)).hash={},(u.fn=u).inverse=f.noop,((p=m.call(t,p,u))||0===p)&&(g+=p),g+="\n      ",p=s.next||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),m=s["if"],(u=f.program(12,h,n)).hash={},(u.fn=u).inverse=f.noop,((p=m.call(t,p,u))||0===p)&&(g+=p),g+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">Save and Approve</div>\n      <div class="btn cancel">',p="mm_map_form_cancel",p=typeof(m=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"intl",p,{hash:{}}):m,g+=E(p)+'</div>\n    </div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',p="/pages/images/dnt-ui-header-logo.png",p=typeof(m=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"assetUrl",p,{hash:{}}):m,g+=E(p)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',p="/pages/images/dnt-ui-header-close.png",p=typeof(m=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"assetUrl",p,{hash:{}}):m,g+=E(p)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',p="/pages/images/dnt-ui-header-help.png",p=typeof(m=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"assetUrl",p,{hash:{}}):m,g+=E(p)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel}),ABINE_DNTME.define("abine/views/mapReviewPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/views/mapFormPanel"],function(s,l,e,t,n,a,i,o,r){var c=n.extend({templateName:"mapreview_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .save":"save","click #prev":"previousForm","click #next":"nextForm","click .cancel":"cancel","change #formType":"formTypeChanged","change #mapping":"mappingChanged"},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){if(l(e.target).hasClass("num-trackers"))return!1;o.webapp.openHelp("/email"),this.closePanel()},save:function(e){e.preventDefault();this.options.contentManager,this.fields;var t=this.$("#formType").val(),i={};this.$(".field").each(s.bind(function(e,t){var n=l(t).data("signature"),a=l("select",t).val();""==a&&(a=null),i[n]=a},this)),this.fillFields("mapForm",{formType:t,fieldTypes:i,mappingChanged:!0,verified:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:0<this.curIdx,next:this.curIdx+1<e.length,mappings:this.mappings}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},mappingChanged:function(){var e=this.$("#mapping")[0].selectedIndex;if(0<=--e){var i=this.model.mappings[e];this.$("#formType").val(i.formType),this.$(".field").each(function(e,t){var n=l(t).data("signature"),a=s.find(i.fields,function(e){return e.signature==n});l("select",t)[0].selectedIndex=0,a&&l("select",t).val(a.dataType)})}else{this.fields;this.$("#formType").val(this.model.formType),this.$(".field").each(function(e,t){var n=l(t).data("type");l("select",t).val(n)})}this.formTypeChanged()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.mappings=this.options.mappings,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.setupModel(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId);var t=this;this.on("render",s.bind(function(){this.$(".field").hover(function(){var e=l(this).data("signature");t.addFieldBorder(e)},function(){var e=l(this).data("signature");t.removeFieldBorder(e)}),0<this.model.mappings.length&&(this.$("#mapping")[0].selectedIndex=1),this.mappingChanged()},this)),this.render()}});return c.prototype.formTypeChanged=r.prototype.formTypeChanged,c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.identity_helper_panel=e.template(function(e,t,s,n,a){function i(e){var t,n,a,i="";return i+='\n      <a href="#" class="mmKeyOption identity" data-id="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"this.id",{hash:{}})),i+=v(t)+'">\n        <div class="element" id="mask">\n        <span class="panelLeft" title="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"this.label",{hash:{}})),i+=v(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/identity_green.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'"\n                 style="width:42px;height:21px;"/>\n          ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),n="mm_identity_helper_use",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?a.call(e,n,t,{hash:{}}):a===_?b.call(e,"intl",n,t,{hash:{}}):a,i+=v(t)+'\n        </span>\n        <span class="panelRight">\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'"/>\n        </span>\n        </div>\n      </a>\n    '}function l(e){var t,n,a="";return a+="\n          ",t="mm_identity_helper_customize",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+"\n        "}function o(e){var t,n,a="";return a+="\n          <b>",t="mm_identity_helper_customize_pre_setup_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+"</b> ",t="mm_identity_helper_customize_pre_setup_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+"\n        "}function r(e,t){var n,a,i="";return i+="\n              ",n=s.masked||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"masked"),a=s.unless,(m=g.program(8,c,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n            "}function c(e){var t,n="";return n+='\n              <option value="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"id",{hash:{}})),n+=v(t)+'">',typeof(t=s.label||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"label",{hash:{}})),n+=v(t)+"</option>\n              "}function d(e){var t,n="";return n+='\n              <option value="',typeof(t=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"email",{hash:{}})),n+=v(t)+'">',typeof(t=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"email",{hash:{}})),n+=v(t)+"</option>\n            "}s=s||e.helpers,n=n||e.partials;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+='<div class="newpanel">\n  <div class="left-panel">\n      <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n          <span class="panelLeft">\n              <a>',h="mm_email_helper_serverIsDown",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</a>\n          </span>\n          <span class="panelRight">\n              <a>',h="mm_email_helper_tryAgainLater",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+"</a>\n          </span>\n      </div></span>\n    ",h=s.identities||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"identities"),p=s.each,(m=g.program(1,i,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n    <a href="#" class="mmKeyOption customize">\n      <div class="element" id="mask">\n      <span class="panelLeft">\n          <img class="iconPos" src="',h="/pages/images/2015panels/identity_green.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"\n               style="width:42px;height:21px;"/>\n        ',h=s.hasIdentities||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasIdentities"),p=s["if"],(m=g.program(3,l,a)).hash={},(m.fn=m).inverse=g.program(5,o,a),((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n      </span>\n      </div>\n    </a>\n\n    <div class="customizeDiv" style="display: none;">\n      <div class="identity-header">',h="mm_identity_helper_customize_title",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</div>\n      <div style="display:inline-block;vertical-align:top;padding-left: 15px;">\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_address" value="1" checked/> <span>',h="mm_identity_helper_address",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</span></label>\n          <select id="address_id">\n            ',h=s.addresses||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),p=s.each,(m=g.program(7,r,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_email" value="1" checked/> <span>',h="mm_identity_helper_email",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</span></label>\n          <select id="email">\n            <option value="mask">',h="mm_identity_helper_email_mask",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+"</option>\n            ",h=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),p=s["if"],(m=g.program(10,d,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_phone" value="1" checked/> <span>',h="mm_identity_helper_phone",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</span></label>\n          <select id="phone">\n            <option value="mask">',h="mm_identity_helper_phone_mask",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</option>\n            <option value="real">',h="mm_identity_helper_phone_real",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</option>\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="password" value="1" checked/> ',h="mm_identity_helper_password",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="card" value="1" checked/> ',h="mm_identity_helper_card",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="save" value="1" checked /> ',h="mm_identity_helper_save_identity",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</label>\n          <input type="text" id="idName" value="',typeof(h=s.uniqueName||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"))===f?h=h.call(t,{hash:{}}):h===_&&(h=b.call(t,"uniqueName",{hash:{}})),u+=v(h)+'" placeholder="',typeof(h=s.uniqueName||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"))===f?h=h.call(t,{hash:{}}):h===_&&(h=b.call(t,"uniqueName",{hash:{}})),u+=v(h)+'"/>\n        </div>\n      </div>\n      <div class="alert-error" style="display: none">',h="mm_identity_helper_save_identity_error",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</div>\n      <br/>\n      <input type="button" class="btn btn-primary fillCustomize" value="',h="mm_identity_helper_autofill_form",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'"/>\n      <img class="loading" style="display:none;" src="',h="/pages/images/ajax_loader.gif",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/>\n      <a href="#" id="more">',h="mm_identity_helper_more_options",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+"</a>\n    </div>\n    ",h=t,((h=g.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",h,s,n))||0===h)&&(u+=h),u+="\n  </div>\n  ",h=t,((h=g.invokePartial(n["common.header"],"common.header",h,s,n))||0===h)&&(u+=h),u+="\n</div>"}),ABINE_DNTME.CompiledTemplates.identity_helper_panel}),ABINE_DNTME.define("abine/views/identityHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies","abine/password"],function(l,o,e,r,t,a,n,c){function i(){for(var e=[],t="0123456789ABCDEF",n=0;n<32;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[12]="4",e[16]=t.substr(3&e[16]|8,1),e.join("")}return t.extend({templateName:"identity_helper_panel",events:{"click a.identity":"fillWithIdentity","click .help-link":"openHelp","click a.customize":"customize","change select":"valueChanged","click .errorReportLink":"makeErrorReport","change #idName":"valueChanged","click #more":"moreOptions","click .fillCustomize":"fillCustomize"},makeErrorReport:function(){n.webapp.openHelp(""),this.closePanel()},openHelp:function(){n.webapp.openHelp("/faq/guides-autofillIdentities"),this.closePanel()},moreOptions:function(){n.webapp.openPage("#/client/identities/add"),this.closePanel()},valueChanged:function(e){o("input[type=checkbox]",o(e.target).parent()).prop("checked",!0)},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000061,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"identity",identities:new r.IdentityCollection,addresses:new r.AddressCollection,emails:[],phones:[],mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("identity-settings-seen")},this.model.tabData=new r.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:l.bind(function(){var e=new r.ShieldedEmailCollection;e.fetchAll({success:l.bind(function(){0<e.length&&(this.primaryEmail=e.at(0),this.model.email=this.primaryEmail.get("email")),this.model.addresses.fetchAll({success:l.bind(function(){this.model.addresses.each(function(e){"Masked Card"==e.get("label")&&e.set("masked",!0)}),this.model.identities.fetchAll({success:l.bind(function(){this.numMenuOptions=this.model.identities.length,this.model.hasIdentities=0<this.numMenuOptions;for(var e=0;e<this.numMenuOptions;e++)this.bind("enter"+e,function(e,t){this.fillWithIdentity(e,t)},this);for(var t=a.getText("mm_identity_helper_save_identity_placeholder")+" ",n=1;;){if(!l.find(this.model.identities.models,function(e){return e.get("label").toLowerCase()==(t+n).toLowerCase()}))break;n++}this.model.uniqueName=t+n,this.render()},this)})},this)})},this)})},this)})},customize:function(){this.ignoreExplicitClose=!0,this.ignoreBlur(!0),this.$(".customizeDiv").show(),this.$(".mmKeyOption").hide(),this.autoResize()},fillCustomize:function(){function e(){var e=this.$("a.customize");e.data("id",t.id),n.fillWithIdentity({target:e[0]},null,t)}var t={};this.$("#has_address")[0].checked&&(t.address_id=this.$("#address_id").val(),t.address=l.find(this.model.addresses.models,function(e){return e.id==t.address_id}).toJSON()),this.$("#has_email")[0].checked?t.email=this.$("#email").val():t.email="none",this.$("#has_phone")[0].checked?t.phone=this.$("#phone").val():t.phone="none",this.$("#password")[0].checked&&(t.password="strong"),this.$("#card")[0].checked&&(t.card="mask"),t=new r.Identity(t);var n=this;if(this.$(".alert-error").hide(),this.$("#save")[0].checked){if(""==this.$("#idName").val())return this.$(".alert-error").show(),void this.autoResize();this.$(".customizeDiv .loading").show(),t.set("label",this.$("#idName").val()),t.save({},{success:e})}else t.id=i(),e()},fillWithIdentity:function(e,t,a){var n;if(e&&e.preventDefault&&e.preventDefault(),t||0==t){var i=this.getKeyOptions();n=o(i[t]).data("id")}else n=o(e.target).closest("a").data("id");a=a||l.find(this.model.identities.models,function(e){return e.get("id")==n}),o("a.mmKeyOption",this.el).each(function(e,t){o(t).data("id")==a.id&&o("img.loading",t).show()}),a=a.toJSON();var s=this;l.async.series([function(e){if("mask"==a.email){if(l.find(s.options.allDataTypes,function(e){return e.match(/email/i)})&&s.primaryEmail){delete a.email;var t=s.primaryEmail.generateDisposable(s.options.domain,"identity-panel");return void t.save({},{success:function(){a.masked_email=t.getAddress(),e()},error:function(){s.$(".errorBtn").show(),s.$(".loading").hide(),s.autoResize()}})}delete a.email}else a.email&&"none"!=a.email||delete a.email;e()},function(t){var n;if("mask"!=a.phone)if("real"!=a.phone){if(a.phone&&"none"!=a.phone){var e=a.phone.split(" ");a.phone={country_code:e[0].substr(1),number:e[1]}}else delete a.phone;t()}else(n=new r.ShieldedPhoneCollection).fetchAll({success:function(){0<n.length&&n.at(0).get("country_code")?a.phone=n.at(0).toJSON(
):delete a.phone,t()}});else(n=new r.ShieldedPhoneCollection).fetchAll({success:function(){if(0<n.length&&n.at(0).get("country_code")){var e=n.at(0).generateDisposable();e.save({filling:!0},{success:function(){a.phone=e.toJSON(),t()},error:function(){t()}})}else delete a.phone,t()}})},function(e){"strong"==a.password?a.password=c.generateNoSpecialCharsPassword():delete a.password,e()}],function(){a.address?a.address&&(a.first_name||a.last_name||(a.address.first_name&&(a.first_name=a.address.first_name),a.address.last_name&&(a.last_name=a.address.last_name)),delete a.address.first_name,delete a.address.last_name):delete a.address,a.card&&"none"!=a.card||delete a.card,s.fillFields("identity",a,"identity"),s.updatePanelActivity("masked",s.panelId,s.fieldId,!1),s.closePanel()})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card",e.template(function(e,t,n){var a,i,s,l,o="",r="function",c=(n=n||e.helpers).helperMissing,d=void 0,h=this.escapeExpression;return o+='<div class="body-notification outerCard opaque" data-id="',typeof(a=n.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"id",{hash:{}})),o+=h(a)+'" data-pos="',typeof(a=n.card_position||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card_position"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"card_position",{hash:{}})),o+=h(a)+'">\n  <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n    <div class="innerCard set-brand ',typeof(a=n.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"brand",{hash:{}})),o+=h(a)+'"\n         style="background-image: url(',a=".png",i=n.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"),s="pages/images/credit_cards/",o+=h(a=typeof(l=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?l.call(t,s,i,a,{hash:{}}):l===d?c.call(t,"assetUrl",s,i,a,{hash:{}}):l)+');">\n\n      <div class="cardNumber">',typeof(a=n.getSeparatedCardNumber||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"getSeparatedCardNumber",{hash:{}})),o+=h(a)+'</div>\n      <div class="cardExpiration">',a="mm_payment_helper_expDate",o+=h(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?i.call(t,a,{hash:{}}):i===d?c.call(t,"intl",a,{hash:{}}):i)+' <span class="expiration">',typeof(a=n.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"getExpiry",{hash:{}})),o+=h(a)+'</span></div>\n      <div class="cardCVC">',a="mm_payment_helper_cvc",o+=h(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?i.call(t,a,{hash:{}}):i===d?c.call(t,"intl",a,{hash:{}}):i)+' <span class="cvc">',typeof(a=n.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"getCVC",{hash:{}})),o+=h(a)+'</span></div>\n      <div class="cardName">',typeof(a=n.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"first_name"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"first_name",{hash:{}})),o+=h(a)+" ",typeof(a=n.last_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"last_name"))===r?a=a.call(t,{hash:{}}):a===d&&(a=c.call(t,"last_name",{hash:{}})),o+=h(a)+"</div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_actions",e.template(function(e,t,a,n,i){function s(){return"\n       <p>This Masked Card was created using your bank account, so it may take up to 7 business days before\n                you receive a refund after closing this Masked Card.</p>\n     "}function l(e){var t,n="";return n+=", Refund by ",typeof(t=a.refundDate||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"refundDate"))===p?t=t.call(e,{hash:{}}):t===u&&(t=m.call(e,"refundDate",{hash:{}})),n+=g(t)}a=a||e.helpers;var o,r,c,d="",h=this,p="function",m=a.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div style="height:60px;font-size:12px;" class="actions-short">\n  <div style="float:left;">\n    <div style="text-align:center;">Made a mistake?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="getRefund" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Close Card and Get Refund"/>\n    </div>\n  </div>\n  <div style="float:right;">\n    <div style="text-align:center;">Need some help?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Contact Blur Support Team"/>\n    </div>\n  </div>\n</div>\n<div style="font-size:12px;display: none;" class="actions-tall">\n  <div style="clear:both;text-align: left;padding:5px;" class="close-step-1">\n     <p style="font-size:15px;font-weight: bold;">Close Masked Card:</p>\n     <p>This will close your card. You\'ll still be able to view all its history, but the card will no longer be accepted for any transactions.</p>\n     ',o=a.isAch||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"isAch"),r=a["if"],(c=h.program(1,s,i)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d+='\n     <p>Alternatively, you can simply use this Masked Card with a different online merchant (E.g. Amazon, iTunes, Google Play, Uber).</p>\n     <div class="clearfix">\n     <div style="float:left;">\n          <div style="text-align:center;padding-bottom:5px;">\n              <input type="button" id="dontClose" class="btn btn-primary" style="text-align:center;font-size:12px"\n                     value="Nevermind, don\'t close"/>\n          </div>\n      </div>\n      <div style="float:right;">\n          <div style="text-align:center;padding-bottom:5px;">\n              <input type="button" id="confirmCloseCard" class="btn btn-danger" style="text-align:center;font-size:12px"\n                     value="Close Card',o=a.isAch||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"isAch"),r=a["if"],(c=h.program(3,l,i)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d+='"/>\n          </div>\n      </div>\n      </div>\n  </div>\n  <div class="close-step-2" style="display: none">\n      <div style="clear:both;text-align: center;margin-top:10px;">\n        <div style="text-align:center;" class="refund-status"><img class="loading" src="',o="/pages/images/ajax_loader.gif",o=typeof(r=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n            Closing card.  Please wait...</div>\n      </div>\n      <div style="clear:both;margin-top:20px;">\n        <div style="text-align:center;">Need some help?</div>\n        <div style="text-align:center;padding-bottom:5px;">\n          <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n                 value="Contact Blur Support Team"/>\n        </div>\n      </div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_address",e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div style="margin: 10px 25px;text-align:center;">\n  <div style="margin:10px 0px 5px 0px;font-size:15;color:#921111;">\n    ',a="mm_payment_helper_help_1_1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+" <b>",a="mm_payment_helper_help_1_2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</b>:\n  </div>\n</div>\n<div id="addressAndArrows" style="height:90px;">\n  <div style="float:left;margin-left:20px;margin-top:20px;">\n    <img src="',a="/pages/images/2015panels/arrow_pointing_right.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n  </div>\n  <div style="float:left;text-align:center;font-weight:bold;font-size:13pt;line-height:130%;width:250px;">\n    <span style="font-size:12pt;">(',a="mm_notification_helper_anyName",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+')</span><br/>\n    50 Franklin Street, 3rd Floor<br/>\n    Boston, MA 02110\n  </div>\n  <div style="float:left;margin-top:20px;">\n    <img src="',a="/pages/images/2015panels/arrow_pointing_left.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.login_register_form",e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<span id="register-dialog" style="display:none;">\n <div class="body-notification"><img src="',a="/images/Icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n   <span class="signin-content" style="display:none;">',a="mm_notification_helper_login_to_blur",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</span>\n   <span class="register-content" style="display:none;">',a="mm_notification_helper_finish_blur_setup",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</span>\n </div>\n  <div class="login_form">\n    <div id="welcome-message" style="margin:0px 35px;">\n      <span class="signin-content"  style="display:none;">',a=n.login_content||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"login_content"),s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</span>\n      <span class="register-content" style="display:none;">',a=n.register_content||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"register_content"),s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</span>\n    </div>\n\n    <div id="error" style="display:none;color:red;text-transform:none;"></div>\n    <div id="progress-section" style="display:none;margin-top:10px;">\n      <div class="progress progress-striped active">\n        <div class="bar bar-info" style="width: 100%;"></div>\n      </div>\n      <div class="loading-message" style="text-transform:none;"></div>\n    </div>\n\n    <div id="form-div">\n      <div id="register-form" style="display:none;">\n        <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n             class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n        </div>\n        <input id="register-protect-email" type="text" value="',typeof(a=n.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"email",{hash:{}})),s+=c(a)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',a="mm_dntme_enter_email_simple",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'"/><br/>\n        <input id="register-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',a="mm_dntme_enter_password_simple",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'"/>\n        <input id="register-confirm-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="Confirm password"/>\n        <div style="margin:10px 0px;">\n          <input type="button" id="register" class="btn btn-primary" value=\'',a="mm_dntme_create_account",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'\' style="margin-right: 10px;"/>or<a href="" id="signin-link" style="margin-left: 10px;">',a="mm_dntme_sign_in",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</a>\n        </div>\n      </div>\n\n      <div id="signin-form" style="display:none;">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="signin-protect-email" type="text" value="',typeof(a=n.oldEmail||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"oldEmail"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"oldEmail",{hash:{}})),s+=c(a)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',a="mm_dntme_enter_email_simple",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'"/><br/>\n          <input id="signin-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',a="mm_dntme_enter_password_simple",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n        <div style="margin-top:5px;">\n          <input type="button" id="login" class="btn btn-success" value=\'',a="mm_dntme_sign_in",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'\' style="margin-right: 10px;"/>or<a href="" id="register-link" style="margin-left: 10px;">',a="mm_dntme_create_an_account",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</a>\n        </div>\n        <div style="margin:10px 0px;">\n          <a href="" id="forgotPassword">',a="mm_dntme_forgot_my_password",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</a><br/>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n</span>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.masked_card",e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="body-notification outerCard" style="margin-top: 0px;">\n  <div id="maskedCard" class="creditcardfont">\n    <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',typeof(a=n.getMaskedCardImage||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getMaskedCardImage"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"getMaskedCardImage",{hash:{}})),s+=c(a)+'\');">\n      <br style="clear:both;"/>\n      <div style="text-align:right;margin-right:20px;color:white;">\n        <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',typeof(a=n.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"getOriginalValue",{hash:{}})),s+=c(a)+"</span>\n        <br/>\n        <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",a="mm_notification_helper_at",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",typeof(a=n.getDomain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"getDomain",{hash:{}})),s+=c(a)+'</span>\n      </div>\n      <div style="text-align:center;margin-top:5px;color:white;">\n        <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',typeof(a=n.getSeparatedCardNumber||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"getSeparatedCardNumber",{hash:{}})),s+=c(a)+"</h3>\n      </div>\n      <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n        <span style=\"float:left;\">",a="mm_payment_helper_expDate",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+' <span id="expiration">',typeof(a=n.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"getExpiry",{hash:{}})),s+=c(a)+'</span></span> <span style="float:right;margin-right:115px;"> ',a="mm_payment_helper_cvc",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+' <span id="cvc">',typeof(a=n.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"getCVC",{hash:{}})),s+=c(a)+"</span></span>\n      </div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification=e.template(function(e,t,a,n,i){function s(e){var t,n="";return n+="\n          ",typeof(t=null===(t=a.declined||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"declined"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"description"))===p?t=t.call(e,{hash:{}}):t===u&&(t=m.call(e,"declined.description",{hash:{}})),n+=g(t)+"\n        "}function l(){return"\n          Looks like this merchant can't or won't process this card.\n          <ul>\n            <li>Make sure you used \"Abine address\".</li>\n            <li>Make sure the expiry dates and CVV was filled correctly.</li>\n            <li>Masked cards work only with US merchants.</li>\n          </ul>\n          If that does not help, close it, and use an alternative. Sorry!\n        "}a=a||e.helpers,n=n||e.partials;var o,r,c,d="",h=this,p="function",m=a.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',o="/pages/images/blur_logo_ext_window.png",o=typeof(r=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',o="/pages/images/2015panels/panel_xclose.png",o=typeof(r=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div class="card-main">\n      <div style="margin:10px -5px 10px -10px;padding:5px 20px;" class="alert-error">\n        <div style="font-size: 14pt;font-weight: bold;margin-bottom:5px;">',typeof(o=null===(o=a.declined||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"))||o===undefined||!1===o?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"title"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"declined.title",{hash:{}})),d+=g(o)+"</div>\n        ",o=null===(o=a.declined||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"))||o===undefined||!1===o?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"description"),r=a["if"],(c=h.program(1,s,i)).hash={},(c.fn=c).inverse=h.program(3,l,i),((o=r.call(t,o,c))||0===o)&&(d+=o),d+="\n      </div>\n\n      ",o=t,((o=h.invokePartial(n["notification_helper.masked_card"],"notification_helper.masked_card",o,a,n))||0===o)&&(d+=o),d+="\n      ",o=t,((o=h.invokePartial(n["notification_helper.card_address"],"notification_helper.card_address",o,a,n))||0===o)&&(d+=o),d+="\n  </div>\n  ",o=t,((o=h.invokePartial(n["notification_helper.card_actions"],"notification_helper.card_actions",o,a,n))||0===o)&&(d+=o),d+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',a="/images/Icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>',a="mm_notification_helper_change_password_msg",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</div>\n  <input type="button" class="btn done" id="ignore" style="width:40%;text-align:center;" value="',a="mm_notification_helper_ignore",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'" />\n  <input type="button" class="btn btn-success done" id="save" style="width:35%;text-align:center;" value="',a="mm_notification_helper_save_login",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'" />\n  <div class="links settings-link" data-highlight="rememberaccounts" title="',a="mm_notification_helper_settings",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'">\n      <img class="header-icon" src="',a="/pages/images/dnt-ui-header-settings.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'">\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n      ",n=s.isOfferCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOfferCard"),a=s["if"],(m=g.program(2,l,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n\n      ",n=s.isRealCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isRealCard"),a=s["if"],(m=g.program(4,o,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n\n      ",n=s.isOldMaskedCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOldMaskedCard"),a=s["if"],(m=g.program(6,r,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n\n      ",n=s.isNewMaskedCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewMaskedCard"),a=s["if"],(m=g.program(8,c,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n\n      ",n=s.isNewRealCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewRealCard"),a=s["if"],(m=g.program(10,d,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n\n    "}function l(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',typeof(t=s.card_position||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',typeof(t=s.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"brand",{hash:{}})),n+=v(t)+'_offer"\n                 style="background-image: url(pages/images/credit_cards/',typeof(t=s.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"brand",{hash:{}})),n+=v(t)+'_offer.png);">\n            </div>\n          </div>\n        </div>\n      '}function o(e){var t,n,a="";return a+='\n        <div class="body-notification outerCard opaque" data-id="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"id",{hash:{}})),a+=v(t)+'" data-pos="',typeof(t=s.card_position||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"card_position",{hash:{}})),a+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard set-brand ',typeof(t=s.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"brand",{hash:{}})),a+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/',typeof(t=s.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"brand",{hash:{}})),a+=v(t)+'.png);">\n\n              <div class="cardNumber">',typeof(t=s.getSeparatedMaskedCardNumber||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedMaskedCardNumber"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"getSeparatedMaskedCardNumber",{hash:{}})),a+=v(t)+'</div>\n              <div class="cardExpiration">',t="mm_payment_helper_expDate",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+' <span class="expiration">',typeof(t=s.getMaskedExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedExpiry"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"getMaskedExpiry",{hash:{}})),a+=v(t)+'</span>\n              </div>\n              <div class="cardCVC">',t="mm_payment_helper_cvc",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+' <span class="cvc">',typeof(t=s.getMaskedVerification||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedVerification"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"getMaskedVerification",{hash:{}})),a+=v(t)+'</span></div>\n              <div class="cardName">',typeof(t=s.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"first_name",{hash:{}})),a+=v(t)+" ",typeof(t=s.last_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"last_name",{hash:{}})),a+=v(t)+"</div>\n            </div>\n          </div>\n        </div>\n      "}function r(e){var t,n="";return n+='\n          <div class="body-notification outerCard opaque" data-id="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',typeof(t=s.card_position||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n              <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n                  <div class="innerCard set-brand ',typeof(t=s.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                       style="background-image: url(pages/images/masked_card_existing_blank.png);">\n                      <div class="dateCreatedText" style="color:white;font-family:\'Open-sans\',sans-serif;font-size:14px;left:172px;position:relative;top:60px;">Date Created:</div>\n                      <div class="dateCreated" style="top:70px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',typeof(t=s.getCreatedDate||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCreatedDate"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"getCreatedDate",{hash:{}})),n+=v(t)+'</div>\n                      <div class="amountRemainingText" style="top:80px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:14px;left:172px;">Amount Remaining:</div>\n                      <div class="amountRemaining" style="top:90px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',typeof(t=s.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"getOriginalValue",{hash:{}})),n+=v(t)+"</div>\n                  </div>\n              </div>\n          </div>\n      "}function c(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',typeof(t=s.card_position||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',typeof(t=s.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/masked_card.png);">\n            </div>\n          </div>\n        </div>\n      '}function d(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',typeof(t=s.card_position||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',typeof(t=s.brand||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/add_card.png);">\n            </div>\n          </div>\n        </div>\n      '}s=s||e.helpers;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+='<div class="wallet">\n  <div class="newlinks settings-link">\n    <img id="settings" class="settings-notification" src="',h="/pages/images/settings_gear_stroke.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h
)+'">\n  </div>\n  <div class="newlinks close-link">\n    <img id="close" class="close-notification" src="',h="/pages/images/x_close_stroke.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'">\n  </div>\n  <div id="card-container" style="min-height:230px;position:relative;">\n    ',h=s.allCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"allCards"),p=s.each,(m=g.program(1,i,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+="\n\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',a="/images/Icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n        <span class="boldFont">Blur</span>\n    </div>\n    <div class="title">\n        ',a="mm_notification_helper_what_happened_to_email_1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"<br/>",a="mm_notification_helper_what_happened_to_email_2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"\n    </div>\n    <ol>\n        <li>\n            <b>",typeof(a=n.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"domain",{hash:{}})),s+=c(a)+"</b> ",a="mm_notification_helper_will_email_to",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+" <b>",typeof(a=n.disposable||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposable"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"disposable",{hash:{}})),s+=c(a)+'</b>.\n            <a href="#" class="learn-more">',a="mm_notification_helper_learn_more",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</a>.\n        </li>\n        <li>\n            ",a="mm_notification_helper_email_forward_to",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+" <b>",typeof(a=n.real||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"real"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"real",{hash:{}})),s+=c(a)+"</b>.\n        </li>\n        <li>\n            ",a="mm_notification_helper_block_them_1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+" <b>",typeof(a=n.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"domain",{hash:{}})),s+=c(a)+"</b> ",a="mm_notification_helper_block_them_2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+" <span id='here'>",a="mm_notification_helper_block_them_3",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</span>.\n        </li>\n    </ol>\n        <input type="button" class="btn btn-success done" style="width:25%;text-align:center;" value="',a="mm_notification_helper_got_it",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'" />\n        <a href="#" class="learn-more" style="width:25%;text-align:center;">',a="mm_notification_helper_learn_more",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</a>.\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',a="/images/Icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',a="mm_notification_helper_expire_notify_title_1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"<br/>",a="mm_notification_helper_expire_notify_title_2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',a="mm_notification_helper_expire_notify_body_1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"<br/><br/>",a="mm_notification_helper_expire_notify_body_2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',a="mm_notification_helper_learn_more_premium",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',a="/images/Icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',a="mm_notification_helper_expire_warning_title_1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"<br/>",a="mm_notification_helper_expire_warning_title_2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',a="mm_notification_helper_expire_warning_body",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',a="mm_notification_helper_learn_more_premium",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,s,l="",o=this,r="function",c=n.helperMissing,d=void 0,h=this.escapeExpression;return l+='<div class="panel">\n    <div class="body-notification">\n    <span id="save-password-dialog">\n      <div style="cursor:default;">\n          <div style="font-weight:bold;">',i="mm_notification_helper_failed_login_unsuccessful",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'</div>\n          <div style="font-weight:normal;">',i="mm_notification_helper_possible_saved",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'</div>\n          <div style="cursor:pointer;"><a id="update-account">',i="mm_notification_helper_failed_update_here",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'</a></div>\n      </div>\n    </span>\n    </div>\n\n    <!-- Default header (actually footer) for the panels -->\n    <div style="position:absolute;right:0;bottom:5px;top:0;">\n        ',i=t,((i=o.invokePartial(a["common.header"],"common.header",i,n,a))||0===i)&&(l+=i),l+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_growl=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n            <div id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"this.id",{hash:{}})),i+=b(n)+'" style="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),a=s["if"],(h=m.program(2,l,t)).hash={},(h.fn=h).inverse=m.noop,((n=a.call(e,n,h))||0===n)&&(i+=n),n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_action"),a=s["if"],(h=m.program(4,o,t)).hash={},(h.fn=h).inverse=m.program(6,r,t),((n=a.call(e,n,h))||0===n)&&(i+=n),i+='" class="panelSection ',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"this.class_name",{hash:{}})),i+=b(n)+'">\n              ',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"this.body",{hash:{}})),(n||0===n)&&(i+=n),i+="\n            </div>\n        "}function l(e){var t,n="";return n+="height:",typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"this.height",{hash:{}})),n+=b(t)+";"}function o(){return"cursor:pointer;"}function r(){return"cursor: default;"}s=s||e.helpers;var c,d,h,p="",m=this,u="function",g=s.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="panel">\n    <div class="settings">\n      ',c="mm_dntme_settings",c=typeof(d=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===u?d.call(t,c,{hash:{}}):d===f?g.call(t,"intl",c,{hash:{}}):d,p+=b(c)+'\n    </div>\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',c="/pages/images/manage/dd_close_icon.png",c=typeof(d=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===u?d.call(t,c,{hash:{}}):d===f?g.call(t,"assetUrl",c,{hash:{}}):d,p+=b(c)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',c="/images/Icon.png",c=typeof(d=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===u?d.call(t,c,{hash:{}}):d===f?g.call(t,"assetUrl",c,{hash:{}}):d,p+=b(c)+'"/>\n      ',c="mm_notification_helper_growl",c=typeof(d=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===u?d.call(t,c,{hash:{}}):d===f?g.call(t,"intl",c,{hash:{}}):d,p+=b(c)+'\n    </div>\n    <div style="text-align:left;padding-bottom:5px;">\n      <div class="dynamicPanels">\n        ',c=s.panelSections||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelSections"),d=s.each,(h=m.program(1,i,a)).hash={},(h.fn=h).inverse=m.noop,((c=d.call(t,c,h))||0===c)&&(p+=c),p+="\n      </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_growl}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_panel=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',a="/pages/images/manage/dd_close_icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',a="/images/Icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>',typeof(a=n.msg||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"msg"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"msg",{hash:{}})),(a||0===a)&&(s+=a),s+="</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_panel}),ABINE_DNTME.define("abine/views/notificationPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/assets","abine/responseCodes","abine/intl","abine/proxies","models"],function(c,d,e,t,h,n,a,l,p,m,s){var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,i=t.extend({templateName:"notification_helper_panel",events:{mouseover:"onHover",mouseout:"onHoverEnd",click:"clicked"},afterInitialize:function(){this.messenger=this.options.contentManager.messenger,this.targetId=this.options.notification.targetId?this.options.notification.targetId:"",this.targetUrl=this.options.notification.targetUrl,this.applyFadingStyle(),this.fadeIn(),this.model={get:c.bind(function(e){return this.options.notification[e]},this)},this.render(),this.startFadeOut()},openSettings:function(e){var t=d(e.target).data("highlight")||d(e.target).parent().data("highlight");this.options.contentManager.showToolbarPanel({page:"settings",highlight:t}),this.closePanel()},closeNotification:function(e){e&&e.preventDefault(),this.panelId&&this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},clicked:function(e){if("close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className)return this.stopFadeOut(),void this.closePanel();this.getContentMessenger(),this.messenger.send("window:createTab",{url:this.targetUrl}),this.stopFadeOut(),this.closePanel()},onHoverEnd:function(){this.startFadeOut()},onHover:function(){d(this.el).find("div.close-notification").show(),this.stopFadeOut()},openDashboard:function(){return m.webapp.openDashboard(),!1},applyCardStyles:function(){var e=this.model.get("styles");if(e&&e.base){var t=this.$("."+this.model.get("brand"));t.css(e.base),e.number&&d(".cardNumber",t).css(e.number),e.name&&d(".cardName",t).css(e.name),e.expiry&&d(".cardExpiration",t).css(e.expiry),e.cvc&&d(".cardCVC",t).css(e.cvc)}},startFadeOut:function(){this.options.notification.neverFade||(this.stopFadeOut(),this.fadeOutTimer=h.setTimeout(c.bind(function(){this.fadeOutTimer&&this.fadeOut()},this),this.options.timeout))},stopFadeOut:function(){this.fadeOutTimer&&(h.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null)},forgotPassword:function(e){e.preventDefault(),m.webapp.openForgotPassword(),this.trigger("close")},toggleSigninOrRegister:function(e){e.preventDefault(),this.$("#signin-form").is(":visible")?(this.$("#signin-form, .signin-content").hide(),this.$("#register-form, .register-content").show()):(this.$("#register-form, .register-content").hide(),this.$("#signin-form, .signin-content").show()),this.trigger("resize")},login:function(n){function a(e,t){try{l.get(0).ownerDocument&&(d(".loading-message",l).text(p.getText("mm_loading_display_login")),e<t&&(o=h.setTimeout(function(){a(e+1,t)},500)))}catch(n){}}n&&n.preventDefault();var e=this.$("#signin-protect-email").val(),t=this.$("#signin-password-field").val(),i=this.$("#error");if(i.hide(),!e.match(u))return this.$("#welcome-message").hide(),i.text(p.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==t.length)return this.$("#welcome-message").hide(),i.text(p.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");var s={email:e,password:t,mfa_code:this.$("#mfa-code-field").val()},l=this.$("#progress-section");l.height(this.$("#form-div").height()-10);var o=null;a(0,20),l.show(),this.$("#form-div").hide(),m.licenseModule.login(s,c.bind(function(e,t){this.processRegistration(e,t,s,c.bind(function(e){h.clearTimeout(o),l.hide(),e||(this.loginSuccess(),this.closePanel())},this))},this)),this.trigger("resize")},register:function(n){function a(e,t){try{o.get(0).ownerDocument&&(d(".loading-message",o).text(p.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<t&&(r=h.setTimeout(function(){a(e+1,t)},500)))}catch(n){}}n&&n.preventDefault(),this.$("#welcome-message").show();var e=this.$("#register-protect-email").val(),t=this.$("#register-password-field").val(),i=this.$("#register-confirm-password-field").val(),s=this.$("#error");if(s.hide(),!e.match(u))return this.$("#welcome-message").hide(),s.text(p.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==t.length)return this.$("#welcome-message").hide(),s.text(p.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");if(i!=t)return this.$("#welcome-message").hide(),s.text(p.getText("mm_dntme_invalid_password_confirmation")).show(),void this.trigger("resize");var l={email:e,password:t,password_hint:p.getText("mm_pwhint_default"),register_type:"dnt_password_panel",send_password_email:!1},o=this.$("#progress-section");o.height(this.$("#form-div").height()-10);var r=null;a(0,40),o.show(),this.$("#form-div").hide(),m.licenseModule.register(l,c.bind(function(e,t){this.processRegistration(e,t,l,c.bind(function(e){h.clearTimeout(r),o.hide(),e||(this.$("#register-dialog").hide(),this.registerSuccess(),this.$("#post-signin-dialog").show())},this))},this)),this.trigger("resize")},postRegisterOk:function(e){e&&e.preventDefault(),this.trigger("remove")},processRegistration:function(e,t,n,a){if(e){var i=p.getText("mm_dntme_register_error"),s=e.responseJSON&&e.responseJSON.data?e.responseJSON.data.errors:null;"invalid email address"==e.responseJSON.error_code?i=p.getText("mm_dntme_invalid_email_server_error"):"wrong password"==e.responseJSON.error_code?i=p.getText("mm_dntme_wrong_password"):"no account found for email"==e.responseJSON.error_code?i=p.getText("mm_dntme_wrong_email"):"version not allowed"==e.responseJSON.error_code?i=p.getText("mm_dntme_version_not_allowed"):"account has been locked"==e.responseJSON.error_code?i=p.getText("mm_dntme_account_locked"):e.responseJSON.error_code==l.SCHEDULED_DOWNTIME?i=p.getText("mm_dntme_server_maintenance"):e.responseJSON.error_code==l.MFA_CODE_REQUIRED?(i="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section, #progress-section").hide(),this.$("#form-div, #mfa-section").show()):s&&s.email&&("has already been taken"==s.email[0]?i=p.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(i=p.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(i).show(),e.responseJSON&&e.responseJSON.data&&1==e.responseJSON.data.generated_password&&this.$("#error #loginButton").click(c.bind(function(e){return m.webapp.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(c.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(m.webapp.openDnt2UpgradePage),this.trigger("resize"),a(i)}else this.trigger("refresh-preferences"),a()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#register-dialog, #form-div").show(),this.trigger("render")}}),o=i.extend({templateName:"notification_helper_paymentsr2_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn();var e=this.options.notification;this.model=new s.DisposableCard(e.model.maskedCard),this.model.bitcoinFunded="bitcoin"==this.model.get("payment_source"),this.model.detailed=e.detailed,this.panelId=4000004,e.model.declined&&(this.templateName="notification_helper_card_declined_notification",this.model.declined=e.model.declined,this.panelId=4000009),this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){return e&&e.preventDefault(),"faq"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),m.webapp.openFAQ("card")):"chatNow"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),m.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==e.target.id?m.webapp.openPage("/#/client/card/"+this.model.get("guid")):"getRefund"==e.target.id?(this.$(".card-main").hide(),this.$(".actions-short").hide(),this.$(".actions-tall").show(),this.autoResize()):"dontClose"==e.target.id?(this.$(".card-main").show(),this.$(".actions-short").show(),this.$(".actions-tall").hide(),this.autoResize()):"confirmCloseCard"==e.target.id?(this.$(".close-step-1").hide(),this.$(".close-step-2").show(),this.model.save({purpose:"deactivate"},{success:c.bind(function(){"success"==this.model.get("status")?this.$(".refund-status").text("This Masked Card has been closed. Open transactions on this card are being reviewed to determine your refund amount."):this.$(".refund-status").text("There was an error closing this Masked Card.  Please contact support."),this.autoResize()},this)}),this.autoResize()):"logo-link"!=e.target.className&&"logo-link"!=e.target.parentNode.className||m.webapp.openDashboard(),!1}}),r=i.extend({templateName:"notification_helper_real_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model=new s.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.panelId=4000007,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),this.applyCardStyles()},clicked:function(e){return e&&e.preventDefault(),"faq"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),m.webapp.openFAQ("card")):"chatNow"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),m.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==e.target.id?m.webapp.openPage("/#/client/cards"):"getRefund"==e.target.id?m.webapp.openPage("/#/client/cards"):"logo-link"!=e.target.className&&"logo-link"!=e.target.parentNode.className||m.webapp.openDashboard(),!1}}),g=i.extend({templateName:"notification_helper_checkout_growl_notification",events:{"click .outerCard":"cardClicked","click .settings-notification":"openSettings","click .close-link":"closeNotification"},resetCards:function(e){var t=e.collection,n=e.maskedCards,a=1,i=[];t.forEach(c.bind(function(e){e.card_position=a,i.push(new s.RealCard(e)),a++},this)),n&&n.forEach(c.bind(function(e){e.card_position=a,e.brand="old_masked_card",e.cardType="old_masked_card",i.push(new s.DisposableCard(e)),a++},this)),this.model.offerOnly||(i.push(new s.RealCard({id:"new_real_card",cardType:"new_real_card",brand:"new_real_card",card_position:a})),i.push(new s.RealCard({id:"new_masked_card",cardType:"new_masked_card",brand:"new_masked_card",card_position:a+1}))),this.collection.reset(i)},setBrandStyles:function(){c.each(this.collection.models,c.bind(function(e){var t=e.get("styles");if(t&&t.base){var n=this.$("."+e.get("brand"));n.css(t.base),t.number&&d(".cardNumber",n).css(t.number),t.name&&d(".cardName",n).css(t.name),t.expiry&&d(".cardExpiration",n).css(t.expiry),t.cvc&&d(".cardCVC",n).css(t.cvc)}},this))},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager;var e=this.options.notification.payload;this.options.strategyId=e.strategyId,this.options.fieldId=e.fieldId,this.options.fieldType=e.fieldType,this.model=new s.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.collection=new s.RealCardCollection,this.model.attributes.allCards=this.collection,this.model.offerOnly=this.options.notification.offerOnly,this.resetCards(this.options.notification),this.panelId=4000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.model.offersOnly||(m.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.options.messenger.on("entity:changed:RealCard",c.debounce(c.bind(function(){var e=new s.RealCardCollection;e.fetchAllForDomain(this.options.notification.domain,c.bind(function(){this.options.notification.collection.length!=e.length&&(this.options.notification.collection=e,this.resetCards(e),this.render(),this.setBrandStyles(),this.$(".outerCard").each(c.bind(function(e,t){d(t).addClass("pos-"+(e+1))},this)))},this))},this),1e3))),!!c.find(this.collection.models,function(e){return"offer"==e.get("cardType")})&&m.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.render();var n=0;h.setTimeout(c.bind(function(){this.setBrandStyles(),this.$(".outerCard").each(c.bind(function(e,t){h.setTimeout(c.bind(function(){d(t).addClass("pos-"+(e+1))},this),n),n+=300},this));var e=d(this.el),t=this.collection.length;e.height(e.height()+15*t),e.width(e.width()+15*(3<=t?t-3:0)),this.autoResize({extraWidth:15*(3<=t?t-3:0)})},this),0),h.setTimeout(c.bind(function(){this.$(".outerCard").removeClass("opaque")},this),5e3),this.contentManager.messenger.on("panel:closed",c.bind(function(){d(".outerCard").removeClass("biometric")},this))},cardClicked:function(e){for(var t=d(e.target);!t.hasClass("outerCard");)t=d(t[0].parentNode);if(t.hasClass("pos-1"))this.fillRealCard(t.data("id"),t);else for(var a=this.collection.length,n=parseInt(t.data("pos")),i=1;i<n;i++)h.setTimeout(c.bind(function(){d(".outerCard").each(function(e,t){var n=parseInt(d(t).data("pos"));d(t).removeClass("pos-"+n).removeClass("biometric"),1<n?n-=1:n=a,d(t).addClass("pos-"+n).data("pos",n)})},this),50*i)},fillRealCard:function(t,e){var n=null;this.model.attributes.allCards.each(function(e){e.get("id")==t&&(n=e)}),"new_real_card"==n.get("cardType")?m.webapp.openPage("/#/client/real_cards/add"):"new_masked_card"==n.get("cardType")?(m.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"new_card"})):"offer"==n.get("cardType")?(m.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),m.webapp.openPage(n.get("url"))):("biometric"==this.contentManager.preferences.getPref("masked_card_auth")&&e.addClass("biometric"),m.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"fill_card",id:n.get("id")}))}}),f=i.extend({templateName:"notification_helper_expire_notify",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:c.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),m.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),b=i.extend({templateName:"notification_helper_expire_warning",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:c.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000009,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),m.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),_=i.extend({templateName:"notification_helper_detailed_email",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:c.bind(function(e){return this.options.notification[e]},this)},this.panelId="email"==this.options.notification.type?1000002:5000002,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"here"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),m.securityManager.openPage("#emails/guide"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):e.target.className.match(/learn-more/)&&(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),m.securityManager.openPage("#dashboard/guide"),this.trigger("remove"))}}),v=i.extend({templateName:"notification_helper_growl",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .panelSection":"performActions","click .close-notification":"logClose","click .settings":"showSettings"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.options.dynamicPanel=this.options.notification.dynamicPanel,this.model={dynamicPanel:this.options.dynamicPanel},this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.render()},logClose:function(){this.contentManager.messenger.send(
"update:panelActivity:closed",{panelId:this.options.dynamicPanel.id}),this.trigger("remove")},showSettings:function(){this.contentManager.showToolbarPanel({page:"settings"})}}),E=i.extend({templateName:"notification_helper_save_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click #save, #save-unregistered":"save","click #always-save-accounts-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){m.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){m.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){m.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){h.setTimeout(c.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_login",this.model.register_content="mm_notification_helper_securely_save_create",this.panelId=this.model.locked?9000002:6000002,this.model.unregistered&&this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.model.alwaysSaveAccounts=!0,this.save()},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.isLocked()?(this.on("refresh-preferences",c.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):(this.contentManager.messenger.send("background:save:account",this.model),this.trigger("remove"))},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:account",this.model)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:account",this.model)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),(new s.Blacklist).save({domain:this.model.domain,changed:"save_account",save_account:!0}),this.trigger("remove")}}),N=i.extend({templateName:"notification_helper_save_card",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .close-image":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click .editAndSave":"editAndSave","click #save, #save-unregistered":"save","click #always-save-cards-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){m.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){m.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){m.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){h.setTimeout(c.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.card=this.options.notification.card,this.model=new s.RealCard(this.options.notification.card),this.model.domain=this.contentManager.domain,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_cards_login",this.model.register_content="mm_notification_helper_securely_save_cards_register",this.model.set("type",this.card.card_type);var e=this.card.issuedto;if(e){var t=e.split(" ");this.model.set("first_name",t[0]),0<t.length&&this.model.set("last_name",t[1])}this.panelId=this.model.locked?9000012:6000012,this.model.unregistered&&this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()),this.applyCardStyles()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.card.alwaysSaveCards=!0,this.save()},editAndSave:function(e){e.preventDefault();var t=btoa(JSON.stringify({first_name:this.model.get("first_name"),last_name:this.model.get("last_name"),number:this.model.get("number"),expiry_month:this.model.get("expiry_month"),expiry_year:this.model.get("expiry_year"),cvc:this.model.get("cvc"),type:this.model.get("type"),brand:this.model.get("brand")}));m.webapp.openPage("/#/real_cards/edit_save/"+t),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:9000013}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#reg-info, #save, #never, #always-save-cards-checkbox").hide(),this.contentManager.isLocked()?(this.on("refresh-preferences",c.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):this.saveCard()},saveCard:function(){this.contentManager.messenger.send("background:save:card",this.card),this.$("#save-card-dialog-unregistered, #save-card-dialog").hide(),this.$("#post-save-dialog").show(),this.trigger("resize"),h.setTimeout(c.bind(function(){this.trigger("remove")},this),5e3)},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:card",this.card)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:card",this.card)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),(new s.Blacklist).save({domain:this.model.domain,changed:"save_card",save_card:!0}),this.trigger("remove")}}),y=i.extend({templateName:"notification_helper_failed_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-link":"logClose","click .b-link":"openDashboard","click #update-account":"openWebappAccounts"},afterInitialize:function(){h.setTimeout(c.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000005,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},openWebappAccounts:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),m.webapp.openAccounts(this.model.domain),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}}),A=i.extend({templateName:"notification_helper_password_with_no_login",afterInitialize:function(){h.setTimeout(c.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000004,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.loginAccounts=new s.AccountCollection,this.model.loginAccounts.fetchAllByDomain(this.model.domain,c.bind(function(e){e||0==this.model.loginAccounts.length?this.closePanel():(this.model.userOrEmailOnlyAccounts=this.model.loginAccounts.filter(function(e){return e.get("username")||e.get("email")}),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},this))},clicked:function(e){if(e&&e.preventDefault(),"saveLoginWithPassword"==e.target.id){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var t,n,a="";this.$("#input-custom-login").is(":visible")?a=this.$("#custom-username").val():(a=this.$("#select-login option:selected").text(),t=this.$("#select-login option:selected").attr("accountId"));try{if(t){n=this.model.loginAccounts.filter(function(e){return e.get("id")==t})[0];var i=this.model.loginAccounts.filter(c.bind(function(e){return e.get("password")==this.model.password},this))[0];n.set("password",this.model.password),this.contentManager.messenger.send("background:save:account",n.toJSON()),i.set("pushed",0),i.destroy()}else(n=this.model.loginAccounts.filter(c.bind(function(e){return e.get("password")==this.model.password},this))[0]).set("username",a),this.contentManager.messenger.send("background:save:account",n.toJSON())}catch(e){}this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")}else"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className||"dismiss"==e.target.id?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"icon-edit"==e.target.className&&("show-dropdown-edit"==e.target.id?(this.$("#input-custom-login").hide(),this.$("#select-login").show()):(this.$("#input-custom-login").show(),this.$("#select-login").hide()));return!1}}),D=i.extend({templateName:"notification_helper_change_password",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .settings-link":"openSettings","click #save":"save","click #ignore":"ignore"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),h.setTimeout(c.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000003,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.messenger.send("background:save:account",this.model),this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}});return{NotificationPanelView:i,CardNotificationPanelView:o,RealCardNotificationPanelView:r,SaveCardNotificationPanelView:N,CheckoutGrowlNotificationPanelView:g,DetailedEmailNotificationPanelView:_,ExpireWarningNotificationPanelView:b,ExpireNotifyNotificationPanelView:f,GrowlNotificationPanelView:v,SaveLoginNotificationPanelView:E,FailedLoginNotificationPanelView:y,PasswordWithNoLoginNotificationPanelView:A,ChangePasswordNotificationPanelView:D}}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n            <div id="select-login" style="margin-bottom:1em">\n                <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',n="mm_notification_helper_email_address_username",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?a.call(e,n,{hash:{}}):a===_?b.call(e,"intl",n,{hash:{}}):a,i+=v(n)+'</span>\n                    <select style="width:90%;">\n                      ',n=s.userOrEmailOnlyAccounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"userOrEmailOnlyAccounts"),a=s.each,(m=g.program(2,l,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+='\n                    </select>\n                    <i class="icon-edit" id="show-custom-edit" style="cursor:pointer;"></i>\n            </div>\n            '}function l(e,t){var n,a,i="";return i+='\n                          <option accountId="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.id",{hash:{}})),i+=v(n)+'">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),a=s["if"],(m=g.program(3,o,t)).hash={},(m.fn=m).inverse=g.program(5,r,t),((n=a.call(e,n,m))||0===n)&&(i+=n),i+="</option>\n                      "}function o(e){var t;return typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"this.username",{hash:{}})),v(t)}function r(e){var t;return typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"this.email",{hash:{}})),v(t)}function c(){return'"display:none;"'}function d(){return'<i class="icon-edit" id="show-dropdown-edit" style="cursor:pointer;"></i>'}s=s||e.helpers;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon" id="paneHover">\n            <img class="close-image" src="',h="/pages/images/manage/dd_close_icon.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/>\n        </span>\n    </div>\n\n    <div class="body-notification" style="color:#1e91da;">\n        <img src="',h="/images/Icon.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'" style="height: 4.5em;margin-top: .3em;"/>\n        <div style="position: relative;bottom: 3.7em;left: 5.5em;">\n            <span style="font-size:1.6em">',h="mm_notification_helper_new_password_created",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</span>\n            </br>\n            <span style="font-size:1.2em">',h="mm_dntme_at",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+" ",typeof(h=s.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"))===f?h=h.call(t,{hash:{}}):h===_&&(h=b.call(t,"domain",{hash:{}})),u+=v(h)+'</span>\n        </div>\n    </div>\n\n    <hr style="position:relative;top:-4em;border-top: 2px solid #1e91da;width:104.5%;margin-left:-1em;"/>\n    \n    <div class="dropdown-section" style="text-align: left;margin-left: 2em;">\n        <div style="margin-top: -5em;margin-bottom:1em">\n           <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',h="mm_notification_helper_password",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</span>\n           <span style="font-weight:bold;font-size:1.6em;">',typeof(h=s.password||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"))===f?h=h.call(t,{hash:{}}):h===_&&(h=b.call(t,"password",{hash:{}})),u+=v(h)+"</span>\n        </div>\n        <div>\n            ",h=s.loginAccounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=s["if"],(m=g.program(1,i,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n        </div>\n        <div id="input-custom-login" style=',h=s.loginAccounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=s["if"],(m=g.program(7,c,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='>\n            <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',h="mm_notification_helper_email_address_username",h=typeof(p=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"intl",h,{hash:{}}):p,u+=v(h)+'</span>\n            <input style="width:90%;" type="text" id="custom-username"/>\n                ',h=s.loginAccounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=s["if"],(m=g.program(9,d,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+='\n        </div>\n    </div>\n    <div class="button-section">\n        <input type="button" id="saveLoginWithPassword" class="btn btn-primary" style="text-align:center;width:95%;background:green;font-size:1.5em;line-height: 1.5em;" value="Save Login & Password" />\n        </br>\n        <input type="button" id="dismiss" class="btn btn-primary" style="text-align:center;margin:1em;width:25%;background:gray;font-size:1.5em;line-height: 1.5em;" value="Cancel" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification=e.template(function(e,t,s,n,a){function i(e){var t,n,a,i="";return i+="\n          ",t=s.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),n="mm_payment_helper_help_bitcoin",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?a.call(e,n,t,{hash:{}}):a===_?b.call(e,"intl",n,t,{hash:{}}):a,i+=v(t)+"\n        "}function l(e,t){var n,a,i="";return i+="\n          ",n=s.company||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"company"),a=s["if"],(m=g.program(4,o,t)).hash={},(m.fn=m).inverse=g.program(6,r,t),((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n        "}function o(e){var t,n,a,i="";return i+="\n            ",t=s.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),n="mm_payment_helper_help_company",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?a.call(e,n,t,{hash:{}}):a===_?b.call(e,"intl",n,t,{hash:{}}):a,i+=v(t)+"\n          "}function r(e,t){var n,a,i="";return i+="\n            ",n=s.isAch||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isAch"),a=s["if"],(m=g.program(7,c,t)).hash={},(m.fn=m).inverse=g.program(9,d,t),((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n          "}function c(e){var t,n,a,i="";return i+="\n              ",t="mm_payment_helper_help_2_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n              <b>",t=s.getTotalCharge||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),n="mm_payment_helper_help_2_2",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?a.call(e,n,t,{hash:{}}):a===_?b.call(e,"intl",n,t,{hash:{}}):a,i+=v(t)+"</b> ",t="mm_payment_helper_help_2_3_ach",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n            "}function d(e){var t,n,a,i="";return i+="\n              ",t="mm_payment_helper_help_2_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n              <b>",t=s.getTotalCharge||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),n="mm_payment_helper_help_2_2",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?a.call(e,n,t,{hash:{}}):a===_?b.call(e,"intl",n,t,{hash:{}}):a,i+=v(t)+"</b> ",t="mm_payment_helper_help_2_3",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n            "}s=s||e.helpers,n=n||e.partials;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',h="/pages/images/blur_logo_ext_window.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',h="/pages/images/2015panels/panel_xclose.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div class="card-main">\n      <div style="background-color:#3497db;color:white;padding-left:10px;margin-left:-10px;margin-right:-10px;padding-right:10px;">\n        <h3>New Masked Card Created</h3>\n      </div>\n      <div style="margin: 10px 15px;text-align:center;">\n        ',h=s.bitcoinFunded||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"bitcoinFunded"),p=s["if"],(m=g.program(1,i,a)).hash={},(m.fn=m).inverse=g.program(3,l,a),((h=p.call(t,h,m))||0===h)&&(u+=h),u+="\n      </div>\n\n  ",h=t,((h=g.invokePartial(n["notification_helper.masked_card"],"notification_helper.masked_card",h,s,n))||0===h)&&(u+=h),u+="\n  ",h=t,((h=g.invokePartial(n["notification_helper.card_address"],"notification_helper.card_address",h,s,n))||0===h)&&(u+=h),u+="\n  </div>\n  ",h=t,((h=g.invokePartial(n["notification_helper.card_actions"],"notification_helper.card_actions",h,s,n))||0===h)&&(u+=h),u+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n    <div class="card-address" style="text-align:center;">\n      <div style="color:#4594E1">\n        <span style="font-size:12pt;">Billing Address</span>\n      </div>\n      <div style="color:#353535">\n        <span style="font-size:11pt;">',typeof(n=s.getAddress1||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress1"))===p?n=n.call(e,{hash:{}}):n===u&&(n=m.call(e,"getAddress1",{hash:{}})),i+=g(n)+"</span>\n        <br/>\n          ",n=s.getAddress2||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"),a=s["if"],(c=h.program(2,l,t)).hash={},(c.fn=c).inverse=h.noop,((n=a.call(e,n,c))||0===n)&&(i+=n),i+='\n        <span style="font-size:11pt;">',typeof(n=s.getCityState||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCityState"))===p?n=n.call(e,{hash:{}}):n===u&&(n=m.call(e,"getCityState",{hash:{}})),i+=g(n)+'</span>\n        <br/>\n        <span style="font-size:11pt;">',typeof(n=s.getPostal||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPostal"))===p?n=n.call(e,{hash:{}}):n===u&&(n=m.call(e,"getPostal",{hash:{}})),i+=g(n)+"</span>\n        <br/>\n      </div>\n    </div>\n"}function l(e){var t,n="";return n+='\n            <span style="font-size:11pt;">',typeof(t=s.getAddress2||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"))===p?t=t.call(e,{hash:{}}):t===u&&(t=m.call(e,"getAddress2",{hash:{}})),n+=g(t)+"</span>\n            <br/>\n          "}s=s||e.helpers,n=n||e.partials;var o,r,c,d="",h=this,p="function",m=s.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="panel">\n  <div>\n    <span style="float:left; color:#4594E1;font-size:17px;margin-top:3px;margin-left:3px;">Auto-Fill Credit Card</span>\n    <div class="newheader" style="float:right;">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',o="/pages/images/2015panels/panel_xclose.png",o=typeof(r=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'">\n      </div>\n    </div>\n    <p style="height:20px;"></p>\n  </div>\n  ',o=t,((o=h.invokePartial(n["notification_helper.card"],"notification_helper.card",o,s,n))||0===o)&&(d+=o),d+="\n  <p></p>\n",o=s.getAddress||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"),r=s["if"],(c=h.program(1,i,a)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d+="\n  <!-- Default header (actually footer) for the panels -->\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card=e.template(function(e,t,i,s,n){function a(e){var t,n,a="";return a+='\n    <span id="save-card-dialog-unregistered">\n      <div style="margin-right:10px;">\n        ',t=e,((t=h.invokePartial(s["notification_helper.card"],"notification_helper.card",t,i,s))||0===t)&&(a+=t),a+='\n        <div class="body-notification" style="font-size:12px;text-align:center;">',t="mm_notification_helper_save_card_blur_is_the_best",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;" id="reg-info">\n          ',t="mm_notification_helper_save_card_would_you_like",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_this_card",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'" />\n          </div>\n        </div>\n      </div>\n    </span>\n  '}function l(e){var t,n,a="";return a+='\n    <span id="save-card-dialog">\n      <div>\n        ',t=e,((t=h.invokePartial(s["notification_helper.card"],"notification_helper.card",t,i,s))||0===t)&&(a+=t),a+='\n        <a class="editAndSave clearfix" href="#">',t="mm_notification_helper_save_card_edit_and_save",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</a>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'">',t="mm_notification_helper_save_this_card",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</a>\n          <strong><a class="done" id="always-save-cards-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_cards",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+"</a></strong>\n      </div>\n    </span>\n  "}i=i||e.helpers,s=s||e.partials;var o,r,c,d="",h=this,p="function",m=i.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="panel">\n  <div class="body-notification" style="cursor: default;">\n    <img src="',o="/images/Icon.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n    <span class="boldFont">',o="mm_notification_helper_save_card_title",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'</span>\n    <img class="close-image" src="',o="/pages/images/manage/dd_close_icon.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n  </div>\n\n  ',o=i.unregistered||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),r=i["if"],(c=h.program(1,a,n)).hash={},(c.fn=c).inverse=h.program(3,l,n),((o=r.call(t,o,c))||0===o)&&(d+=o),d+="\n\n  ",o=t,((o=h.invokePartial(s["notification_helper.login_register_form"],"notification_helper.login_register_form",o,i,s))||0===o)&&(d+=o),d+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>',o="mm_notification_helper_card_saved",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_save_card_protect_now",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',o="mm_dntme_ok",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o
)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-cards\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',o="mm_dntme_learn_more",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'</a>\n    </div>\n\n  </span>\n  <span id="post-save-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>',o="mm_notification_helper_card_saved",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_save_card_protect_now",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+"\n    </div>\n  </span>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login=e.template(function(e,t,i,s,n){function a(e){var t,n,a="";return a+='\n    <span id="save-password-dialog-unregistered">\n      <div style="float:left;margin-top:20px;margin-right:5px;">\n        <img src="',t="pages/images/dnt_blur_growl_blur_logo2.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'"/>\n      </div>\n      <div style="margin-right:10px;">\n        <div class="body-notification" style="font-size:12px;">',t="mm_notification_helper_save_login_blur_is_the_best",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;">\n          ',t="mm_notification_helper_save_login_would_you_like",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_login",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'" />\n          </div>\n        </div>\n      </div>\n     <div class="links settings-link" data-highlight="rememberaccounts" title="',t="mm_notification_helper_settings",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'">\n          <img class="header-icon" src="',t="/pages/images/dnt-ui-header-settings.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'">\n      </div>\n    </span>\n  '}function l(e){var t,n,a="";return a+='\n    <span id="save-password-dialog">\n      <div>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'">',t="mm_notification_helper_save_this_password",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</a>\n          <strong><a class="done" id="always-save-accounts-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_passwords",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</a></strong>\n      </div>\n    </span>\n    <!-- Default header (actually footer) for the panels -->\n  <div style="position:absolute;right:0;bottom:5px;top:0;">\n      ',t=e,((t=h.invokePartial(s["common.header"],"common.header",t,i,s))||0===t)&&(a+=t),a+="\n    </div>\n  "}i=i||e.helpers,s=s||e.partials;var o,r,c,d="",h=this,p="function",m=i.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="panel">\n  <div class="close-notification">\n      <img style="margin-top:1.2em;" src="',o="/images/blur_xclose.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n  </div>\n\n  ',o=i.unregistered||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),r=i["if"],(c=h.program(1,a,n)).hash={},(c.fn=c).inverse=h.program(3,l,n),((o=r.call(t,o,c))||0===o)&&(d+=o),d+="\n\n  ",o=t,((o=h.invokePartial(s["notification_helper.login_register_form"],"notification_helper.login_register_form",o,i,s))||0===o)&&(d+=o),d+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>',o="mm_notification_helper_password_saved",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_blur_will_now_protect",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',o="mm_dntme_ok",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-passwords\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',o="mm_dntme_learn_more",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+"</a>\n    </div>\n\n  </span>\n\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.company_cards",e.template(function(e,t,i,n,a){function s(e){var t,n,a="";return a+='\n      <a href="#" class="mmKeyOption">\n        <div class="element otherred" id="createCompanyCard">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"assetUrl",t,{hash:{}}):n,a+=u(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_company_create",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"intl",t,{hash:{}}):n,a+=u(t)+"\n          </span>\n        </div>\n      </a>\n"}i=i||e.helpers;var l,o,r,c="",d=this,h="function",p=i.helperMissing,m=void 0,u=this.escapeExpression;return c+="\n<!-- If Company Cards available-->\n",l=i.hasCompanyCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasCompanyCards"),o=i["if"],(r=d.program(1,s,a)).hash={},(r.fn=r).inverse=d.noop,((l=o.call(t,l,r))||0===l)&&(c+=l),c}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.disposable_cards",e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n  ",n=s.disposableCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableCards"),a=s.each,(c=h.program(2,l,t)).hash={},(c.fn=c).inverse=h.noop,((n=a.call(e,n,c))||0===n)&&(i+=n),i+="\n"}function l(e){var t,n,a="";return a+='\n    <a href="#" data-cardid="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===p?t=t.call(e,{hash:{}}):t===u&&(t=m.call(e,"id",{hash:{}})),a+=g(t)+'" class="mmKeyOption usedCard">\n      <div class="element othergreen" id="mask">\n        <span class="panelLeft">\n          <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'"\n               style="width:43px;height:21px;"/>\n          ',t="mm_payment_helper_useCardEnding",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+" ",typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLastFour"))===p?t=t.call(e,{hash:{}}):t===u&&(t=m.call(e,"this.getLastFour",{hash:{}})),a+=g(t)+'\n        </span>\n        <span class="panelRight">\n          <span class="overflowText">',typeof(t=s.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"))===p?t=t.call(e,{hash:{}}):t===u&&(t=m.call(e,"getOriginalValue",{hash:{}})),a+=g(t)+" ",t="mm_payment_helper_card",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+"</span>\n        </span>\n      </div>\n    </a>\n  "}s=s||e.helpers;var o,r,c,d="",h=this,p="function",m=s.helperMissing,u=void 0,g=this.escapeExpression;return d+="<!-- If Masked Cards already exist for this domain -->\n",o=s.disposableCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposableCards"),r=s["if"],(c=h.program(1,i,a)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.inline_faq",e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div id="inlineFaq" class="left-panel" style="display:none;margin-bottom:15px;">\n<div class=\'faqGotIt\' style="cursor:pointer;margin-left:10px;margin-top:5px;color:#555;font-weight:bold;"><img src="',a="/pages/images/2015panels/back_arrow.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>&nbsp;&nbsp;&nbsp;&nbsp;Go Back</div>\n<div class="payments-header" style="text-align:center;">\n  ',a="mm_payment_helper_safestWayTitle",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"\n</div>\n<div style=\"margin: 0px 15px;\">\n  <div class='faq-question-header'>",a="mm_payment_helper_inlineFaqWhatAre",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</div>\n  <div class='faq-body'>\n    ",a="mm_payment_helper_inlineFaqMaskedCardsAre",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"\n  </div>\n  <div class='faq-question-header'>",a="mm_payment_helper_inlineFaqAreThereAdditional",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</div>\n  <div class='faq-body'>\n    ",a="mm_payment_helper_inlineFaqAdditionalFees",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"\n  </div>\n  <div class='faq-question-header'>",a="mm_payment_helper_inlineFaqWhatIfIDont",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</div>\n  <div class='faq-body'>\n    ",a="mm_payment_helper_inlineFaqClose_1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+" <a href='#' id='viewCardsDashboard'>",a="mm_payment_helper_inlineFaqClose_2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</a>\n  </div>\n  <div style=\"text-align: center;margin:5px 0px;\">\n    <input type=\"button\" id='faqCardLink' class='btn btn-primary' value='",a="mm_payment_helper_link",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"'/>\n    <input type=\"button\" class='faqGotIt btn btn-success' value='",a="mm_payment_helper_inlineFaqGotIt",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"'/>\n  </div>\n</div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.mask_my_card",e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n        <a href="#" data-cardid="',typeof(n=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===m?n=n.call(e,{hash:{}}):n===g&&(n=u.call(e,"id",{hash:{}})),i+=f(n)+'" class="mmKeyOption">\n            <div class="element othergreen" id="protect-my-card-btn">\n                  <span class="panelLeft">\n                    <img class="iconPos" src="',n="/pages/images/2015panels/card_green.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?a.call(e,n,{hash:{}}):a===g?u.call(e,"assetUrl",n,{hash:{}}):a,i+=f(n)+'" style="width:43px;height:21px;"/>\n                    ',n="mm_payment_helper_create_new_masked_card",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?a.call(e,n,{hash:{}}):a===g?u.call(e,"intl",n,{hash:{}}):a,i+=f(n)+"\n                  </span>\n            </div>\n        </a>\n\n    ",n=s.entitledToPhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),a=s["if"],(d=p.program(2,l,t)).hash={},(d.fn=d).inverse=p.noop,((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n    "}function l(e,t){var n,a,i="";return i+="\n        ",n=s.hasAuthorizedCoinbase||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasAuthorizedCoinbase"),a=s["if"],(d=p.program(3,o,t)).hash={},(d.fn=d).inverse=p.noop,((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n    "}function o(e){var t,n,a="";return a+='\n            <a href="#" data-cardid="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===m?t=t.call(e,{hash:{}}):t===g&&(t=u.call(e,"id",{hash:{}})),a+=f(t)+'" class="mmKeyOption">\n                <div class="element othergreen" id="protect-my-card-bitcoin-btn">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskcard-icon-bitcoin.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'"/>\n                    ',t="mm_payment_helper_create_new_masked_card",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"intl",t,{hash:{}}):n,a+=f(t)+'\n                </span>\n                 <span class="panelRight">\n                    <span class="overflowText">(bitcoin)</span>\n                </span>\n                </div>\n            </a>\n        '}s=s||e.helpers,n=n||e.partials;var r,c,d,h="",p=this,m="function",u=s.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="payments-step" id="panelOptions">\n    ',r=s.cardDisabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),c=s.unless,(d=p.program(1,i,a)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+="\n\n    ",r=t,((r=p.invokePartial(n["payment_helper.disposable_cards"],"payment_helper.disposable_cards",r,s,n))||0===r)&&(h+=r),h+="\n    ",r=t,((r=p.invokePartial(n["payment_helper.company_cards"],"payment_helper.company_cards",r,s,n))||0===r)&&(h+=r),h+="\n    ",r=t,((r=p.invokePartial(n["payment_helper.real_cards"],"payment_helper.real_cards",r,s,n))||0===r)&&(h+=r),h+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.no_card_on_file",e.template(function(e,t,i,n,a){function s(e){var t,n,a="";return a+='\n        <input id="autoEmail" type="text" placeholder="',t="mm_payment_helper_email",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"intl",t,{hash:{}}):n,a+=u(t)+'">\n      '}i=i||e.helpers;var l,o,r,c="",d=this,h="function",p=i.helperMissing,m=void 0,u=this.escapeExpression;return c+='<div id="register" class="payments-step" style="display: none;">\n  <div class="payments-header">',l="mm_payment_helper_card_complete_title",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'</div>\n\n  <div style="width:610px;" id="billingInfoForm">\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoFname" type="text" placeholder="',l="mm_payment_helper_first_name",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'">\n      <input id="autoLname" type="text" placeholder="',l="mm_payment_helper_last_name",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'">\n\n      <input id="autoAddress" type="text" placeholder="',l="mm_payment_helper_address",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'">\n      <input id="autoApt" data-optional="yes" type="text" placeholder="',l="mm_payment_helper_apt",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'">\n\n      <input id="autoCity" type="text" placeholder="',l="mm_payment_helper_city",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'">\n      <select id="autoStateUS"><option value="">Select State</option><option value="">------------</option><option value="AK">Alaska</option><option value="AL">Alabama</option><option value="AP">Armed Forces Pacific</option><option value="AR">Arkansas</option><option value="AS">American Samoa</option><option value="AZ">Arizona</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DC">District of Columbia</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="FM">Federated States of Micronesia</option><option value="GA">Georgia</option><option value="GU">Guam</option><option value="HI">Hawaii</option><option value="IA">Iowa</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="MA">Massachusetts</option><option value="MD">Maryland</option><option value="ME">Maine</option><option value="MH">Marshall Islands</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MO">Missouri</option><option value="MP">Northern Mariana Islands</option><option value="MS">Mississippi</option><option value="MT">Montana</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="NE">Nebraska</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NV">Nevada</option><option value="NY">New York</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="PR">Puerto Rico</option><option value="PW">Palau</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VA">Virginia</option><option value="VI">Virgin Islands</option><option value="VT">Vermont</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select>\n      <input id="autoState" type="text" placeholder="',l="mm_payment_helper_state",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'" style="display:none;">\n      <input id="autoZip" type="text" placeholder="',l="mm_payment_helper_zip",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'">\n\n      <select id="autoCountry"><option value="">Select Country</option><option value="">--------------</option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AC">Ascension Island</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="BQ">British Antarctic Territory</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="IC">Canary Islands</option><option value="CT">Canton and Enderbury Islands</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="EA">Ceuta and Melilla</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CP">Clipperton Island</option><option value="CC">Cocos [Keeling] Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CD">Congo [DRC]</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DG">Diego Garcia</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="NQ">Dronning Maud Land</option><option value="TL">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands [Islas Malvinas]</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="FQ">French Southern and Antarctic Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard Island and McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JT">Johnston Island</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LS">Lesotho</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia [FYROM]</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="FX">Metropolitan France</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MI">Midway Islands</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NT">Neutral Zone</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="VD">North Vietnam</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="QO">Outlying Oceania</option><option value="PC">Pacific Islands Trust Territory</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PZ">Panama Canal Zone</option><option value="PY">Paraguay</option><option value="YD">People\'s Democratic Republic of Yemen</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="RE">R&eacute;union</option><option value="BL">Saint Barth&eacute;lemy</option><option value="SH">Saint Helena</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="MF">Saint Martin</option><option value="PM">Saint Pierre and Miquelon</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="CS">Serbia and Montenegro</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="ZA">South Africa</option><option value="GS">South Georgia and the South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SR">Suriname</option><option value="SJ">Svalbard and Jan Mayen</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="ST">S&atilde;o Tom&eacute; and Pr&iacute;ncipe</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TA">Tristan da Cunha</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UM">U.S. Minor Outlying Islands</option><option value="PU">U.S. Miscellaneous Pacific Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US" selected="selected">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WK">Wake Island</option><option value="WF">Wallis and Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="AX">&Aring;land Islands</option></select>\n    </div>\n\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoCardNumber" type="text" placeholder="',l="mm_payment_helper_credit_card_number",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l)+'">\n      <input id="autoCardCvv" type="text" placeholder="',l="mm_payment_helper_cvv",l=typeof(o=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"intl",l,{hash:{}}):o,c+=u(l
)+'">\n\n\n      <select id="autoCardMonth"><option value="1">01 - January</option><option value="2">02 - February</option><option value="3">03 - March</option><option value="4">04 - April</option><option value="5">05 - May</option><option value="6">06 - June</option><option value="7">07 - July</option><option value="8">08 - August</option><option value="9">09 - September</option><option value="10">10 - October</option><option value="11">11 - November</option><option value="12">12 - December</option></select>\n      <select id="autoCardYear"><option name="2015" selected>2015</option><option name="2016">2016</option><option name="2017">2017</option><option name="2018">2018</option><option name="2019">2019</option><option name="2020">2020</option><option name="2021">2021</option><option name="2022">2022</option><option name="2023">2023</option><option name="2014">2024</option></select>\n\n      ',l=i.hasRegistered||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),o=i.unless,(r=d.program(1,s,a)).hash={},(r.fn=r).inverse=d.noop,((l=o.call(t,l,r))||0===l)&&(c+=l),c+='\n      <button class="btn btn-primary" id="registerAndMask" style="position:relative;bottom:-15;">\n        <div>Protect My Card</div>\n      </button>\n\n    </div>\n\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.protect_my_card",e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n      ",n=s.firstFiveCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"firstFiveCards"),a=s["if"],(d=p.program(2,l,t)).hash={},(d.fn=d).inverse=p.program(4,o,t),((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n    "}function l(e){var t,n,a="";return a+='\n      <div class="payments-header">\n        ',t="mm_payment_helper_safestWayTitle",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"intl",t,{hash:{}}):n,a+=f(t)+'\n      </div>\n\n      <div class="payments-protect-card-body">\n        ',t="mm_payment_helper_protectYourCardInFew",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"intl",t,{hash:{}}):n,a+=f(t)+'\n      </div>\n      <input type="button" id="protect-my-card-btn" class="btn btn-primary" value="Protect My Card" style="margin: -10px 0px 13px 0px;"/>\n      <div id="inlineFaqLink" class="links help-link" style="display:inline-block;padding-bottom:5px;cursor:pointer;">\n        <img id="help" class="header-icon" src="',t="/pages/images/dnt-ui-header-help.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'" style="width:19px;margin-left:8px;">\n      </div>\n      '}function o(e){var t,n,a="";return a+='\n      <a href="#" data-cardid="',typeof(t=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===m?t=t.call(e,{hash:{}}):t===g&&(t=u.call(e,"id",{hash:{}})),a+=f(t)+'" class="mmKeyOption">\n        <div class="element othergreen" id="protect-my-card-btn">\n          <span class="panelLeft">\n            <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_create_new_masked_card",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"intl",t,{hash:{}}):n,a+=f(t)+"\n          </span>\n        </div>\n      </a>\n      "}s=s||e.helpers,n=n||e.partials;var r,c,d,h="",p=this,m="function",u=s.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="payments-step" id="panelOptions">\n    ',r=s.cardDisabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),c=s.unless,(d=p.program(1,i,a)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+="\n    ",r=t,((r=p.invokePartial(n["payment_helper.disposable_cards"],"payment_helper.disposable_cards",r,s,n))||0===r)&&(h+=r),h+="\n    ",r=t,((r=p.invokePartial(n["payment_helper.company_cards"],"payment_helper.company_cards",r,s,n))||0===r)&&(h+=r),h+="\n    ",r=t,((r=p.invokePartial(n["payment_helper.real_cards"],"payment_helper.real_cards",r,s,n))||0===r)&&(h+=r),h+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.real_cards",e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n  ",n=s.realCardDisabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCardDisabled"),a=s.unless,(m=g.program(2,l,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n"}function l(e,t){var n,a,i="";return i+="\n    ",n=s.realCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"),a=s.each,(m=g.program(3,o,t)).hash={},(m.fn=m).inverse=g.program(6,c,t),((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n    ",n=null===(n=s.realCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s["if"],(m=g.program(8,d,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n  "}function o(e,t){var n,a,i="";return i+='\n      <a href="#" data-cardid="',typeof(n=s.id||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"id",{hash:{}})),i+=v(n)+'" class="mmKeyOption usedCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft" style="width:80%;overflow:hidden;display: inline-block;height:30px;text-wrap:suppress;word-wrap:break-word;">\n              <img class="iconPos" src="',n="/pages/images/2015panels/card_red_arrow.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?a.call(e,n,{hash:{}}):a===_?b.call(e,"assetUrl",n,{hash:{}}):a,i+=v(n)+'" style="width:15px;height:21px;margin-right:0;"/>\n              <img class="iconPos" src="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTypeImage"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.getTypeImage",{hash:{}})),i+=v(n)+'" style="width:32px;height:32px;margin-left: -4px;"/>\n            ',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLabelOrLastFour"))===f?n=n.call(e,{hash:{}}):n===_&&(n=b.call(e,"this.getLabelOrLastFour",{hash:{}})),i+=v(n)+"\n          </span>\n          ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"labelChangeRequired"),a=s["if"],(m=g.program(4,r,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n        </div>\n      </a>\n    "}function r(e){var t,n,a="";return a+='\n          <span class="panelRight edit_name" style="width:18%;">\n            <span class="overflowText" style="text-transform: none;">',t="mm_payment_helper_edit_name",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+"</span>\n          </span>\n          "}function c(e){var t,n,a="";return a+='\n      <a href="#" class="mmKeyOption useMyCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,a+=v(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_useMyCard",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+"\n          </span>\n        </div>\n      </a>\n    "}function d(e){var t,n,a="";return a+='\n          <a href="#" class="mmKeyOption useMyCard">\n            <div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,a+=v(t)+'" style="width:43px;height:21px;"/>\n                ',t="mm_payment_helper_addOrEdit",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"intl",t,{hash:{}}):n,a+=v(t)+"\n              </span>\n            </div>\n          </a>\n    "}s=s||e.helpers,n=n||e.partials;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+="\n<!-- If Real Cards to fill-->\n",h=s.canShowRealCards||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"canShowRealCards"),p=s["if"],(m=g.program(1,i,a)).hash={},(m.fn=m).inverse=g.noop,((h=p.call(t,h,m))||0===h)&&(u+=h),u+="\n\n",h=t,((h=g.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",h,s,n))||0===h)&&(u+=h),u}))}),ABINE_DNTME.define("abine/views/paymentHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/views/loading_display","abine/contentMessenger","abine/intl","abine/responseCodes","abine/config","abine/proxies"],function(l,s,e,r,t,c,n,a,d,i,o,h){function p(e){for(var t=0,n=!1,a=e.length-1;0<=a;a--,n=!n){var i=parseInt(e.charAt(a));n&&9<(i*=2)&&(i-=9),t+=i}return t%10==0}function m(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,g=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/i,f=[{regex:/^4[0-9]{12}(?:[0-9]{3})?$/,spacing:[4,4,4]},{regex:/^5[1-5][0-9]{14}$/,spacing:[4,4,4]},{regex:/^3[47][0-9]{13}$/,spacing:[4,6]},{regex:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,spacing:[4,6]},{regex:/^6(?:011|5[0-9]{2})[0-9]{12}$/,spacing:[4,4,4]},{regex:/^(?:2131|1800|35\d{3})\d{11}$/,spacing:[4,4,4]}],b={"/financial/creditcard/number/part1":"part1","/financial/creditcard/number/part2":"part2","/financial/creditcard/number/part3":"part3","/financial/creditcard/number/part4":"part4","/financial/creditcard/number":"number","/financial/creditcard/type":"type","/financial/creditcard/issuedto":"issuedto","/financial/creditcard/expirymonth":"expirymonth","/financial/creditcard/expiryyear":"expiryyear","/financial/creditcard/verification":"cvv","/contact/postaladdress/billing":"address1","/contact/postaladdressAdditional/billing":"address2","/contact/state/billing":"state","/contact/state/code/billing":"state","/contact/city/billing":"city","/contact/country/billing":"country","/contact/postalcode/billing":"zip","/contact/postaladdress":"address1","/contact/postaladdressAdditional":"address2","/contact/state":"state","/contact/state/code":"state","/contact/city":"city","/contact/country":"country","/contact/postalcode":"zip","/nameperson/last":"lname","/nameperson/first":"fname","/nameperson/full":"name"};return t.extend({templateName:"payment_helper_paymentsr3_card_money",events:{"click .whatIsThisLink":"openMaskedCardsIn30","mousedown a.disposableCard":"verifyCardRequest","click #registerAndMask":"registerAndMask","mousedown a.usedCard":"fillWithUsedCard","click a.useMyCard":"openAddCard","click a.getStarted":"getStarted","click a.setupCard":"getStartedWithPayments","click .panelSection":"performActions","click #createCard":"createCard","click #cancelCardCreate":"cancelCardCreate","click #confirmCardCreate":"confirmCardCreate","click .switch-to-ach":"switchToAch","click #useMaskedCard":"fillWithDisposableCard","click #linkToErrorReport":"makeErrorReport","click .maskedCardErrorSupport":"makeErrorReport","click #registerHelp span":"openCardFAQ","change #autoCountry":"countryChanged","mousedown .subscription-option":"subscriptionClicked","click .chatNow":"chatNow","click .close-link":"logClose","click .edit_name":"openEditCard","click .cash-for-cards-webapp-faq":"openCashForCardsFaq","click #createCompanyCard":"createCompanyCard","click #protect-my-card-btn":"verifyCardRequest","click #protect-my-card-bitcoin-btn":"verifyCardRequestBtc","click #inlineFaqLink":"openInlineFAQ","click #faqCardLink":"openCardFAQWebapp","click .faqGotIt":"faqGotIt","click #viewCardsDashboard":"openCardsDashboard","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass","click #upgradeToPremiumCheckboxDiv":"upgradeToPremiumCheckboxClicked"},billingInfoViewExtraWidth:215,createCompanyCard:function(e){this.model.companyRequest=!0,this.verifyCardRequest(e)},upgradeToPremiumCheckboxClicked:function(){this.$("#upgradeToPremium").is(":checked")?this.model.upgradeToPremium=!0:this.model.upgradeToPremium=!1,this.ignoreBlur(!0)},openInlineFAQ:function(){this.ignoreBlur(!0);var e={extraWidth:this.$("#register").is(":visible")?-1*this.billingInfoViewExtraWidth:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".normal-flow").hide(),this.$("#inlineFaq").show(),this.autoResize(e)},openCardFAQWebapp:function(){h.webapp.openPage("#help/faq/faq-maskedCards"),this.closePanel()},openAddCard:function(){this.updatePanelActivity("impression",this.clickedAutofillRealCardWhenNoCardExistsPanelId,this.fieldId,!1),this.model.realCards&&0<this.model.realCards.length?h.webapp.openPage("/#real_cards"):h.webapp.openPage("/#real_cards/add"),this.closePanel()},switchToAch:function(){h.webapp.openPage("/#settings/edit"),this.closePanel()},openEditCard:function(e){for(var t,n=e.currentTarget;!t&&n;)t=s(n).data("cardid"),n=n.parentNode;return t&&(h.webapp.openPage("/#real_cards/edit/"+t),this.closePanel()),e.preventDefault(),!1},faqGotIt:function(){this.ignoreBlur(!1),this.$("#inlineFaq").hide(),this.$(".normal-flow").show();var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth:null};this.autoResize(e),this.$("#cardAmount").focus()},openCardsDashboard:function(e){e.preventDefault(),h.webapp.openPage("/#/client/cards")},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},chatNow:function(e){e.preventDefault(),h.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},openMaskedCardsIn30:function(e){return h.webapp.openFAQ("card"),this.closePanel(),e.preventDefault(),!1},openCardFAQ:function(e){return h.webapp.openFAQ("card","freefor30"),e.preventDefault(),!1},chatNow:function(e){e.preventDefault(),h.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},getStartedWithPayments:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),h.webapp.openCards(),this.closePanel(e)},subscriptionClicked:function(){this.$("#cardAmount").unbind("blur.dntme")},openCashForCardsFaq:function(e){return h.webapp.openCashForCardsFaq(),e.preventDefault(),!1},countryChanged:function(e){"US"==s(e.target).val()?(this.$("#autoStateUS").show(),this.$("#autoState").hide()):(this.$("#autoState").show(),this.$("#autoStateUS").hide())},cardNumberFocus:function(e){var t=s(e.target);t.val(t.val().replace(/[^0-9]+/g,""))},cardNumberBlur:function(e){var t=s(e.target),a=t.val().replace(/[^0-9]+/g,"");l.each(f,function(e){if(a.match(e.regex)){var t=0,n="";l.each(e.spacing,function(e){n+=a.substr(t,e)+" ",t+=e}),a=n+=a.substr(t)}}),t.val(a)},makeErrorReport:function(e){return e&&e.preventDefault(),h.webapp.openHelp(),!1},refreshLastFourShieldedCardNumber:function(){h.licenseModule.refreshLastFourCardDigits({},l.bind(function(e,t){!e&&t&&t.last_four&&(this.model.primaryCard.set("last_four",t.last_four),this.$("#last4").text(t.last_four))},this))},convertCentsToString:function(e){return"$"+(e/100).toFixed(2)},processError:function(e){this.$("#loadingMaskedCard").hide();var t=this;"recurly disabled"==e.errorCode?(this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_recurly_disabled")),this.$("#maskedCardErrorMsg #recurly-disabled").click(function(e){return h.webapp.openPage("#premium/setup/stripe"),t.closePanel(e),!1})):e.errorCode==i.NO_BILLING_ACCOUNT_FOR_USER_ERROR_CODE||e.errorCode==i.BILLING_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_billing")):e.errorCode==i.BILLING_DECLINED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_declined")):e.errorCode==i.BILLING_COMPANY_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_company_declined")):e.errorCode==i.NO_CARDS_AVAILABLE_ERROR_CODE||e.errorCode==i.PROVIDER_READ_FAILED_ERROR_CODE||e.errorCode==i.PROVIDER_CARD_CREATION_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_provider")):e.errorCode==i.REQUESTED_AMOUNT_OVER_LIMIT_ERROR_CODE?"verified"==e.responseJSON.data.category?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_validation_verified",[this.convertCentsToString(e.responseJSON.data.min),this.convertCentsToString(e.responseJSON.data.max)])):this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_validation_max",[this.convertCentsToString(e.responseJSON.data.max),o.protocol+o.webAppHost+"/#/client/cards/verify"])):e.errorCode==i.REQUESTED_AMOUNT_BELOW_MINIMUM_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_validation_min",[this.convertCentsToString(e.responseJSON.data.min)])):e.errorCode==i.REQUEST_ALREADY_EXISTS_ERROR_CODE||e.errorCode==i.NO_CARD_FOUND_ERROR_CODE||e.errorCode==i.NO_BILLING_TRANSACTION_FOUND_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_abine")):e.errorCode==i.REFUND_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_refund")):e.errorCode==i.GLOBAL_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_global_limit")):e.errorCode==i.FRAUD_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_soft_limit",[o.protocol+o.webAppHost+"/#/client/cards/verify"])):e.errorCode==i.FRAUD_HARD_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_hard_limit")):e.errorCode==i.FRAUD_GLOBAL_BAN?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_global_ban")):e.errorCode==i.FRAUD_VERIFIED_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_verified_soft_limit")):e.errorCode==i.FRAUD_HIGH_RISK_COUNTRY_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_high_risk_country")):e.errorCode==i.GREY_LISTED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error_grey_listed",[o.protocol+o.webAppHost+"/#/client/cards/verify"])):e.errorCode==i.BILLING_IN_NON_US_ERROR_CODE?s(this.el).find("#maskedCardErrorMsg").html(d.getText("mm_payment_helper_non_us1",[ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/phones"])):e.errorCode==i.DUPLICATE_CARD_ERROR_CODE?s(this.el).find("#maskedCardErrorMsg").html(d.getText("mm_payment_error_duplicate_card_ban")):e.errorCode==i.BANNED_DOMAIN_ERROR_CODE?s(this.el).find("#maskedCardErrorMsg").html(d.getText("mm_payment_error_banned_domain",[this.options.domain])):e.errorCode==i.REJECTED_DOMAIN_ERROR_CODE?s(this.el).find("#maskedCardErrorMsg").html(d.getText("mm_payment_error_rejected_domain",[this.options.domain])):e.errorCode==i.SERVICE_UNAVAILABLE_ERROR?s(this.el).find("#maskedCardErrorMsg").html(d.getText("mm_dntme_service_unavailable")):e.errorCode==i.SCHEDULED_DOWNTIME?s(this.el).find("#maskedCardErrorMsg").html(d.getText("mm_dntme_server_maintenance")):e.errorCode==i.BIOMETRIC_AUTH_FAILED?s(this.el).find("#maskedCardErrorMsg").html(d.getText("mm_dntme_server_biometric_auth_failed")):this.$("#maskedCardErrorMsg").html(d.getText("mm_payment_error")),this.$("#maskedCardErrorMsg a[target=_blank]").click(function(e){return h.webapp.openPage(e.target.href.substr(e.target.href.indexOf("#"))),e.preventDefault(),!1}),this.$("#maskedCardView, #maskedCardError, #maskedCardErrorMsg").show()},masterPassAuth:function(e){e&&e.preventDefault(),c.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show(),this.autoResize()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var n=this.$("#password").val();if(0==n.length)return this.$("#masterPassErr").text(d.getText("mm_payment_helper_master_pass_invalid")).show(),void this.autoResize();var a="password:auth:response:"+Math.random(),i=this.options.contentManager.messenger;return i.on(a,function(e){t.$("#newMaskedCard, #confirmAmountView, #register, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t._maskedCardAuth?t._confirmCardCreate():t._fillWithUsedCard(),i.off(a)):t.$("#masterPassErr").text(d.getText("mm_payment_helper_master_pass_invalid")).show(),i.off(a),t.autoResize()}),h.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,i.send("password:auth",{responseId:a,key:t.biometricKey,password:n,domain:t.options.domain,amount:r.DisposableCard.convertStringToCents(this.amount)})):t.$("#masterPassErr").text(d.getText("mm_payment_helper_master_pass_retry")).show()}),this.autoResize(),!1},confirmCardCreate:function(e,t){this.biometricKey?(t=t||{},this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this._maskedCardAuth=!0,this.sendBiometricAuthRequest(e,t),this.autoResize()):this._confirmCardCreate(e,t)},retryBiometricAuth:function(t,n){var a=this;c.clearTimeout(this.noResponseTimer),h.licenseModule.getGenericBiometricKey(null,function(e){e.success&&(a.biometricKey=e.key,a.sendBiometricAuthRequest(t,n))})},sendBiometricAuthRequest:function(t,n){this.ignoreExplicitClose=!0;var e=this.biometricKey.split(":");if(2<e.length)return this.biometricKey=e[0]+":"+e[1],this.biometricToken=e[2],this.$("#biometricAuth").hide(),void(this._maskedCardAuth?this._confirmCardCreate(t,n):this._fillWithUsedCard());this.$("#biometricAuth").show();var a=this.options.contentManager.messenger,i=this;i.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?i.$("#biometricInfo").html(d.getText("mm_payment_helper_request_faceid_auth",[i.model.biometric_type])):i.$("#biometricInfo").html(d.getText("mm_payment_helper_request_biometric_auth",[i.model.biometric_type])),i.$("#biometricError").hide(),i.autoResize(),this.biometricResponseId&&a.off(this.biometricResponseId);var s="biometric:auth:response:"+Math.random();c.clearTimeout(this.noResponseTimer),this.noResponseTimer=c.setTimeout(function(){i.$("#biometricInfo").text(d.getText("mm_payment_helper_biometric_no_response")),i.autoResize()},2e4),a.on(s,function(e){if(c.clearTimeout(i.noResponseTimer),!e.ack||!i.$("#masterPassStep").is(":visible")){if(i.$("#newMaskedCard, #confirmAmountView, #register, #masterPassStep").hide(),i.$("#biometricAuth").show(),e.ack)return i.$("#biometricInfo").show(),i.$("#biometricError").hide(),i.model.face_id?i.$("#biometricInfo").html(d.getText("mm_payment_helper_request_faceid_card_auth_ack",[i.model.biometric_type])):i.$("#biometricInfo").html(d.getText("mm_payment_helper_request_biometric_card_auth_ack",[i.model.biometric_type])),void i.autoResize();e.success?(i.biometricToken=e.token,i.$("#biometricAuth").hide(),i._maskedCardAuth?i._confirmCardCreate(t,n):i._fillWithUsedCard(),a.off(s),i.biometricResponseId=null):(i.$("#biometricInfo").hide(),i.$("#biometricError").text(e.error).show()),i.autoResize()}});var l={type:"card",responseId:s,key:this.biometricKey,domain:this.options.domain};if(this._maskedCardAuth)l.amount=r.DisposableCard.convertStringToCents(this.amount);else{var o=this.getMatchingCard(this._selectedCardId);l.number=o.get("number").substr(-4)}a.send("biometric:auth",l),this.biometricResponseId=s,this.autoResize()},_confirmCardCreate:function(e,t){if(t=t||{},!this.cardBeingCreated){if(!this.model.entitledToPhone&&this.model.upgradeToPremium&&!t.upgraded&&!this.model.companyRequest)return void this.setupSubscription("annual");this.cardBeingCreated=!0,this.biometricKey&&this.biometricToken&&h.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.model.maskedCard=new r.DisposableCard({domain:this.options.domain,biometricKey:this.biometricKey,biometricToken:this.biometricToken,amount:r.DisposableCard.convertStringToCents(this.amount),shielded_card_id:this.model.companyRequest?null:this.model.primaryCard.id,company:this.model.companyRequest,payment_method:this.model.useBitcoin?"bitcoin":"creditcard"}),this.model.maskedCard.set("source","dnt-panel"),this.model.maskedCard.bind("sync:success",function(){this.updatePanelActivity("impression",this.createCardSuccessfullViewPanelId,this.fieldId,!1),this.trigger("render"),this.cardBeingCreated=!1,this.$("#loadingMaskedCard").hide(),this.$("#maskedCardBg")[0].style.backgroundImage="url('"+this.model.maskedCard.getMaskedCardImage()+"')",this.$("#cardNumber").text(this.model.maskedCard.getPrettyNumber()),this.$("#expiration").text(this.model.maskedCard.getExpiry()),this.$("#cvc").text(this.model.maskedCard.getCVC()),this.$("#domain").text(this.model.maskedCard.getDomain()),this.$("#originalValue").text(this.model.maskedCard.getOriginalValue()),this.$("#maskedCardView").show(),this.$("#maskedCard").show(),this.trigger("render")},this),this.model.maskedCard.bind("sync:error",function(e){this.updatePanelActivity("impression",this.createCardFailedViewPanelId,this.fieldId,!1),this.processError(e),this.trigger("render")},this),this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this.loadingDisplay=new n({customMessages:["mm_loading_display_Crunching","mm_loading_display_Clouds","mm_loading_display_Tubes","mm_loading_display_HangOn","mm_loading_display_Whoops_Panel"],interval:6e3,el:this.$("#loadingMaskedCard"),pageName:"card_create_panel"}),this.$("#loadingMaskedCard").show(),this.trigger("render"),this.ignoreExplicitClose=!0,this.model.maskedCard.save()}},cancelCardCreate:function(){this.$("#confirmAmountView").hide(),this.$("#newMaskedCard").show(),this.ignoreBlur(!1),this.$("#cardAmount").focus(),this.trigger("render")},createCard:function(e){e&&e.preventDefault();var t,n=/[^\d\.]/g;t=(t=this.$("#cardAmount").val()).replace(n,""),t=parseFloat(parseFloat(t).toFixed(2)),isNaN(t)?(this.$("#amountError").html(d.getText("mm_payment_error_validation_input")),this.trigger("render")):(this.$("#amountError").html(""),this.amount=t,this.model.primaryCard||this.model.companyRequest?h.paymentsModule.retrieveCardFee({requested_amount:r.DisposableCard.convertStringToCents(t),card_use:this.model.companyRequest?"company":"personal"},l.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t&&t.fee&&t.fee.total_fee?(this.model.total_fee=t.fee.total_fee,this.model.unlimited_plan=t.unlimited_plan,this.model.free_cards_used=t.free_cards_used,this.model.billing_account_type=t.billing_account_type):(this.model.total_fee=0,this.model.unlimited_plan=!1),this.model.primaryCard||this.model.companyRequest?this.model.entitledToPhone||this.model.upgradeToPremium||this.model.hasFreeCards||this.model.isFreeTrial?this.showConfirmAmountView():this.model.hasFreeCards||(this.$("#amountError").html(d.getText("mm_payment_helper_outOfCardsCheck")),this.trigger("render")):this.showBillingInfoView())},this)):this.showBillingInfoView())},showConfirmAmountView:function(){this.updatePanelActivity("impression",this.showConfirmAmountViewPanelId,this.fieldId,!1);var e={extraWidth:this.$("#register").is(":visible")?-1*this.billingInfoViewExtraWidth:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".payments-step").hide(),this.model.entitledToPhone||!this.model.upgradeToPremium||this.model.companyRequest?this.model.companyRequest?this.$("#confirmRegularMsg").html(d.getText("mm_payment_helper_company_willBeCharged")):this.model.useBitcoin?this.$("#confirmRegularMsg").html(d.getText("mm_payment_helper_paymentsr2_willBeChargedBitcoin")):"credit_card"==this.model.billing_account_type?this.$("#confirmRegularMsg").html(d.getText("mm_payment_helper_paymentsr2_willBeCharged_1",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+d.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(d.getText("mm_payment_helper_paymentsr2_willBeChargedAch",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+d.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(d.getText("mm_payment_helper_paymentsr2_willBeChargedUpgradePremium",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())),this.$(".confirmAmount").text(this.convertCentsToString(Number(r.DisposableCard.convertStringToCents(this.amount))+Number(this.model.total_fee))),this.model.unlimited_plan?(this.$(".unlimitedExceeded").show(),this.$(".unlimitedExceededCount").text(this.model.free_cards_used),this.$("#confirmCardCreate").val("Confirm with "+this.convertCentsToString(Number(this.model.total_fee))+" fee")):(this.$(".unlimitedExceeded").hide(),this.$("#confirmCardCreate").val("Confirm")),this.$("#confirmAmountView").show(),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.focusField(),this.autoResize(e)},verifyCardRequestBtc:function(e){this.model.useBitcoin=!0,this.verifyCardRequest(e)},verifyCardRequest:function(e){if(this.model.useBitcoin||this.model.companyRequest||this.model.primaryCard||"stripe"!=this.model.billing_manager){this.ignoreBlur(!0);var t=new Date,n=t.getMonth()+1,a=t.getFullYear();this.$("#autoCardMonth").val(n),this.$("#autoCardYear").val(a),e&&e.preventDefault(),this.$("#processingRequestView").show(),this.$("#panelOptions").hide(),this.ignoreExplicitClose=!0;var i={domain:this.options.domain};this.model.companyRequest&&(i.company=!0),h.paymentsModule.verifyCardRequest(i,l.bind(function(e,t){e?(this.$("#processingRequestView").hide(),this.processError(e),this.trigger("render")):(t&&t.key&&(this.biometricKey=t.key),this.model.hasRegistered&&!this.model.entitledToPhone?h.paymentsModule.retrieveCardFee({requested_amount:0},l.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t.card_credit&&t.card_credit.free_cards&&0<t.card_credit.free_cards&&(this.model.hasFreeCards=!0),this.showNewMaskedCardView())},this)):(this.$("#processingRequestView").hide(),this.showNewMaskedCardView()))},this)),this.autoResize()}else h.webapp.openPage("#premium")},showNewMaskedCardView:function(e){e&&e.preventDefault(),this.model.companyRequest&&s("#upgradeToPremiumCheckboxDiv").hide(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.$("#panelOptions").hide(),this.$("#newMaskedCard").show(),this.model.hasRegistered&&(this.model.hasFreeCards||(this.$("#upgradeToPremium").prop("checked",!0),this.model.upgradeToPremium=!0)),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.updatePanelActivity("impression",this.showCollectMaskedCardAmountViewPanelId,this.fieldId,!1),this.trigger("render"),c.setTimeout(l.bind(function(){this.$("#cardAmount").focus(),this.bindPanelTextInput(this.$("#cardAmount")),c.setTimeout(l.bind(function(){this.ignoreBlur(!1)},this),50)},this),500)},cleanupPanel:function(){},canShowAutoPremiumPanel:function(){return-1!=this.fieldType.indexOf("/financial/creditcard/number")},refreshUserInput:function(){var i=this.model.userInput;if(l.each(this.options.fields,l.bind(function(e){var t=e.dataType;if(t){var n=s(e.element).val();if(n&&""!=n)for(var a=0;a<2;a++)t in b&&(!i[b[t]]||""==i[b[t]]||0==a)&&(i[b[t]]=n),t=t.substr(0,t.lastIndexOf("/"))}},this)),i.part1&&""!=i.part1&&(i.number=i.part1+i.part2+i.part3+i.part4),i.number&&(i.number=i.number.replace(/[^0-9]+/g,""),i.last4=i.number.substr(i.number.length-4)),i.name&&""!=i.name||(i.name=i.issuedto),i.name&&""!=i.name||(i.name=i.fname),!i.lname||""==i.lname){var e=i.name;if(e&&""!=e){var t=i.name.split(/\s+/);0<t.length&&(i.fname=t[0],i.lname=t[1])}}i.fname&&i.lname&&(i.fname=i.fname.replace(i.lname,"").replace(/^[\s]+]|[\s]+$/g,"")),i.country&&i.country.match(/USA|United[\s]*States/i)&&(i.country="US"),
i.expirymonth&&(i.expirymonth=parseInt(i.expirymonth.replace(/[^0-9]+/g,"")))},afterInitialize:function(){this.options.entitledToPhone&&(this.templateName="payment_helper_paymentsr2_panel"),this.strategyId=this.options.strategyId,this.fieldId=this.options.fieldId,this.fieldType=this.options.fieldType,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.on("remove",l.bind(function(){this.biometricResponseId&&this.messenger.off(this.biometricResponseId)},this));var e=this.contentManager.preferences.getPref("biometric_type"),t="fingerprint";"apns.face_id"==e?t="Face ID":"apns.touch_id"==e&&(t="Touch ID"),this.model={panelType:"card",primaryCard:!1,authToken:this.options.authToken,hasRegistered:this.options.hasRegistered,isFreeTrial:this.options.entitledToPayments&&!this.options.entitledToPhone,entitledToPayments:this.options.entitledToPayments,cardNotSetup:this.contentManager.preferences.getPref("cardNotSetup"),hasEnabledPayments:this.options.hasEnabledPayments,hasAuthorizedCoinbase:this.options.hasAuthorizedCoinbase,entitledToPhone:this.options.entitledToPhone,canShowRealCards:this.contentManager.preferences.getSplitTest("wallet01")!=i.SPLIT_WALLET_OFF,cardDisabled:this.options.cardDisabled,realCardDisabled:this.options.realCardDisabled,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),face_id:"apns.face_id"==e,touch_id:"apns.face_id"!=e,biometric_type:t,showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("card-settings-seen"),hasCompanyCards:this.contentManager.preferences.getPref("hasCompanyCards"),firstFiveCards:parseInt(this.contentManager.preferences.getPref("countCardNotifications")||0)<5};var n=this;h.securityManager.getBillingManager(function(e){n.model.billing_manager=e});var a=this.contentManager.preferences.getPref("hasEnabledPayments");this.model.shieldedCard=new r.ShieldedCardCollection,this.panelId=8000006,this.maskedCardFirstStepPanelId=8000026,this.showCollectMaskedCardAmountViewPanelId=8000036,this.showConfirmAmountViewPanelId=8000046,this.createCardSuccessfullViewPanelId=8000056,this.createCardFailedViewPanelId=8000066,this.usedMaskedCardPanelId=8000076,this.usedAutofillMaskedCardViewPanelId=8000086,this.usedAutofillRealCardViewPanelId=8000096,this.showCollectBillingInfoViewPanelId=7000016,this.addingBillingInfoSuccessfullViewPanelId=7000026,this.addingBillingInfoFailedViewPanelId=7000036,this.clickedAutofillRealCardWhenNoCardExistsPanelId=7000046,this.updatePanelActivity("impression",this.maskedCardFirstStepPanelId,this.fieldId,!1),this.model.tabData=new r.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:l.bind(function(){this.model.realCards=new r.RealCardCollection,this.model.realCards.fetchAll({success:l.bind(function(){this.model.hasRegistered?this.model.shieldedCard.fetchAll({success:l.bind(function(){0<this.model.shieldedCard.length&&(this.model.primaryCard=this.model.shieldedCard.at(0)),this.model.disposableCards=new r.DisposableCardCollection,this.model.disposableCards.fetchAllByDomain(this.options.domain,l.bind(function(){if(h.memoryStore.get("cardgrowl"+this.options.strategyId,l.bind(function(e){this.showCardGrowl(e)},this)),this.model.primaryCard){if(this.refreshLastFourShieldedCardNumber(),this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),!a)return void this.closePanel();this.bind("enter0",this.verifyCardRequest,this),l.each(this.model.disposableCards.models,function(t,e){this.bind("enter"+(e+1),function(e){this.fillWithUsedCard(e,t.get("id"))},this)},this),this.render(),this.checkCallFromNotification()}else this.options.dynamicPanel?(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render()):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this))},this)}):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this)})},this)}),this.options.fromContextMenu&&(this.ignoreBlur(!0),c.setTimeout(l.bind(function(){this.verifyCardRequest()},this),100)),this.contentManager.closeToolbarPanel()},checkCallFromNotification:function(){this.options.params?(this.panelReason="growl","new_card"==this.options.params.step?this.verifyCardRequest():"fill_card"==this.options.params.step&&this.fillWithUsedCard(null,this.options.params.id)):(this.panelReason="panel",h.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,shown:1,amount:this.options.amount}))},beforeRemove:function(){this.options.params&&this.contentManager.messenger.sendToCS(this.options.params.frameId,"panel:closed")},showCardGrowl:function(e){var t=this.getMatchingCard(e);if(t){var n="realCard"==t.storageEntity,a=t.toJSON();t.get("address")&&(a.address=t.get("address")),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:a},height:260,neverFade:!0,type:n?"real_card":"card"})}},showBillingInfoView:function(){this.updatePanelActivity("impression",this.showCollectBillingInfoViewPanelId,this.fieldId,!1),this.$(".payments-step").hide(),this.$("#register").show(),this.ignoreBlur(!0),this.options.entitledToPhone?this.trigger("render"):this.trigger("render",{extraWidth:this.billingInfoViewExtraWidth})},registerAndMask:function(e){e&&e.preventDefault();var t=!1,n=this.$("#register input,#register select");l.each(n,function(e){(e=s(e)).is(":visible")&&""==e.val()&&!e.data("optional")?(e.addClass("error"),t||e.focus(),t=!0):e.removeClass("error")});var a=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if(!a.match(g)||!p(a)||"552942"==a.substring(0,6))return this.$("#autoCardNumber").addClass("error").focus(),this.$(".alert-error").text(d.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();if("US"!=this.$("#autoCountry").val())return this.$("#autoCountry").addClass("error").focus(),this.$(".alert-error").text(d.getText("mm_payment_helper_non_us3")).show(),void this.autoResize();if(t)return this.$(".alert-error").text(d.getText("mm_payment_helper_fill_all_required")).show(),void this.autoResize();if(this.model.hasRegistered)this.setupSubscription();else{if(!this.$("#autoEmail").val().match(u))return this.$(".alert-error").text(d.getText("mm_dntme_invalid_email")).show(),void this.autoResize();this.setupUser()}},setupUser:function(){var n={email:this.$("#autoEmail").val(),password:m(6),password_hint:d.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_card_panel"};this.showProgress(),h.licenseModule.register(n,l.bind(function(e,t){this.processRegistration(e,t,n,l.bind(function(e){e||this.setupSubscription()},this))},this)),this.autoResize()},setupSubscription:function(n){n=n||"two_dollars",this.$("#autoEmail").hide();var e=this.$("#autoState").val();"US"==this.$("#autoCountry").val()&&(e=this.$("#autoStateUS").val());var t=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if("552942"==t.substring(0,6))return this.$(".alert-error").text(d.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();this.$(".alert-error").hide(),this.showProgress();var a,i=!!this.model.primaryCard;a=i?{first_name:this.model.primaryCard.get("first_name"),last_name:this.model.primaryCard.get("last_name")}:{first_name:this.$("#autoFname").val(),last_name:this.$("#autoLname").val(),address1:this.$("#autoAddress").val(),state:e,city:this.$("#autoCity").val(),zip:this.$("#autoZip").val(),country:this.$("#autoCountry").val(),number:t,year:this.$("#autoCardYear").val(),month:this.$("#autoCardMonth").val(),verification_value:this.$("#autoCardCvv").val()},h.licenseModule.subscribe(a,n,"dntme_payment_helper",l.bind(function(e,t){this.processSubscription(e,t,a,l.bind(function(e){this.hideProgress(),e||(this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.model.shieldedCard.fetchAll({success:l.bind(function(){0<this.model.shieldedCard.length&&(this.model.primaryCard=this.model.shieldedCard.at(0)),"two_dollars"==n?"total_fee"in this.model?this.showConfirmAmountView():this.createCard():this.confirmCardCreate(null,{upgraded:!0})},this)}))},this))},this))},showProgress:function(){this.$(".progress").show(),this.$("#register input, #register select, #register button, #confirmAmountView input").attr("disabled","disabled"),this.autoResize()},hideProgress:function(){this.$(".progress").hide(),this.$("#register input, #register select, #register button, #confirmAmountView input").removeAttr("disabled"),this.autoResize()},processRegistration:function(e,t,n,a){if(e){var i=d.getText("mm_payment_helper_register_error"),s=e.responseJSON&&e.responseJSON.data?e.responseJSON.data.errors:null;"invalid email address"==e.responseJSON.error_code?i=d.getText("mm_payment_helper_invalid_email_server_error"):s&&s.email&&("has already been taken"==s.email[0]?i=d.getText("mm_payment_helper_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(i=d.getText("mm_payment_helper_version_not_allowed"))),this.$(".alert-error").html(i).show(),this.$(".alert-error #loginButton").click(l.bind(this.openLoginPage,this)),this.$(".alert-error #dnt2upgrade").click(l.bind(this.openDnt2UpgradePage,this)),this.autoResize(),a(i)}else this.contentManager.preferences.fetchAll(),this.model.hasRegistered=!0,a()},processSubscription:function(e,t,n,a){if(e){this.updatePanelActivity("impression",this.addingBillingInfoFailedViewPanelId,this.fieldId,!1);var i=t.errors.base;this.$(".alert-error").text(i[0]).show(),this.autoResize(),a(e)}else this.updatePanelActivity("impression",this.addingBillingInfoSuccessfullViewPanelId,this.fieldId,!1),this.contentManager.preferences.fetchAll(),a()},fillWithDisposableCard:function(e){e&&e.preventDefault(),this.updatePanelActivity("impression",this.usedMaskedCardPanelId,this.fieldId,!1);var t=this.model.maskedCard.toJSON();this.fillFields("payment",t,"payment"),this.options.contentManager.showNotification({msg:"<h4 style='display:inline;'>Masked Card</h4><div style='text-align:center;'><div>"+this.model.maskedCard.get("type")+"</div><div>"+this.model.maskedCard.get("number")+"</div><div>"+this.model.maskedCard.getExpiry()+"</div><div>"+this.model.maskedCard.getCVC()+"</div></div>",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:t},height:260,neverFade:!0,type:"card"}),this.closePanel()},setupCard:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#payments"}),this.closePanel(e)},fillWithUsedCard:function(t,e){if(this.ignoreBlur(!0),!t||(t.preventDefault(),!t.target.className.match(/overflow|right/i)))if(this._selectedCardId=void 0===e?s(t.currentTarget).data("cardid"):e,"panel"==this.panelReason&&h.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),"biometric"==this.contentManager.preferences.getPref("masked_card_auth")){h.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,biometric:1,amount:this.options.amount}),this.$("#panelOptions").hide(),this._maskedCardAuth=!1;var n=this;h.licenseModule.getGenericBiometricKey(null,function(e){e.success?(n.biometricKey=e.key,n.sendBiometricAuthRequest(t,options)):(n.$("#biometricAuth").show(),n.$("#biometricInfo").hide(),n.$("#biometricError").text(d.getText("mm_payment_helper_biometric_auth_disabled",[n.model.biometric_type])).show(),n.autoResize())})}else this._fillWithUsedCard()},getMatchingCard:function(t){var e;return this.model.disposableCards&&(e=l.find(this.model.disposableCards.models,function(e){if(e.id==t)return!0})),e||(e=l.find(this.model.realCards.models,function(e){if(e.id==t)return!0})),e},_fillWithUsedCard:function(){var e=this._selectedCardId,t=this.getMatchingCard(e);if(!t.get("number")){var n=this;return this.$("#fetchingCard").show(),t.fetch({success:function(){n._fillWithUsedCard()}}),void this.autoResize()}this.biometricKey&&this.biometricToken&&h.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0);var a="realCard"==t.storageEntity;if(a){var i=t.get("type");t.get("brand")&&-1==t.get("brand").indexOf("generic")&&(i=t.get("brand")),this.updatePanelActivity("impression",this.usedAutofillRealCardViewPanelId,this.fieldId,!1)}else{i="masked";this.updatePanelActivity("impression",this.usedAutofillMaskedCardViewPanelId,this.fieldId,!1)}var s=t.toJSON();t.get("address")&&(s.address=t.get("address")),this.logged||(this.logged=!0,h.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,success:1,filled:i,amount:this.options.amount})),this.fillFields("payment",s,"payment"),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:s},height:260,neverFade:!0,type:a?"real_card":"card"}),this.closePanel()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel=e.template(function(e,t,a,i,n){function s(e){var t,n="";return n+="\n      ",t=e,((t=p.invokePartial(i["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,a,i))||0===t)&&(n+=t),n+="\n    "}function l(e){var t,n="";return n+="\n      ",t=e,((t=p.invokePartial(i["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,a,i))||0===t)&&(n+=t),n+="\n    "}a=a||e.helpers,i=i||e.partials;var o,r,c,d,h="",p=this,m="function",u=a.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n\n  <!--Protect My Card Step 1-->\n    ',o=a.hasAuthorizedCoinbase||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),r=a["if"],(d=p.program(1,s,n)).hash={},(d.fn=d).inverse=p.program(3,l,n),((o=r.call(t,o,d))||0===o)&&(h+=o),h+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_safestWayTitle",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',o="mm_payment_helper_howMuch",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',o="mm_payment_helper_please_wait",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="height:50px;display:none;text-align:center;padding:10px;">\n  </div>\n\n  <!-- No Card On File -->\n  <div id="register" class="payments-step" style="display: none;padding: 10px;">\n    ',o="mm_payment_error_card_not_setup",((o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)||0===o)&&(h+=o),h+='\n  </div>\n  <!-- End No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_finishUpTitle",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',o="mm_payment_helper_paymentsr2_ready",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'</span>\n      <h5 class="unlimitedExceeded" style="display: none; color: red">\n        You have used <span class="unlimitedExceededCount" style="font-weight: bold;"></span> free cards in last 30 days.\n        Please switch to <u style="cursor: pointer;color:blue !important;" class="switch-to-ach">Bank Account</u> to continue using unlimited free masked card.\n        <br/>\n      </h5>\n      <h5 id="confirmRegularMsg">\n        ',o=null===(o=a.primaryCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryCard"))||o===undefined||!1===o?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"getLastFour"),r="mm_payment_helper_paymentsr2_willBeCharged_1",h+=f(o=typeof(c=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,o,{hash:{}}):c===g?u.call(t,"intl",r,o,{hash:{}}):c)+"<span class='confirmAmount'></span> ",o="mm_payment_helper_paymentsr2_willBeCharged_2",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'\n      </h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',o=t,((o=p.invokePartial(i["common.biometric_auth"],"common.biometric_auth",o,a,i))||0===o)&&(h+=o),h+='\n\n  <div id="fetchingCard" style="display:none;padding: 20px 10px;">\n      Please wait. Fetching card details...\n  </div>\n  <!-- Step 4 Use Card -->\n    <span id="maskedCardView" style="display:none;">\n        <div id="maskedCardError" style="display:none;text-align:center;padding:10px;">\n            <div id="maskedCardErrorMsg" class="alert alert-error">\n\n            </div>\n            <div style="text-align:center;padding:10px 0 5px 0;">\n                <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',o="mm_notification_helper_chatNow",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'" />\n            </div>            \n        </div>\n        <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n          <div id="maskedCardBg" style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',typeof(o=a.getMaskedCardImage||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getMaskedCardImage"))===m?o=o.call(t,{hash:{}}):o===g&&(o=u.call(t,"getMaskedCardImage",{hash:{}})),h+=f(o)+'\');">\n              <br style="clear:both;"/>\n              <div style="text-align:right;margin-right:20px;color:white;">\n                  <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',typeof(o=a.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"))===m?o=o.call(t,{hash:{}}):o===g&&(o=u.call(t,"getOriginalValue",{hash:{}})),h+=f(o)+"</span>\n                  <br/>\n                  <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",o="mm_notification_helper_at",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",typeof(o=a.getDomain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"))===m?o=o.call(t,{hash:{}}):o===g&&(o=u.call(t,"getDomain",{hash:{}})),h+=f(o)+'</span>\n              </div>\n              <div style="text-align:center;margin-top:5px;color:white;">\n                  <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',typeof(o=a.getSeparatedCardNumber||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"))===m?o=o.call(t,{hash:{}}):o===g&&(o=u.call(t,"getSeparatedCardNumber",{hash:{}})),h+=f(o)+"</h3>\n              </div>\n              <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                  <span style=\"float:left;\">",o="mm_payment_helper_expDate",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+' <span id="expiration">',typeof(o=a.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"))===m?o=o.call(t,{hash:{}}):o===g&&(o=u.call(t,"getExpiry",{hash:{}})),h+=f(o)+'</span></span> <span style="float:right;margin-right:115px;"> ',o="mm_payment_helper_cvc",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+' <span id="cvc">',typeof(o=a.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"))===m?o=o.call(t,{hash:{}}):o===g&&(o=u.call(t,"getCVC",{hash:{}})),h+=f(o)+'</span></span>\n              </div>\n          </div>\n          <div style="text-align:center;margin-top:5px;">\n            <input type="button" value="',o="mm_payment_helper_useMyMasked",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'" class="btn btn-primary" id="useMaskedCard" />\n          </div>\n        </div>\n        <div id="dummyCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n            <div id="dummyCardTitle" style="display: none;font-family: arial, sans-serif;">',o="mm_payment_helper_dummy_card_ready",h+=f(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"intl",o,{hash:{}}):r)+'</div>\n            <img class="dummyCardImg" src="',o="/pages/images/masked_card_gold.png",h+=f(o=typeof(r=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===m?r.call(t,o,{hash:{}}):r===g?u.call(t,"assetUrl",o,{hash:{}}):r)+'"/>\n        </div>\n    </span>\n\n  <!-- End Step 4 -->\n  </div>\n\n  </span>\n  <!-- End Normal Flow -->\n\n  <!-- Default header (actually footer) for the panels -->\n  ',o=t,((o=p.invokePartial(i["common.header"],"common.header",o,a,i))||0===o)&&(h+=o),h+="\n\n  <!-- end Default header (actually footer) -->\n\n  <!-- Inline FAQ Panel -->\n  ",o=t,((o=p.invokePartial(i["payment_helper.inline_faq"],"payment_helper.inline_faq",o,a,i))||0===o)&&(h+=o),h+="\n  <!-- end Inline FAQ Panel -->\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money=e.template(function(e,t,a,i,n){function s(e){var t,n="";return n+="\n      ",t=e,((t=h.invokePartial(i["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,a,i))||0===t)&&(n+=t),n+="\n    "}function l(e){var t,n="";return n+="\n      ",t=e,((t=h.invokePartial(i["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,a,i))||0===t)&&(n+=t),n+="\n    "}a=a||e.helpers,i=i||e.partials;var o,r,c,d="",h=this,p="function",m=a.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',o="mm_payment_helper_please_wait",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="display:none;height:50px;text-align:center;padding:10px;">\n  </div>\n\n  <!-- Card Money Step 1-->\n    ',o=a.hasAuthorizedCoinbase||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),r=a["if"],(c=h.program(1,s,n)).hash={},(c.fn=c).inverse=h.program(3,l,n),((o=r.call(t,o,c))||0===o)&&(d+=o),d+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_safestWayTitle",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',o="mm_payment_helper_howMuch",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n    <div id="upgradeToPremiumCheckboxDiv" class="checkbox" style="width:300px;margin:0px 10px 10px 20px;">\n      <!-- default values and text changed in panel.js depending on card money/has free cards/if registered/premium states -->\n      <label id="upgradeToPremiumCheckboxLabel" class="alert-success" style="font-size:12px;"><input type="checkbox" id="upgradeToPremium"/>',o="mm_payment_helper_goPremiumCheckboxLabel",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+"</label>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <!-- Card Money Step No Card On File -->\n  ",o=t,((o=h.invokePartial(i["payment_helper.no_card_on_file"],"payment_helper.no_card_on_file",o,a,i))||0===o)&&(d+=o),d+='\n  <!-- End Step Card Money No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_finishUpTitle",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',o="mm_payment_helper_paymentsr2_ready",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+'</span>\n      <h5 id="confirmRegularMsg"></h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',o=t,((o=h.invokePartial(i["common.biometric_auth"],"common.biometric_auth",o,a,i))||0===o)&&(d+=o),d+='\n\n  <!-- Step 4 Use Card -->\n  <span id="maskedCardView" style="display:none;">\n      <div id="maskedCardError" style="text-align:center;padding:10px;display:none;">\n        <div id="maskedCardErrorMsg" class="alert alert-error"></div>\n        <div style="text-align:center;padding:10px 0 5px 0;">\n          <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',o="mm_notification_helper_chatNow",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+'" />\n        </div>\n      </div>\n      <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n        <div id="maskedCardBg" style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',typeof(o=a.getMaskedCardImage||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getMaskedCardImage"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"getMaskedCardImage",{hash:{}})),d+=g(o)+'\');">\n            <br style="clear:both;"/>\n            <div style="text-align:right;margin-right:20px;color:white;">\n                <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',typeof(o=a.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"getOriginalValue",{hash:{}})),d+=g(o)+"</span>\n                <br/>\n                <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",o="mm_notification_helper_at",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",typeof(o=a.getDomain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"getDomain",{hash:{}})),d+=g(o)+'</span>\n            </div>\n            <div style="text-align:center;margin-top:5px;color:white;">\n                <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',typeof(o=a.getSeparatedCardNumber||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"getSeparatedCardNumber",{hash:{}})),d+=g(o)+"</h3>\n            </div>\n            <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                <span style=\"float:left;\">",o="mm_payment_helper_expDate",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+' <span id="expiration">',typeof(o=a.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"getExpiry",{hash:{}})),d+=g(o)+'</span></span> <span style="float:right;margin-right:115px;"> ',o="mm_payment_helper_cvc",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+' <span id="cvc">',typeof(o=a.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"getCVC",{hash:{}})),d+=g(o)+'</span></span>\n            </div>\n        </div>\n        <div style="text-align:center;margin-top:5px;">\n          <input type="button" value="',o="mm_payment_helper_useMyMasked",d+=g(o=typeof(r=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r)+'" class="btn btn-primary" id="useMaskedCard" />\n        </div>\n      </div>\n  </span>\n  <!-- End Step 4 -->\n\n   </div>\n  </span>\n  <!-- Default header (actually footer) for the panels -->\n   ',o=t,((o=h.invokePartial(
i["common.header"],"common.header",o,a,i))||0===o)&&(d+=o),d+="\n\n  <!-- end Default header (actually footer) -->\n  <!-- End Normal Flow -->\n\n  <!-- Inline FAQ Panel -->\n    ",o=t,((o=h.invokePartial(i["payment_helper.inline_faq"],"payment_helper.inline_faq",o,a,i))||0===o)&&(d+=o),d+="\n  <!-- end Inline FAQ Panel -->\n\n</div>"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.password_helper_panel=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n        <!-- existing passwords -->\n        <a href="#" class="mmKeyOption account" data-account="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===m?n=n.call(e,{hash:{}}):n===g&&(n=u.call(e,"this.id",{hash:{}})),i+=f(n)+'"><div class="element otherblue" >\n          <span class="panelLeft" title="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===m?n=n.call(e,{hash:{}}):n===g&&(n=u.call(e,"this.getAddress",{hash:{}})),i+=f(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),a=s["if"],(d=p.program(2,l,t)).hash={},(d.fn=d).inverse=p.program(4,o,t),((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n            Fill password: ",typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddressX"))===m?n=n.call(e,{hash:{}}):n===g&&(n=u.call(e,"this.getAddressX",{hash:{}})),i+=f(n)+'\n          </span>\n          <span class="panelRight">\n            <span class="overflowText">(',n="createdAt",n=typeof(a=s.live_timestamp||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"))===m?a.call(e,n,{hash:{}}):a===g?u.call(e,"live_timestamp",n,{hash:{}}):a,i+=f(n)+")</span>\n          </span>\n        </div></a>\n    "}function l(e){var t,n,a="";return a+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'" style="width:40px;height:21px;"/>\n          '}function o(e){var t,n,a="";return a+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'" style="width:40px;height:21px;"/>\n          '}s=s||e.helpers,n=n||e.partials;var r,c,d,h="",p=this,m="function",u=s.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="newpanel">\n    <div class="left-panel">\n    ',r=s.accounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),c=s.each,(d=p.program(1,i,a)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+='\n\n    <!-- Generate Password -->\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',r="/pages/images/2015panels/pass_green.png",r=typeof(c=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"assetUrl",r,{hash:{}}):c,h+=f(r)+'"/>\n        ',r="mm_password_helper_generateStrong",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'\n      </span>\n    </div></a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element otherblue" style="margin-bottom:5px;" id="options">\n      <span>\n        <img class="iconPos" src="',r="/pages/images/2015panels/pass_blue.png",r=typeof(c=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"assetUrl",r,{hash:{}}):c,h+=f(r)+'"/>\n        ',r="mm_new_password_helper_generate",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',r="pages/images/pass_gen_refresh.png",r=typeof(c=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"assetUrl",r,{hash:{}}):c,h+=f(r)+'"/>\n        </div>\n        <div>\n            <label for="length">',r="mm_new_password_helper_length",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div style="margin-top:10px;" class="clearfix">\n            <div style="width:40%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',r="mm_new_password_helper_numbers",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'</label>\n            </div>\n            <div style="width:50%;float:left;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',r="mm_new_password_helper_special",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'</label>\n            </div>\n        </div>\n    <div style="margin-top:10px;margin-bottom:10px;">\n      <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',r="mm_new_password_helper_save",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'"/>\n    </div>\n    </div>\n    ',r=t,((r=p.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",r,s,n))||0===r)&&(h+=r),h+="\n    </div>\n    ",r=t,((r=p.invokePartial(n["common.header"],"common.header",r,s,n))||0===r)&&(h+=r),h+="\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.password_helper_panel}),ABINE_DNTME.define("abine/views/passwordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(d,h,e,n,t,a,i,s){return t.extend({templateName:"password_helper_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click .account":"fillWithAccount","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){s.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:d.bind(function(){this.loadAccounts(d.bind(function(){this.contentManager.loadUserPreferences(d.bind(function(){if(this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered){for(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.numMenuOptions=0;this.numMenuOptions<this.model.accounts.length;)this.bind("enter"+this.numMenuOptions++,function(e,t){this.fillWithAccount(e,t)});this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithStrongPassword(e)}),this.bind("enter"+this.numMenuOptions++,function(e){this.showOptions(e)}),i.setTimeout(d.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this),100)}else this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this);this.render()},this))},this))},this)})},loadAccounts:function(e){var t=new n.AccountCollection;t.fetchLoginsByDomain(this.options.domain,d.bind(function(){this.model.accounts=new n.AccountCollection(t.filter(function(e){return!!e.get("password")})),e()},this))},fillWithAccount:function(e,t){var n;if(e&&e.preventDefault(),t||0==t){var a=this.getKeyOptions();n=h(a[t]).data("account")}else n=h(e.target).closest("a").data("account");var i=d.find(this.model.accounts.models,function(e){return e.get("id")==n}),s=i.get("login_url");(!s||0==s.length||s!=this.contentManager.href&&-1==this.contentManager.href.indexOf(s))&&i.set("login_url",this.contentManager.href);var l=i.get("times_used")||0;if(i.set("times_used",l+1),i.set("pushed",0),i.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004}),i.get("mfa"))return this.contentManager.closeCurrentPanel(),this.options.fillAccount=i,this.ignoreBlur(!0),void this.contentManager.showLoginPanel(this.options);var o=i.get("email"),r=i.get("username"),c=i.get("password");r&&0!=r.length||(r=o),o&&0!=o.length||(o=r),this.fillFields("login-no-submit",{email:o,username:r,password:c},"login"),this.closePanel()},showOptions:function(e){e&&e.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(e),h(".moreOptions",this.el).show(),h(".lessOptions",this.el).hide(),this.trigger("render"),i.setTimeout(d.bind(function(){this.focusField(),i.setTimeout(d.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),t=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");h("#password-input",this.el).val(a.generateNewOptionsPassword(e,t,n))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0);var n="/password"==this.options.fieldType;this.fillFields("password",t,{origin:"strong",exactTypeMatch:n}),this.closePanel()},fillWithOptionPassword:function(e){var t=h("#password-input",this.el).val();this.fillPassword(e,t)},fillWithStrongPassword:function(e){var t={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"},n="";n=this.options.fieldType in t?a[t[this.options.fieldType]]():a.generateNoSpecialCharsPassword(),this.fillPassword(e,n)},fillWithDifferentSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,a.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,a.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){s.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,a.generateNoDigitsPassword())}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.phone_helper_panel=e.template(function(e,t,s,a,n){function i(e,t){var n,a,i="";return i+="\n          ",n=null===(n=s.primaryPhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isValidated"),a=s["if"],(E=y.program(2,l,t)).hash={},(E.fn=E).inverse=y.program(7,c,t),((n=a.call(e,n,E))||0===n)&&(i+=n),i+='\n          <!--Disclose My Phone-->\n          <a href="#" class="mmKeyOption primaryPhone"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',n="/pages/images/2015panels/phone_red.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===A?a.call(e,n,{hash:{}}):a===k?D.call(e,"assetUrl",n,{hash:{}}):a,i+=T(n)+'"/>\n                  ',n="mm_phone_helper_disclosePhone",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?a.call(e,n,{hash:{}}):a===k?D.call(e,"intl",n,{hash:{}}):a,i+=T(n)+" ",typeof(n=null===(n=s.primaryPhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getPrettyNumber"))===A?n=n.call(e,{hash:{}}):n===k&&(n=D.call(e,"primaryPhone.getPrettyNumber",{hash:{}})),i+=T(n)+"\n              </span>\n          </div></a>\n    "}function l(e,t){var n,a,i="";return i+="\n              ",n=null===(n=s.disposablePhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"released"),a=s["if"],(E=y.program(3,o,t)).hash={},(E.fn=E).inverse=y.program(5,r,t),((n=a.call(e,n,E))||0===n)&&(i+=n),i+="\n          "}function o(e){var t,n,a="";return a+='\n                <!--Error Handling-->\n                <div id="error" class="element" style="display:none">\n                  <span class="message">',t="mm_phone_helper_restore_failed",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,a+=T(t)+'</span>\n                </div>\n\n                <!--Get New Mask Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"assetUrl",t,{hash:{}}):n,a+=T(t)+'"/>\n                      <span class="msg">',t="mm_phone_helper_newMaskPhone",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,a+=T(t)+'</span>\n                  </span>\n                  <span class="panelRight">\n                    <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"assetUrl",t,{hash:{}}):n,a+=T(t)+'"/>\n                  </span>\n                </div></a>\n              '}function r(e){var t,n,a="";return a+='\n                <!--Mask My Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"assetUrl",t,{hash:{}}):n,a+=T(t)+'"/>\n                    ',t="mm_phone_helper_maskPhone",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,a+=T(t)+'\n                  </span>\n                  <span class="panelRight">\n                      <span class="overflowText">',typeof(t=null===(t=s.disposablePhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"disposablePhone.getPrettyNumber",{hash:{}})),a+=T(t)+"</span>\n                  </span>\n                </div></a>\n              "}function c(e){var t,n,a="";return a+='\n              <!-- Setup your Masked Phone -->\n              <a href="#" class="mmKeyOption setupPhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      ',t="mm_phone_helper_pleaseValidate",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,a+=T(t)+"\n                  </span>\n              </div></a>\n          "}function d(e,t){var n,a,i="";return i+="\n\n        ",n=s.dynamicPanel||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),a=s["if"],(E=y.program(10,h,t)).hash={},(E.fn=E).inverse=y.program(13,m,t),((n=a.call(e,n,E))||0===n)&&(i+=n),i+="\n    "}function h(e,t){var n,a,i="";return i+="\n            ",n=s.panelSections||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),a=s.each,(E=y.program(11,p,t)).hash={},(E.fn=E).inverse=y.noop,((n=a.call(e,n,E))||0===n)&&(i+=n),i+="\n        "}function p(e){var t,n="";return n+='\n                <div id="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"this.id",{hash:{}})),n+=T(t)+'" style="height:',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"this.height",{hash:{}})),n+=T(t)+'" class="panelSection ',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"this.class_name",{hash:{}})),n+=T(t)+'">\n                    ',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"this.body",{hash:{}})),(t||0===t)&&(n+=t),n+="\n                </div>\n            "}function m(e,t){var n,a,i="";return i+="\n            ",n=s.entitledToPhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),a=s["if"],(E=y.program(14,u,t)).hash={},(E.fn=E).inverse=y.program(16,g,t),((n=a.call(e,n,E))||0===n)&&(i+=n),i+="\n        "}function u(e){var t,n,a="";return a+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft">\n                            ',t="mm_phone_helper_setupMasked",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,a+=T(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function g(e){var t,n,a="";return a+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft" style="width:100%;">\n                            ',t="mm_phone_helper_upgradeMaskedPhone",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,a+=T(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function f(e){var t,n,a="";return a+='\n            <a href="#" class="mmKeyOption alternatePhone" data-number="+',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"country_code"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"this.country_code",{hash:{}})),a+=T(t)+" ",typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"this.number",{hash:{}})),a+=T(t)+'"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',t="/pages/images/2015panels/phone_red.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"assetUrl",t,{hash:{}}):n,a+=T(t)+'"/>\n                  ',t="mm_phone_helper_disclosePhone",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,a+=T(t)+" ",typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPrettyNumber"))===A?t=t.call(e,{hash:{}}):t===k&&(t=D.call(e,"this.getPrettyNumber",{hash:{}})),a+=T(t)+"\n              </span>\n            </div></a>\n        "}function b(e){var t,n="";return n+="\n        ",t=e,((t=y.invokePartial(a["common.header"],"common.header",t,s,a))||0===t)&&(n+=t),n+="\n    "}s=s||e.helpers,a=a||e.partials;var _,v,E,N="",y=this,A="function",D=s.helperMissing,k=void 0,T=this.escapeExpression;return N+='<div class="newpanel">\n    <div class="left-panel">\n    ',_=s.primaryPhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryPhone"),v=s["if"],(E=y.program(1,i,n)).hash={},(E.fn=E).inverse=y.program(9,d,n),((_=v.call(t,_,E))||0===_)&&(N+=_),N+="\n        <!--Alternate Phones from identities -->\n        ",_=s.alternatePhones||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"alternatePhones"),v=s.each,(E=y.program(18,f,n)).hash={},(E.fn=E).inverse=y.noop,((_=v.call(t,_,E))||0===_)&&(N+=_),N+="\n    </div>\n    ",_=t,((_=y.invokePartial(a["common.auto_fill_with"],"common.auto_fill_with",_,s,a))||0===_)&&(N+=_),N+="\n\n    ",_=s.dynamicPanel||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),v=s.unless,(E=y.program(20,b,n)).hash={},(E.fn=E).inverse=y.noop,((_=v.call(t,_,E))||0===_)&&(N+=_),N+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.phone_helper_panel}),ABINE_DNTME.define("abine/views/phoneHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(i,s,e,t,n,a,l,o){return n.extend({templateName:"phone_helper_panel",events:{"click a.primaryPhone":"fillWithPrimaryPhone","click a.alternatePhone":"fillWithAlternatePhone","click a.disposablePhone":"fillWithDisposablePhone","click a.getStarted":"getStarted","click a.setupPhone":"setupPhone","click a.upgradeToPhone":"getStartedWithPhone","click .panelSection":"performActions","click .help-link":"openHelp","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},getStartedWithPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),l.webapp.openPhones(),this.closePanel(e)},openHelp:function(){l.webapp.openHelp("/phone"),this.closePanel()},setupPhone:function(e){l.webapp.openPhones(),this.closePanel(e),e.preventDefault()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"phone",primaryPhone:!1,disposablePhone:!1,alternatePhones:new t.ShieldedCardCollection,hasRegistered:this.options.hasRegistered,entitledToPhone:this.options.entitledToPhone,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("phone-settings-seen")},this.model.tabData=new t.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:i.bind(function(){this.contentManager.loadUserPreferences(i.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.shieldedPhones=new t.ShieldedPhoneCollection,this.model.shieldedPhones.bind("sync:success",function(){if(0<this.model.shieldedPhones.length&&(this.model.primaryPhone=this.model.shieldedPhones.at(0),this.model.primaryPhone.get("number")||(this.model.primaryPhone=null),i.each(this.model.shieldedPhones.models,i.bind(function(e){e.get("identity")&&this.model.alternatePhones.add(e)},this))),this.model.primaryPhone){if(this.panelId=3000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.model.primaryPhone.isValidated()){var e=this.model.primaryPhone.generateDisposable();e.save({},{success:i.bind(function(){this.model.disposablePhone=e,this.render()},this)}),this.bind("enter0",this.fillWithDisposablePhone,this)}else this.bind("enter0",this.setupPhone,this);this.bind("enter1",this.fillWithPrimaryPhone,this)}else if(this.options.dynamicPanel)this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0);else{if(!this.model.entitledToPhone&&0==this.model.alternatePhones.length)return void this.closePanel();this.panelId=7000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.getStartedWithPhone,this)}this.render()},this),this.model.shieldedPhones.fetchAll()},this))},this)})},fillWithPrimaryPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.fillFields("phone",this.model.primaryPhone.toJSON(),"primary"),this.closePanel()},fillWithAlternatePhone:function(e){e&&e.preventDefault();for(var t=null,n=e.target;!t;)t=s(n).data("number"),n=n.parentNode;var a=i.find(this.model.alternatePhones.models,function(e){return t=="+"+e.get("country_code")+" "+e.get("number")});this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.fillFields("phone",a.toJSON(),"primary"),this.closePanel()},fillWithDisposablePhone:function(e){e&&e.preventDefault(),this.ignoreBlur(!0),this.$(".loading").show(),this.$(".disposablePhone .msg").text(o.getText("mm_phone_helper_restore_progress")),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var t=this.model.primaryPhone.generateDisposable();t.save({filling:!0},{success:i.bind(function(){this.fillFields("phone",t.toJSON(),"disposable"),this.closePanel()},this),error:i.bind(function(){this.$(".disposablePhone").hide(),this.$("#error").show(),this.trigger("resize")},this)})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel=e.template(function(e,t,i,n,a){function s(e){var t,n,a="";return a+='\n    <!-- Login Emails -->\n    <a href="#" class="mmKeyOption account" data-account="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"this.id",{hash:{}})),a+=u(t)+'"><div class="element" id="mask">\n        <span class="panelLeft" title="',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"this.getAddress",{hash:{}})),a+=u(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/pass_green.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"assetUrl",t,{hash:{}}):n,a+=u(t)+'"/>\n            ',t="mm_cp_login_helper_use",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"intl",t,{hash:{}}):n,a+=u(t)+" ",typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"))===h?t=t.call(e,{hash:{}}):t===m&&(t=p.call(e,"this.getAddress",{hash:{}})),a+=u(t)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">',t="mm_email_helper_created",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"intl",t,{hash:{}}):n,a+=u(t)+" ",t="createdAt",t=typeof(n=i.live_timestamp||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"live_timestamp",t,{hash:{}}):n,a+=u(t)+"</span>\n        </span>\n    </div></a>\n    "}i=i||e.helpers,n=n||e.partials;var l,o,r,c="",d=this,h="function",p=i.helperMissing,m=void 0,u=this.escapeExpression;return c+='<div class="newpanel">\n    <div class="left-panel">\n    ',l=i.accounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),o=i.each,(r=d.program(1,s,a)).hash={},(r.fn=r).inverse=d.noop,((l=o.call(t,l,r))||0===l)&&(c+=l),c+="\n    </div>\n    ",l=t,((l=d.invokePartial(n["common.header"],"common.header",l,i,n))||0===l)&&(c+=l),c+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel}),ABINE_DNTME.define("abine/views/changePasswordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(t,a,e,n,i,s,l){return n.extend({templateName:"changepassword_helper_password_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){l.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.contentManager.loadUserPreferences(t.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered?(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.bind("enter0",function(e){this.fillWithStrongPassword(e)})):this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this),this.render()},this))},showOptions:function(e){e&&e.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(e),a(".moreOptions",this.el).show(),a(".lessOptions",this.el).hide(),this.trigger("render"),s.setTimeout(t.bind(function(){this.focusField(),s.setTimeout(t.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),t=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");a("#password-input",this.el).val(i.generateNewOptionsPassword(e,t,n))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0),this.fillFields("password",t,{origin:"strong",exactTypeMatch:!0}),this.closePanel()},fillWithOptionPassword:function(e){var t=a("#password-input",this.el).val();this.fillPassword(e,t)},fillWithStrongPassword:function(e){var t={"/password":i.generateRandomPassword,"/password/differentSpecialChars":i.generateSpecialCharsPassword,"/password/noSpecialChars":i.generateNoSpecialCharsPassword,"/password/noNumbers":i.generateNoDigitsPassword};if(this.fieldType in t)var n=t[this.fieldType]();else n=i.generateNoSpecialCharsPassword();this.fillPassword(e,n)},fillWithDifferentSpecialChars:function(e){l.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){
l.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){l.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoDigitsPassword())}})}),ABINE_DNTME.define("abine/views/changePasswordLoginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies"],function(r,c,e,t,n,a){return n.extend({templateName:"changepassword_helper_login_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp"},openHelp:function(){a.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"account",accounts:new t.AccountCollection,show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.model.accounts.fetchLoginsByDomain(this.options.domain,r.bind(function(e){if(e||0==this.model.accounts.length)this.closePanel();else{this.numMenuOptions=this.model.accounts.length;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithAccount(e,t)},this);this.render()}},this))},fillWithAccount:function(e,t){var n;if(e&&e.preventDefault(),t||0==t){var a=this.getKeyOptions();n=c(a[t]).data("account")}else n=c(e.target).closest("a").data("account");var i=r.find(this.model.accounts.models,function(e){return e.get("id")==n});this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var s=i.get("email"),l=i.get("username"),o=i.get("password");l&&0!=l.length||(l=s),s&&0!=s.length||(s=l),this.fillFields("login",{email:s,username:l,password:o,accountId:i.id},"changepassword"),this.closePanel()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,s,l="",o=this,r="function",c=n.helperMissing,d=void 0,h=this.escapeExpression;return l+='<div class="newpanel">\n    <!-- Generate Password -->\n    <div class="left-panel">\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'"/>\n        ',i="mm_password_helper_generateStrong",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'\n      </span>\n      </div>\n    </a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element mask" id="options">\n      <span>\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'" style="width:37px;height:21px;"/>\n        ',i="mm_new_password_helper_generate",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',i="pages/images/pass_gen_refresh.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'"/>\n        </div>\n        <div>\n            <label for="length">',i="mm_new_password_helper_length",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div>\n            <div style="width:50%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_numbers",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'</label>\n            </div>\n            <div style="width:50%;float:right;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_special",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'</label>\n            </div>\n        </div>\n        <div style="margin-top:10px;margin-bottom:10px;">\n            <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',i="mm_new_password_helper_save",l+=h(i=typeof(s=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"intl",i,{hash:{}}):s)+'"/>\n        </div>\n    </div>\n    </div>\n    ',i=t,((i=o.invokePartial(a["common.header"],"common.header",i,n,a))||0===i)&&(l+=i),l+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("search_helper.actions",e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="action">\n    <button class="btn btn-small fill" data-id="',typeof(a=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"this.id",{hash:{}})),s+=c(a)+'">Fill</button>\n    <img src="',a="/pages/images/arrow-closed.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'" class="arrow-open" />\n    <img src="',a="/pages/images/arrow-opened.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'" class="arrow-close" style="display: none;"/>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("search_helper.actions_copy",e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="action">\n    <button class="btn btn-small fill" data-id="',typeof(a=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"this.id",{hash:{}})),s+=c(a)+'">Fill</button>\n    <button class="btn btn-small copy" data-id="',typeof(a=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"this.id",{hash:{}})),s+=c(a)+'"><img src="',a="/pages/images/copy-icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'" class="copy-icon"/> Copy</button>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_account=e.template(function(e,t,s,a,n){function i(e,t){var n,a,i="";return i+='\n    <div class="result-detail" style="display: none;padding-left: 60px">\n            ',n=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),a=s["if"],(m=g.program(2,l,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n            ",n=s.username||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),a=s["if"],(m=g.program(4,o,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n            ",n=s.password||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),a=s["if"],(m=g.program(6,r,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n            ",n=s.createdAt||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"createdAt"),a=s["if"],(m=g.program(8,c,t)).hash={},(m.fn=m).inverse=g.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n    </div>\n    "}function l(e){var t,n,a="";return a+='\n                <div class="copy" title="copy" data-type="email address" data-copy="',typeof(t=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"email",{hash:{}})),a+=v(t)+'">Email: &nbsp;',typeof(t=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"email",{hash:{}})),a+=v(t)+'\n                    <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,a+=v(t)+'" class="copy-icon"/></div>\n            '}function o(e){var t,n,a="";return a+='\n                <div class="copy" title="copy" data-type="username" data-copy="',typeof(t=s.username||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"username",{hash:{}})),a+=v(t)+'">Username: &nbsp;',typeof(t=s.username||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"username",{hash:{}})),a+=v(t)+'\n                    <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,a+=v(t)+'" class="copy-icon"/></div>\n            '}function r(e){var t,n,a="";return a+='\n                <div class="copy" title="copy" data-type="password" data-copy="',typeof(t=s.password||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"))===f?t=t.call(e,{hash:{}}):t===_&&(t=b.call(e,"password",{hash:{}})),a+=v(t)+'">Password: &nbsp;<span class="password">**********</span>\n                    &nbsp;<img title="show password" src="',t="/pages/images/show-password.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,a+=v(t)+'" class="view-password"/>\n                    <img title="hide password" src="',t="/pages/images/hide-password.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,a+=v(t)+'" class="hide-password" style="display: none;"/>\n                    <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"assetUrl",t,{hash:{}}):n,a+=v(t)+'" class="copy-icon"/>\n                </div>\n            '}function c(e){var t,n,a="";return a+="\n                <div>Created: ",t="createdAt",t=typeof(n=s.live_timestamp||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"))===f?n.call(e,t,{hash:{}}):n===_?b.call(e,"live_timestamp",t,{hash:{}}):n,a+=v(t)+"</div>\n            "}function d(e){var t,n="";return n+='\n    <div class="result-detail" style="display: none;text-align: center">\n        Account protected with Mobile confirmation.\n        <input type="button" class="btn btn-success done trigger-biometric" style="background:#168AD3;" value="Authorize to View Account"/>\n        ',t=e,((t=g.invokePartial(a["common.biometric_auth"],"common.biometric_auth",t,s,a))||0===t)&&(n+=t),n+="\n    </div>\n    "}s=s||e.helpers,a=a||e.partials;var h,p,m,u="",g=this,f="function",b=s.helperMissing,_=void 0,v=this.escapeExpression;return u+='<div class="result account" data-id="',typeof(h=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===f?h=h.call(t,{hash:{}}):h===_&&(h=b.call(t,"this.id",{hash:{}})),u+=v(h)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',h="/pages/images/accounts.png",h=typeof(p=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===f?p.call(t,h,{hash:{}}):p===_?b.call(t,"assetUrl",h,{hash:{}}):p,u+=v(h)+'"/></div>\n        <div class="title">',typeof(h=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"))===f?h=h.call(t,{hash:{}}):h===_&&(h=b.call(t,"this.getAddress",{hash:{}})),u+=v(h)+" - ",typeof(h=s.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"))===f?h=h.call(t,{hash:{}}):h===_&&(h=b.call(t,"domain",{hash:{}})),u+=v(h)+"</div>\n        ",h=t,((h=g.invokePartial(a["search_helper.actions"],"search_helper.actions",h,s,a))||0===h)&&(u+=h),u+="\n    </div>\n    ",h=s.mfa||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mfa"),p=s.unless,(m=g.program(1,i,n)).hash={},(m.fn=m).inverse=g.program(10,d,n),((h=p.call(t,h,m))||0===h)&&(u+=h),u+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_account}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_add_account=e.template(function(e,t,s,n,a){function i(){return'style="display: none"'}function l(){return'style="display: none;"'}function o(){return"display: none;"}function r(e,t){var n,a,i="";return i+="\n            ",n=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),a=s["if"],(u=f.program(8,c,t)).hash={},(u.fn=u).inverse=f.noop,((n=a.call(e,n,u))||0===n)&&(i+=n),i+="\n            ",n=s.username||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),a=s["if"],(u=f.program(10,d,t)).hash={},(u.fn=u).inverse=f.noop,((n=a.call(e,n,u))||0===n)&&(i+=n),i+='\n            <div class="copy" title="copy" data-type="password" data-copy="',typeof(n=s.password||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"))===b?n=n.call(e,{hash:{}}):n===v&&(n=_.call(e,"password",{hash:{}})),i+=E(n)+'">Password: &nbsp;<span class="password">**********</span>\n                &nbsp;<img title="show password" src="',n="/pages/images/show-password.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"assetUrl",n,{hash:{}}):a,i+=E(n)+'" class="view-password"/>\n                <img title="hide password" src="',n="/pages/images/hide-password.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"assetUrl",n,{hash:{}}):a,i+=E(n)+'" class="hide-password" style="display: none;"/>\n                <img src="',n="/pages/images/copy-icon.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"assetUrl",n,{hash:{}}):a,i+=E(n)+'" class="copy-icon"/>\n            </div>\n            <div style="margin-top:10px;margin-bottom:10px;">\n                <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="Fill Account"/>\n            </div>\n        '}function c(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="email address" data-copy="',typeof(t=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"email",{hash:{}})),a+=E(t)+'">Email: &nbsp;',typeof(t=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"email",{hash:{}})),a+=E(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===b?n.call(e,t,{hash:{}}):n===v?_.call(e,"assetUrl",t,{hash:{}}):n,a+=E(t)+'" class="copy-icon"/></div>'}function d(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="username" data-copy="',typeof(t=s.usernae||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"usernae"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"usernae",{hash:{}})),a+=E(t)+'">Username: &nbsp;',typeof(t=s.username||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"))===b?t=t.call(e,{hash:{}}):t===v&&(t=_.call(e,"username",{hash:{}})),a+=E(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===b?n.call(e,t,{hash:{}}):n===v?_.call(e,"assetUrl",t,{hash:{}}):n,a+=E(t)+'" class="copy-icon"/></div>'}function h(){return'\n            <label for="new_email">Email: </label>\n            <input type="text" id="new_email" autocomplete="off"/>\n            <label for="new_username">Username: </label>\n            <input type="text" id="new_username" autocomplete="off"/>\n            <label for="new_password">Password: </label>\n            <input type="password" id="new_password" autocomplete="off"/>\n            <div style="margin-top:10px;margin-bottom:10px;">\n                <input type="button" id="saveIt" class="btn btn-success done" style="background:#168AD3;" value="Save Account"/>\n            </div>\n        '}s=s||e.helpers;var p,m,u,g="",f=this,b="function",_=s.helperMissing,v=void 0,E=this.escapeExpression;return g+='<div class="result account" data-id="',typeof(p=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cid"))===b?p=p.call(t,{hash:{}}):p===v&&(p=_.call(t,"this.cid",{hash:{}})),g+=E(p)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',p="/pages/images/accounts.png",p=typeof(m=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"assetUrl",p,{hash:{}}):m,g+=E(p)+'"/></div>\n        <div class="title">Add Account</div>\n        <div class="action">\n            <img src="',p="/pages/images/arrow-closed.png",p=typeof(m=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"assetUrl",p,{hash:{}}):m,g+=E(p)+'" class="arrow-open" ',p=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),m=s["if"],(u=f.program(1,i,a)).hash={},(u.fn=u).inverse=f.noop,((p=m.call(t,p,u))||0===p)&&(g+=p),g+='/>\n            <img src="',p="/pages/images/arrow-opened.png",p=typeof(m=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===b?m.call(t,p,{hash:{}}):m===v?_.call(t,"assetUrl",p,{hash:{}}):m,g+=E(p)+'" class="arrow-close" ',p=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),m=s.unless,(u=f.program(3,l,a)).hash={},(u.fn=u).inverse=f.noop,((p=m.call(t,p,u))||0===p)&&(g+=p),g+='/>\n        </div>\n    </div>\n    <div class="result-detail" style="padding-left: 60px;',p=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),m=s.unless,(u=f.program(5,o,a)).hash={},(u.fn=u).inverse=f.noop,((p=m.call(t,p,u))||0===p)&&(g+=p),g+='">\n        <div class="error" style="display: none;color:red;"></div>\n        ',p=s.password||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"),m=s["if"],(u=f.program(7,r,a)).hash={},(u.fn=u).inverse=f.program(12,h,a),((p=m.call(t,p,u))||0===p)&&(g+=p),g+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_add_account}),ABINE_DNTME.define("abine/views/addAccountView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(e,t,n,a,i,s,l,o,r){return r.extend({getName:function(){return"phone"},events:e.extend({},r.prototype.events,{}),loadData:function(){this.model.loading=!0;var e=[new a.Account({_type:"masked_account",domain:this.options.domain}),new a.Account({_type:"strong_password",domain:this.options.domain}),new a.Account({_type:"add_account",domain:this.options.domain})];this.model.results=e,this.model.loading=!1,this.renderResults()},onExpand:function(e,t){"add_account"==t.get("_type")&&this.$("#saveIt")[0].scrollIntoView()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_address=e.template(function(e,t,i,n,a){function s(e){var t;return typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"this.fullLabel",{hash:{}})),N(t)}function l(e){var t;return typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"this.label",{hash:{}})),N(t)}function o(e){var t,n,a="";return a+='<div class="copy" data-type="name" data-copy="',typeof(t=i.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"first_name",{hash:{}})),a+=N(t)+" ",typeof(t=i.last_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"last_name",{hash:{}})),a+=N(t)+'" title="copy">Name: ',typeof(t=i.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"first_name",{hash:{}})),a+=N(t)+" ",typeof(t=i.last_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"last_name",{hash:{}})),a+=N(t)+'\n            <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/>\n        </div>'}function r(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="address line 1" data-copy="',typeof(t=i.address1||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address1"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"address1",{hash:{}})),a+=N(t)+'">Line 1: ',typeof(t=i.address1||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address1"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"address1",{hash:{}})),a+=N(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/></div>'}function c(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="address line 2" data-copy="',typeof(t=i.address2||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address2"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"address2",{hash:{}})),a+=N(t)+'">Line 2: ',typeof(t=i.address2||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address2"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"address2",{hash:{}})),a+=N(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/></div>'}function d(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="city" data-copy="',typeof(t=i.city||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"city"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"city",{hash:{}})),a+=N(t)+'">City: ',typeof(t=i.city||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"city"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"city",{hash:{}})),a+=N(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/></div>'}function h(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="state" data-copy="',typeof(t=i.state||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"state"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"state",{hash:{}})),a+=N(t)+'">State: ',typeof(t=i.state||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"state"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"state",{hash:{}})),a+=N(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/></div>'}function p(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="zip code" data-copy="',typeof(t=i.zip||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"zip"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"zip",{hash:{}})),a+=N(t)+'">Zip: ',typeof(t=i.zip||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"zip"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"zip",{hash:{}})),a+=N(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/></div>'}i=i||e.helpers,n=n||e.partials;var m,u,g,f="",b=this,_="function",v=i.helperMissing,E=void 0,N=this.escapeExpression;return f+='<div class="result account" data-id="',typeof(m=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===_?m=m.call(t,{hash:{}}):m===E&&(m=v.call(t,"this.id",{hash:{}})),f+=N(m)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',m="/pages/images/dnt-address-icon.png",m=typeof(u=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===_?u.call(t,m,{hash:{}}):u===E?v.call(t,"assetUrl",m,{hash:{}}):u,f+=N(m)+'"/></div>\n        <div class="title">',m=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fullLabel"),u=i["if"],(g=b.program(1,s,a)).hash={},(g.fn=g).inverse=b.program(3,l,a),((m=u.call(t,m,g))||0===m)&&(f+=m),f+="</div>\n        ",m=t,((m=b.invokePartial(n["search_helper.actions"],"search_helper.actions",m,i,n))||0===m)&&(f+=m),f+='\n    </div>\n    <div class="result-detail" style="display: none;padding-left: 60px">\n        ',m=i.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"first_name"),u=i["if"],(g=b.program(5,o,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        ",m=i.address1||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"address1"),u=i["if"],(g=b.program(7,r,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        ",m=i.address2||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"address2"),u=i["if"],(g=b.program(9,c,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        ",m=i.city||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"city"),u=i["if"],(g=b.program(11,d,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        ",m=i.state||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"state"),u=i["if"],(g=b.program(13,h,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        ",m=i.zip||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"zip"),u=i["if"],(g=b.program(15,p,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_address}),ABINE_DNTME.define("abine/views/addressView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase","abine/intl"],function(e,t,n,a,i,s,l,o,r,c){return r.extend({getName:function(){return"address"},events:e.extend({},r.prototype.events,{}),loadData:function(){this.model.loading=!0;var t=new a.AddressCollection;t.fetchAll({success:e.bind(function(){for(var e=0;e<t.models.length;e++)"Masked Card"==t.models[e].get("label")&&(t.models[e].attributes.fullLabel=c.getText("mm_address_helper_abine_address"));this.model.results=this.wrap(t.models,"address"),this.model.loading=!1,this.renderResults()},this)})}})}),ABINE_DNTME.define("abine/views/searchResultBase",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/resultList"],function(e,s,t,n,a,i,l,o,r){return t.View.extend({templateName:"search_helper_results",events:{"click .fill":"fill","click .arrow-open":"toggle","click .arrow-close":"toggle","click .result .title":"toggle","click .copy":"copy"},afterInitialize:function(){this.doc=this.el.document,this.model={name:this.getName(),loading:!0,results:[]},this.loadData(),this.render()},renderResults:function(){this.render(!0)},loadData:function(){throw"load data not implemented in child class"},wrap:function(e,t){return e.forEach(function(e){e.attributes._type=t}),e},createChildren:function(){return{results:new r({base:this,contentManager:this.options.contentManager,mfaPref:this.options.mfaPref,mfaPrefType:this.options.mfaPrefType})}},getRecord:function(e){var t=s(e).data("id"),n=null;return this.model.results.find(function(e){if(e.get("id")==t||e.cid==t)return n=e,!0}),n},getResultNode:function(e){for(;e&&(!e.className||-1==e.className.indexOf("result"));)e=e.parentNode;return e},toggle:function(e){var t=this.getResultNode(e.target);s(".arrow-open",t).toggle(),s(".arrow-close",t).toggle(),s(".result-detail",t).toggle(),s(".result-detail",t).is(":visible")?this.onExpand(t,this.getRecord(t)):this.onCollapse(t)},fill:function(e){var t=this.getRecord(e.target);this.children.results.children[t.cid].fillFields(t)},showPassword:function(e){var t=e.parentNode;s(".view-password",t).hide(),s(".hide-password",t).show(),s("span.password",t).text(s(t).data("copy"))},hidePassword:function(e){var t=e.parentNode;s(".view-password",t).show(),s(".hide-password",t).hide(),s("span.password",t).text("**********")},copy:function(e){var t=null,n=s(e.target);if(n.hasClass("view-password"))return this.showPassword(e.target),!1;if(n.hasClass("hide-password"))return this.hidePassword(e.target),!1;var a=n.data("copy");t=n.data("type");if(a||(a=s(e.target.parentNode).data("copy"),t=s(e.target.parentNode).data("type")),!a){var i=this.getRecord(e.target);i.get&&i.get("email")&&(a=i.get("email"),t="email address"),!a&&i.getAddress&&(a=i.getAddress(),t="email address"),!a&&i.getAreaCode&&(a=i.get("number"),t="phone number")}a&&(this.copyTextToClipboard(a),this.trigger("footer-message",t?"Copied "+t+" to clipboard":"Copied to clipboard"))},onExpand:function(e,t){if(!t.get("number")&&"disposable_card"==t.get("_type")){var n=this;t.fetch({success:function(){var e=n.children.results.children[t.cid];e.render(),s(".arrow-open",e.el).toggle(),s(".arrow-close",e.el).toggle(),s(".result-detail",e.el).toggle()}})}},onCollapse:function(){},copyTextToClipboard:function(e){var t=document.createElement("textarea");t.textContent=e;var n=document.getElementsByTagName("body")[0]||document.documentElement;n.appendChild(t),t.select(),document.execCommand("copy"),n.removeChild(t)}})}),ABINE_DNTME.define("abine/views/cardView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(e,t,n,a,i,s,l,o,r){return r.extend({getName:function(){return"card"},events:e.extend({},r.prototype.events,{}),loadData:function(){this.model.loading=!0;var n=new a.RealCardCollection;n.fetchAll({success:e.bind(function(){var t=new a.DisposableCardCollection;t.fetchAll({success:e.bind(function(){var e=this.wrap(t.models,"disposable_card");this.model.results=e.concat(this.wrap(n.models,"real_card")),this.model.loading=!1,this.renderResults()},this)})},this)})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_card=e.template(function(e,t,s,a,n){function i(e){var t,n="";return n+=" - ",typeof(t=s.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"domain",{hash:{}})),n+=_(t)}function l(e,t){var n,a,i="";return i+="\n        ",n=s.number||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"),a=s["if"],(p=u.program(4,o,t)).hash={},(p.fn=p).inverse=u.program(6,r,t),((n=a.call(e,n,p))||0===n)&&(i+=n),i+="\n    "}function o(e){var t,n,a="";return a+='\n            <div class="result-detail" style="display: none;padding-left: 60px">\n                <div class="copy" data-type="card number" data-copy="',typeof(t=s.number||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"number",{hash:{}})),a+=_(t)+'" title="copy">\n                    Number: ',typeof(t=s.getSeparatedCardNumber||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedCardNumber"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"getSeparatedCardNumber",{hash:{}})),a+=_(t)+'\n                    <img src="',t="/pages/images/copy-icon.png",t=typeof(
n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"assetUrl",t,{hash:{}}):n,a+=_(t)+'" class="copy-icon"/>\n                </div>\n                <div class="copy" data-type="expiry date" data-copy="',typeof(t=s.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"getExpiry",{hash:{}})),a+=_(t)+'" title="copy">Expiry: <span\n                        class="expiration">',typeof(t=s.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"getExpiry",{hash:{}})),a+=_(t)+'</span>\n                    <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"assetUrl",t,{hash:{}}):n,a+=_(t)+'" class="copy-icon"/>\n                </div>\n                <div class="copy" data-type="cvc" data-copy="',typeof(t=s.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"getCVC",{hash:{}})),a+=_(t)+'" title="copy">CVC: <span\n                        class="cvc">',typeof(t=s.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"getCVC",{hash:{}})),a+=_(t)+'</span>\n                    <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"assetUrl",t,{hash:{}}):n,a+=_(t)+'" class="copy-icon"/>\n                </div>\n                <div>Amount: <span>',typeof(t=s.getOriginalValue||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"getOriginalValue",{hash:{}})),a+=_(t)+"</span></div>\n            </div>\n        "}function r(e){var t,n,a="";return a+='\n            <div class="result-detail" style="display: none;text-align: center">\n                <div style="text-align: center">Fetching card details <img\n                        src="',t="/pages/images/ajax_loader.gif",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"assetUrl",t,{hash:{}}):n,a+=_(t)+'"/></div>\n            </div>\n        '}function c(e){var t,n="";return n+='\n        <div class="result-detail" style="display: none;text-align: center">\n            Credit Cards protected with Mobile confirmation.\n            <input type="button" class="btn btn-success done trigger-biometric" style="background:#168AD3;" value="Authorize to View Card"/>\n            ',t=e,((t=u.invokePartial(a["common.biometric_auth"],"common.biometric_auth",t,s,a))||0===t)&&(n+=t),n+="\n        </div>\n    "}s=s||e.helpers,a=a||e.partials;var d,h,p,m="",u=this,g="function",f=s.helperMissing,b=void 0,_=this.escapeExpression;return m+='<div class="result card" data-id="',typeof(d=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===g?d=d.call(t,{hash:{}}):d===b&&(d=f.call(t,"this.id",{hash:{}})),m+=_(d)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',d="/pages/images/maskcard-icon.png",d=typeof(h=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===g?h.call(t,d,{hash:{}}):h===b?f.call(t,"assetUrl",d,{hash:{}}):h,m+=_(d)+'"/></div>\n        <div class="title">Masked Card ',typeof(d=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPlainLabelOrLastFour"))===g?d=d.call(t,{hash:{}}):d===b&&(d=f.call(t,"this.getPlainLabelOrLastFour",{hash:{}})),m+=_(d)+" ",d=s.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),h=s["if"],(p=u.program(1,i,n)).hash={},(p.fn=p).inverse=u.noop,((d=h.call(t,d,p))||0===d)&&(m+=d),m+="</div>\n        ",d=t,((d=u.invokePartial(a["search_helper.actions"],"search_helper.actions",d,s,a))||0===d)&&(m+=d),m+="\n    </div>\n    ",d=s.mfa||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mfa"),h=s.unless,(p=u.program(3,l,n)).hash={},(p.fn=p).inverse=u.program(8,c,n),((d=h.call(t,d,p))||0===d)&&(m+=d),m+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_card}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_email=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,s,l="",o=this,r="function",c=n.helperMissing,d=void 0,h=this.escapeExpression;return l+='<div class="result email" data-id="',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.id",{hash:{}})),l+=h(i)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',i="/pages/images/maskmail-icon.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'"/></div>\n        <div class="title">',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.getAddress",{hash:{}})),l+=h(i)+"</div>\n        ",i=t,((i=o.invokePartial(a["search_helper.actions_copy"],"search_helper.actions_copy",i,n,a))||0===i)&&(l+=i),l+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_phone=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,s,l="",o=this,r="function",c=n.helperMissing,d=void 0,h=this.escapeExpression;return l+='<div class="result card" data-id="',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.id",{hash:{}})),l+=h(i)+'">\n    <div class="icon"><img src="',i="/pages/images/maskphone-icon-green.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'"/></div>\n    <div class="title">',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.getPrettyNumber",{hash:{}})),l+=h(i)+"</div>\n    ",i=t,((i=o.invokePartial(a["search_helper.actions"],"search_helper.actions",i,n,a))||0===i)&&(l+=i),l+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_phone}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_email=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,s,l="",o=this,r="function",c=n.helperMissing,d=void 0,h=this.escapeExpression;return l+='<div class="result email" data-id="',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.id",{hash:{}})),l+=h(i)+'">\n    <div class="icon"><img src="',i="/pages/images/disclosemail-icon.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'"/></div>\n    <div class="title">',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.email",{hash:{}})),l+=h(i)+"</div>\n    ",i=t,((i=o.invokePartial(a["search_helper.actions_copy"],"search_helper.actions_copy",i,n,a))||0===i)&&(l+=i),l+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_entity=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,s,l="",o=this,r="function",c=n.helperMissing,d=void 0,h=this.escapeExpression;return l+='<div class="result account">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',i="/pages/images/accounts.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'"/></div>\n        <div class="title">',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.id",{hash:{}})),l+=h(i)+"</div>\n        ",i=t,((i=o.invokePartial(a["search_helper.actions"],"search_helper.actions",i,n,a))||0===i)&&(l+=i),l+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_entity}),ABINE_DNTME.define("abine/views/entity/account",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_account",afterInitialize:function(){this.model.get("mfa")&&("biometric"!=this.options.mfaPref?this.model.set("mfa",!1):this.enableMfa()),this.render()},getAuthSuffix:function(){return"auth"},getAuthAckSuffix:function(){return"auth_ack"},getBiometricAuthPayload:function(e){return{type:"login",responseId:e,key:this.biometricKey,domain:this.options.domain,account:this.model.get("label")||this.model.get("username")||this.model.get("email")}},fillFields:function(){if(this.model.get("mfa"))return this.expand(),void this.triggerBiometric();var e=this.model.get("email"),t=this.model.get("username"),n=this.model.get("password");t&&0!=t.length||(t=e),e&&0!=e.length||(e=t),this.trigger("fill-fields",{type:"login",data:{email:e,username:t,password:n},origin:"login"})}})}),ABINE_DNTME.define("abine/views/entity/add_account",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/account"],function(e,t,n,a,i,s,l,o,r,c,d){var h=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,p=/^[\s]+|[\s]+$/g;return d.extend({templateName:"search_helper_add_account",events:e.extend({},d.prototype.events,{"click #fillIt":"fillFields","click #saveIt":"saveAccount"}),saveAccount:function(){var e=this.$("#new_email").val().replace(p,""),t=this.$("#new_username").val().replace(p,""),n=this.$("#new_password").val();!e||e.match(h)?e||t?n?(e&&this.model.set("email",e),t&&this.model.set("username",t),this.model.set("password",n),this.model.save(),this.render(),this.expand()):this.$(".error").text("Please enter password").show():this.$(".error").text("Please enter email address and/or username").show():this.$(".error").text("Please enter valid email address").show()}})}),ABINE_DNTME.define("abine/views/entity/address",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_address",fillFields:function(e){this.trigger("fill-fields",{type:"address",data:e.toJSON(),origin:"address"})}})}),ABINE_DNTME.define("abine/views/entity/base",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl"],function(e,t,n,a,i,s,l,o,r,c){return n.View.extend({templateName:"search_helper_entity",events:{"click .trigger-biometric":"triggerBiometric","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass"},biometricSuccess:function(){this.model.set("mfa",!1),this.render(),this.expand()},expand:function(){this.$(".arrow-open").hide(),this.$(".arrow-close, .result-detail").show()},triggerBiometric:function(t){var n=this;l.licenseModule.getGenericBiometricKey(null,function(e){n.$(".trigger-biometric").hide(),e.success?(n.biometricKey=e.key,n.sendBiometricAuthRequest(t)):(n.$("#biometricAuth").show(),n.$("#biometricInfo").hide(),n.$("#biometricError").text(c.getText("mm_payment_helper_biometric_auth_disabled",[n.model.biometric_type])).show())})},retryBiometricAuth:function(t,n){var a=this;o.clearTimeout(this.noResponseTimer),l.licenseModule.getGenericBiometricKey(null,function(e){e.success&&(a.biometricKey=e.key,a.sendBiometricAuthRequest(t,n))})},sendBiometricAuthRequest:function(){var e=this.biometricKey.split(":");if(2<e.length)return this.biometricKey=e[0]+":"+e[1],this.biometricToken=e[2],this.$("#biometricAuth").hide(),void this.biometricSuccess();this.$("#biometricAuth").show();var t=this.options.contentManager.messenger,n=this;n.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?n.$("#biometricInfo").html(c.getText("mm_payment_helper_request_faceid_"+n.getAuthSuffix(),[n.model.biometric_type])):this.model.touch_id?n.$("#biometricInfo").html(c.getText("mm_payment_helper_request_biometric_"+n.getAuthSuffix(),[n.model.biometric_type])):n.$("#biometricInfo").html(c.getText("mm_payment_helper_request_phoneid_"+n.getAuthSuffix(),[n.model.biometric_type])),n.$("#biometricError").hide(),this.biometricResponseId&&t.off(this.biometricResponseId);var a="biometric:auth:response:"+Math.random();o.clearTimeout(this.noResponseTimer),this.noResponseTimer=o.setTimeout(function(){n.$("#biometricInfo").text(c.getText("mm_payment_helper_biometric_no_response"))},2e4),t.on(a,function(e){if(o.clearTimeout(n.noResponseTimer),!e.ack||!n.$("#masterPassStep").is(":visible")){if(n.$("#accountList, #masterPassStep").hide(),n.$("#biometricAuth").show(),e.ack)return n.$("#biometricInfo").show(),n.$("#biometricError").hide(),void(n.model.face_id?n.$("#biometricInfo").html(c.getText("mm_payment_helper_request_faceid_"+n.getAuthAckSuffix(),[n.model.biometric_type])):n.model.touch_id?n.$("#biometricInfo").html(c.getText("mm_payment_helper_request_biometric_"+n.getAuthAckSuffix(),[n.model.biometric_type])):n.$("#biometricInfo").html(c.getText("mm_payment_helper_request_phoneid_"+n.getAuthAckSuffix(),[n.model.biometric_type])));e.success?(n.biometricToken=e.token,n.$("#biometricAuth").hide(),n.biometricSuccess(),t.off(a),n.biometricResponseId=null):(n.$("#biometricInfo").hide(),n.$("#biometricError").text(e.error).show())}});var i=this.getBiometricAuthPayload(a);t.send("biometric:auth",i),this.biometricResponseId=a},masterPassAuth:function(e){e&&e.preventDefault(),o.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var n=this.$("#password").val();if(0!=n.length){var a="password:auth:response:"+Math.random(),i=this.options.contentManager.messenger;return i.on(a,function(e){t.$("#accountList, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t.biometricSuccess(),i.off(a)):t.$("#masterPassErr").text(c.getText("mm_payment_helper_master_pass_invalid")).show(),i.off(a)}),l.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,i.send("password:auth",{responseId:a,key:t.biometricKey,password:n,domain:t.options.domain})):t.$("#masterPassErr").text(c.getText("mm_payment_helper_master_pass_retry")).show()}),!1}this.$("#masterPassErr").text(c.getText("mm_payment_helper_master_pass_invalid")).show()},enableMfa:function(){var e;this.model.set("mfa",!0),"apns.face_id"==this.options.mfaPrefType?(e="Face ID",this.model.set("face_id",!0)):"apns.touch_id"==this.options.mfaPrefType?(e="Touch ID",this.model.set("touch_id",!0)):"apns.pin_id"==this.options.mfaPrefType&&(e="Mobile"),this.model.biometric_type=e},fillFields:function(e){console.log("filling fields not implemented for type ",e.get("_type"))}})}),ABINE_DNTME.define("abine/views/entity/card",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_real_card",afterInitialize:function(){"biometric"==this.options.mfaPref&&this.enableMfa(),this.render()},getAuthSuffix:function(){return"auth"},getAuthAckSuffix:function(){return"card_auth_ack"},getBiometricAuthPayload:function(e){return{type:"card",responseId:e,key:this.biometricKey,domain:this.options.domain,number:this.model.get("number")?this.model.get("number").substr(-4):this.model.get("last_four")}},fillFields:function(e){if(this.model.get("mfa"))return this.expand(),void this.triggerBiometric();this.trigger("fill-fields",{type:"payment",data:e.toJSON(),origin:"payment"})}})}),ABINE_DNTME.define("abine/views/entity/email",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_email",fillFields:function(e){this.trigger("fill-fields",{type:"email",data:e.get("email"),origin:"primary"})}})}),ABINE_DNTME.define("abine/views/entity/masked_account",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/account"],function(n,e,t,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_new_masked_account",events:n.extend({},d.prototype.events,{"click #fillIt":"fillFields","click #generateIt":"generate"}),generate:function(){this.$(".generating-account").show(),this.$(".error").hide();var t=new a.ShieldedEmailCollection;t.fetchAll({success:n.bind(function(){if(0<t.length){var e=t.at(0).generateDisposable(this.model.get("domain"),"dnt-search-panel");e.save({},{success:n.bind(function(){this.model.set("email",e.getAddress()),this.model.set("password",r.generateNewOptionsPassword(10,!0,!0)),this.model.save(),this.render()},this),error:n.bind(function(){this.$(".error").text("Error created disposable email.  Please try again later.").show(),this.$(".generating-account").hide()})})}},this)})}})}),ABINE_DNTME.define("abine/views/entity/masked_card",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/card"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_disposable_card",fillFields:function(e){if(this.model.get("mfa"))return this.expand(),void this.triggerBiometric();this.trigger("fill-fields",{type:"payment",data:e.toJSON(),origin:"disposable"})}})}),ABINE_DNTME.define("abine/views/entity/masked_email",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_disposable_email",fillFields:function(e){this.trigger("fill-fields",{type:"email",data:e.getAddress(),origin:"disposable"})}})}),ABINE_DNTME.define("abine/views/entity/masked_phone",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_disposable_phone",fillFields:function(e){this.trigger("fill-fields",{type:"phone",data:e.toJSON(),origin:"disposable"})}})}),ABINE_DNTME.define("abine/views/entity/phone",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,n,a,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_phone",fillFields:function(e){this.trigger("fill-fields",{type:"phone",data:e.toJSON(),origin:"phone"})}})}),ABINE_DNTME.define("abine/views/entity/strong_password",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,a,t,n,i,s,l,o,r,c,d){return d.extend({templateName:"search_helper_strong_password",events:{"click #fillIt":"save","click #refresh-password":"generatePasswordOption","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},afterInitialize:function(){setTimeout(e.bind(function(){this.generatePasswordOption()},this),500),this.render()},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},save:function(){var e=a("#password-input",this.el).val();this.model.set("password",e),this.model.save();var t=document.createElement("textarea");t.textContent=e;var n=document.getElementsByTagName("body")[0]||document.documentElement;n.appendChild(t),t.select(),document.execCommand("copy"),n.removeChild(t),this.trigger("footer-message","Password saved and copied to clipboard")},generatePasswordOption:function(){var e=this.$("#length").val(),t=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");a("#password-input",this.el).val(r.generateNewOptionsPassword(e,t,n))},fillFields:function(e){this.trigger("fill-fields",{type:"password",data:e.get("password"),origin:"strong"})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_new_masked_account=e.template(function(e,t,i,n,a){function s(){return'style="display: none"'}function l(){return'style="display: none;"'}function o(){return"display: none;text-align:center;"}function r(){return"padding-left: 60px;"}function c(e){var t,n,a="";return a+='<div class="copy" title="copy" data-type="email address" data-copy="',typeof(t=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"email",{hash:{}})),a+=N(t)+'">Email: &nbsp;',typeof(t=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"email",{hash:{}})),a+=N(t)+' <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/></div>'}function d(e){var t,n,a="";return a+='\n            <div class="copy" title="copy" data-type="password" data-copy="',typeof(t=i.password||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"))===_?t=t.call(e,{hash:{}}):t===E&&(t=v.call(e,"password",{hash:{}})),a+=N(t)+'">Password: &nbsp;<span class="password">**********</span>\n                &nbsp;<img title="show password" src="',t="/pages/images/show-password.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="view-password"/>\n                <img title="hide password" src="',t="/pages/images/hide-password.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="hide-password" style="display: none;"/>\n                <img src="',t="/pages/images/copy-icon.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'" class="copy-icon"/>\n            </div>\n        '}function h(e){var t,n,a="";return a+='<input type="button" id="generateIt" class="btn btn-success done" style="background:#168AD3;" value="Generate Masked Account"/><img style="display: none" class="generating-account" src="',t="/pages/images/ajax_loader.gif",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===_?n.call(e,t,{hash:{}}):n===E?v.call(e,"assetUrl",t,{hash:{}}):n,a+=N(t)+'"/>'}function p(){return'<input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="Fill Account"/>'}i=i||e.helpers;var m,u,g,f="",b=this,_="function",v=i.helperMissing,E=void 0,N=this.escapeExpression;return f+='<div class="result account" data-id="',typeof(m=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cid"))===_?m=m.call(t,{hash:{}}):m===E&&(m=v.call(t,"this.cid",{hash:{}})),f+=N(m)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',m="/pages/images/accounts.png",m=typeof(u=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===_?u.call(t,m,{hash:{}}):u===E?v.call(t,"assetUrl",m,{hash:{}}):u,f+=N(m)+'"/></div>\n        <div class="title">New Masked Account</div>\n        <div class="action">\n            <img src="',m="/pages/images/arrow-closed.png",m=typeof(u=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===_?u.call(t,m,{hash:{}}):u===E?v.call(t,"assetUrl",m,{hash:{}}):u,f+=N(m)+'" class="arrow-open" ',m=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),u=i["if"],(g=b.program(1,s,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+='/>\n            <img src="',m="/pages/images/arrow-opened.png",m=typeof(u=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===_?u.call(t,m,{hash:{}}):u===E?v.call(t,"assetUrl",m,{hash:{}}):u,f+=N(m)+'" class="arrow-close" ',m=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),u=i.unless,(g=b.program(3,l,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+='/>\n        </div>\n    </div>\n    <div class="result-detail" style="',m=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),u=i.unless,(g=b.program(5,o,a)).hash={},(g.fn=g).inverse=b.program(7,r,a),((m=u.call(t,m,g))||0===m)&&(f+=m),f+='">\n        <div class="error" style="display: none;color:red;"></div>\n        ',m=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),u=i["if"],(g=b.program(9,c,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        ",m=i.password||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"),u=i["if"],(g=b.program(11,d,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+='\n        <div style="margin-top:10px;margin-bottom:10px;">\n            ',m=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),u=i.unless,(g=b.program(13,h,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n            ",m=i.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),u=i["if"],(g=b.program(15,p,a)).hash={},(g.fn=g).inverse=b.noop,((m=u.call(t,m,g))||0===m)&&(f+=m),f+="\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_new_masked_account}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_panel=e.template(function(e,t,i,n,a){function s(){return'style="display: none;"'}function l(e){var t,n,a="";return a+='\n            <div class="menu clearfix options" data-type="options">\n                <div class="icon"><img src="',t="/pages/images/settings-fw.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"assetUrl",t,{hash:{}}):n,a+=g(t)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">More Options</div>\n                </div>\n            </div>\n            '}i=i||e.helpers;var o,r,c,d="",h=this,p="function",m=i.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="clearfix panel">\n    <div class="top-header" style="clear:both;">\n        <span class="logo-link">\n            <img class="logo" src="',o="/images/Icon-48.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n        </span>\n        <input type="text" id="q" placeholder="Search Blur" autocomplete="off"/>\n        <button class="btn btn-small search"><img src="',o="/pages/images/search-fw.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/> Go</button>\n        <div class="links-wrapper">\n            <div class="links close-link">\n                <img id="close" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'">\n            </div>\n            <div class="links help-link">\n                <img class="header-icon" src="',o="/pages/images/dnt-ui-header-help.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'">\n            </div>\n        </div>\n    </div>\n\n    <div class="body clearfix">\n        <div class="left">\n            <div class="menu clearfix search" ',o=i.q||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"q"),r=i.unless,(c=h.program(1,s,a)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d+=' data-type="search">\n                <div class="icon"><img src="',o="/pages/images/search-fw.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"\n                                       style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title description">Search Results</div>\n                    <div class="description">for ',typeof(o=i.q||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"q"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"q",{hash:{}})),d+=g(o)+'</div>\n                </div>\n            </div>\n            <div class="menu clearfix suggested" data-type="suggested">\n                <div class="icon"><img class="replace-fav-icon"\n                                       src="',o="/pages/images/2015panels/panel_b_logo.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"\n                                       style="width:40px;height:21px;"/></div>\n                <div class="text">\n                    <div class="title">Suggested</div>\n                    <div class="description">for ',typeof(o=i.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"domain",{hash:{}})),d+=g(o)+'</div>\n                </div>\n            </div>\n            <div class="menu clearfix add" data-type="add">\n                <div class="icon"><img src="',o="/pages/images/user-fw.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"\n                                       style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Add Account</div>\n                </div>\n            </div>\n            <div class="menu clearfix address" data-type="address">\n                <div class="icon"><img src="',o="/pages/images/home-fw.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Addresses</div>\n                </div>\n            </div>\n            <div class="menu clearfix card" data-type="card">\n                <div class="icon"><img src="',o="/pages/images/card-fw.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Credit Cards</div>\n                </div>\n            </div>\n            <div class="menu clearfix phone" data-type="phone">\n                <div class="icon"><img src="',o="/pages/images/phone-fw.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o
)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Phones</div>\n                </div>\n            </div>\n            ',o=i.fromField||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fromField"),r=i["if"],(c=h.program(3,l,a)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d+='\n            <div class="menu clearfix map-form" id="mapForm" data-type="map-form" style="display: none;">\n                <div class="icon"><img src="',o="/pages/images/settings-fw.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Map Form</div>\n                </div>\n            </div>\n        </div>\n        <div class="right">',o="results",o=typeof(r=i.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"child",o,{hash:{}}):r,d+=g(o)+'</div>\n    </div>\n    <div class="footer"></div>\n</div>'}),ABINE_DNTME.CompiledTemplates.search_helper_panel}),ABINE_DNTME.define("abine/views/searchPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/views/suggestedView","abine/views/searchView","abine/views/addressView","abine/views/cardView","abine/views/phoneView","abine/views/addAccountView"],function(i,n,e,t,a,s,l,o,r,c,d,h,p,m){return a.extend({templateName:"search_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .cancel":"cancel","keyup #q":"queryChange","click .search":"search","click .menu":"switchMenu"},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},switchMenu:function(e){this.type=null;for(var t=e.target;!this.type;)this.type=n(t).data("type"),t=t.parentNode;if("options"!=this.type)return"map-form"==this.type?(e.preventDefault(),this.options.contentManager.showMapForm({formId:this.strategyId||this.forms[0],forms:this.forms}),this.closePanel(e,!0),void this.trigger("remove")):void this.renderChildren();this.autoFillWith(e)},queryChange:function(e){var t=this;clearTimeout(t.searchTimer),13===e.keyCode?t.searchTimer=setTimeout(function(){var e=this.$("#q").val().replace(/^[\s]+|[\s+]$/g,"").replace(/[\s]+/g," ");t.model.q=e,t.model.q?t.type="search":t.type="suggested",t.renderChildren()}):t.searchTimer=setTimeout(i.bind(function(){this.queryChange({keyCode:13})},this),2e3)},search:function(){this.queryChange({keyCode:13})},openHelp:function(e){if(n(e.target).hasClass("num-trackers"))return!1;o.webapp.openHelp("/email"),this.closePanel()},setupModel:function(){this.model={domain:this.contentManager.domain,fromField:!!this.fieldId&&!!this.strategyId,q:""}},afterInitialize:function(){this.type=this.options.category||"suggested",this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.panelId=9000081,this.updatePanelActivity("impression",this.panelId),this.setupModel(),this.on("render",i.bind(function(){this.replaceWithFavicons(this.contentManager.domain),this.$(".menu.active").removeClass("active"),this.$(".menu."+this.type).addClass("active")},this)),this.render(),this.fetchFormIds()},fetchFormIds:function(){this.forms=[],this.formIdFetchHooked||(this.formIdFetchHooked=!0,this.messenger.on("form:ids:response",i.bind(function(e){0==this.forms.length&&0<e.length&&this.$("#mapForm").show(),this.forms=this.forms.concat(e)},this))),this.messenger.sendToCS("CS","get:form:ids",this.options.contentManager.frameId)},renderChildren:function(){this.render(),this.$(".menu.active").removeClass("active"),this.$(".menu."+this.type).addClass("active"),this.$("#q").val(this.model.q),"search"==this.type&&this.$("#q").focus()},setDelayedView:function(t,e){var n=this;this.children[t]=new DelayedView({doc:this.el.ownerDocument,realView:i.bind(e,this),postLoad:function(e){n.children[t]=e}})},getChildView:function(e){var t=this.contentManager.preferences.getPref("masked_card_auth"),n=this.contentManager.preferences.getPref("biometric_type"),a=new e({doc:this.el.ownerDocument,messenger:this.messenger,contentManager:this.contentManager,domain:this.contentManager.domain,q:this.model.q,mfaPref:t,mfaPrefType:n});return a.transferEvents(["resize","max-height","close"],this),a.on("fill-fields",i.bind(function(e){this.options.contentManager.fillFields(e.type,this.strategyId,this.fieldId,e.data,e.origin)},this)),a.on("footer-message",function(e){var t=this.$(".footer");t.text(e),clearTimeout(this._footerTimer),this._footerTimer=setTimeout(function(){t.text("")},3e3)},this),a},createChildren:function(){var e;switch(this.type){case"search":e=this.getChildView(c);break;case"address":e=this.getChildView(d);break;case"card":e=this.getChildView(h);break;case"phone":e=this.getChildView(p);break;case"add":e=this.getChildView(m);break;default:e=this.getChildView(r)}return{results:e}}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_phone=e.template(function(e,t,n,a){n=n||e.helpers,a=a||e.partials;var i,s,l="",o=this,r="function",c=n.helperMissing,d=void 0,h=this.escapeExpression;return l+='<div class="result card" data-id="',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.id",{hash:{}})),l+=h(i)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',i="/pages/images/maskphone-icon-red.png",l+=h(i=typeof(s=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===r?s.call(t,i,{hash:{}}):s===d?c.call(t,"assetUrl",i,{hash:{}}):s)+'"/></div>\n        <div class="title">',typeof(i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"))===r?i=i.call(t,{hash:{}}):i===d&&(i=c.call(t,"this.getPrettyNumber",{hash:{}})),l+=h(i)+"</div>\n        ",i=t,((i=o.invokePartial(a["search_helper.actions_copy"],"search_helper.actions_copy",i,n,a))||0===i)&&(l+=i),l+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_phone}),ABINE_DNTME.define("abine/views/phoneView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(l,e,t,o,n,a,i,s,r){return r.extend({getName:function(){return"phone"},events:l.extend({},r.prototype.events,{}),loadData:function(){this.model.loading=!0;var t=[],n=null,a=null,i=new o.ShieldedPhoneCollection,s=function(){var e=this.wrap(t,"phone");n&&(e=e.concat(this.wrap([n],"phone"))),a&&!a.get("released")&&(e=e.concat(this.wrap([a],"disposable_phone"))),this.model.results=e,this.model.loading=!1,this.renderResults()};i.bind("sync:success",function(){if(0<i.length&&((n=i.at(0)).get("number")||(n=null),l.each(i.models,l.bind(function(e){e.get("identity")&&t.push(e)},this))),n&&n.isValidated()){var e=n.generateDisposable();e.save({},{success:l.bind(function(){a=e,s.call(this)},this)})}else s.call(this)},this),i.fetchAll()}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_real_card=e.template(function(e,t,s,a,n){function i(e,t){var n,a,i="";return i+='\n    <div class="result-detail" style="display: none;padding-left: 60px">\n        <div class="copy" data-type="card number" data-copy="',typeof(n=s.number||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"number",{hash:{}})),i+=b(n)+'" title="copy">Number: ',typeof(n=s.getSeparatedCardNumber||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedCardNumber"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"getSeparatedCardNumber",{hash:{}})),i+=b(n)+'\n            <img src="',n="/pages/images/copy-icon.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"assetUrl",n,{hash:{}}):a,i+=b(n)+'" class="copy-icon"/>\n        </div>\n        <div class="copy" data-type="expiry date" data-copy="',typeof(n=s.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"getExpiry",{hash:{}})),i+=b(n)+'" title="copy">Expiry: <span class="expiration">',typeof(n=s.getExpiry||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"))===u?n=n.call(e,{hash:{}}):n===f&&(n=g.call(e,"getExpiry",{hash:{}})),i+=b(n)+'</span>\n            <img src="',n="/pages/images/copy-icon.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?a.call(e,n,{hash:{}}):a===f?g.call(e,"assetUrl",n,{hash:{}}):a,i+=b(n)+'" class="copy-icon"/>\n        </div>\n        ',n=s.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"),a=s["if"],(h=m.program(2,l,t)).hash={},(h.fn=h).inverse=m.noop,((n=a.call(e,n,h))||0===n)&&(i+=n),i+="\n        ",n=s.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),a=s["if"],(h=m.program(4,o,t)).hash={},(h.fn=h).inverse=m.noop,((n=a.call(e,n,h))||0===n)&&(i+=n),i+="\n    </div>\n    "}function l(e){var t,n,a="";return a+='\n        <div class="copy" data-type="cvc" data-copy="',typeof(t=s.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"getCVC",{hash:{}})),a+=b(t)+'" title="copy">CVC: <span class="cvc">',typeof(t=s.getCVC||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"getCVC",{hash:{}})),a+=b(t)+'</span>\n            <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,a+=b(t)+'" class="copy-icon"/>\n        </div>\n        '}function o(e){var t,n,a="";return a+='\n        <div class="copy" data-type="name" data-copy="',typeof(t=s.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"first_name",{hash:{}})),a+=b(t)+" ",typeof(t=s.last_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"last_name",{hash:{}})),a+=b(t)+'" title="copy">Name: ',typeof(t=s.first_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"first_name",{hash:{}})),a+=b(t)+" ",typeof(t=s.last_name||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"))===u?t=t.call(e,{hash:{}}):t===f&&(t=g.call(e,"last_name",{hash:{}})),a+=b(t)+'\n            <img src="',t="/pages/images/copy-icon.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,a+=b(t)+'" class="copy-icon"/>\n        </div>\n        '}function r(e){var t,n="";return n+='\n    <div class="result-detail" style="display: none;text-align: center">\n        Credit Cards protected with Mobile confirmation.\n        <input type="button" class="btn btn-success done trigger-biometric" style="background:#168AD3;" value="Authorize to View Card"/>\n        ',t=e,((t=m.invokePartial(a["common.biometric_auth"],"common.biometric_auth",t,s,a))||0===t)&&(n+=t),n+="\n    </div>\n    "}s=s||e.helpers,a=a||e.partials;var c,d,h,p="",m=this,u="function",g=s.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="result card" data-id="',typeof(c=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"))===u?c=c.call(t,{hash:{}}):c===f&&(c=g.call(t,"this.id",{hash:{}})),p+=b(c)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',typeof(c=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTypeImage"))===u?c=c.call(t,{hash:{}}):c===f&&(c=g.call(t,"this.getTypeImage",{hash:{}})),p+=b(c)+'"/></div>\n        <div class="title">',typeof(c=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPlainLabelOrLastFour"))===u?c=c.call(t,{hash:{}}):c===f&&(c=g.call(t,"this.getPlainLabelOrLastFour",{hash:{}})),p+=b(c)+"</div>\n        ",c=t,((c=m.invokePartial(a["search_helper.actions"],"search_helper.actions",c,s,a))||0===c)&&(p+=c),p+="\n    </div>\n    ",c=s.mfa||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mfa"),d=s.unless,(h=m.program(1,i,n)).hash={},(h.fn=h).inverse=m.program(6,r,n),((c=d.call(t,c,h))||0===c)&&(p+=c),p+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_real_card}),ABINE_DNTME.define("abine/views/resultList",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base","abine/views/entity/account","abine/views/entity/masked_account","abine/views/entity/strong_password","abine/views/entity/email","abine/views/entity/masked_email","abine/views/entity/card","abine/views/entity/masked_card","abine/views/entity/address","abine/views/entity/phone","abine/views/entity/masked_phone","abine/views/entity/add_account"],function(n,e,t,a,i,s,l,o,r,c,d,h,p,m,u,g,f,b,_,v,E,N){return t.ListView.extend({tagName:"div",className:"",createChildren:function(){return this.options.base.model?n.reduce(this.options.base.model.results,function(e,t){return e[t.cid]=this.getView(t),e[t.cid].on("fill-fields",n.bind(function(e){this.options.base.trigger("fill-fields",e)},this)),e[t.cid].on("footer-message",n.bind(function(e){this.options.base.trigger("footer-message",e)},this)),e},{},this):{}},renderItems:function(){this.setupNestedViews();var t=this.doc.createDocumentFragment();n.each(this.children,function(e){t.appendChild(e.el)}),this.el.appendChild(t)},getView:function(e){var t=d;return"account"==e.get("_type")&&(t=h),"email"==e.get("_type")&&(t=u),"disposable_email"==e.get("_type")&&(t=g),"phone"==e.get("_type")&&(t=v),"disposable_phone"==e.get("_type")&&(t=E),"real_card"==e.get("_type")&&(t=f),"disposable_card"==e.get("_type")&&(t=b),"address"==e.get("_type")&&(t=_),"masked_account"==e.get("_type")&&(t=p),"strong_password"==e.get("_type")&&(t=m),"add_account"==e.get("_type")&&(t=N),new t({model:e,doc:this.doc,contentManager:this.options.contentManager,domain:this.options.contentManager.domain,mfaPref:this.options.mfaPref,mfaPrefType:this.options.mfaPrefType})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_results=e.template(function(e,t,s,n,a){function i(e){var t,n,a="";return a+='\n    <div class="loading">Please wait <img src="',t="/pages/images/ajax_loader.gif",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'"/></div>\n'}function l(e,t){var n,a,i="";return i+="\n    ",n=s.results||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"results"),a=s["if"],(h=p.program(4,o,t)).hash={},(h.fn=h).inverse=p.program(6,r,t),((n=a.call(e,n,h))||0===n)&&(i+=n),i+="\n"}function o(e){var t,n,a="";return a+="\n        ",t="results",t=typeof(n=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"child",t,{hash:{}}):n,a+=f(t)+"\n    "}function r(){return'\n        <div class="loading" style="color:red;">No matching records found.</div>\n    '}s=s||e.helpers;var c,d,h,p=this,m="function",u=s.helperMissing,g=void 0,f=this.escapeExpression;return c=s.loading||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loading"),d=s["if"],(h=p.program(1,i,a)).hash={},(h.fn=h).inverse=p.program(3,l,a),(c=d.call(t,c,h))||0===c?c:""}),ABINE_DNTME.CompiledTemplates.search_helper_results}),ABINE_DNTME.define("abine/views/searchView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(d,e,t,h,n,a,i,s,l){return l.extend({getName:function(){return"search"},events:d.extend({},l.prototype.events,{}),loadData:function(){this.model.loading=!0;var c=new RegExp(this.options.q,"i"),e=new h.ShieldedEmailCollection;e.fetchAll({success:d.bind(function(){var o=e.at(0),r=new h.AccountCollection;r.search(this.options.q,d.bind(function(){var l=new h.DisposableEmailCollection;l.search(this.options.q,d.bind(function(){var s=new h.DisposableCardCollection;s.search(this.options.q,d.bind(function(){var i=new h.AddressCollection;i.search(this.options.q,d.bind(function(){var a=new h.RealCardCollection;a.search(this.options.q,d.bind(function(){var n=new h.ShieldedPhoneCollection;n.fetchAll({success:d.bind(function(){var t=[];if(t=(t=(t=(t=(t=t.concat(this.wrap(r.models,"account"))).concat(this.wrap(l.models,"disposable_email"))).concat(this.wrap(s.models,"disposable_card"))).concat(this.wrap(a.models,"real_card"))).concat(this.wrap(i.models,"address")),0<n.length){var e=n.at(0);e.get("number")&&e.get("number").match(c)&&(t=t.concat(this.wrap([e],"phone"))),d.each(n.models,d.bind(function(e){e.get("identity")&&e.get("number").match(c)&&(t=t.concat(this.wrap([e],"phone")))},this))}o.get("email").match(c)&&(t=t.concat(this.wrap([o],"email"))),o.altEmails&&o.altEmails.models&&o.altEmails.models.forEach(d.bind(function(e){e.get("email").match(c)&&(t=t.concat(this.wrap([e],"email")))},this)),this.model.results=t,this.model.loading=!1,this.renderResults()},this)})},this))},this))},this))},this))},this))},this)})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_strong_password=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="result account" data-id="',typeof(a=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cid"))===l?a=a.call(t,{hash:{}}):a===r&&(a=o.call(t,"this.cid",{hash:{}})),s+=c(a)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',a="/pages/images/password-icon.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/></div>\n        <div class="title">Generate Strong Password</div>\n        <div class="action">\n            <img src="',a="/pages/images/arrow-closed.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'" class="arrow-open" />\n            <img src="',a="/pages/images/arrow-opened.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'" class="arrow-close" style="display: none;"/>\n        </div>\n    </div>\n    <div class="result-detail" style="display: none;padding-left: 0px">\n        <div class="password" style="text-align:center;">\n            <div style="margin-top:10px;">\n                <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',a="pages/images/pass_gen_refresh.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            </div>\n            <div>\n                <label for="length">',a="mm_new_password_helper_length",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n            </div>\n            <div style="margin-top:10px;" class="clearfix">\n                <div style="width:40%;float:left;">\n                    <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',a="mm_new_password_helper_numbers",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</label>\n                </div>\n                <div style="width:50%;float:left;">\n                    <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',a="mm_new_password_helper_special",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</label>\n                </div>\n            </div>\n            <div style="margin-top:10px;margin-bottom:10px;">\n                <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="Save & Copy"/>\n            </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.search_helper_strong_password}),ABINE_DNTME.define("abine/views/suggestedView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(s,e,t,l,n,a,i,o,r){return r.extend({getName:function(){return"suggested"},events:s.extend({},r.prototype.events,{}),loadData:function(){this.model.loading=!0;var e=new l.ShieldedEmailCollection;e.fetchAll({success:s.bind(function(){var a=e.at(0),i=new l.AccountCollection;i.fetchLoginsByDomain(this.options.domain,s.bind(function(){var n=new l.DisposableEmailCollection;n.fetchAllByDomain(this.options.domain,s.bind(function(){var t=new l.DisposableCardCollection;t.fetchAllByDomain(this.options.domain,s.bind(function(){var e=[];e=(e=(e=e.concat(this.wrap(i.models,"account"))).concat(this.wrap(n.models,"disposable_email"))).concat(this.wrap(t.models,"disposable_card")),a&&(e=e.concat(this.wrap([a],"email")),a.altEmails&&a.altEmails.models&&(e=e.concat(this.wrap(a.altEmails.models,"email")))),this.model.results=e,this.model.loading=!1,this.renderResults()},this))},this))},this))},this)})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div style="background:linear-gradient(45deg,#25519c,#46c8f9);text-align:center;">\n             <div class="links-wrapper">\n              <div class="links close-link" style="padding:5px;">\n                <img id="close" height="12px" width="12px" class="header-icon" src="',a="/pages/images/dnt_blur_growl_xclose.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'">\n              </div>\n            </div>\n            <div style="padding-top:30px;padding-bottom:10px;">\n                <img class="thing" src="',a="/pages/images/dnt_blur_growl_dnt_logo.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            </div>\n            <div style="padding:0px;">\n                <p style="color:white;font-size:20px;">',a="mm_dntme_blur_isnow",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</p>\n            </div>\n            <div style="padding:5px;">\n                <img class="thing" src="',a="/pages/images/blur_growl.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            </div>\n            <div style="padding:10px;">\n                <p style="color:white;font-size:20px;">',a="mm_dntme_blur_passwords",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"<br>",a="mm_dntme_blur_privacy",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</p>\n            </div>\n            <div class="btn" style="margin-bottom:30px;background:#fff;box-shadow:0 2px 0 0 darkblue;">\n                <a id="seeBlur" href="#" style="color:#25519c;font-size:20px;line-height:1.5em;font-weight:bold;">',a="mm_dntme_blur_new",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</a>\n            </div>\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",s+=c(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings-grey.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-a-link">\n            <img src="',a="pages/images/dnt-ui-footer-new.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            ',a="mm_dntme_new_premium_added",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',a="/pages/images/dnt-ui-header-logo.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",s+=c(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-b-link">\n            <img src="',a="pages/images/dnt-ui-footer-heart.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n          ',a="mm_dntme_support_online_privacy",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',a="/pages/images/dnt-ui-header-logo.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',a="pageContent",s+=c(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+'</div>\n        </div>\n    </div>\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',a="/pages/images/dnt-ui-header-logo.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',a="/pages/images/dnt-ui-header-close.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d=e.template(function(e,t,i,n,a){function s(e){var t,n,a="";return a+='\n        <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="complete-setup" class="btn btn-primary" value=\'',t="mm_dntme_complete_setup_button",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===h?n.call(e,t,{hash:{}}):n===m?p.call(e,"intl",t,{hash:{}}):n,a+=u(t)+"'/></div>\n    "}i=i||e.helpers;var l,o,r,c="",d=this,h="function",p=i.helperMissing,m=void 0,u=this.escapeExpression;return c+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',l="pageContent",l=typeof(o=i.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"child",l,{hash:{}}):o,c+=u(l)+"</div>\n        </div>\n    </div>\n    ",l=i.registered||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),o=i.unless,(r=d.program(1,s,a)).hash={},(r.fn=r).inverse=d.noop,((l=o.call(t,l,r))||0===l)&&(c+=l),c+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',l="/pages/images/dnt-ui-header-logo.png",l=typeof(o=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"assetUrl",l,{hash:{}}):o,c+=u(l)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',l="/pages/images/dnt-ui-header-close.png",l=typeof(o=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===h?o.call(t,l,{hash:{}}):o===m?p.call(t,"assetUrl",l,{hash:{}}):o,c+=u(l)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),
ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n        ",n=s.notNow||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),a=s.unless,(c=h.program(2,l,t)).hash={},(c.fn=c).inverse=h.noop,((n=a.call(e,n,c))||0===n)&&(i+=n),i+="\n    "}function l(e){var t,n,a="";return a+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:90px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_join_and_protect_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+"<br/>",t="mm_dntme_join_and_protect_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px;" placeholder="',t="mm_dntme_enter_email_simple",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'"/>\n                <input type="button" id="not-now" class="btn" value=\'',t="mm_dntme_intrusive_not_now",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'\'/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_submit",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+"'/>\n                </div>\n            </div>\n        "}s=s||e.helpers;var o,r,c,d="",h=this,p="function",m=s.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',o="pageContent",o=typeof(r=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"child",o,{hash:{}}):r,d+=g(o)+"</div>\n        </div>\n    </div>\n    ",o=s.registered||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),r=s.unless,(c=h.program(1,i,a)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',o="/pages/images/dnt-ui-header-logo.png",o=typeof(r=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",o=typeof(r=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n        ",n=s.notNow||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),a=s.unless,(c=h.program(2,l,t)).hash={},(c.fn=c).inverse=h.noop,((n=a.call(e,n,c))||0===n)&&(i+=n),i+="\n    "}function l(e){var t,n,a="";return a+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:110px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_complete_setup",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px 10px 5px 10px;" placeholder="',t="mm_dntme_enter_email_simple",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'"/>\n                <input class="span2" id="password-field" type="password" style="width:130px;height:25px;margin:5px 10px 10px 10px;" placeholder="',t="mm_dntme_enter_password_simple",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+'"/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_register",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+"'/>\n                </div>\n            </div>\n        "}s=s||e.helpers;var o,r,c,d="",h=this,p="function",m=s.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',o="pageContent",o=typeof(r=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"child",o,{hash:{}}):r,d+=g(o)+"</div>\n        </div>\n    </div>\n    ",o=s.registered||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),r=s.unless,(c=h.program(1,i,a)).hash={},(c.fn=c).inverse=h.noop,((o=r.call(t,o,c))||0===o)&&(d+=o),d+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',o="/pages/images/dnt-ui-header-logo.png",o=typeof(r=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",o=typeof(r=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",s+=c(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings-grey.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',a="pageContent",s+=c(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',a="/pages/images/dnt-ui-header-settings-grey.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer weeklyReport clearfix">\n        <img src="',a="pages/images/dnt-ui-weekly-report.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n        <span></span>',a="mm_dntme_weekly_report_title",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+" &rarr;\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts=e.template(function(e,t,i,n,a){function s(){return"off"}function l(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_rememberaccounts",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function o(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_rememberaccounts",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function r(){return"off"}function c(){return"on"}function d(){return"off"}function h(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_helpmelogin",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function p(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_helpmelogin",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function m(){return"off"}function u(){return"on"}function g(){return"off"}function f(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_submit_account",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function b(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_submit_account",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function _(){return"off"}function v(){return"on"}function E(){return"off"}function N(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_suggeststrongpassword",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function y(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_suggeststrongpassword",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function A(){return"off"}function D(){return"on"}i=i||e.helpers;var k,T,w,M="",I=this,B="function",x=i.helperMissing,C=void 0,H=this.escapeExpression;return M+='<div id="account" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"accountOff"),T=i["if"],(w=I.program(1,s,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="save_account">\n  <div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"accountOff"),T=i["if"],(w=I.program(3,l,a)).hash={},(w.fn=w).inverse=I.program(5,o,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_accounts_save_account",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n  <div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"accountOff"),T=i["if"],(w=I.program(7,r,a)).hash={},(w.fn=w).inverse=I.program(9,c,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n</div>\n\n<div id="account" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"loginOff"),T=i["if"],(w=I.program(11,d,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="account">\n  <div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"loginOff"),T=i["if"],(w=I.program(13,h,a)).hash={},(w.fn=w).inverse=I.program(15,p,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_accounts_help_login",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n  <div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"loginOff"),T=i["if"],(w=I.program(17,m,a)).hash={},(w.fn=w).inverse=I.program(19,u,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n</div>\n\n<div id="submit_account" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"submitAccountOff"),T=i["if"],(w=I.program(21,g,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="submit_account">\n  <div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"submitAccountOff"),T=i["if"],(w=I.program(23,f,a)).hash={},(w.fn=w).inverse=I.program(25,b,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_accounts_submit_account",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n  <div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"submitAccountOff"),T=i["if"],(w=I.program(27,_,a)).hash={},(w.fn=w).inverse=I.program(29,v,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n</div>\n\n<div id="password" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"passwordOff"),T=i["if"],(w=I.program(31,E,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="password">\n  <div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"passwordOff"),T=i["if"],(w=I.program(33,N,a)).hash={},(w.fn=w).inverse=I.program(35,y,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_accounts_password",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n  <div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"passwordOff"),T=i["if"],(w=I.program(37,A,a)).hash={},(w.fn=w).inverse=I.program(39,D,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts}),ABINE_DNTME.define("abine/views/accountsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(t,e,n,a,i,s,l,o,r,c,d){return c.extend({templateName:"dntme_dashboard_accounts",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.accountsDashboard":"accountsDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var e=this.$("#"+this.options.highlight);e&&e[0]&&(e[0].scrollIntoView(),e.addClass("highlight"))}this.options.timeout&&d.setTimeout(t.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},accountsDashboard:function(e){e.preventDefault(),l.webapp.openAccounts(),this.trigger("close")},createChildren:function(){return this.children={},this.children}})}),ABINE_DNTME.define("abine/views/dashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/intl","abine/timer","abine/responseCodes","abine/views/settingsDashboard"],function(d,h,e,a,t,i,p,n,m,u,l,s){var g=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,o=e.View.extend({tagName:"div",templateName:"dntme_dashboard_login",afterInitialize:function(){this.doc=this.el.ownerDocument;var e=this;u.setTimeout(function(){e.trigger("mask-passwords")},100)}}),r=e.View.extend({tagName:"div",templateName:"dntme_dashboard_main_grid",afterInitialize:function(){this.doc=this.el.ownerDocument}});return e.View.extend({tagName:"div",templateName:"dntme_dashboard_main",className:"dntme_dashboard",events:{"click .show-details":"showChildDashboard","click #register":"register","click #login":"login","submit #frm":"loginOrRegister","click #forgotPassword":"forgotPassword","click #whySignIn":"whySignIn","click .cell":"showChildDashboard","click .main-tracker-title":"showChildDashboard","click #switchLogin":"switchLogin","click #accountSwitch":"triggerSettings","click #walletSwitch":"triggerSettings","click #maskingSwitch":"triggerSettings","click #trackingSwitch":"triggerSettings","click #default-button":"makeDefault","click .search-row":"showSearch"},showInlineSettings:function(e,t){h(".mobileCell, .syncCell, .dntme_dntStats",this.el.ownerDocument).hide(),h(".trackingCell, .maskingCell",this.el.ownerDocument).removeClass("b"),this.$("#inline-site-settings").show(),this.settingsView?(this.settingsView.options.highlight=e,this.settingsView.options.switchTo=t,this.settingsView.reload()):(this.settingsView=this.getInlineSettings(e,t),delete this.options.highlight)},showSuggestButton:function(){this.$(".suggested-option .description").text("for "+this.options.domain),this.$(".suggested-option").show(),this.$(".search-option").hide(),this.trigger("fav-icons")},showSearch:function(e){e.preventDefault(),this.options.contentManager.showSearch(this.options),this.trigger("close")},makeDefault:function(){this.messenger.send("update:tabData:autofill",{})},getInlineSettings:function(e,t){var n=this.model,a=this.globalData,i=new s({el:this.$("#inline-site-settings")[0],inline:!0,tabData:n,globalData:a,doc:this.el.ownerDocument,messenger:this.messenger,highlight:e,contentManager:this.contentManager,settingsView:"site-settings",switchTo:t});return i.transferEvents(["resize","max-height"],this),n.on("settings-changed",d.debounce(d.bind(function(){this.model.fetch({success:d.bind(function(){this.children.mainGrid.render()},this)})},this),500)),i},triggerSettings:function(e){for(var t="off",n=e.target;!h(n).data("group");)n=n.parentNode;if(this.$(n).hasClass("on")&&(t="on"),!h(n).data("changing"))return h(n).data("changing",!0),h(".knob",n).animate({marginLeft:"on"==t?0:20},d.bind(function(){h(n).removeData("changing"),h(n).toggleClass("on").toggleClass("off")})),this.showInlineSettings(h(n).data("group"),t),e.preventDefault(),!1},afterInitialize:function(){if(this.email_2fa_shown=!1,this.toolBarPanelId=7000066,this.messenger.send("update:panelActivity:impression",{panelId:this.toolBarPanelId}),this.model.get("loggedIn")?this.messenger.send("update:panelActivity:masked",{panelId:this.toolBarPanelId}):this.messenger.send("update:panelActivity:disclosed",{panelId:this.toolBarPanelId}),this.doc=this.el.ownerDocument,this.messenger=this.options.messenger,this.contentManager=this.options.contentManager,h("#protect-email, #password-field",this.el).css("height","25px"),this.options.highlight&&(this.model.get("loggedIn")?i.setTimeout(d.bind(function(){this.showInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight},this),500):delete this.options.highlight),this.model.get("loggedIn")){var t=new a.AccountCollection;t.fetchLoginsByDomain(this.options.domain,d.bind(function(){if(0<t.models.length)return this.showSuggestButton(),void this.showSuggestButton();var e=new a.DisposableEmailCollection;e.fetchAllByDomain(this.options.domain,d.bind(function(){0<e.models.length?this.showSuggestButton():(new a.DisposableCardCollection).fetchAllByDomain(this.options.domain,d.bind(function(){},this))},this))},this))}if(this.model.get("siteGPC")){h(".gpc-row",this.el).show();var e=this.model.get("siteRespectsGPC"),n=this.options.domain.replace(/\.(com|org|gov|)/i,"");!0===e?h(".gpc-row .title",this.el).text("Privacy handshake! "+n+" registered your browser request to Not Sell your info."):h(".gpc-row .title",this.el).text(n+" has seen your GPC privacy request, but does not support it yet.")}},switchLogin:function(e){e.preventDefault(),h(".lockBit",this.el).hide(),h("#login",this.el).val(m.getText("mm_dntme_sign_in")),h(".loginBit",this.el).show(),h("#protect-email",this.el).val(""),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true")},whySignIn:function(e){e.preventDefault(),this.trigger("change-dashboard","login_help")},showChildDashboard:function(e){e.preventDefault();var t=h(e.target).data("dashboard");if(t||(t=h(e.target.parentNode).data("dashboard")),"anywhere"==t)return this.model.get("hasMobileApp")||p.webapp.openDntAnywhere(),void this.trigger("close");"accounts"!=t?"masking"!=t?"wallet"!=t?this.trigger("change-dashboard",t):this.walletDashboard():this.maskingDashboard():this.accountsDashboard()},accountsDashboard:function(){p.webapp.openAccounts(),this.trigger("close")},maskingDashboard:function(){p.webapp.openMasking(),this.trigger("close")},walletDashboard:function(){p.webapp.openWallet(),this.trigger("close")},forgotPassword:function(e){e.preventDefault(),this.messenger.send("update:panelActivity:closed",{panelId:this.toolBarPanelId}),p.webapp.openForgotPassword(),this.trigger("close")},loginOrRegister:function(e){this.model.get("email")?this.login(e):this.register(e)},login:function(n){function a(e,t){try{r.get(0).ownerDocument&&(h(".loading-message",r).text(m.getText("mm_loading_display_login")),e<t&&(c=u.setTimeout(function(){a(e+1,t)},500)))}catch(n){}}n&&n.preventDefault(),this.trigger("ignore-blur",!0);var e=this.$("#protect-email").val(),t=this.$("#password-field").val(),i=this.$("#mfa-code-field").val(),s=h("#auth-code-field").val(),l=this.$("#error");if(l.hide(),!e.match(g))return this.$("#welcome-message").hide(),l.text(m.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==t.length)return this.$("#welcome-message").hide(),l.text(m.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var o={email:e,password:t,mfa_code:i,auth_code:s},r=this.$("#progress-section");r.height(this.$("#form-div").height()-10);var c=null;a(0,20),r.show(),this.$("#form-div").hide(),p.licenseModule.login(o,d.bind(function(e,t){this.trigger("ignore-blur",!0),this.processRegistration(e,t,o,d.bind(function(e){u.clearTimeout(c),r.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),this.trigger("change-dashboard","dashboard"))},this))},this)),this.trigger("resize")},register:function(n){function a(e,t){try{l.get(0).ownerDocument&&(h(".loading-message",l).text(m.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<t&&(o=u.setTimeout(function(){a(e+1,t)},500)))}catch(n){}}n&&n.preventDefault(),this.trigger("ignore-blur",!0),this.$("#welcome-message").show();var e=this.$("#protect-email").val(),t=this.$("#password-field").val(),i=this.$("#error");if(i.hide(),!e.match(g))return this.$("#welcome-message").hide(),i.text(m.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==t.length)return this.$("#welcome-message").hide(),i.text(m.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var s={email:e,password:t,password_hint:m.getText("mm_pwhint_default"),register_type:"dnt_panel",send_password_email:!1},l=this.$("#progress-section");l.height(this.$("#form-div").height()-10);var o=null;a(0,40),l.show(),this.$("#form-div").hide(),p.licenseModule.register(s,d.bind(function(e,t){this.trigger("ignore-blur",!0),this.processRegistration(e,t,s,d.bind(function(e){u.clearTimeout(o),l.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),u.setTimeout(function(){p.webapp.openTour()},1e3),this.trigger("close"))},this))},this)),this.trigger("resize")},processRegistration:function(e,t,n,a){if(e){this.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var i=m.getText("mm_dntme_register_error"),s=e.responseJSON&&e.responseJSON.data?e.responseJSON.data.errors:null;"invalid email address"==e.responseJSON.error_code?i=m.getText("mm_dntme_invalid_email_server_error"):"mfa code required"==e.responseJSON.error_code?(i="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section, #forgotPassword, #register").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"authorize new device"==e.responseJSON.error_code||"auth code required"==e.responseJSON.error_code||"invalid auth code"==e.responseJSON.error_code?(i="You are logging in from a new device. Please check your email and enter authentication code below:",this.email_2fa_shown?(i+="<div style='color:white;font-weight:bold;text-align:center;'>",i+="Please enter valid authentication code.",i+="</div>"):this.email_2fa_shown=!0,this.$("#login-section, #forgotPassword, #register").hide(),this.$("#email-auth-section").show(),this.$("#complete-setup-div, #form-div").show(),this.$("#error, #progress-section").hide(),this.trigger("render")):"wrong password"==e.responseJSON.error_code?i=m.getText("mm_dntme_wrong_password"):"no account found for email"==e.responseJSON.error_code?i=m.getText("mm_dntme_wrong_email"):"version not allowed"==e.responseJSON.error_code?i=m.getText("mm_dntme_version_not_allowed"):"account has been locked"==e.responseJSON.error_code?(i=m.getText("mm_dntme_account_locked"),this.email_2fa_shown=!1,this.$("#login-section").show(),this.$("#mfa-section, #email-auth-section").hide()):e.responseJSON.error_code==l.SCHEDULED_DOWNTIME?i=m.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?i=m.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(i=m.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(i).show(),e.responseJSON&&e.responseJSON.data&&1==e.responseJSON.data.generated_password&&this.$("#error #loginButton").click(d.bind(function(e){return p.webapp.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton, #error #retry").off().click(d.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(p.webapp.openDnt2UpgradePage),this.trigger("resize"),a(i)}else this.trigger("refresh-preferences"),a()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")},createChildren:function(){return this.children={trackersTitle:new n.TitleView({model:this.model,doc:this.el.ownerDocument}),mainGrid:new r({model:this.model,doc:this.el.ownerDocument})},this.globalData=this.globalData||new a.GlobalData({messenger:this.options.messenger}),this.model.showSettings&&(this.settingsView=this.getInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight),this.children.trackersTitle.transferEvents(["open:understanding:tracker"],this),this.model.get("loggedIn")||(this.model.get("email")?this.panelId=2000011:this.panelId=3000011,this.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.children.loginSection=new o({model:this.model,doc:this.el.ownerDocument}),this.children.loginSection.transferEvents(["mask-passwords"],this)),this.children}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+=' \n  <div id="bl-save_account-region" class="ignore-region" style="max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(2,l,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,
"blacklistCollection"),a=s.each,(ae=se.program(8,d,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-submit_account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(14,u,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-save_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(20,_,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-identity-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(26,y,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-tracker-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(32,T,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-address-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(38,B,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(44,P,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-email-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(50,F,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-password-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(56,V,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div id="bl-phone-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(62,G,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n    <div id="bl-real_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',n=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),a=s.each,(ae=se.program(68,Y,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='\n  </div>\n  <div class="blacklist-entry blacklist-empty" style="margin-left:2em;display:none">',n="mm_dntme_settings_ignore_no_results",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===le?a.call(e,n,{hash:{}}):a===re?oe.call(e,"intl",n,{hash:{}}):a,i+=ce(n)+'. <a href="#" class="clear-blacklist-search">',n="mm_dntme_settings_ignore_clear_search",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===le?a.call(e,n,{hash:{}}):a===re?oe.call(e,"intl",n,{hash:{}}):a,i+=ce(n)+'</a></div>\n  </br>\n  <input style="margin-left:3em;height:2.5em" type="text" id="blacklist-search" placeholder="Search">\n  <div style="margin-left:6em;display:none" id="blacklist-no-entry">',n="mm_dntme_settings_ignore_no_web",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===le?a.call(e,n,{hash:{}}):a===re?oe.call(e,"intl",n,{hash:{}}):a,i+=ce(n)+"</div>\n  "}function l(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),a=s["if"],(ae=se.program(3,o,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function o(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="save_account" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),a=s["if"],(ae=se.program(4,r,t)).hash={},(ae.fn=ae).inverse=se.program(6,c,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;"\n        >\n          <div class="knob"></div>\n        </div>\n      </div>'}function r(){return"off"}function c(){return"on"}function d(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),a=s["if"],(ae=se.program(9,h,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function h(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="account" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),a=s["if"],(ae=se.program(10,p,t)).hash={},(ae.fn=ae).inverse=se.program(12,m,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function p(){return"off"}function m(){return"on"}function u(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),a=s["if"],(ae=se.program(15,g,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function g(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="submit_account" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),a=s["if"],(ae=se.program(16,f,t)).hash={},(ae.fn=ae).inverse=se.program(18,b,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function f(){return"off"}function b(){return"on"}function _(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),a=s["if"],(ae=se.program(21,v,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function v(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="save_card" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),a=s["if"],(ae=se.program(22,E,t)).hash={},(ae.fn=ae).inverse=se.program(24,N,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function E(){return"off"}function N(){return"on"}function y(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),a=s["if"],(ae=se.program(27,A,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function A(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="identity" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),a=s["if"],(ae=se.program(28,D,t)).hash={},(ae.fn=ae).inverse=se.program(30,k,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function D(){return"off"}function k(){return"on"}function T(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),a=s["if"],(ae=se.program(33,w,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function w(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="tracker" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),a=s["if"],(ae=se.program(34,M,t)).hash={},(ae.fn=ae).inverse=se.program(36,I,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function M(){return"off"}function I(){return"on"}function B(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),a=s["if"],(ae=se.program(39,x,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function x(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="address" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),a=s["if"],(ae=se.program(40,C,t)).hash={},(ae.fn=ae).inverse=se.program(42,H,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function C(){return"off"}function H(){return"on"}function P(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),a=s["if"],(ae=se.program(45,S,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function S(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="card" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),a=s["if"],(ae=se.program(46,U,t)).hash={},(ae.fn=ae).inverse=se.program(48,$,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function U(){return"off"}function $(){return"on"}function F(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),a=s["if"],(ae=se.program(51,O,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function O(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="email" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),a=s["if"],(ae=se.program(52,R,t)).hash={},(ae.fn=ae).inverse=se.program(54,z,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function R(){return"off"}function z(){return"on"}function V(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),a=s["if"],(ae=se.program(57,L,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function L(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="password" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),a=s["if"],(ae=se.program(58,q,t)).hash={},(ae.fn=ae).inverse=se.program(60,W,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function q(){return"off"}function W(){return"on"}function G(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),a=s["if"],(ae=se.program(63,K,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function K(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="phone" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),a=s["if"],(ae=se.program(64,J,t)).hash={},(ae.fn=ae).inverse=se.program(66,j,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function J(){return"off"}function j(){return"on"}function Y(e,t){var n,a,i="";return i+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),a=s["if"],(ae=se.program(69,Q,t)).hash={},(ae.fn=ae).inverse=se.noop,((n=a.call(e,n,ae))||0===n)&&(i+=n),i+="\n    "}function Q(e,t){var n,a,i="";return i+='<div class="container-',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+' blacklist-entry setting-row" data-name="real_card" data-type="blacklist" data-domain="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'" data-id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.id",{hash:{}})),i+=ce(n)+'">\n        <div class="message">',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===le?n=n.call(e,{hash:{}}):n===re&&(n=oe.call(e,"this.domain",{hash:{}})),i+=ce(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),a=s["if"],(ae=se.program(70,X,t)).hash={},(ae.fn=ae).inverse=se.program(72,Z,t),((n=a.call(e,n,ae))||0===n)&&(i+=n),i+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function X(){return"off"}function Z(){return"on"}function ee(e){var t,n,a="";return a+='\n    <div style="margin-left:6em">',t="mm_dntme_settings_ignore_no_web",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===le?n.call(e,t,{hash:{}}):n===re?oe.call(e,"intl",t,{hash:{}}):n,a+=ce(t)+"</div>\n  "}s=s||e.helpers;var te,ne,ae,ie="",se=this,le="function",oe=s.helperMissing,re=void 0,ce=this.escapeExpression;return ie+='<div id="ignore-container">\n  <div style="margin-left:2em">',te="mm_dntme_settings_ignore_list_for",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+': <br/><select id="ignore-dropdown" style="width:90%">\n    <option style=\'text-align:left;\' value="account">',te="mm_dntme_settings_ignore_dd_account_auto",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"submit_account\" selected>",te="mm_dntme_settings_ignore_dd_submit_account",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"save_account\" selected>",te="mm_dntme_settings_ignore_dd_account_save",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"save_card\">",te="mm_dntme_settings_ignore_dd_save_card",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"address\">",te="mm_dntme_settings_ignore_dd_address_auto",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"real_card\">",te="mm_dntme_settings_ignore_dd_cc_auto",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"card\">",te="mm_dntme_settings_ignore_dd_cc_mask",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"email\">",te="mm_dntme_settings_ignore_dd_email_mask",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"phone\">",te="mm_dntme_settings_ignore_dd_phone_mask",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"password\">",te="mm_dntme_settings_ignore_dd_pw",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"identity\">",te="mm_dntme_settings_ignore_dd_identity",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n    <option style='text-align:left;' value=\"tracker\">",te="mm_dntme_settings_ignore_dd_tracker",te=typeof(ne=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===le?ne.call(t,te,{hash:{}}):ne===re?oe.call(t,"intl",te,{hash:{}}):ne,ie+=ce(te)+"</option>\n  </select>\n  </div>\n  </br>\n  ",te=s.blacklistCollection||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklistCollection"),ne=s["if"],(ae=se.program(1,i,a)).hash={},(ae.fn=ae).inverse=se.program(74,ee,a),((te=ne.call(t,te,ae))||0===te)&&(ie+=te),ie+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings}),ABINE_DNTME.define("abine/views/ignoreSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(t,e,n,a,i,s,l,o,r,c,d){return c.extend({templateName:"dntme_dashboard_ignore_settings",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","change #ignore-dropdown":"toggleSection","keyup #blacklist-search":"blacklistSearch","click .clear-blacklist-search":"clearBlacklistSearch"},afterInitialize:function(){if(this.toggleSection(),this.doc=this.el.document,this.options.highlight){var e=this.$("#"+this.options.highlight);e&&e[0]&&(e[0].scrollIntoView(),e.addClass("highlight"))}this.options.timeout&&d.setTimeout(t.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children},toggleSection:function(){this.$(".ignore-region").hide(),this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region").show(),0==this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region div.blacklist-entry:visible").length?(this.$("#blacklist-no-entry").show(),this.$("#blacklist-search").hide()):(this.$("#blacklist-no-entry").hide(),this.$("#blacklist-search").show()),this.trigger("resize")},blacklistSearch:function(){var e=this.$("#blacklist-search").val().replace(".","\\.");e=e.replace(/[^a-z0-9\\.\s]/gi,"").replace(/[_\s]/g,""),this.$(".blacklist-entry").hide();var t=this.$(".blacklist-entry[class*="+e+"]");0<t.length||""==e?(t.show(),this.$(".blacklist-empty").hide()):this.$(".blacklist-empty").show(),this.trigger("resize")},clearBlacklistSearch:function(e){return this.$("#blacklist-search").val(""),this.blacklistSearch(),e.preventDefault(),!1}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login=e.template(function(e,t,s,n,a){function i(){return"display:none;"}function l(){return"display:none;"}function o(e,t){var n,a,i="";return i+='\n  \n  <div id="form-div">\n\n    <div id="login-section">\n      <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n           class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n      </div>\n      <input id="protect-email" class="loginBit" type="text" value="',typeof(n=(v=s.email)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"))===A?n=n.call(e,{hash:{}}):n===k&&(n=D.call(e,"email",{hash:{}})),i+=T(n)+'" style="width:230px;margin:10px 10px 5px 10px;height:25;',n=(v=s.unlockScreen)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),a=s["if"],(E=y.program(6,r,t)).hash={},(E.fn=E).inverse=y.noop,((n=a.call(e,n,E))||0===n)&&(i+=n),i+='" placeholder="',n="mm_dntme_enter_email_simple",n=typeof(a=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?a.call(e,n,{hash:{}}):a===k?D.call(e,"intl",n,{hash:{}}):a,i+=T(n)+'"/><br/>\n      <input id="password-field" type="password" style="width:230px;margin:5px 10px 10px 10px;height:25;" placeholder="',n="mm_dntme_enter_password_simple",n=typeof(a=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?a.call(e,n,{hash:{}}):a===k?D.call(e,"intl",n,{hash:{}}):a,i+=T(n)+'"/>\n    </div>\n\n    <div id="mfa-section" style="display:none;">\n      <input type="text" id="mfa-code-field" style="width:230px;height:25px;margin:5px 10px 10px 10px" name="mfa_code" placeholder="Authentication Code" />\n    </div>\n    <div id="email-auth-section" style="display:none;">\n      <input type="text" id="auth-code-field" style="width:140px;height:28px;margin:10px 5px" name="auth_code" placeholder="Authentication Code" />\n    </div>\n\n    <input type="',n=(v=s.loginNotRegister)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),a=s["if"],(E=y.program(8,c,t)).hash={},(E.fn=E).inverse=y.program(10,d,t),((n=a.call(e,n,E))||0===n)&&(i+=n),i+='" id="login" class="btn btn-success" value=\'',n=(v=s.unlockScreen)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),a=s["if"],(E=y.program(12,h,t)).hash={},(E.fn=E).inverse=y.program(14,p,t),((n=a.call(e,n,E))||0===n)&&(i+=n),i+="'/>\n    <input type=\"",n=(v=s.loginNotRegister)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),a=s.unless,(E=y.program(16,m,t)).hash={},(E.fn=E).inverse=y.program(18,u,t),((n=a.call(e,n,E))||0===n)&&(i+=n),i+='" style="',n=(v=s.unlockScreen)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),a=s["if"],(E=y.program(20,g,t)).hash={},(E.fn=E).inverse=y.noop,((n=a.call(e,n,E))||0===n)&&(i+=n),i+='" id="register" class="loginBit btn btn-primary" value=\'',n="mm_dntme_create_account",n=typeof(a=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?a.call(e,n,{hash:{}}):a===k?D.call(e,"intl",n,{hash:{}}):a,i+=T(n)+'\'/>\n    <input type="button" style="',n=(v=s.unlockScreen)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),a=s.unless,(E=y.program(22,f,t)).hash={},(E.fn=E).inverse=y.noop,((n=a.call(e,n,E))||0===n)&&(i+=n),i+='" id="switchLogin" class="btn btn-primary lockBit" value=\'',n="mm_dntme_use_another_account",n=typeof(a=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?a.call(e,n,{hash:{}}):a===k?D.call(e,"intl",n,{hash:{}}):a,i+=T(n)+'\'/>\n    <br/>\n  </div>\n  <a href="" id="forgotPassword">',n="mm_dntme_forgot_my_password",n=typeof(a=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?a.call(e,n,{hash:{}}):a===k?D.call(e,"intl",n,{hash:{}}):a,i+=T(n)+"</a><br/>\n  "}function r(){return"display:none;"}function c(){return"submit"}function d(){return"button"}function h(e){var t,n;return t="mm_dntme_unlock",t=typeof(n=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,T(t)}function p(e){var t,n;return t="mm_dntme_sign_in",t=typeof(n=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===A?n.call(e,t,{hash:{}}):n===k?D.call(e,"intl",t,{hash:{}}):n,T(t)}function m(){return"submit"}function u(){return"button"}function g(){return"display:none;"}function f(){return"display:none;"}s=s||e.helpers;var b,_,v,E,N="",y=this,A="function",D=s.helperMissing,k=void 0,T=this.escapeExpression,w=s.blockHelperMissing;return N+='<div class="login_overlay"></div>\n\n<div class="login_form">\n\n  <div id="welcome-message">\n\n    <span class="lockBit" style="',b=(v=s.unlockScreen)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),_=s.unless,(E=y.program(1,i,a)).hash={},(E.fn=E).inverse=y.noop,((b=_.call(t,b,E))||0===b)&&(N+=b),N+='">',b="mm_dntme_unlock_your",b=typeof(_=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===A?_.call(t,b,{hash:{}}):_===k?D.call(t,"intl",b,{hash:{}}):_,N+=T(b)+'</span>\n    <span class="loginBit" style="',b=(v=s.unlockScreen)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),_=s["if"],(E=y.program(3,l,a)).hash={},(E.fn=E).inverse=y.noop,((b=_.call(t,b,E))||0===b)&&(N+=b),N+='">',b="mm_dntme_sign_in_to_your",b=typeof(_=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===A?_.call(t,b,{hash:{}}):_===k?D.call(t,"intl",b,{hash:{}}):_,N+=T(b)+'</span>\n    <img class="logo" height="16px" width="17px" src="',b="/pages/images/dnt-ui-header-logo.png",b=typeof(_=(v=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===A?_.call(t,b,{hash:{}}):_===k?D.call(t,"assetUrl",b,{hash:{}}):_,N+=T(b)+'"/>\n    <span class="boldFont">Blur</span>\n    ',b="mm_dntme_sign_in_to_your_account",b=typeof(_=(v=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl")
)===A?_.call(t,b,{hash:{}}):_===k?D.call(t,"intl",b,{hash:{}}):_,N+=T(b)+'\n  </div>\n  \n  <div id="error" style="display:none;color:white;text-transform:none;"></div>\n  \n  <div id="progress-section" style="display:none;margin-top:10px;">\n    <div class="progress progress-striped active">\n      <div class="bar bar-info" style="width: 100%;"></div>\n    </div>\n    <div class="loading-message" style="text-transform:none;"></div>\n  </div>\n  \n  ',b="frm",_=(v=s.form)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),(E=y.program(5,o,a)).hash={},(E.fn=E).inverse=y.noop,((b=v&&typeof _===A?_.call(t,b,E):w.call(t,_,b,E))||0===b)&&(N+=b),N+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="settings-header clearfix">\n  <div class="go-back"><img src="',a="/pages/images/back.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'" width="18px;"/> ',a="mm_dntme_back",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+'</div>\n  <div class="title"><img class="logo" height="24px" width="24px" src="',a="/pages/images/Icon-48.png",s+=c(a=typeof(i=n.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"assetUrl",a,{hash:{}}):i)+'"/>\n    <span class="boldFont">Blur</span></div>\n</div>\n<div class="login_help">\n  <h3>',a="mm_dntme_dashboard_login_help_title1",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body11",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <h3>",a="mm_dntme_dashboard_login_help_title2",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body21",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body22",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body23",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <h3>",a="mm_dntme_dashboard_login_help_title3",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body31",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body32",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body33",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <h3>",a="mm_dntme_dashboard_login_help_title4",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</h3>\n  <p>",a="mm_dntme_dashboard_login_help_body41",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n  <p>",a="mm_dntme_dashboard_login_help_body42",s+=c(a=typeof(i=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"intl",a,{hash:{}}):i)+"</p>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help}),ABINE_DNTME.define("abine/views/loginHelp",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,n,a,i,s,l,o,r,c){return c.extend({templateName:"dntme_dashboard_login_help",events:{"click .go-back":"goBack"},afterInitialize:function(){this.doc=this.el.document},goBack:function(){this.trigger("change-dashboard","dashboard")}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main=e.template(function(e,t,s,n,a){function i(){return"disabled"}function l(e,t){var n,a,i="";return i+=" ",n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s.unless,(T=M.program(4,o,t)).hash={},(T.fn=T).inverse=M.noop,((n=a.call(e,n,T))||0===n)&&(i+=n),i}function o(){return"no-trackers"}function r(e){var t,n,a="";return a+='<a href="" class="show-details" data-dashboard="tracking">',t="mm_dntme_dashboard_show_details",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</a>"}function c(e,t){var n,a,i="";return i+="\n    ",n=s.canChangeAutofill||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canChangeAutofill"),a=s["if"],(T=M.program(9,d,t)).hash={},(T.fn=T).inverse=M.noop,((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n"}function d(){return'\n        <div class="default-autofill clearfix">\n            <span>Blur is not your default Password Manager.</span>\n            <div><button id="default-button" class="btn btn-small" style="font-weight: bold">Make Default</button></div>\n        </div>\n    '}function h(e){var t,n,a="";return a+='\n<div class="search-row clearfix">\n    <div class="search-option"><button class="btn btn-small btn-primary" style="font-weight: bold">Search Blur</button></div>\n    <div class="menu suggested-option" style="display: none">\n        <div class="icon"><img class="replace-fav-icon"\n                               src="',t="/pages/images/2015panels/panel_b_logo.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"assetUrl",t,{hash:{}}):n,a+=C(t)+'"\n                               style="width:60px;height:30px;"/></div>\n        <div class="text">\n            <div class="title">See all autofill data</div>\n            <div class="description">for ',typeof(t=s.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"))===I?t=t.call(e,{hash:{}}):t===x&&(t=B.call(e,"domain",{hash:{}})),a+=C(t)+"</div>\n        </div>\n    </div>\n</div>\n"}function p(){return'\n      <div id="inline-site-settings"></div>\n  '}function m(){return'\n      <div id="inline-site-settings" style="display: none;"></div>\n  '}function u(e,t){var n,a,i="";return i+='\n    <div class="mobileCell cell l b" data-dashboard="anywhere" style="font-size:10pt;text-align:center;',n=s.showSettings||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),a=s["if"],(T=M.program(18,g,t)).hash={},(T.fn=T).inverse=M.noop,((n=a.call(e,n,T))||0===n)&&(i+=n),i+='">\n      ',n=s.hasMobileApp||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasMobileApp"),a=s["if"],(T=M.program(20,f,t)).hash={},(T.fn=T).inverse=M.program(22,b,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+='\n    </div>\n    <div class="syncCell cell b" data-dashboard="dropbox" style="font-size:10pt;text-align:center;',n=s.showSettings||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),a=s["if"],(T=M.program(24,_,t)).hash={},(T.fn=T).inverse=M.noop,((n=a.call(e,n,T))||0===n)&&(i+=n),i+='">\n      ',n=s.entitledToSync||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToSync"),a=s["if"],(T=M.program(26,v,t)).hash={},(T.fn=T).inverse=M.program(31,y,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n    </div>\n  "}function g(){return"display:none;"}function f(e){var t,n,a="";return a+="\n        ",t="mm_dntme_dashboard_has_mobile_app_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_mobile_app_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'</span>\n        <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</div>\n      "}function b(e){var t,n,a="";return a+="\n        ",t="mm_dntme_dashboard_no_mobile_app_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_mobile_app_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</span> ",t="mm_dntme_dashboard_no_mobile_app_3",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'<br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_get_app",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</div>\n      "}function _(){return"display:none;"}function v(e,t){var n,a,i="";return i+="\n          ",n=s.dropboxEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dropboxEnabled"),a=s["if"],(T=M.program(27,E,t)).hash={},(T.fn=T).inverse=M.program(29,N,t),((n=a.call(e,n,T))||0===n)&&(i+=n),i+="\n      "}function E(e){var t,n,a="";return a+="\n            ",t="mm_dntme_dashboard_has_dropbox_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_dropbox_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'</span>\n            <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</div>\n          "}function N(e){var t,n,a="";return a+="\n            ",t="mm_dntme_dashboard_no_dropbox_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_dropbox_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</span> ",t="mm_dntme_dashboard_no_dropbox_3",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'<br/>\n            <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_setup_sync",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</div>\n          "}function y(e){var t,n,a="";return a+="\n        ",t="mm_dntme_dashboard_no_sync_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_sync_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+'</span><br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_premium",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"intl",t,{hash:{}}):n,a+=C(t)+"</div>\n      "}function A(e){var t,n,a="";return a+="\n    ",t="loginSection",t=typeof(n=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===I?n.call(e,t,{hash:{}}):n===x?B.call(e,"child",t,{hash:{}}):n,a+=C(t)+"\n  "}s=s||e.helpers;var D,k,T,w="",M=this,I="function",B=s.helperMissing,x=void 0,C=this.escapeExpression;return w+='<div class="dashboard_title" style="position: relative">\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',D=s.disabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disabled"),k=s["if"],(T=M.program(1,i,a)).hash={},(T.fn=T).inverse=M.program(3,l,a),((D=k.call(t,D,T))||0===D)&&(w+=D),w+='">\n      ',D="trackersTitle",D=typeof(k=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===I?k.call(t,D,{hash:{}}):k===x?B.call(t,"child",D,{hash:{}}):k,w+=C(D)+"\n    </div>\n  </div>\n  ",D=s.loggedIn||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),k=s.unless,(T=M.program(6,r,a)).hash={},(T.fn=T).inverse=M.noop,((D=k.call(t,D,T))||0===D)&&(w+=D),w+="\n</div>\n",D=s.blurDefaultAutofill||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blurDefaultAutofill"),k=s.unless,(T=M.program(8,c,a)).hash={},(T.fn=T).inverse=M.noop,((D=k.call(t,D,T))||0===D)&&(w+=D),w+="\n",D=s.loggedIn||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),k=s["if"],(T=M.program(11,h,a)).hash={},(T.fn=T).inverse=M.noop,((D=k.call(t,D,T))||0===D)&&(w+=D),w+='\n<div class="gpc-row clearfix" style="display:none">\n    <div class="menu gpc-option">\n        <div class="icon"><img class="replace-fav-icon"\n                               src="',D="/pages/images/2015panels/panel_b_logo.png",D=typeof(k=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===I?k.call(t,D,{hash:{}}):k===x?B.call(t,"assetUrl",D,{hash:{}}):k,w+=C(D)+'"\n                               style="width:60px;height:30px;"/></div>\n        <div class="text">\n            <div class="title"></div>\n        </div>\n    </div>\n</div>\n<div class="grid clearfix">\n  ',D="mainGrid",D=typeof(k=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===I?k.call(t,D,{hash:{}}):k===x?B.call(t,"child",D,{hash:{}}):k,w+=C(D)+"\n  ",D=s.showSettings||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showSettings"),k=s["if"],(T=M.program(13,p,a)).hash={},(T.fn=T).inverse=M.program(15,m,a),((D=k.call(t,D,T))||0===D)&&(w+=D),w+="\n  ",D=s.hasMobileAppAndDropboxEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),k=s.unless,(T=M.program(17,u,a)).hash={},(T.fn=T).inverse=M.noop,((D=k.call(t,D,T))||0===D)&&(w+=D),w+="\n  ",D=s.loggedIn||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),k=s.unless,(T=M.program(33,A,a)).hash={},(T.fn=T).inverse=M.noop,((D=k.call(t,D,T))||0===D)&&(w+=D),w+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid=e.template(function(e,t,n,a,i){function s(){return"off"}function l(){return"on"}function o(){return"off"}function r(){return"on"}function c(){return"b"}function d(){return"off"}function h(){return"on"}function p(){return"b"}function m(){return"off"}function u(){return"on"}var g,f,b,_,v,E,N="",y=this,A="function",D=(n=n||e.helpers).helperMissing,k=void 0,T=this.escapeExpression,w=n.blockHelperMissing;return N+='<div class="cell l" data-dashboard="accounts">\n  <img style="margin-top:-10px" src="',g="pages/images/accounts.png",N+=T(g=typeof(f=(v=n.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"assetUrl",g,{hash:{}}):f)+'" /><span class="title">',g="mm_dntme_dashboard_accounts",N+=T(g=typeof(f=(v=n.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"intl",g,{hash:{}}):f)+'</span>\n  <div style="position:absolute;top:18px;left:110px;" id="accountSwitch" data-group="acctGroup" class="word switch ',g=null===(g=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||g===undefined||!1===g?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"passwordOff"),f=null===(f=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||f===undefined||!1===f?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"loginOff"),b=null===(b=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||b===undefined||!1===b?b:ABINE_DNTME.Duckbone.Handlebars.getAttr(b,"accountOff"),_=(v=n.if_all)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),(E=y.program(1,s,i)).hash={},(E.fn=E).inverse=y.program(3,l,i),((g=v&&typeof _===A?_.call(t,b,f,g,E):w.call(t,_,b,f,g,E))||0===g)&&(N+=g),N+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="cell" data-dashboard="wallet">\n  <img style="margin-top:-10px" src="',g="pages/images/wallet.png",N+=T(g=typeof(f=(v=n.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"assetUrl",g,{hash:{}}):f)+'" /><span class="title">',g="mm_dntme_dashboard_wallet",N+=T(g=typeof(f=(v=n.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"intl",g,{hash:{}}):f)+'</span>\n  <div style="position:absolute;top:18px;right:5px;" id="walletSwitch" data-group="walletGroup" class="word switch ',g=null===(g=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||g===undefined||!1===g?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"addressOff"),f=null===(f=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||f===undefined||!1===f?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"cardOff"),b=null===(b=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||b===undefined||!1===b?b:ABINE_DNTME.Duckbone.Handlebars.getAttr(b,"realCardOff"),_=(v=n.if_all)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),(E=y.program(5,o,i)).hash={},(E.fn=E).inverse=y.program(7,r,i),((g=v&&typeof _===A?_.call(t,b,f,g,E):w.call(t,_,b,f,g,E))||0===g)&&(N+=g),N+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="maskingCell cell l ',g=(v=n.hasMobileAppAndDropboxEnabled)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),f=n["if"],(E=y.program(9,c,i)).hash={},(E.fn=E).inverse=y.noop,((g=f.call(t,g,E))||0===g)&&(N+=g),N+='" data-dashboard="masking">\n  <img style="margin-top:-10px" src="',g="pages/images/masking.png",N+=T(g=typeof(f=(v=n.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"assetUrl",g,{hash:{}}):f)+'" /><span class="title">',g="mm_dntme_dashboard_masking",N+=T(g=typeof(f=(v=n.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"intl",g,{hash:{}}):f)+'</span>\n  <div style="position:absolute;top:70px;left:110px;" id="maskingSwitch" data-group="maskingGroup" class="word switch ',g=null===(g=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||g===undefined||!1===g?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"cardOff"),f=null===(f=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||f===undefined||!1===f?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"phoneOff"),b=null===(b=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||b===undefined||!1===b?b:ABINE_DNTME.Duckbone.Handlebars.getAttr(b,"emailOff"),_=(v=n.if_all)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),(E=y.program(11,d,i)).hash={},(E.fn=E).inverse=y.program(13,h,i),((g=v&&typeof _===A?_.call(t,b,f,g,E):w.call(t,_,b,f,g,E))||0===g)&&(N+=g),N+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="trackingCell cell ',g=(v=n.hasMobileAppAndDropboxEnabled)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),f=n["if"],(E=y.program(15,p,i)).hash={},(E.fn=E).inverse=y.noop,((g=f.call(t,g,E))||0===g)&&(N+=g),N+='" data-dashboard="tracking">\n  <img style="margin-top:-10px" src="',g="pages/images/tracking.png",N+=T(g=typeof(f=(v=n.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"assetUrl",g,{hash:{}}):f)+'" />\n  <span class="title">',g="mm_dntme_dashboard_tracking",N+=T(g=typeof(f=(v=n.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===A?f.call(t,g,{hash:{}}):f===k?D.call(t,"intl",g,{hash:{}}):f)+'</span>\n  <div style="position:absolute;top:70px;right:5px;" id="trackingSwitch" data-group="trackingGroup" class="word switch ',g=null===(g=(v=n.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||g===undefined||!1===g?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"trackerOff"),f=(v=n.if_all)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),(E=y.program(17,m,i)).hash={},(E.fn=E).inverse=y.program(19,u,i),((g=v&&typeof f===A?f.call(t,g,E):w.call(t,f,g,E))||0===g)&&(N+=g),N+='">\n    <div class="knob"></div>\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking=e.template(function(e,t,i,n,a){function s(){return"off"}function l(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_card",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===T?n.call(e,t,{hash:{}}):n===M?w.call(e,"intl",t,{hash:{}}):n,a+=I(t)+'"'}function o(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_card",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===T?n.call(e,t,{hash:{}}):n===M?w.call(e,"intl",t,{hash:{}}):n,a+=I(t)+'"'}function r(){return"off"}function c(){return"on"}function d(){return"off"}function h(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_email",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===T?n.call(e,t,{hash:{}}):n===M?w.call(e,"intl",t,{hash:{}}):n,a+=I(t)+'"'}function p(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_email",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===T?n.call(e,t,{hash:{}}):n===M?w.call(e,"intl",t,{hash:{}}):n,a+=I(t)+'"'}function m(){return"off"}function u(){return"on"}function g(){return"off"}function f(){return"off"}function b(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_phone",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===T?n.call(e,t,{hash:{}}):n===M?w.call(e,"intl",t,{hash:{}}):n,a+=I(t)+'"'}function _(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_phone",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===T?n.call(e,t,{hash:{}}):n===M?w.call(e,"intl",t,{hash:{}}):n,a+=I(t)+'"'}function v(){return"off"}function E(){return"on"}i=i||e.helpers;var N,y,A,D="",k=this,T="function",w=i.helperMissing,M=void 0,I=this.escapeExpression;return D+='<div id="card" class="clearfix setting-row ',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"cardOff"),y=i["if"],(A=k.program(1,s,a)).hash={},(A.fn=A).inverse=k.noop,((N=y.call(t,N,A))||0===N)&&(D+=N),D+='" data-type="blacklist" data-name="card">\n  <div class="message" style="width:160px;" title=',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"cardOff"),y=i["if"],(A=k.program(3,l,a)).hash={},(A.fn=A).inverse=k.program(5,o,a),((N=y.call(t,N,A))||0===N)&&(D+=N),D+=">",N="mm_dntme_masking_card",N=typeof(y=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===T?y.call(t,N,{hash:{}}):y===M?w.call(t,"intl",N,{hash:{}}):y,D+=I(N)+'</div>\n  <div class="word switch ',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"cardOff"),y=i["if"],(A=k.program(7,r,a)).hash={},(A.fn=A).inverse=k.program(9,c,a),((N=y.call(t,N,A))||0===N)&&(D+=N),D+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",N=typeof(y=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===T?y.call(t,N,{hash:{}}):y===M?w.call(t,"intl",N,{hash:{}}):y,D+=I(N)+'</div>\n</div>\n\n<div id="email" class="clearfix setting-row ',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"emailOff"),y=i["if"],(A=k.program(11,d,a)).hash={},(A.fn=A).inverse=k.noop,((N=y.call(t,N,A))||0===N)&&(D+=N),D+='" data-type="blacklist" data-name="email">\n  <div class="message" style="width:160px;" title=',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"emailOff"),y=i["if"],(A=k.program(13,h,a)).hash={},(A.fn=A).inverse=k.program(15,p,a),((N=y.call(t,N,A))||0===N)&&(D+=N),D+=">",N="mm_dntme_masking_email",N=typeof(y=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===T?y.call(t,N,{hash:{}}):y===M?w.call(t,"intl",N,{hash:{}}):y,D+=I(N)+'</div>\n  <div class="word switch ',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"emailOff"),y=i["if"],(A=k.program(17,m,a)).hash={},(A.fn=A).inverse=k.program(19,u,a),((N=y.call(t,N,A))||0===N)&&(D+=N),D+=" ",N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"globalEmail"),y=i.unless,(A=k.program(21,g,a)).hash={},(A.fn=A).inverse=k.noop,((N=y.call(t,N,A))||0===N)&&(D+=N),D+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",N=typeof(y=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===T?y.call(t,N,{hash:{}}):y===M?w.call(t,"intl",N,{hash:{}}):y,D+=I(N)+'</div>\n</div>\n\n<div id="phone" class="clearfix setting-row ',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"phoneOff"),y=i["if"],(A=k.program(23,f,a)).hash={},(A.fn=A).inverse=k.noop,((N=y.call(t,N,A))||0===N)&&(D+=N),D+='" data-type="blacklist" data-name="phone">\n  <div class="message" style="width:160px;" title=',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"phoneOff"),y=i["if"],(A=k.program(25,b,a)).hash={},(A.fn=A).inverse=k.program(27,_,a),((N=y.call(t,N,A))||0===N)&&(D+=N),D+=">",N="mm_dntme_masking_phone",N=typeof(y=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===T?y.call(t,N,{hash:{}}):y===M?w.call(t,"intl",N,{hash:{}}):y,D+=I(N)+'</div>\n  <div class="word switch ',N=null===(N=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||N===undefined||!1===N?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"phoneOff"),y=i["if"],(A=k.program(29,v,a)).hash={},(A.fn=A).inverse=k.program(31,E,a),((N=y.call(t,N,A))||0===N)&&(D+=N),D+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",N=typeof(y=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===T?y.call(t,N,{hash:{}}):y===M?w.call(t,"intl",N,{hash:{}}):y,D+=I(N)+"</div>\n</div>\n\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking}),ABINE_DNTME.define("abine/views/maskingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(t,e,n,a,i,s,l,o,r,c,d){return c.extend({templateName:"dntme_dashboard_masking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.maskingDashboard":"maskingDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var e=this.$("#"+this.options.highlight);e&&e[0]&&(e[0].scrollIntoView(),e.addClass("highlight"))}this.options.timeout&&d.setTimeout(t.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},maskingDashboard:function(e){e.preventDefault(),l.webapp.openMasking(),this.trigger("close")},createChildren:function(){return this.children={},this.children}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+=" <!-- hacky way to prevent render until model is fetched... duckbone lifecycle... -->\n\n<!-- HEADER BARS -->\n",n=(_=s.inline)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),a=s.unless,(v=E.program(2,l,t)).hash={},(v.fn=v).inverse=E.noop,((n=a.call(e,n,v))||0===n)&&(i+=n),i+='\n\n<!-- SITE SPECIFIC SETTINGS PAGE -->\n<div id="site-settings-page" class="site-specific">\n  ',n="trackingSettings",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+"\n  ",n=(_=s.showSiteTrackers)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSiteTrackers"),a=s["if"],(v=E.program(11,h,t)).hash={},(v.fn=v).inverse=E.noop,((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n  ",n="accountSettings",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+"\n  ",n="walletSettings",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+"\n  ",n="maskingSettings",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+"\n",n=(_=s.inline)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),a=s.unless,(v=E.program(13,p,t)).hash={},(v.fn=v).inverse=E.noop,((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n</div>\n\n",n=(_=s.inline)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),a=s.unless,(v=E.program(16,u,t)).hash={},(v.fn=v).inverse=E.noop,((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n\n"}function l(e,t){var n,a,i="";return i+='\n<div class="settings-header clearfix site-specific">\n    <div id="go-back-to-dashboard-btn" style="position:absolute;top:1px;left:10px;" class="go-back"><img src="',n="/pages/images/back.png",n=typeof(a=(_=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"assetUrl",n,{hash:{}}):a,i+=D(n)+'" width="18px;"/> ',n="mm_dntme_back",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</div>\n    <div class="title" title="',typeof(n=(_=s.host)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===N?n=n.call(e,{hash:{}}):n===A&&(n=y.call(e,"host",{hash:{}})),i+=D(n)+'" style="position:absolute;height:80px;top:5px;right:30px;width:180px;">\n      <span style="display:block;font-size:16px;font-weight:lighter;">',n="mm_dntme_settings_for",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</span>\n      <span class="boldFont" style="font-size:20px;">',typeof(n=(_=s.host)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===N?n=n.call(e,{hash:{}}):n===A&&(n=y.call(e,"host",{hash:{}})
),i+=D(n)+'</span>\n    </div>\n</div>\n<div class="settings-header clearfix global-settings" style="display: none;">\n  <div id="go-back-to-site-settings-btn" class="go-back"><img src="',n="/pages/images/back.png",n=typeof(a=(_=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"assetUrl",n,{hash:{}}):a,i+=D(n)+'" width="18px;"/> ',n="mm_dntme_back",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</div>\n  <div class="version">\n        ',n=(_=s.new_version)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),a=s["if"],(v=E.program(3,o,t)).hash={},(v.fn=v).inverse=E.program(5,r,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+='\n  </div>\n</div>\n<div class="ignore-settings settings-header clearfix" style="display:none">\n  <div id="ig-go-back-to-site-settings-btn" class="go-back"><img src="',n="/pages/images/back.png",n=typeof(a=(_=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"assetUrl",n,{hash:{}}):a,i+=D(n)+'" width="18px;"/> ',n="mm_dntme_back",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</div>\n  <div class="version">\n        ',n=(_=s.new_version)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),a=s["if"],(v=E.program(7,c,t)).hash={},(v.fn=v).inverse=E.program(9,d,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n  </div>\n</div>\n\n",n="settingsChanged",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+"\n"}function o(e){var t,n,a,i="";return i+='\n          <a href=# id="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",t=typeof(n=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"intl",t,{hash:{}}):n,i+=D(t)+" ",t="version",t=typeof(n=(_=s.configVar)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"configVar",t,{hash:{}}):n,i+=D(t)+'">',t=(_=s.new_version)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",t=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,t,{hash:{}}):a===A?y.call(e,"intl",n,t,{hash:{}}):a,i+=D(t)+"</a>\n        "}function r(e){var t,n,a="";return a+="\n          ",t="mm_dntme_version",t=typeof(n=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"intl",t,{hash:{}}):n,a+=D(t)+" ",t="version",t=typeof(n=(_=s.configVar)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"configVar",t,{hash:{}}):n,a+=D(t)+"\n        "}function c(e){var t,n,a,i="";return i+='\n          <a href=# class="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",t=typeof(n=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"intl",t,{hash:{}}):n,i+=D(t)+" ",t="version",t=typeof(n=(_=s.configVar)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"configVar",t,{hash:{}}):n,i+=D(t)+'">',t=(_=s.new_version)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",t=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,t,{hash:{}}):a===A?y.call(e,"intl",n,t,{hash:{}}):a,i+=D(t)+"</a>\n        "}function d(e){var t,n,a="";return a+="\n          ",t="mm_dntme_version",t=typeof(n=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"intl",t,{hash:{}}):n,a+=D(t)+" ",t="version",t=typeof(n=(_=s.configVar)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"configVar",t,{hash:{}}):n,a+=D(t)+"\n        "}function h(e){var t,n;return t="siteTrackers",t=typeof(n=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"child",t,{hash:{}}):n,D(t)}function p(e,t){var n,a,i="";return i+='\n  <div class="clearfix" style="border-top:1px solid #cccccc">\n    <div style="float:left;margin:0px 0px 0px 10px;">\n      ',n="mm_dntme_version",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+" ",n="version",n=typeof(a=(_=s.configVar)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"configVar",n,{hash:{}}):a,i+=D(n)+"\n      ",n="Chrome",a=(_=s.unlessBrowser)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlessBrowser"),(v=E.program(14,m,t)).hash={},(v.fn=v).inverse=E.noop,((n=_&&typeof a===N?a.call(e,n,v):k.call(e,a,n,v))||0===n)&&(i+=n),i+='\n    </div>\n    <div style="float:right;margin-right:10px;" class="otherSettings">\n        <div id="global-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_for_all_sites",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</a></div>\n        <div class="ignore-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_ignore",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+"</a></div>\n    </div>\n  </div>\n"}function m(e){var t,n,a="";return a+='\n        <br/>\n        <a href="#" class="checkForNewVersion">\n          <span>',t="mm_dntme_check_for_version",t=typeof(n=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"intl",t,{hash:{}}):n,a+=D(t)+'</span>\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",t=typeof(n=(_=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"assetUrl",t,{hash:{}}):n,a+=D(t)+'"/>\n        </a>\n        <a href="#" style="display: none;" class="newVersionAvailable"></a>\n        <span style="display: none;" class="latestVersion">',t="mm_dntme_latest_version",t=typeof(n=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"intl",t,{hash:{}}):n,a+=D(t)+"</span>\n      "}function u(e,t){var n,a,i="";return i+='\n\n<!-- GLOBAL SETTINGS PAGE -->\n<div id="global-settings-page" class="settings global-settings" style="display: none;">\n\n  <!-- GLOBAL PANEL SETTINGS SECTION -->\n  <div id="global-panel-settings" class="global-panel-settings">\n    <div style="margin: 0px 0px 10px 30px;">\n      <div class="btn " disabled>',n="mm_dntme_panel_settings",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</div>\n      <div id="global-preferences-btn" class="btn btn-primary">',n="mm_dntme_more_settings_capitalized",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+"</div>\n    </div>\n    ",n="features",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+'\n    <div class="global-language dntme_global_feature">\n      <div id="browsing" class="clearfix setting-row feature browsing">\n        <div class="message" title="" style="width:160px;" data-original-title="">Your language is: </div>\n        <select id="language" style="width:100px!important;">\n            <option value="en">English</option>\n            <option value="es">Spanish</option>\n            <option value="de">German</option>\n            <option value="pl">Polish</option>\n            <option value="pt">Portuguese</option>\n            <option value="zh">Chinese</option>\n            <option value="nl">Dutch</option>\n            <option value="it">Italian</option>\n            <option value="fr">French</option>\n        </select>\n      </div>\n    </div>\n    <div id="site-specific-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_for_current_site",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</a></div>\n    <div class="ignore-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_ignore",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</a></div>\n  </div>\n\n  <!-- GLOBAL PREFERENCES SECTION -->\n  <div id="global-preferences" class="global-preferences">\n    <div style="margin: 0px 0px 10px 30px;">\n        <div id="global-panel-settings-btn" class="btn btn-primary">',n="mm_dntme_panel_settings",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</div>\n        <div class="btn" disabled>',n="mm_dntme_more_settings_capitalized",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'</div>\n    </div>\n\n    <div style="margin: 0px 0px 15px 10px;">\n      ',n="preferences",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+"\n    </div>\n\n    ",n=(_=s.maskmeInstalled)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),a=s.unless,(v=E.program(17,g,t)).hash={},(v.fn=v).inverse=E.noop,((n=a.call(e,n,v))||0===n)&&(i+=n),i+='\n  </div>\n\n</div>\n\n<div class="ignore-settings" style="display: none;">\n',n="ignoreSettings",n=typeof(a=(_=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"child",n,{hash:{}}):a,i+=D(n)+"\n<br/>\n</div>\n"}function g(e){var t,n,a="";return a+='\n    <div>\n      <a href=# class="more-options">\n        ',t="mm_dntme_more_options_in_dashboard",t=typeof(n=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?n.call(e,t,{hash:{}}):n===A?y.call(e,"intl",t,{hash:{}}):n,a+=D(t)+"\n      </a>\n    </div>\n    "}s=s||e.helpers;var f,b,_,v,E=this,N="function",y=s.helperMissing,A=void 0,D=this.escapeExpression,k=s.blockHelperMissing;return f=(_=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),b=s["if"],(v=E.program(1,i,a)).hash={},(v.fn=v).inverse=E.noop,(f=b.call(t,f,v))||0===f?f:""}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings}),ABINE_DNTME.define("abine/views/settingsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/maskingDashboard","abine/views/walletDashboard","abine/views/ignoreSettings","abine/views/accountsDashboard","abine/views/settingsChanged","abine/views/trackerBlocking","abine/views/trackers","abine/views/features","abine/views/preferences","abine/views/trustedSites","abine/views/dntmePageBase","abine/timer","abine/intl"],function(a,n,e,i,t,s,l,o,r,c,d,h,p,m,u,g,f,b,_,v){e.View.extend({templateName:"dntme_empty"});return e.View.extend({className:"dntme_settings settings",templateName:"dntme_dashboard_settings",events:{"click .more-options":"moreOptions","click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click #newVersion":"downloadNewVersion","click .checkForNewVersion":"checkForNewVersion","click .latestVersion":"checkForNewVersion","click .newVersionAvailable":"downloadNewVersion","click #global-settings-btn":"showGlobalPanelSettings","click #global-panel-settings-btn":"showGlobalPanelSettings","click .ignore-settings-btn":"showIgnoreSettings","click #global-preferences-btn":"showGlobalPreferences","click #go-back-to-site-settings-btn":"showSiteSpecificSettings","click #ig-go-back-to-site-settings-btn":"showSiteSpecificSettings","click #go-back-to-dashboard-btn":"showDashboard","click #site-specific-settings-btn":"showSiteSpecificSettings","change #language":"changeLanguage"},changeLanguage:function(){var e=this.$("#language");new i.PreferenceCollection({}).setPref("dnt_language",e.val()),v.setupLocale(e.val(),function(){})},reload:function(){var e=this,t=0,n=[],a=function(){if(2==++t){if(e.options.switchTo)switch(e.options.settingsView="site-settings",e.options.highlight){case"acctGroup":n=["#account","#password"];break;case"maskingGroup":n=["#email","#phone","#card"];break;case"walletGroup":n=["#suggestRealCard","#suggestAddresses","#card","#suggestIdentities","#saveCard"];break;case"trackingGroup":n=["#trackers"];break;default:n=["#"+e.options.highlight]}e.renderView(e.options.settingsView||"site-settings",n,e.options.switchTo),delete e.options.settingsView,delete e.options.switchTo}};this.options.tabData.fetch({success:a}),this.options.globalData.fetch({success:a})},downloadNewVersion:function(e){e.preventDefault(),l.securityManager.openPage("https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest"),this.trigger("close")},checkForNewVersion:function(){this.$(".latestVersion, .newVersionAvailable").hide(),this.$(".checkForNewVersion, .checkForNewVersion .loading").show(),this.$(".checkForNewVersion span").text(v.getText("mm_dntme_checking_for_new_version"));var t=new i.ExtensionVersion;t.fetch({success:a.bind(function(){if(this.$(".checkForNewVersion .loading, .otherSettings, .checkForNewVersion").hide(),t.get("newVersionAvailable")){var e=this.$(".newVersionAvailable");e.text(v.getText("mm_dntme_new_version_available_click_here",[t.get("version")])).show(),e.attr("href","https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest")}else this.$(".latestVersion, .otherSettings").show()},this)})},showGlobalPanelSettings:function(){var e=v.getLang();this.$("#language").val(e),this.$(".site-specific, .global-preferences, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-panel-settings").show(),this.trigger("resize")},showGlobalPreferences:function(){this.$(".site-specific, .global-panel-settings, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-preferences").show(),this.trigger("resize")},showIgnoreSettings:function(){this.$(".site-specific, .global-settings, .global-panel-settings, .site-specific, .dntme_page_settings_changed").hide(),this.$(".ignore-settings").show(),this.trigger("resize")},showDashboard:function(){this.trigger("showPageView"),this.$(".settings-link").show()},showSiteSpecificSettings:function(e,t,n){this.$(".global-preferences, .global-settings, .global-panel-settings").hide(),this.$(".ignore-settings").hide(),this.$(".site-specific, .dntme_page_settings_changed").show(),t&&a(t).each(a.bind(function(e){var t;((t=this.$("#site-settings-page "+e+" div.switch."+n)[0])&&t.click(),"#account"==e)&&((t=this.$("#site-settings-page "+e+" div.switch."+n)[1])&&t.click())},this)),this.trigger("resize")},moreOptions:function(e){e.preventDefault(),l.webapp.openSettings()},viewAllTrackers:function(e){e.preventDefault(),this.showTrackers=!0,this.reload("global-panel-settings")},hideAllTrackers:function(e){e.preventDefault(),this.showTrackers=!1,this.reload("global-panel-settings")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=this.options.tabData,this.model.inline=this.options.inline,this.model.on("reloaded",a.bind(function(){if(n(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.options.highlight){var e="#"+this.options.highlight;e.match(/card/)&&(e="#card, #suggestRealCard"),e.match(/identity/)&&(e="#suggestIdentities"),e.match(/address/)&&(e="#address, #suggestAddresses"),e.match(/password/)&&(e="#password, #suggestStrongPassword"),e.match(/account/)&&(e="#account, #rememberAccounts, #helpMeLogin, #submitAccount"),e.match(/acctGroup/)&&(e="#account, #password, #rememberAccounts, #helpMeLogin, #submitAccount, #suggestStrongPassword"),e.match(/walletGroup/)&&(e="#suggestRealCard, #suggestAddresses, #card, #suggestIdentities, #saveCard, #rememberCards"),e.match(/maskingGroup/)&&(e="#email, #phone, #card"),e.match(/trackingGroup/)&&(e="#browsing, #trackers");var t=this.$(e);t.length&&t.addClass("highlight")}this.options.timeout&&_.setTimeout(a.bind(function(){this.trigger("close")},this),this.options.timeout)},this)),this.model.on("open-global-setting",a.bind(function(e){this.options.highlight=e.highlight,this.renderView("global-panel-settings")},this)),this.model.on("settings-changed",a.bind(function(e){n(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.children.settingsChanged.update(e.feature)},this)),this.reload()},renderView:function(e,t,n){switch(this.render(),this.model.trigger("reloaded"),e){case"site-settings":this.showSiteSpecificSettings(null,t,n);break;case"global-panel-settings":this.showGlobalPanelSettings();break;case"global-preferences":this.showGlobalPreferences()}},createChildren:function(){var e=a.extend({},this.options,{model:this.options.tabData});return delete e.el,this.children={settingsChanged:new h(e),trackingSettings:new p(e),maskingSettings:new o(e),accountSettings:new d(e),ignoreSettings:new c(e),walletSettings:new r(e),features:new u({collection:this.options.globalData.globalFeatures,doc:this.el.ownerDocument,highlight:this.options.highlight}),preferences:new g({collection:this.options.globalData.preferences,doc:this.el.ownerDocument}),trustedSites:new f({collection:this.options.globalData.blacklist,doc:this.el.ownerDocument})},this.children.settingsChanged.transferEvents(["resize"],this),this.children.ignoreSettings.transferEvents(["resize"],this),this.children}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking=e.template(function(e,t,s,n,a){function i(){return"off"}function l(e){var t,n,a,i="";return i+='"',t="this site",n="mm_dntme_help_what_will_happen_on_browsing",t=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===y?a.call(e,n,t,{hash:{}}):a===D?A.call(e,"intl",n,t,{hash:{}}):a,i+=k(t)+'"'}function o(e){var t,n,a,i="";return i+='"',t="this site",n="mm_dntme_help_what_will_happen_off_browsing",t=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===y?a.call(e,n,t,{hash:{}}):a===D?A.call(e,"intl",n,t,{hash:{}}):a,i+=k(t)+'"'}function r(){return"off"}function c(){return"on"}function d(e,t){var n,a,i="";return i+='\n<div id="gpc" class="clearfix setting-row ',n=(_=s.siteGPC)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"siteGPC"),a=s.unless,(v=N.program(12,h,t)).hash={},(v.fn=v).inverse=N.noop,((n=a.call(e,n,v))||0===n)&&(i+=n),i+='" data-type="blacklist" data-name="gpc">\n  <div class="message" style="width:160px;" title=',n=(_=s.siteGPC)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"siteGPC"),a=s.unless,(v=N.program(14,p,t)).hash={},(v.fn=v).inverse=N.program(16,m,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+='>\n  Global Privacy Control is </div>\n  <div class="word switch ',n=(_=s.siteGPC)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"siteGPC"),a=s["if"],(v=N.program(18,u,t)).hash={},(v.fn=v).inverse=N.program(20,g,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',n="mm_dntme_for_this_site",n=typeof(a=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===y?a.call(e,n,{hash:{}}):a===D?A.call(e,"intl",n,{hash:{}}):a,i+=k(n)+"</div>\n</div>\n"}function h(){return"off"}function p(){return'"Site can share or sell your info"'}function m(){return'"Requesting site to not share or sell your data"'}function u(){return"on"}function g(){return"off"}s=s||e.helpers;var f,b,_,v,E="",N=this,y="function",A=s.helperMissing,D=void 0,k=this.escapeExpression,T=s.blockHelperMissing;return E+='<div id="trackers" class="clearfix setting-row ',f=null===(f=(_=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||f===undefined||!1===f?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"trackerOff"),b=s["if"],(v=N.program(1,i,a)).hash={},(v.fn=v).inverse=N.noop,((f=b.call(t,f,v))||0===f)&&(E+=f),E+='" data-type="blacklist" data-name="tracker">\n  <div class="message" style="width:160px;" title=',f=null===(f=(_=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||f===undefined||!1===f?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"trackerOff"),b=s["if"],(v=N.program(3,l,a)).hash={},(v.fn=v).inverse=N.program(5,o,a),((f=b.call(t,f,v))||0===f)&&(E+=f),E+=">",f="mm_dntme_tracking_blocker",f=typeof(b=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===y?b.call(t,f,{hash:{}}):b===D?A.call(t,"intl",f,{hash:{}}):b,E+=k(f)+'</div>\n  <div class="word switch ',f=null===(f=(_=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||f===undefined||!1===f?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"trackerOff"),b=s["if"],(v=N.program(7,r,a)).hash={},(v.fn=v).inverse=N.program(9,c,a),((f=b.call(t,f,v))||0===f)&&(E+=f),E+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',f="mm_dntme_for_this_site",f=typeof(b=(_=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===y?b.call(t,f,{hash:{}}):b===D?A.call(t,"intl",f,{hash:{}}):b,E+=k(f)+"</div>\n</div>\n",f="Chrome",b=(_=s.ifBrowser)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"ifBrowser"),(v=N.program(11,d,a)).hash={},(v.fn=v).inverse=N.noop,((f=_&&typeof b===y?b.call(t,f,v):T.call(t,b,f,v))||0===f)&&(E+=f),E}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking}),ABINE_DNTME.define("abine/views/trackerBlocking",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(t,e,n,a,i,s,l,o,r,c,d){return c.extend({templateName:"dntme_dashboard_tracker_blocking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var e=this.$("#"+this.options.highlight);e&&e[0]&&(e[0].scrollIntoView(),e.addClass("highlight"))}this.options.timeout&&d.setTimeout(t.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking=e.template(function(e,t,n){var a,i,s="function",l=(n=n||e.helpers).helperMissing,o=void 0;return a="trackerSection",(0,this.escapeExpression)(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===s?i.call(t,a,{hash:{}}):i===o?l.call(t,"child",a,{hash:{}}):i)}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking}),ABINE_DNTME.define("abine/views/trackingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,n,a,i,s,l,o,r,c){return c.extend({templateName:"dntme_dashboard_tracking",events:{"click .setting-row":"toggleSwitch","click .suggested":"openSuggested","click a.who":"openWhoAreThey"},openSuggested:function(e){e.preventDefault(),l.securityManager.openLink({type:"recommended",host:this.model.get("host")})},openWhoAreThey:function(e){e.preventDefault(),l.webapp.openUnderstandingTracking(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.document},createChildren:function(){return this.children={trackerSection:new o({model:this.model,doc:this.el.ownerDocument,withGoBack:!0})},this.children.trackerSection.on("trackerToggled",e.bind(this.trackerToggled,this)),this.children.trackerSection.transferEvents(["resize","close","change-dashboard"],this),this.children}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet=e.template(function(e,t,i,n,a){function s(){return"off"}function l(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_suggestrealcard",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function o(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_suggestrealcard",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function r(){return"off"}function c(){return"on"}function d(){return"off"}function h(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_suggestidentities",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function p(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_suggestidentities",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function m(){return"off"}function u(){return"on"}function g(){return"off"}function f(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_suggestaddresses",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function b(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_suggestaddresses",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function _(){return"off"}function v(){return"on"}function E(){return"off"}function N(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_on_save_card",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function y(e){var t,n,a="";return a+='"',t="mm_dntme_help_what_will_happen_off_save_card",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===B?n.call(e,t,{hash:{}}):n===C?x.call(e,"intl",t,{hash:{}}):n,a+=H(t)+'"'}function A(){return"off"}function D(){return"on"}i=i||e.helpers;var k,T,w,M="",I=this,B="function",x=i.helperMissing,C=void 0,H=this.escapeExpression;return M+='<div id="suggestRealCard" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"realCardOff"),T=i["if"],(w=I.program(1,s,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="real_card">\n  <div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"realCardOff"),T=i["if"],(w=I.program(3,l,a)).hash={},(w.fn=w).inverse=I.program(5,o,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_wallet_real_card",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n  <div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"realCardOff"),T=i["if"],(w=I.program(7,r,a)).hash={},(w.fn=w).inverse=I.program(9,c,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n</div>\n\n<div id="suggestIdentities" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"identityOff"),T=i["if"],(w=I.program(11,d,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="identity">\n  <div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"identityOff"),T=i["if"],(w=I.program(13,h,a)).hash={},(w.fn=w).inverse=I.program(15,p,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_wallet_identity",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n  <div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"identityOff"),T=i["if"],(w=I.program(17,m,a)).hash={},(w.fn=w).inverse=I.program(19,u,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n</div>\n\n<div id="suggestAddresses" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"addressOff"),T=i["if"],(w=I.program(21,g,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="address">\n  <div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"addressOff"),T=i["if"],(w=I.program(23,f,a)).hash={},(w.fn=w).inverse=I.program(25,b,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_wallet_address",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n  <div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"addressOff"),T=i["if"],(w=I.program(27,_,a)).hash={},(w.fn=w).inverse=I.program(29,v,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n</div>\n\n<div id="saveCard" class="clearfix setting-row ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"saveCardOff"),T=i["if"],(w=I.program(31,E,a)).hash={},(w.fn=w).inverse=I.noop,((k=T.call(t,k,w))||0===k)&&(M+=k),M+='" data-type="blacklist" data-name="save_card">\n<div class="message" style="width:160px;" title=',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"saveCardOff"),T=i["if"],(w=I.program(33,N,a)).hash={},(w.fn=w).inverse=I.program(35,y,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+=">",k="mm_dntme_wallet_save_card",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+'</div>\n<div class="word switch ',k=null===(k=i.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||k===undefined||!1===k?k:ABINE_DNTME.Duckbone.Handlebars.getAttr(k,"saveCardOff"),T=i["if"],(w=I.program(37,A,a)).hash={},(w.fn=w).inverse=I.program(39,D,a),((k=T.call(t,k,w))||0===k)&&(M+=k),M+='">\n  <div class="knob"></div>\n</div>\n<div class="for">',k="mm_dntme_for_this_site",k=typeof(T=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===B?T.call(t,k,{hash:{}}):T===C?x.call(t,"intl",k,{hash:{}}):T,M+=H(k)+"</div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet}),ABINE_DNTME.define(
"abine/views/walletDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(t,e,n,a,i,s,l,o,r,c,d){return c.extend({templateName:"dntme_dashboard_wallet",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.walletDashboard":"walletDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var e=this.$("#"+this.options.highlight);e&&e[0]&&(e[0].scrollIntoView(),e.addClass("highlight"))}this.options.timeout&&d.setTimeout(t.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},walletDashboard:function(e){e.preventDefault(),l.webapp.openWallet(),this.trigger("close")},createChildren:function(){return this.children={},this.children}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_empty=e.template(function(e,t,n){n=n||e.helpers;return""}),ABINE_DNTME.CompiledTemplates.dntme_empty}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_feature=e.template(function(e,t,n,a,i){function s(){return"off"}function l(){return"on"}function o(){return"off"}var r,c,d,h="",p=this,m="function",u=(n=n||e.helpers).helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="clearfix setting-row feature ',r=n.value||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=n.unless,(d=p.program(1,s,i)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+=" ",typeof(r=n.name||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"))===m?r=r.call(t,{hash:{}}):r===g&&(r=u.call(t,"name",{hash:{}})),h+=f(r)+'" id="',typeof(r=n.name||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"))===m?r=r.call(t,{hash:{}}):r===g&&(r=u.call(t,"name",{hash:{}})),h+=f(r)+'">\n  <div class="message" style="width:160px;" title="',typeof(r=n.getTooltip||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"))===m?r=r.call(t,{hash:{}}):r===g&&(r=u.call(t,"getTooltip",{hash:{}})),h+=f(r)+'">',typeof(r=n.getLabel||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"))===m?r=r.call(t,{hash:{}}):r===g&&(r=u.call(t,"getLabel",{hash:{}})),h+=f(r)+'</div>\n  <div class="word switch ',r=n.value||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=n["if"],(d=p.program(3,l,i)).hash={},(d.fn=d).inverse=p.program(5,o,i),((r=c.call(t,r,d))||0===r)&&(h+=r),h+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',r="mm_dntme_for_all_sites",h+=f(r=typeof(c=n.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_feature}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_features=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n  <legend>",n="mm_dntme_trusted_sites",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?a.call(e,n,{hash:{}}):a===g?u.call(e,"intl",n,{hash:{}}):a,i+=f(n)+'<span class="info-message" title="',n="mm_dntme_help_trusted_sites",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?a.call(e,n,{hash:{}}):a===g?u.call(e,"intl",n,{hash:{}}):a,i+=f(n)+'"> (',n="mm_dntme_info",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?a.call(e,n,{hash:{}}):a===g?u.call(e,"intl",n,{hash:{}}):a,i+=f(n)+')</span></legend>\n  <div class="trusted-sites ',n=s.maskmeInstalled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),a=s["if"],(d=p.program(2,l,t)).hash={},(d.fn=d).inverse=p.noop,((n=a.call(e,n,d))||0===n)&&(i+=n),i+='">\n    ',n="blacklist",n=typeof(a=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===m?a.call(e,n,{hash:{}}):a===g?u.call(e,"child",n,{hash:{}}):a,i+=f(n)+"\n  </div>\n"}function l(){return"maskme"}function o(e){var t,n,a="";return a+='\n<div>\n  <a href=# class="more-options">\n    ',t="mm_dntme_more_options_in_dashboard",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"intl",t,{hash:{}}):n,a+=f(t)+"\n  </a>\n</div>\n"}s=s||e.helpers;var r,c,d,h="",p=this,m="function",u=s.helperMissing,g=void 0,f=this.escapeExpression;return h+="<legend>",r="mm_dntme_global_defaults",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'<span class="info-message" title="',r="mm_dntme_help_global_defaults",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'"> (',r="mm_dntme_info",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+")</span></legend>\n",r="features",r=typeof(c=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"child",r,{hash:{}}):c,h+=f(r)+"\n\n",r=null===(r=s.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||r===undefined||!1===r?r:ABINE_DNTME.Duckbone.Handlebars.getAttr(r,"length"),c=s["if"],(d=p.program(1,i,a)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+="\n\n",r=s.maskmeInstalled||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),c=s.unless,(d=p.program(4,o,a)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h}),ABINE_DNTME.CompiledTemplates.dntme_global_features}),ABINE_DNTME.define("abine/views/features",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(a,i,e){var t=e.View.extend({tagName:"div",className:"dntme_global_feature",templateName:"dntme_global_feature",events:{"click .feature":"toggleFeature"},renderFeature:function(){this.render(),"search"==this.model.get("name")&&this.model.collection.messenger.send("private:search:toggle",{search:this.model.get("value")}),i(".info-message",this.el.ownerDocument).tooltip({delay:0})},toggleFeature:function(e){if("A"!=e.target.nodeName){var t=i(e.target);t.hasClass("feature")||(t=i(e.target).parents(".feature"));var n=i(".switch",t);i(n).data("changing")||(i(n).data("changing",!0),i(".knob",n).animate({marginLeft:this.model.get("value")?0:20},a.bind(function(){i(n).removeData("changing"),"search"==this.model.get("name")&&this.model.get("value")&&this.model.collection.messenger.send("update:panelActivity:closed",{panelId:7000002}),this.model.save({value:!this.model.get("value")},{success:a.bind(this.renderFeature,this)}),"browsing"==this.model.get("name")&&i("#reloadTrackers",this.el.ownerDocument).click()},this)))}}});return e.ListView.extend({tagName:"div",className:"",viewClass:t})}),ABINE_DNTME.define("abine/views/dntmeSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n,a,i,s,l){var o=n.View.extend({tagName:"div",className:"dntme_global_features",templateName:"dntme_global_features",createChildren:function(){return{}}});return i.extend({className:"dntme_settings",templateName:"dntme_global_main",events:{"click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click .more-options":"moreOptions","click #newVersion":"downloadNewVersion"},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new a.GlobalData({messenger:this.options.messenger}),this.on("render",e.bind(function(){if(this.trigger("resize"),this.model.get("premium")?t(".premium",this.el.ownerDocument).text(l.getText("mm_dntme_premium")):t(".premium",this.el.ownerDocument).text(l.getText("mm_dntme_upgrade_to_premium")),this.$("img.info-message").tooltip({delay:0,placement:"bottom"}),this.$(".info-message").tooltip({delay:0}),this.options.highlight){var e=this.$("#"+this.options.highlight);e[0].scrollIntoView(),e.addClass("highlight")}},this)),this.model.bind("sync:success",e.bind(this.render,this))},createChildren:function(){return this.showTrackers?{}:{details:new o({model:this.model,doc:this.el.ownerDocument})}}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_main=e.template(function(e,t,s,n,a){function i(e){var t,n,a,i="";return i+='\n        <a href=# id="newVersion" class="info-message"\n           title="',t="mm_dntme_your_version",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,i+=g(t)+" ",t="version",t=typeof(n=s.configVar||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"configVar",t,{hash:{}}):n,i+=g(t)+'">',t=s.new_version||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",t=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?a.call(e,n,t,{hash:{}}):a===u?m.call(e,"intl",n,t,{hash:{}}):a,i+=g(t)+"</a>\n      "}function l(e){var t,n,a="";return a+="\n        ",t="mm_dntme_version",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+" ",t="version",t=typeof(n=s.configVar||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"configVar",t,{hash:{}}):n,a+=g(t)+"\n      "}s=s||e.helpers;var o,r,c,d="",h=this,p="function",m=s.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="settings">\n  <div class="settings-header clearfix">\n    <div class="go-back"><img src="',o="/pages/images/back.png",o=typeof(r=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'" width="18px;"/> ',o="mm_dntme_back",o=typeof(r=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'</div>\n    <div class="version">\n      ',o=s.new_version||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"new_version"),r=s["if"],(c=h.program(1,i,a)).hash={},(c.fn=c).inverse=h.program(3,l,a),((o=r.call(t,o,c))||0===o)&&(d+=o),d+="\n    </div>\n  </div>\n\n  ",o="details",o=typeof(r=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"child",o,{hash:{}}):r,d+=g(o)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_preference=e.template(function(e,t,a,n,i){function s(){return"on"}function l(){return"off"}function o(e){var t,n;return t="/pages/images/selected.png",t=typeof(n=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,b(t)}function r(e){var t,n;return t="/pages/images/unselected.png",t=typeof(n=a.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===u?n.call(e,t,{hash:{}}):n===f?g.call(e,"assetUrl",t,{hash:{}}):n,b(t)}a=a||e.helpers;var c,d,h,p="",m=this,u="function",g=a.helperMissing,f=void 0,b=this.escapeExpression;return p+='<div class="pref ',c=a.value||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=a["if"],(h=m.program(1,s,i)).hash={},(h.fn=h).inverse=m.program(3,l,i),((c=d.call(t,c,h))||0===c)&&(p+=c),p+='" id="',typeof(c=a.getId||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getId"))===u?c=c.call(t,{hash:{}}):c===f&&(c=g.call(t,"getId",{hash:{}})),p+=b(c)+'">\n  <img width="16px" height="16px" src="',c=a.value||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=a["if"],(h=m.program(5,o,i)).hash={},(h.fn=h).inverse=m.program(7,r,i),((c=d.call(t,c,h))||0===c)&&(p+=c),p+='"/>\n  <span>',typeof(c=a.getLabel||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"))===u?c=c.call(t,{hash:{}}):c===f&&(c=g.call(t,"getLabel",{hash:{}})),p+=b(c)+'</span><span class="info-message" title="',typeof(c=a.getTooltip||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"))===u?c=c.call(t,{hash:{}}):c===f&&(c=g.call(t,"getTooltip",{hash:{}})),p+=b(c)+'"> (',c="mm_dntme_info",c=typeof(d=a.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===u?d.call(t,c,{hash:{}}):d===f?g.call(t,"intl",c,{hash:{}}):d,p+=b(c)+")</span>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_preference}),ABINE_DNTME.define("abine/views/preferences",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n){var a=n.View.extend({tagName:"div",templateName:"dntme_global_preference",className:"dntme_preference",events:{"click .pref":"togglePreference"},togglePreference:function(){this.model.save({value:!this.model.get("value")}),this.render(),t(".info-message",this.el.ownerDocument).tooltip({delay:0})}});return n.ListView.extend({tagName:"div",className:"preference-list",viewClass:a})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0;return s+='<div class="trackers"><span id="reloadTrackers"></span>\n',a="globalTrackers",s+=(0,this.escapeExpression)(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers}),ABINE_DNTME.define("abine/views/trackers",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n){var a=n.View.extend({tagName:"div",templateName:"dntme_page_tracker",events:{"click .tracker":"toggleTracker"},toggleTracker:function(){this.model.save({blocked:!this.model.get("blocked")}),this.render()}});return n.ListView.extend({tagName:"div",className:"",viewClass:a})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n        <img src="',n="/pages/images/key-grey.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"assetUrl",n,{hash:{}}):a,i+=D(n)+'" width="16px" height="16px"\n             class="icon-key ',n=s.account||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),a=s["if"],(_=E.program(2,l,t)).hash={},(_.fn=_).inverse=E.program(4,o,t),((n=a.call(e,n,_))||0===n)&&(i+=n),i+='" title="',n="mm_dntme_help_dont_save_accounts",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===N?a.call(e,n,{hash:{}}):a===A?y.call(e,"intl",n,{hash:{}}):a,i+=D(n)+'" />\n    '}function l(){return"on"}function o(){return"off"}function r(){return"on"}function c(){return"off"}function d(){return"on"}function h(){return"off"}function p(){return"on"}function m(){return"off"}function u(){return"on"}function g(){return"off"}s=s||e.helpers;var f,b,_,v="",E=this,N="function",y=s.helperMissing,A=void 0,D=this.escapeExpression;return v+='<div class="clearfix site">\n  <span class="domain">',typeof(f=s.domain||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"))===N?f=f.call(t,{hash:{}}):f===A&&(f=y.call(t,"domain",{hash:{}})),v+=D(f)+'</span>\n  <span class="icons">\n    ',f=s.globalAccounts||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"globalAccounts"),b=s["if"],(_=E.program(1,i,a)).hash={},(_.fn=_).inverse=E.noop,((f=b.call(t,f,_))||0===f)&&(v+=f),v+='\n      <img src="',f="/pages/images/maskcard-icon-grey.png",f=typeof(b=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"assetUrl",f,{hash:{}}):b,v+=D(f)+'" width="16px" height="11px"\n           class="icon-card ',f=s.card||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card"),b=s["if"],(_=E.program(6,r,a)).hash={},(_.fn=_).inverse=E.program(8,c,a),((f=b.call(t,f,_))||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_card",f=typeof(b=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"intl",f,{hash:{}}):b,v+=D(f)+'"/>\n      <img src="',f="/pages/images/maskphone-icon-grey.png",f=typeof(b=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"assetUrl",f,{hash:{}}):b,v+=D(f)+'" width="18px" height="18px"\n                 class="icon-phone ',f=s.phone||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"phone"),b=s["if"],(_=E.program(10,d,a)).hash={},(_.fn=_).inverse=E.program(12,h,a),((f=b.call(t,f,_))||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_phone",f=typeof(b=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"intl",f,{hash:{}}):b,v+=D(f)+'"/>\n      <img src="',f="/pages/images/maskmail-icon-grey.png",f=typeof(b=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"assetUrl",f,{hash:{}}):b,v+=D(f)+'" width="18px" height="13px"\n                 class="icon-email ',f=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),b=s["if"],(_=E.program(14,p,a)).hash={},(_.fn=_).inverse=E.program(16,m,a),((f=b.call(t,f,_))||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_email",f=typeof(b=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"intl",f,{hash:{}}):b,v+=D(f)+'"/>\n      <img src="',f="/pages/images/globe-grey.png",f=typeof(b=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"assetUrl",f,{hash:{}}):b,v+=D(f)+'" width="16px" height="16px"\n           class="icon-tracker ',f=s.tracker||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),b=s["if"],(_=E.program(18,u,a)).hash={},(_.fn=_).inverse=E.program(20,g,a),((f=b.call(t,f,_))||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_browsing",f=typeof(b=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===N?b.call(t,f,{hash:{}}):b===A?y.call(t,"intl",f,{hash:{}}):b,v+=D(f)+'" />\n  </span>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site}),ABINE_DNTME.define("abine/views/trustedSites",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,n){var a=n.View.extend({tagName:"div",className:"dntme_trusted_site",templateName:"dntme_global_trusted_site",events:{"click .icon-tracker":"toggleBrowsing","click .icon-email":"toggleEmail","click .icon-phone":"togglePhone","click .icon-card":"toggleCard","click .icon-key":"toggleAccount"},toggleBrowsing:function(){this.model.save({changed:"tracker",trusted:!0,tracker:!this.model.get("tracker")},{success:e.bind(this.render,this)})},toggleEmail:function(){this.model.save({changed:"email",trusted:!0,email:!this.model.get("email")},{success:e.bind(this.render,this)})},togglePhone:function(){this.model.save({changed:"phone",trusted:!0,phone:!this.model.get("phone")},{success:e.bind(this.render,this)})},toggleCard:function(){this.model.save({changed:"card",trusted:!0,card:!this.model.get("card")},{success:e.bind(this.render,this)})},toggleAccount:function(){this.model.save({changed:"account",trusted:!0,account:!this.model.get("account")},{success:e.bind(this.render,this)})}});return n.ListView.extend({tagName:"div",className:"",viewClass:a})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist=e.template(function(e,t,s,n,a){function i(){return"off"}function l(){return"off"}function o(){return"on"}function r(){return"data-blacklisted=1"}function c(e,t){var n,a,i="";return i+="\n    ",n=s.tracker||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),a=s["if"],(j=Q.program(10,d,t)).hash={},(j.fn=j).inverse=Q.program(12,h,t),((n=a.call(e,n,j))||0===n)&&(i+=n),i+="\n      </a>\n  "}function d(e){var t,n,a="";return a+='\n        <div class="skip suggested">',t="mm_dntme_suggested",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?n.call(e,t,{hash:{}}):n===ee?Z.call(e,"intl",t,{hash:{}}):n,a+=te(t)+"</div>\n    "}function h(e){var t,n,a="";return a+='\n        <div class="skip not suggested">',t="mm_dntme_not_suggested",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?n.call(e,t,{hash:{}}):n===ee?Z.call(e,"intl",t,{hash:{}}):n,a+=te(t)+"</div>\n    "}function p(e,t){var n,a,i="";return i+='\n<div class="clearfix feature ',n=s.globalEmail||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),a=s["if"],(j=Q.program(15,m,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+=" ",n=s.globalEmail||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),a=s.unless,(j=Q.program(18,g,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='">\n  <div class="message">',n="mm_dntme_dont_track_email_here",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="switch ',n=s.emailEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),a=s["if"],(j=Q.program(20,f,t)).hash={},(j.fn=j).inverse=Q.program(22,b,t),((n=a.call(e,n,j))||0===n)&&(i+=n),i+='" data-feature="email" ',n=s.emailEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),a=s.unless,(j=Q.program(24,_,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='>\n    <div class="knob"></div>\n  </div>\n  ',n=s.has_masked_emails||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_emails"),a=s["if"],(j=Q.program(26,v,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='\n</div>\n<div class="clearfix feature ',n=s.globalCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),a=s["if"],(j=Q.program(28,E,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+=" ",n=s.globalCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),a=s.unless,(j=Q.program(31,y,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='">\n    <div class="message">',n="mm_dntme_dont_track_card_here",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n    <div class="message messageHover">',n="mm_dntme_disabled_in_settings",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n    <div class="switch ',n=s.cardEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),a=s["if"],(j=Q.program(33,A,t)).hash={},(j.fn=j).inverse=Q.program(35,D,t),((n=a.call(e,n,j))||0===n)&&(i+=n),i+='" data-feature="card"  ',n=s.cardEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),a=s.unless,(j=Q.program(37,k,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='>\n        <div class="knob"></div>\n    </div>\n  ',n=s.hasEnabledCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasEnabledCard"),a=s["if"],(j=Q.program(39,T,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='\n</div>\n<div class="clearfix feature ',n=s.globalPhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),a=s["if"],(j=Q.program(41,w,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+=" ",n=s.globalPhone||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),a=s.unless,(j=Q.program(44,I,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='">\n  <div class="message">',n="mm_dntme_dont_track_phone_here",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="switch ',n=s.phoneEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),a=s["if"],(j=Q.program(46,B,t)).hash={},(j.fn=j).inverse=Q.program(48,x,t),((n=a.call(e,n,j))||0===n)&&(i+=n),i+='" data-feature="phone" ',n=s.phoneEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),a=s.unless,(j=Q.program(50,C,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='>\n    <div class="knob"></div>\n  </div>\n  ',n=s.has_masked_phones||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_phones"),a=s["if"],(j=Q.program(52,H,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+="\n</div>\n",n=s.accountsEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accountsEnabled"),a=s["if"],(j=Q.program(54,P,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+="\n"}function m(e,t){var n,a;return n=s.email||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),a=s["if"],(j=Q.program(16,u,t)).hash={},(j.fn=j).inverse=Q.noop,(n=a.call(e,n,j))||0===n?n:""}function u(){return"off"}function g(){return"disabled"}function f(){return"on"}function b(){return"off"}function _(){return"data-blacklisted=1"}function v(e){var t,n,a="";return a+='\n    <div class="skip link viewMaskedEmails">',t="mm_dntme_view_maskmed_email",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?n.call(e,t,{hash:{}}):n===ee?Z.call(e,"intl",t,{hash:{}}):n,a+=te(t)+"</div>\n  "}function E(e,t){var n,a;return n=s.cardEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),a=s.unless,(j=Q.program(29,N,t)).hash={},(j.fn=j).inverse=Q.noop,(n=a.call(e,n,j))||0===n?n:""}function N(){return"off"}function y(){return"disabled"}function A(){return"on"}function D(){return"off"}function k(){return"data-blacklisted=1"}function T(e){var t,n,a="";return a+='\n      <div class="skip link viewMaskedCards">',t="mm_dntme_view_maskmed_card",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?n.call(e,t,{hash:{}}):n===ee?Z.call(e,"intl",t,{hash:{}}):n,a+=te(t)+"</div>\n  "}function w(e,t){var n,a;return n=s.phoneEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),a=s.unless,(j=Q.program(42,M,t)).hash={},(j.fn=j).inverse=Q.noop,(n=a.call(e,n,j))||0===n?n:""}function M(){return"off"}function I(){return"disabled"}function B(){return"on"}function x(){return"off"}function C(){return"data-blacklisted=1"}function H(e){var t,n,a="";return a+='\n    <div class="skip link viewMaskedPhones">',t="mm_dntme_view_maskmed_phone",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?n.call(e,t,{hash:{}}):n===ee?Z.call(e,"intl",t,{hash:{}}):n,a+=te(t)+"</div>\n  "}function P(e,t){var n,a,i="";return i+='\n<div class="clearfix feature ',n=s.globalPassword||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),a=s["if"],(j=Q.program(55,S,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+=" ",n=s.globalPassword||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),a=s.unless,(j=Q.program(58,$,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='">\n  <div class="message">',n="mm_dntme_dont_track_passwords_here",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="switch ',n=s.passwordsEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),a=s["if"],(j=Q.program(60,F,t)).hash={},(j.fn=j).inverse=Q.program(62,O,t),((n=a.call(e,n,j))||0===n)&&(i+=n),i+='" data-feature="password" ',n=s.passwordsEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),a=s.unless,(j=Q.program(64,R,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',n="mm_dntme_view_maskmed_passwords",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n</div>\n<div class="clearfix feature ',n=s.globalLogin||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),a=s["if"],(j=Q.program(66,z,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+=" ",n=s.globalLogin||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),a=s.unless,(j=Q.program(69,L,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='">\n  <div class="message">',n="mm_dntme_dont_track_logins_here",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+'</div>\n  <div class="switch ',n=s.loginsEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),a=s["if"],(j=Q.program(71,q,t)).hash={},(j.fn=j).inverse=Q.program(73,W,t),((n=a.call(e,n,j))||0===n)&&(i+=n),i+='" data-feature="login" ',n=s.loginsEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),a=s.unless,(j=Q.program(75,G,t)).hash={},(j.fn=j).inverse=Q.noop,((n=a.call(e,n,j))||0===n)&&(i+=n),i+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',n="mm_dntme_view_maskmed_logins",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===X?a.call(e,n,{hash:{}}):a===ee?Z.call(e,"intl",n,{hash:{}}):a,i+=te(n)+"</div>\n</div>\n"}function S(e,t){var n,a;return n=s.passwordsEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),a=s.unless,(j=Q.program(56,U,t)).hash={},(j.fn=j).inverse=Q.noop,(n=a.call(e,n,j))||0===n?n:""}function U(){return"off"}function $(){return"disabled"}function F(){return"on"}function O(){return"off"}function R(){return"data-blacklisted=1"}function z(e,t){var n,a;return n=s.loginsEnabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),a=s.unless,(j=Q.program(67,V,t)).hash={},(j.fn=j).inverse=Q.noop,(n=a.call(e,n,j))||0===n?n:""}function V(){return"off"}function L(){return"disabled"}function q(){return"on"}function W(){return"off"}function G(){return"data-blacklisted=1"}s=s||e.helpers;var K,J,j,Y="",Q=this,X="function",Z=s.helperMissing,ee=void 0,te=this.escapeExpression;return Y+='<div class="clearfix feature ',K=s.tracker||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),J=s["if"],(j=Q.program(1,i,a)).hash={},(j.fn=j).inverse=Q.noop,((K=J.call(t,K,j))||0===K)&&(Y+=K),Y+='">\n  <div class="message">',K="mm_dntme_dont_track_browsing_here",K=typeof(J=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===X?J.call(t,K,{hash:{}}):J===ee?Z.call(t,"intl",K,{hash:{}}):J,Y+=te(K)+'</div>\n  <div class="switch ',K=s.tracker||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),J=s["if"],(j=Q.program(3,l,a)).hash={},(j.fn=j).inverse=Q.program(5,o,a),((K=J.call(t,K,j))||0===K)&&(Y+=K),Y+='" data-feature="tracker" ',K=s.tracker||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),J=s["if"],(j=Q.program(7,r,a)).hash={},(j.fn=j).inverse=Q.noop,((K=J.call(t,K,j))||0===K)&&(Y+=K),Y+='>\n    <div class="knob"></div>\n  </div>\n  ',K=s.suggestedAllow||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),J=s["if"],(j=Q.program(9,c,a)).hash={},(j.fn=j).inverse=Q.noop,((K=J.call(t,K,j))||0===K)&&(Y+=K),Y+="\n</div>\n",
K=s.maskmeInstalled||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),J=s.unless,(j=Q.program(14,p,a)).hash={},(j.fn=j).inverse=Q.noop,((K=J.call(t,K,j))||0===K)&&(Y+=K),Y}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist}),ABINE_DNTME.define("abine/views/pageBlacklist",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(s,l,e,t,n,a,i){return e.View.extend({tagName:"div",templateName:"dntme_page_blacklist",events:{"click .viewMaskedEmails":"viewMaskedEmails","click .viewMaskedPhones":"viewMaskedPhones","click .viewMaskedCards":"viewMaskedCards","click .viewAccounts":"viewAccounts","click .feature":"toggleSwitch","click .suggested":"openSuggested"},viewAccounts:function(e){i.webapp.openAccounts(),e.preventDefault(),this.trigger("close")},viewMaskedEmails:function(e){i.webapp.openEmails(),e.preventDefault(),this.trigger("close")},viewMaskedPhones:function(e){i.webapp.openPhones(),e.preventDefault(),this.trigger("close")},viewMaskedCards:function(e){i.webapp.openCards(),e.preventDefault(),this.trigger("close")},openSuggested:function(e){e.preventDefault(),i.securityManager.openLink({type:"recommended",host:this.model.get("host")})},toggleSwitch:function(e){var t=l(e.target);if(!t.hasClass("skip")&&(t.hasClass("feature")||(t=l(e.target).parents(".feature")),!t.hasClass("disabled"))){var n=l(".switch",t),a={},i=n.data("feature");a.changed=i,a[i]=!n.data("blacklisted"),l(n).data("changing")||(l(n).data("changing",!0),l(".knob",n).animate({marginLeft:a[i]?0:20},s.bind(function(){l(n).removeData("changing"),this.model.save(a),this.trigger("featureToggled",i)},this)))}},afterInitialize:function(){this.doc=this.el.ownerDocument}})}),ABINE_DNTME.define("abine/views/cardAlert",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(s,l,e){var t=e.View.extend({events:{"click #card-alert-got-it":"cardAlertClose","click .section-header":"toggleSection"},tagName:"div",templateName:"dntme_page_card_alert_panel",cardAlertClose:function(){this.trigger("got-it")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.panelId=this.model.get("showFreeCard")?4000006:4000005,this.model.trackers.on("changed",s.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(e,t){if(e&&e.preventDefault(),this.$("#got-it-div").hide(),this.options.compact)this.trigger("show-trackers");else if(!this.model.get("disabled")&&0<this.model.trackers.length){var n=this.$(".section-header").parent(".section");n.toggleClass("off").toggleClass("on"),this.trigger("max-height");var a=l(".section-content",n),i=s.bind(this.autoResize,this);t?(a.show(),i()):n.hasClass("on")?a.slideDown("fast",i):a.slideUp("fast",i)}},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){return{trackersTitle:new n({model:this.model,doc:this.el.ownerDocument})}}}),n=e.View.extend({tagName:"span",templateName:"dntme_page_card_alert_panel_title",afterInitialize:function(){this.doc=this.el.ownerDocument}});return t}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n<!-- start card money card alert panel -->\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',n=s.disabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),a=s["if"],(g=f.program(2,l,t)).hash={},(g.fn=g).inverse=f.program(4,o,t),((n=a.call(e,n,g))||0===n)&&(i+=n),i+='">\n      ',n="trackersTitle",n=typeof(a=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"child",n,{hash:{}}):a,i+=E(n)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-weight:bold;vertical-align:middle;display:inline-block;width:100px;">',n="mm_dntme_card_alert_panelEarned",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"intl",n,{hash:{}}):a,i+=E(n)+'</div>\n      <div style="display:inline-block;vertical-align:middle;width:50px;"><img src="',n="pages/images/card-lock.png",n=typeof(a=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"assetUrl",n,{hash:{}}):a,i+=E(n)+'"/></div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelProtectWith",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"intl",n,{hash:{}}):a,i+=E(n)+'</div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelRedeemYourCard",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"intl",n,{hash:{}}):a,i+=E(n)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',n="mm_dntme_card_alert_panelGotIt",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"intl",n,{hash:{}}):a,i+=E(n)+"'/></div>\n  </div>\n"}function l(){return"disabled"}function o(e,t){var n,a,i="";return i+=" ",n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s.unless,(g=f.program(5,r,t)).hash={},(g.fn=g).inverse=f.noop,((n=a.call(e,n,g))||0===n)&&(i+=n),i}function r(){return"no-trackers"}function c(e,t){var n,a,i="";return i+='\n<!-- start premium card alert panel -->\n <div class="section off others clearfix">\n    <div class="section-header clearfix ',n=s.disabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),a=s["if"],(g=f.program(8,d,t)).hash={},(g.fn=g).inverse=f.program(10,h,t),((n=a.call(e,n,g))||0===n)&&(i+=n),i+='">\n      ',n="trackersTitle",n=typeof(a=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"child",n,{hash:{}}):a,i+=E(n)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-size:12pt;">',n="mm_dntme_card_alert_panelAtRisk",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"intl",n,{hash:{}}):a,i+=E(n)+'</div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelUseMask",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"intl",n,{hash:{}}):a,i+=E(n)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',n="mm_dntme_card_alert_panelGotIt",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===b?a.call(e,n,{hash:{}}):a===v?_.call(e,"intl",n,{hash:{}}):a,i+=E(n)+"'/></div>\n  </div>\n<!-- end premium card alert panel -->\n"}function d(){return"disabled"}function h(e,t){var n,a,i="";return i+=" ",n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s.unless,(g=f.program(11,p,t)).hash={},(g.fn=g).inverse=f.noop,((n=a.call(e,n,g))||0===n)&&(i+=n),i}function p(){return"no-trackers"}s=s||e.helpers;var m,u,g,f=this,b="function",_=s.helperMissing,v=void 0,E=this.escapeExpression;return m=s.showFreeCard||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showFreeCard"),u=s["if"],(g=f.program(1,i,a)).hash={},(g.fn=g).inverse=f.program(7,c,a),(m=u.call(t,m,g))||0===m?m:""}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+="\n  ",n=s.disabled||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),a=s.unless,(d=p.program(2,l,t)).hash={},(d.fn=d).inverse=p.noop,((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n"}function l(e,t){var n,a,i="";return i+="\n    ",n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s["if"],(d=p.program(3,o,t)).hash={},(d.fn=d).inverse=p.noop,((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n  "}function o(e){var t,n,a="";return a+='\n      <div class="right-section">\n        <img class="arrow-open" src="',t="pages/images/dnt-ui-drawer-arrow-closed.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'" />\n        <img class="arrow-close" src="',t="pages/images/dnt-ui-drawer-arrow-open.png",t=typeof(n=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===m?n.call(e,t,{hash:{}}):n===g?u.call(e,"assetUrl",t,{hash:{}}):n,a+=f(t)+'" />\n      </div>\n    '}s=s||e.helpers;var r,c,d,h="",p=this,m="function",u=s.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="left-section">\n  <div class="count">!!</div>\n  <div class="message">\n    <div class="blocked">',r="mm_dntme_card_alert_panel_MaskedCard",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+'</div>\n    <div class="host" title="',typeof(r=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"))===m?r=r.call(t,{hash:{}}):r===g&&(r=u.call(t,"host",{hash:{}})),h+=f(r)+'">',r="mm_dntme_at",r=typeof(c=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"intl",r,{hash:{}}):c,h+=f(r)+" ",typeof(r=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"))===m?r=r.call(t,{hash:{}}):r===g&&(r=u.call(t,"host",{hash:{}})),h+=f(r)+"</div>\n  </div>\n</div>\n\n",r=s.compact||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),c=s.unless,(d=p.program(1,i,a)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+="\n"}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_compact=e.template(function(e,t,n){var a,i,s="",l="function",o=(n=n||e.helpers).helperMissing,r=void 0,c=this.escapeExpression;return s+='<div class="page clearfix">\n  ',a="contentSection",s+=c(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+"\n  ",a="dntStats",s+=c(a=typeof(i=n.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===l?i.call(t,a,{hash:{}}):i===r?o.call(t,"child",a,{hash:{}}):i)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_compact}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n        <div class="total-trackers ',n=s.totalGreaterThan10000||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),a=s["if"],(I=x.program(2,l,t)).hash={},(I.fn=I).inverse=x.noop,((n=a.call(e,n,I))||0===n)&&(i+=n),i+='">\n\t\t\t\t\t',typeof(n=s.formattedTotal||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"))===C?n=n.call(e,{hash:{}}):n===P&&(n=H.call(e,"formattedTotal",{hash:{}})),i+=S(n)+'\n\t\t\t\t</div>\n\t\t\t\t<div class="trackers-blocked">\n\t\t\t\t\t<span>\n            <a href=# class="understandingTrackers">',n="mm_dntme_dnt_stats_trackers",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?a.call(e,n,{hash:{}}):a===P?H.call(e,"intl",n,{hash:{}}):a,i+=S(n)+"</a>\n                        ",n="mm_dntme_dnt_stats_blocked",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?a.call(e,n,{hash:{}}):a===P?H.call(e,"intl",n,{hash:{}}):a,i+=S(n)+"\n          </span><br />",n="mm_dntme_since",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?a.call(e,n,{hash:{}}):a===P?H.call(e,"intl",n,{hash:{}}):a,i+=S(n)+" <span class='date'>Feb' 12</span>\n\t\t\t\t</div>\n\t\t\t"}function l(e,t){var n,a;return n=s.totalGreaterThan1000000||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan1000000"),a=s["if"],(I=x.program(3,o,t)).hash={},(I.fn=I).inverse=x.program(5,r,t),(n=a.call(e,n,I))||0===n?n:""}function o(){return"tiny"}function r(){return"small"}function c(e,t){var n,a,i="";return i+="\n\t\t\t\t",n=s.totalGreaterThan10000||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),a=s["if"],(I=x.program(8,d,t)).hash={},(I.fn=I).inverse=x.program(10,h,t),((n=a.call(e,n,I))||0===n)&&(i+=n),i+="\n\t\t\t"}function d(e){var t,n,a="";return a+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_small_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?n.call(e,t,{hash:{}}):n===P?H.call(e,"intl",t,{hash:{}}):n,a+=S(t)+" <b>",typeof(t=s.formattedTotal||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"))===C?t=t.call(e,{hash:{}}):t===P&&(t=H.call(e,"formattedTotal",{hash:{}})),a+=S(t)+"</b> ",t="mm_dntme_alltime_blocked_small_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?n.call(e,t,{hash:{}}):n===P?H.call(e,"intl",t,{hash:{}}):n,a+=S(t)+"\n\t\t\t\t"}function h(e){var t,n,a="";return a+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_1",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?n.call(e,t,{hash:{}}):n===P?H.call(e,"intl",t,{hash:{}}):n,a+=S(t)+" <b>",typeof(t=s.formattedTotal||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"))===C?t=t.call(e,{hash:{}}):t===P&&(t=H.call(e,"formattedTotal",{hash:{}})),a+=S(t)+"</b> ",t="mm_dntme_alltime_blocked_2",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?n.call(e,t,{hash:{}}):n===P?H.call(e,"intl",t,{hash:{}}):n,a+=S(t)+"\n\t\t\t\t"}function p(e,t){var n,a,i="";return i+='\n  <div id="chartArea" class="clearfix medals-expanded-wrapper" style="display:none;">\n  ',n=s.showMedals||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showMedals"),a=s["if"],(I=x.program(13,m,t)).hash={},(I.fn=I).inverse=x.program(38,T,t),((n=a.call(e,n,I))||0===n)&&(i+=n),i+="\n  </div>\n "}function m(e,t){var n,a,i="";return i+='\n\t\t<div class="medals-sanity-check">\n\t\t\t<div class="medals-display">\n\t\t\t\t<ul class="medals-list">\n\t\t\t\t\t<li class="bronze medal ',n=s.achievedBronze||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),a=s["if"],(I=x.program(14,u,t)).hash={},(I.fn=I).inverse=x.noop,((n=a.call(e,n,I))||0===n)&&(i+=n),i+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',n=s.achievedBronze||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),a=s["if"],(I=x.program(16,g,t)).hash={},(I.fn=I).inverse=x.program(18,f,t),((n=a.call(e,n,I))||0===n)&&(i+=n),i+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="silver medal ',n=s.achievedSilver||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),a=s["if"],(I=x.program(20,b,t)).hash={},(I.fn=I).inverse=x.noop,((n=a.call(e,n,I))||0===n)&&(i+=n),i+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',n=s.achievedSilver||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),a=s["if"],(I=x.program(22,_,t)).hash={},(I.fn=I).inverse=x.program(24,v,t),((n=a.call(e,n,I))||0===n)&&(i+=n),i+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="gold medal ',n=s.achievedGold||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),a=s["if"],(I=x.program(26,E,t)).hash={},(I.fn=I).inverse=x.noop,((n=a.call(e,n,I))||0===n)&&(i+=n),i+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',n=s.achievedGold||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),a=s["if"],(I=x.program(28,N,t)).hash={},(I.fn=I).inverse=x.program(30,y,t),((n=a.call(e,n,I))||0===n)&&(i+=n),i+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="platinum medal ',n=s.achievedPlatinum||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),a=s["if"],(I=x.program(32,A,t)).hash={},(I.fn=I).inverse=x.noop,((n=a.call(e,n,I))||0===n)&&(i+=n),i+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',n=s.achievedPlatinum||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),a=s["if"],(I=x.program(34,D,t)).hash={},(I.fn=I).inverse=x.program(36,k,t),((n=a.call(e,n,I))||0===n)&&(i+=n),i+='</span>\n\t\t\t\t\t</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="more-stats">\n\t\t\t\t<p>',n="mm_dntme_dnt_stats_only",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?a.call(e,n,{hash:{}}):a===P?H.call(e,"intl",n,{hash:{}}):a,i+=S(n)+'<span id="nextMedalAt">',typeof(n=s.nextMedalAtFormatted||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nextMedalAtFormatted"))===C?n=n.call(e,{hash:{}}):n===P&&(n=H.call(e,"nextMedalAtFormatted",{hash:{}})),i+=S(n)+"</span> ",n="mm_dntme_dnt_stats_moreUntil",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?a.call(e,n,{hash:{}}):a===P?H.call(e,"intl",n,{hash:{}}):a,i+=S(n)+'</p>\n\t\t\t\t<a class="see-stats-btn" href="#">',n="mm_dntme_dnt_stats_seeAll",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?a.call(e,n,{hash:{}}):a===P?H.call(e,"intl",n,{hash:{}}):a,i+=S(n)+"</a>\n\t\t\t</div>\n\t\t</div>\n  "}function u(){return"achieved"}function g(){return"&#10003;"}function f(){return"X"}function b(){return"achieved"}function _(){return"&#10003;"}function v(){return"X"}function E(){return"achieved"}function N(){return"&#10003;"}function y(){return"X"}function A(){return"achieved"}function D(e){var t;return typeof(t=s.getPlatinumCount||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPlatinumCount"))===C?t=t.call(e,{hash:{}}):t===P&&(t=H.call(e,"getPlatinumCount",{hash:{}})),S(t)}function k(){return"X"}function T(e){var t,n,a="";return a+='\n      <a class="see-stats-btn" href="#" style="width:120px;margin:5px auto;">',t="mm_dntme_dnt_stats_seeAll",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===C?n.call(e,t,{hash:{}}):n===P?H.call(e,"intl",t,{hash:{}}):n,a+=S(t)+"</a>\n  "}s=s||e.helpers;var w,M,I,B="",x=this,C="function",H=s.helperMissing,P=void 0,S=this.escapeExpression;return B+='<div id="DNTPNewBadge" class="clearfix" style="display: none;">\n\t<div class="close-badge"></div>\n\t\t<span class="halfBadge">\n\t\t\t<div class="badgeText badgeIconSmall badge',typeof(w=s.getBadgeType||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeType"))===C?w=w.call(t,{hash:{}}):w===P&&(w=H.call(t,"getBadgeType",{hash:{}})),B+=S(w)+'Img"></div>\n\t\t\t<div class="badgeCongratsNormal">\n\t\t\t\t<div class="blueText congrats">',w="mm_dntme_congrats",w=typeof(M=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===C?M.call(t,w,{hash:{}}):M===P?H.call(t,"intl",w,{hash:{}}):M,B+=S(w)+'</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span class="darkText blocked-over">',w="mm_dntme_youve_blocked_over",w=typeof(M=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===C?M.call(t,w,{hash:{}}):M===P?H.call(t,"intl",w,{hash:{}}):M,B+=S(w)+'</span>\n\t\t\t\t\t<div class="blueText number-trackers">',typeof(w=s.getBadgeCount||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeCount"))===C?w=w.call(t,{hash:{}}):w===P&&(w=H.call(t,"getBadgeCount",{hash:{}})),B+=S(w)+" ",w="mm_dntme_trackers",w=typeof(M=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===C?M.call(t,w,{hash:{}}):M===P?H.call(t,"intl",w,{hash:{}}):M,B+=S(w)+'</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</span>\n</div>\n<div id="viewDetailedStats" class="open clearfix">\n\t\t<div class="allTimeTotal clearfix">\n\t\t\t',w=s.compact||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=s.unless,(I=x.program(1,i,a)).hash={},(I.fn=I).inverse=x.program(7,c,a),((w=M.call(t,w,I))||0===w)&&(B+=w),B+="\n\t\t</div>\n</div>\n",w=s.compact||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=s.unless,(I=x.program(12,p,a)).hash={},(I.fn=I).inverse=x.noop,((w=M.call(t,w,I))||0===w)&&(B+=w),B}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats}),ABINE_DNTME.define("abine/views/dntmeStats",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(t,n,e,a,i,s,l){return e.View.extend({tagName:"div",templateName:"dntme_page_dnt_stats",className:"dntme_dntStats",events:{"click #viewDetailedStats":"viewDetailedStats","click .allTimeTotal .blue":"viewDetailedStats","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .see-stats-btn":"openStatsPage","click .understandingTrackers":"openUnderstandingTrackers","click .medals-display":"reshowLastMedal"},afterInitialize:function(){this.model.sync("read",this,{eventName:"read:dntStats:getBadgeData",success:function(e){this.model.bronzeLimit=e.totalBlocked.levels[0].limit,this.model.silverLimit=e.totalBlocked.levels[1].limit,this.model.goldLimit=e.totalBlocked.levels[2].limit,this.model.platinumLimit=e.totalBlocked.levels[3].limit,this.render()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/dntStats]#[getBadgeData]# error event in model.sync event: read:dntStats:getBadgeData")}})},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")},reshowLastMedal:function(e){e.preventDefault(),this.model.achievedBronze()&&(n("#DNTPNewBadge",this.el).slideDown(),this.hideChart())},openCashForCardsSignup:function(e){this.model.toggleViewedBadge(),l.webapp.openCashForCardsSignup(),e.preventDefault(),this.trigger("close")},hideChart:function(){var e=t.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideUp(e),this.$("#viewDetailedStats").removeClass("open")},showChart:function(){this.trigger("max-height");var e=t.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideDown(e),this.$("#viewDetailedStats").addClass("open")},viewDetailedStats:function(e){e.preventDefault(),this.$("#viewDetailedStats").hasClass("open")?this.hideChart():this.showChart()},openStatsPage:function(e){return e.preventDefault(),l.webapp.openStats(),this.trigger("close"),!1}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_main=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n    <div class="dynamicPanels">\n      ',n=s.panelSections||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),a=s.each,(d=p.program(2,l,t)).hash={},(d.fn=d).inverse=p.noop,((n=a.call(e,n,d))||0===n)&&(i+=n),i+="\n    </div>\n  "}function l(e,t){var n,a,i="";return i+='\n        <div id="',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"))===m?n=n.call(e,{hash:{}}):n===g&&(n=u.call(e,"this.id",{hash:{}})),i+=f(n)+'" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),a=s["if"],(d=p.program(3,o,t)).hash={},(d.fn=d).inverse=p.noop,((n=a.call(e,n,d))||0===n)&&(i+=n),i+=' class="panelSection ',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"))===m?n=n.call(e,{hash:{}}):n===g&&(n=u.call(e,"this.class_name",{hash:{}})),i+=f(n)+'">\n          ',typeof(n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"))===m?n=n.call(e,{hash:{}}):n===g&&(n=u.call(e,"this.body",{hash:{}})),(n||0===n)&&(i+=n),i+="\n        </div>\n      "}function o(e){var t,n="";return n+='style="height:',typeof(t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"))===m?t=t.call(e,{hash:{}}):t===g&&(t=u.call(e,"this.height",{hash:{}})),n+=f(t)+'"'}s=s||e.helpers;var r,c,d,h="",p=this,m="function",u=s.helperMissing,g=void 0,f=this.escapeExpression;return h+='<div class="page clearfix">\n  ',r="contentSection",r=typeof(c=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"child",r,{hash:{}}):c,h+=f(r)+"\n  ",r="dntStats",r=typeof(c=s.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===m?c.call(t,r,{hash:{}}):c===g?u.call(t,"child",r,{hash:{}}):c,h+=f(r)+"\n  ",r=s.dynamicPanel||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),c=s["if"],(d=p.program(1,i,a)).hash={},(d.fn=d).inverse=p.noop,((r=c.call(t,r,d))||0===r)&&(h+=r),h+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_main}),ABINE_DNTME.define("abine/views/dntmePage",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl","abine/views/dntmeStats","abine/views/cardAlert","abine/views/pageTracker","abine/views/dashboard","abine/views/trackingDashboard","abine/views/settingsDashboard","abine/views/loginHelp"],function(i,e,t,n,a,s,l,o,r,c,d,h,p,m,u){var g=t.View.extend({templateName:"dntme_empty"});return a.extend({events:{"click .panelSection":"performActions","click .close-badge":"toggleBadge"},templateName:"dntme_page_main",className:"dntme_page",toggleBadge:function(){if(this.options.compact)return this.model.dntStats.toggleViewedBadge(),this.trigger("show-trackers"),void this.options.messenger.send("update:panelActivity:closed",{panelId:8000005});e("#chartArea",this.el).slideDown("fast"),e("#DNTPNewBadge",this.el).slideUp(),this.trigger("max-height"),this.model.get("premium")?this.options.messenger.send("update:panelActivity:closed",{panelId:8000004}):this.options.messenger.send("update:panelActivity:closed",{panelId:8000005})},autoResize:function(){this.trigger("resize")},reload:function(){this.model.fetch({success:i.bind(this.render,this)})},refreshPanel:function(e){this.children&&this.children.contentSection&&!this.model.get("settingsChanged")&&this.model.trackers.length!=e.total&&this.model.fetch({success:i.bind(function(){var e=this.children.contentSection;if(this.children&&e&&e.trackerSection){var t=e.trackerSection.isOpen();e.trackerSection.render(),t&&e.trackerSection.toggleSection(null,!0),this.options.compact&&this.updateStats()}this.autoResize()},this)})},updateStats:function(){this.model.get("reloadRequired")||this.options.compact&&"medals"!=this.options.page&&!this.options.cardAlertPanel?"weekly-report"==this.options.page&&e(".dntme_dntStats",this.el).hide():(this.children.dntStats.render(),this.model.dntStats.showMedals()&&!this.model.dntStats.viewedBadge()?(e("#chartArea",this.el).hide(),e("#allTimeTotal",this.el).hide(),e("#DNTPNewBadge",this.el).show(),this.model.get("premium")?this.options.messenger.send("update:panelActivity:impression",{panelId:8000004}):this.options.messenger.send("update:panelActivity:impression",{panelId:8000005}),this.options.compact||this.model.dntStats.toggleViewedBadge()):(this.options.cardAlertPanel&&(this.model.get("showFreeCard")?this.options.messenger.send("update:panelActivity:impression",{panelId:4000006}):this.options.messenger.send("update:panelActivity:impression",{panelId:4000005})),e("#DNTPNewBadge",this.el).hide())),this.$("#chartArea").hide()},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new n.TabData({messenger:this.options.messenger}),this.options.dynamicPanel&&(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.options.compact&&(this.templateName="dntme_page_compact",this.model.compact=!0),this.weakBindTo(this.options.messenger,"background:dntme:tracker-count-changed",i.debounce(i.bind(this.refreshPanel,this),1e3)),this.on("render",i.bind(function(){this.model.trackers.messenger=this.options.messenger,this.model.blacklist.messenger=this.options.messenger,this.model.get("weeklyReport")&&e(".weeklyReport span",this.el.ownerDocument).text(this.model.get("weeklyReport")),this.model.get("maskmeInstalled")&&(this.options.compact||e(".footer",this.el.ownerDocument).hide()),this.options.compact&&e(".premium span.date",this.el.ownerDocument).text(this.model.get("installMonth")),this.updateStats(),this.trigger("resize"),e("div.allTimeTotal div.trackers-blocked span.date",this.el.ownerDocument).text(this.model.get("installMonth"))},this)),s.setTimeout(i.bind(function(){this.model.fetch({success:i.bind(function(){if(this.options.compact&&!this.options.page&&!this.options.cardAlertPanel){if(this.model.get("weeklyReport"))return void this.trigger("show-report");if(this.model.dntStats.canAutoShowBadge())return void this.trigger("show-medals")}this.render()},this)})},this),0)},showTrackers:function(){try{this.children.contentSection.toggleSection()}catch(e){}},createChildren:function(){var e;this.options.highlight&&this.model.get("loggedIn")&&(this.model.showSettings=!0);var t="Safari"==ABINE_DNTME.config.browser;this.model.set({safari:t});var n={model:this.model,compact:this.options.compact,domain:this.options.domain,contentManager:this.options.contentManager,messenger:this.options.messenger,doc:this.el.ownerDocument,highlight:this.options.highlight,timeout:this.options.timeout,switchTo:this.options.switchTo};this.options.cardAlertPanel?((e=new c(n)).on("close",i.bind(function(){this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("close")},this)),e.on("got-it",i.bind(function(){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.trigger("close")},this))):e="dashboard"==this.options.page?new h(n):"login_help"==this.options.page?new u(n):this.options.compact?new d(n):new p(n),e.transferEvents(["resize","max-height","show-trackers","show-dashboard","mask-passwords","close","show-settings","refresh-preferences","open:understanding:tracker","ignore-blur","fav-icons"],this),e.on("change-dashboard",i.bind(function(e){this.options.page=e,this.reload()},this)),e.on("mask-passwords",i.bind(this.maskPasswords,this)),this.model.dntStats.compact=this.model.compact;var a=new g({model:{},doc:this.el.ownerDocument});return"Safari"==ABINE_DNTME.config.browser||"login_help"==this.options.page||this.model.showSettings||(a=new r({model:this.model.dntStats,doc:this.el.ownerDocument})).transferEvents(["close","resize","max-height","open:understanding:tracker"],this),{contentSection:e,dntStats:a}}})}),ABINE_DNTME.define("abine/views/dntmePageBase",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(c,d,e,h,t,n,a,p){return e.View.extend({toggleSwitch:function(e){var n=d(e.target);if(!n.hasClass("skip")&&(n.hasClass("setting-row")||(n=d(e.target).parents(".setting-row")),!n.hasClass("disabled"))){var a=d(".switch",n);if(!d(a).data("changing")){var i={},s=n.data("type"),l=n.data("name");i.id=n.data("id")||this.model.blacklist.get("id"),i.domain=n.data("domain")||this.model.blacklist.get("domain"),i.type=s,i.name=l,i.value=!a.hasClass("blacklist"==s?"off":"on");var t,o=null;switch(l){case"identity":t=this.model.blacklist.get("globalIdentity"),o="suggestIdentities";break;case"real_card":t=this.model.blacklist.get("globalRealCard"),o="suggestRealCard";break;case"save_card":t=this.model.blacklist.get("globalSaveCard"),o="saveCard";break;case"password":t=this.model.blacklist.get("globalPassword"),o="suggestStrongPassword";break;case"account":t=this.model.blacklist.get("globalLogin"),o="helpMeLogin";break;case"submit_account":t=this.model.blacklist.get("globalSubmitAccount"),o="submitAccount";break;case"address":t=this.model.blacklist.get("globalAddress"),o="suggestAddresses";break;case"tracker":t=this.model.blacklist.get("globalTracker"),o="browsing";break;case"save_account":t=this.model.blacklist.get("globalAccounts"),o="rememberAccounts";break;default:t=this.model.blacklist.get("global"+l.charAt(0).toUpperCase()+l.slice(1)),o=l}if(0==i.value&&0==t&&!this.options.inline)return this.model.trigger("open-global-setting",{highlight:o}),void this.showSettingsSubPage("global-panel-settings",o);var r=i.value;"blacklist"==s&&(r=!r),d(a).data("changing",!0),d(".knob",a).animate({marginLeft:r?20:0},c.bind(function(){d(a).removeData("changing");var e=new h.BlacklistOrPreference;this.options.inline&&(i.suppressWebapp=!0),e.save(i),n.toggleClass("off"),a.toggleClass("off").toggleClass("on"),d(".message",n).removeAttr("data-original-title");var t=i.value?"on":"off";"browsing"==o?d(".message",n).attr("title",p.getText("mm_dntme_help_what_will_happen_"+t+"_"+o.toLowerCase()),"this site"):d(
".message",n).attr("title",p.getText("mm_dntme_help_what_will_happen_"+t+"_"+o.toLowerCase())),d(".message",n).tooltip({delay:0}),"blacklist"==s&&this.featureToggled(l)},this))}}},trackerToggled:function(){this.featureToggled("individual-tracker")},featureToggled:function(t){this.model.fetch({success:c.bind(function(){var e=this.children.trackerSection;"tracker"==t&&e&&(this.model.get("disabled")?this.$(".section-content",e.el).slideUp("slow",c.bind(function(){e.render(),this.trigger("resize")},this)):(e.render(),this.trigger("resize"))),this.children.settingsChanged?this.children.settingsChanged.update(t):this.model.trigger("settings-changed",{feature:t}),n.setTimeout(c.bind(function(){this.model.get("toggledOff")&&!this.model.custom.isFeedbackShown()&&this.model.custom.setCustomTabData("feedbackShown",!0)},this),500)},this)})},showSettings:function(e){e&&e.preventDefault(),this.trigger("show-settings")},showSettingsSubPage:function(e,t){this.trigger("show-settings",null,{highlight:t,subPage:e})}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed=e.template(function(e,t,s,n,a){function i(e,t){var n,a,i="";return i+='\n  <div class="alert">\n    <i class="icon-warning-sign"></i>\n    ',n=null===(n=s.custom||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"changedFeature"),a=s["if"],(m=u.program(2,l,t)).hash={},(m.fn=m).inverse=u.program(4,o,t),((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n  </div>\n  ",n=s.toggledOff||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"toggledOff"),a=s["if"],(m=u.program(6,r,t)).hash={},(m.fn=m).inverse=u.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n"}function l(e){var t,n,a="";return a+="\n      ",a+="\n      ",typeof(t=null===(t=s.custom||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"changedFeature"))===g?t=t.call(e,{hash:{}}):t===b&&(t=f.call(e,"custom.changedFeature",{hash:{}})),a+=_(t)+" ",t="mm_dntme_toggled_reload",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+"\n    "}function o(e){var t,n,a="";return a+="\n      ",t="mm_dntme_toggled_reload",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+"\n    "}function r(e,t){var n,a,i="";return i+="\n    ",n=s.suggestedAllow||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggestedAllow"),a=s.unless,(m=u.program(7,c,t)).hash={},(m.fn=m).inverse=u.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n  "}function c(e,t){var n,a,i="";return i+="\n      ",n=null===(n=s.custom||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isFeedbackShown"),a=s.unless,(m=u.program(8,d,t)).hash={},(m.fn=m).inverse=u.noop,((n=a.call(e,n,m))||0===n)&&(i+=n),i+="\n    "}function d(e){var t,n,a="";return a+='\n        <div class="thanks alert alert-success" style="display:none"><i class="icon-ok-sign"></i> ',t="mm_dntme_thanks_for_feedback",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+'</div>\n        <div class="feedback well">\n            ',t="mm_dntme_help_others",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+"\n            <div id=reasons><ul>\n                <li id=reason1>",t="mm_dntme_reason_site_not_working",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+"</li>\n                <li id=reason2>",t="mm_dntme_reason_other",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+'</li>\n                <textarea id="desc" name="description"></textarea>\n                <button id="feedback-submit" class="btn btn-mini btn-success">',t="mm_dntme_feedback_submit",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+'</button>\n                <span class="text-error" style="display:none;">',t="mm_dntme_please_fill_reason",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===g?n.call(e,t,{hash:{}}):n===b?f.call(e,"intl",t,{hash:{}}):n,a+=_(t)+"</span>\n            </ul></div>\n        </div>\n      "}s=s||e.helpers;var h,p,m,u=this,g="function",f=s.helperMissing,b=void 0,_=this.escapeExpression;return h=s.settingsChanged||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"settingsChanged"),p=s["if"],(m=u.program(1,i,a)).hash={},(m.fn=m).inverse=u.noop,(h=p.call(t,h,m))||0===h?h:""}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed}),ABINE_DNTME.define("abine/views/settingsChanged",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(n,a,e,t,i,s){return e.View.extend({tagName:"div",templateName:"dntme_page_settings_changed",events:{"click #reason1":"siteNotWorking","click #feedback-submit":"otherReason"},siteNotWorking:function(e){e.preventDefault(),this.submitFeedback(intl.getText("mm_dntme_reason_site_not_working"))},otherReason:function(e){if(e.preventDefault(),this.$(".text-error").hide(),""!=this.$("#desc").val())return this.submitFeedback(this.$("#desc").val()),!1;this.$(".text-error").show()},submitFeedback:function(e){this.$(".feedback").slideUp("slow"),this.$(".thanks").slideDown("slow"),s.setTimeout(n.bind(function(){this.$(".thanks").fadeOut()},this),3e3),this.model.save({feedback:e}),this.doc.defaultView.focus()},update:function(e){if(this.model.get("settingsChanged")){"individual-tracker"!=e?(this.model.custom.setCustomTabData("changedFeature",e),this.model.custom.setCustomTabData("changedFeatureOffStatus",this.model.blacklist.get(e))):(this.model.custom.setCustomTabData("changedFeature",""),this.model.custom.setCustomTabData("changedFeatureOffStatus","")),this.trigger("max-height");var t=this.el.innerHTML;this.render(),t!=this.el.innerHTML&&(a(this.el).hide(),a(this.el).slideDown("slow",n.bind(function(){this.trigger("resize")},this)))}else a(this.el).slideUp("slow",n.bind(function(){this.render(),this.trigger("resize")},this))},afterInitialize:function(){this.doc=this.el.ownerDocument}})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker=e.template(function(e,t,i,n,a){function s(){return"blocked"}function l(){return"with-suggested"}function o(e){var t,n;return t="/pages/images/blocked.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"assetUrl",t,{hash:{}}):n,A(t)}function r(e){var t,n;return t="/pages/images/unblocked.png",t=typeof(n=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"assetUrl",t,{hash:{}}):n,A(t)}function c(e){var t,n;return t="mm_dntme_blocked",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,A(t)}function d(e){var t,n;return t="mm_dntme_unblocked",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,A(t)}function h(e,t){var n,a;return n=i.suggested||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggested"),a=i["if"],(b=v.program(14,p,t)).hash={},(b.fn=b).inverse=v.noop,(n=a.call(e,n,b))||0===n?n:""}function p(e,t){var n,a;return n=i.blocked||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blocked"),a=i["if"],(b=v.program(15,m,t)).hash={},(b.fn=b).inverse=v.program(17,u,t),(n=a.call(e,n,b))||0===n?n:""}function m(e){var t,n,a="";return a+='<div class="not suggested">',t="mm_dntme_not_suggested",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+"</div>"}function u(e){var t,n,a="";return a+='<div class="suggested">',t="mm_dntme_suggested",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+"</div>"}i=i||e.helpers;var g,f,b,_="",v=this,E="function",N=i.helperMissing,y=void 0,A=this.escapeExpression;return _+='<div class="tracker ',g=i.blocked||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=i["if"],(b=v.program(1,s,a)).hash={},(b.fn=b).inverse=v.noop,((g=f.call(t,g,b))||0===g)&&(_+=g),_+=" ",g=i.suggested||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggested"),f=i["if"],(b=v.program(3,l,a)).hash={},(b.fn=b).inverse=v.noop,((g=f.call(t,g,b))||0===g)&&(_+=g),_+=' clearfix">\n  <span class="name">',typeof(g=i.name||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"))===E?g=g.call(t,{hash:{}}):g===y&&(g=N.call(t,"name",{hash:{}})),_+=A(g)+'</span>\n  <div class="state"><img class="tracker-image" src="',g=i.blocked||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=i["if"],(b=v.program(5,o,a)).hash={},(b.fn=b).inverse=v.program(7,r,a),((g=f.call(t,g,b))||0===g)&&(_+=g),_+='" /></div>\n  <div class="message">\n    ',g=i.blocked||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=i["if"],(b=v.program(9,c,a)).hash={},(b.fn=b).inverse=v.program(11,d,a),((g=f.call(t,g,b))||0===g)&&(_+=g),_+="\n  ",g=i.hasSuggested||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasSuggested"),f=i["if"],(b=v.program(13,h,a)).hash={},(b.fn=b).inverse=v.noop,((g=f.call(t,g,b))||0===g)&&(_+=g),_+="\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list=e.template(function(e,t,s,n,a){function i(){return"disabled"}function l(e,t){var n,a,i="";return i+=" ",n=null===(n=(D=s.trackers)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s.unless,(k=w.program(4,o,t)).hash={},(k.fn=k).inverse=w.noop,((n=a.call(e,n,k))||0===n)&&(i+=n),i}function o(){return"no-trackers"}function r(){return"off"}function c(){return"off"}function d(){return"on"}function h(e,t){var n,a,i="";return i+="\n        ",n=null===(n=(D=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),a=s["if"],(k=w.program(13,p,t)).hash={},(k.fn=k).inverse=w.program(15,m,t),((n=a.call(e,n,k))||0===n)&&(i+=n),i+="\n      "}function p(e){var t,n,a="";return a+='\n          <div class="skip suggested">',t="mm_dntme_suggested",t=typeof(n=(D=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===M?n.call(e,t,{hash:{}}):n===B?I.call(e,"intl",t,{hash:{}}):n,a+=x(t)+"</div>\n        "}function m(e){var t,n,a="";return a+='\n          <div class="skip not suggested">',t="mm_dntme_not_suggested",t=typeof(n=(D=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===M?n.call(e,t,{hash:{}}):n===B?I.call(e,"intl",t,{hash:{}}):n,a+=x(t)+"</div>\n        "}function u(e,t){var n,a,i="";return i+='\n    <div class="clearfix setting-row ',n=(D=s.siteGPC)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"siteGPC"),a=s.unless,(k=w.program(18,g,t)).hash={},(k.fn=k).inverse=w.noop,((n=a.call(e,n,k))||0===n)&&(i+=n),i+='" data-type="blacklist" data-name="gpc" style="margin:5px 0px;">\n      <div class="message">Global Privacy Control is</div>\n      <div class="word switch ',n=(D=s.siteGPC)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"siteGPC"),a=s["if"],(k=w.program(20,f,t)).hash={},(k.fn=k).inverse=w.program(22,b,t),((n=a.call(e,n,k))||0===n)&&(i+=n),i+='">\n        <div class="knob"></div>\n      </div>\n      <div class="for">',n="mm_dntme_for_this_website",n=typeof(a=(D=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===M?a.call(e,n,{hash:{}}):a===B?I.call(e,"intl",n,{hash:{}}):a,i+=x(n)+"</div>\n    </div>\n    "}function g(){return"off"}function f(){return"on"}function b(){return"off"}function _(e,t){var n,a,i="";return i+="\n      ",n=null===(n=(D=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),a=s.unless,(k=w.program(25,v,t)).hash={},(k.fn=k).inverse=w.noop,((n=a.call(e,n,k))||0===n)&&(i+=n),i+="\n    "}function v(e,t){var n,a,i="";return i+="\n        ",n=null===(n=(D=s.trackers)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s["if"],(k=w.program(26,E,t)).hash={},(k.fn=k).inverse=w.noop,((n=a.call(e,n,k))||0===n)&&(i+=n),i+="\n        ",n=(D=s.safari)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"safari"),a=s.unless,(k=w.program(28,N,t)).hash={},(k.fn=k).inverse=w.noop,((n=a.call(e,n,k))||0===n)&&(i+=n),i+="\n      "}function E(e){var t,n,a="";return a+='\n          <div class="section-content" style="overflow: hidden;display: block;">\n            <div class="list"><div class="content">',t="trackerList",t=typeof(n=(D=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"))===M?n.call(e,t,{hash:{}}):n===B?I.call(e,"child",t,{hash:{}}):n,a+=x(t)+"</div></div>\n          </div>\n        "}function N(e){var t,n,a="";return a+='\n        <div style="padding:5px;margin:0px 10px;">\n          <img src="',t="pages/images/tracking.png",t=typeof(n=(D=s.assetUrl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"))===M?n.call(e,t,{hash:{}}):n===B?I.call(e,"assetUrl",t,{hash:{}}):n,a+=x(t)+'" style="width:40px;margin-right:10px;float:left;"/>\n          <a href="#" class="trackerDashboard" style="text-decoration:underline;line-height:1.5;display:block;">',t="mm_dntme_tracking_goto_dashboard",t=typeof(n=(D=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===M?n.call(e,t,{hash:{}}):n===B?I.call(e,"intl",t,{hash:{}}):n,a+=x(t)+"</a>\n        </div>\n        "}s=s||e.helpers;var y,A,D,k,T="",w=this,M="function",I=s.helperMissing,B=void 0,x=this.escapeExpression,C=s.blockHelperMissing;return T+='  <div class="section on others clearfix">\n    <div class="section-header clearfix ',y=null===(y=(D=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||y===undefined||!1===y?y:ABINE_DNTME.Duckbone.Handlebars.getAttr(y,"trackerOff"),A=s["if"],(k=w.program(1,i,a)).hash={},(k.fn=k).inverse=w.program(3,l,a),((y=A.call(t,y,k))||0===y)&&(T+=y),T+='">\n      ',y="trackersTitle",y=typeof(A=(D=s.child)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===M?A.call(t,y,{hash:{}}):A===B?I.call(t,"child",y,{hash:{}}):A,T+=x(y)+'\n    </div>\n\n    <div class="clearfix setting-row ',y=null===(y=(D=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||y===undefined||!1===y?y:ABINE_DNTME.Duckbone.Handlebars.getAttr(y,"trackerOff"),A=s["if"],(k=w.program(6,r,a)).hash={},(k.fn=k).inverse=w.noop,((y=A.call(t,y,k))||0===y)&&(T+=y),T+='" data-type="blacklist" data-name="tracker" style="margin:5px 0px;">\n      <div class="message">',y="mm_dntme_tracking_blocker",y=typeof(A=(D=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===M?A.call(t,y,{hash:{}}):A===B?I.call(t,"intl",y,{hash:{}}):A,T+=x(y)+'</div>\n      <div class="word switch ',y=null===(y=(D=s.blacklist)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"))||y===undefined||!1===y?y:ABINE_DNTME.Duckbone.Handlebars.getAttr(y,"trackerOff"),A=s["if"],(k=w.program(8,c,a)).hash={},(k.fn=k).inverse=w.program(10,d,a),((y=A.call(t,y,k))||0===y)&&(T+=y),T+='">\n        <div class="knob"></div>\n      </div>\n      ',y=(D=s.suggestedAllow)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),A=s["if"],(k=w.program(12,h,a)).hash={},(k.fn=k).inverse=w.noop,((y=A.call(t,y,k))||0===y)&&(T+=y),T+='\n      <div class="for">',y="mm_dntme_for_this_website",y=typeof(A=(D=s.intl)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===M?A.call(t,y,{hash:{}}):A===B?I.call(t,"intl",y,{hash:{}}):A,T+=x(y)+"</div>\n    </div>\n\n    ",y="Chrome",A=(D=s.ifBrowser)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"ifBrowser"),(k=w.program(17,u,a)).hash={},(k.fn=k).inverse=w.noop,((y=D&&typeof A===M?A.call(t,y,k):C.call(t,A,y,k))||0===y)&&(T+=y),T+="\n\n    ",y=(D=s.compact)||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),A=s.unless,(k=w.program(24,_,a)).hash={},(k.fn=k).inverse=w.noop,((y=A.call(t,y,k))||0===y)&&(T+=y),T+="\n  </div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title=e.template(function(e,t,s,n,a){function i(e){var t,n,a="";return a+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+"</div>\n"}function l(e,t){var n,a,i="";return i+='\n  <div class="left-section main-tracker-title" data-dashboard="tracking">\n  ',n=null===(n=s.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),a=s["if"],(b=v.program(4,o,t)).hash={},(b.fn=b).inverse=v.program(6,r,t),((n=a.call(e,n,b))||0===n)&&(i+=n),i+="\n  </div>\n"}function o(e){var t,n,a="";return a+='\n    <div class="message-disabled">\n      <div class="disabled-text">',t="mm_dntme_tracking_disabled",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+'</div>\n      <div class="disabled-subtext" title="',typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?t=t.call(e,{hash:{}}):t===y&&(t=N.call(e,"host",{hash:{}})),a+=A(t)+'">',typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?t=t.call(e,{hash:{}}):t===y&&(t=N.call(e,"host",{hash:{}})),a+=A(t)+"</div>\n    </div>\n  "}function r(e,t){var n,a,i="";return i+="\n    ",n=s.safari||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"safari"),a=s["if"],(b=v.program(7,c,t)).hash={},(b.fn=b).inverse=v.program(9,d,t),((n=a.call(e,n,b))||0===n)&&(i+=n),i+="\n  "}function c(e){var t,n="";return n+='\n      <div class="message-clear">\n        <div class="all-clear" title="',typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?t=t.call(e,{hash:{}}):t===y&&(t=N.call(e,"host",{hash:{}})),n+=A(t)+'">',typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?t=t.call(e,{hash:{}}):t===y&&(t=N.call(e,"host",{hash:{}})),n+=A(t)+"</div>\n      </div>\n    "}function d(e,t){var n,a,i="";return i+="\n        ",n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s["if"],(b=v.program(10,h,t)).hash={},(b.fn=b).inverse=v.program(15,u,t),((n=a.call(e,n,b))||0===n)&&(i+=n),i+="\n    "}function h(e,t){var n,a,i="";return i+='\n          <div class="count">',typeof(n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getBlocked"))===E?n=n.call(e,{hash:{}}):n===y&&(n=N.call(e,"trackers.getBlocked",{hash:{}})),i+=A(n)+'</div>\n          <div class="message">\n            <div class="blocked">\n              ',n=s.understanding_tracker_clicked||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),a=s["if"],(b=v.program(11,p,t)).hash={},(b.fn=b).inverse=v.program(13,m,t),((n=a.call(e,n,b))||0===n)&&(i+=n),i+="\n              ",n="mm_dntme_blocked_at",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?a.call(e,n,{hash:{}}):a===y?N.call(e,"intl",n,{hash:{}}):a,i+=A(n)+'\n            </div>\n            <div class="host" title="',typeof(n=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?n=n.call(e,{hash:{}}):n===y&&(n=N.call(e,"host",{hash:{}})),i+=A(n)+'">at&nbsp;',typeof(n=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?n=n.call(e,{hash:{}}):n===y&&(n=N.call(e,"host",{hash:{}})),i+=A(n)+"</div>\n          </div>\n        "}function p(e){var t,n,a,i="";return i+="\n                ",t=null===(t=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",t=typeof(a=s.plural||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"))===E?a.call(e,n,t,{hash:{}}):a===y?N.call(e,"plural",n,t,{hash:{}}):a,i+=A(t)+"\n              "}function m(e){var t,n,a,i="";return i+='\n                <a href=# class="understandingTrackers">',t=null===(t=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",t=typeof(a=s.plural||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"))===E?a.call(e,n,t,{hash:{}}):a===y?N.call(e,"plural",n,t,{hash:{}}):a,i+=A(t)+"</a>\n              "}function u(e){var t,n,a="";return a+='\n          <div class="message-clear">\n            <div class="count"></div>\n            <div class="all-clear">',t="mm_dntme_clear_skies",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+'</div>\n            <div class="all-clear-subtext" title="',typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?t=t.call(e,{hash:{}}):t===y&&(t=N.call(e,"host",{hash:{}})),a+=A(t)+'">',t="mm_dntme_at",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===E?n.call(e,t,{hash:{}}):n===y?N.call(e,"intl",t,{hash:{}}):n,a+=A(t)+" ",typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===E?t=t.call(e,{hash:{}}):t===y&&(t=N.call(e,"host",{hash:{}})),a+=A(t)+"</div>\n          </div>\n        "}s=s||e.helpers;var g,f,b,_="",v=this,E="function",N=s.helperMissing,y=void 0,A=this.escapeExpression;return _+="\n",g=s.reloadRequired||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),f=s["if"],(b=v.program(1,i,a)).hash={},(b.fn=b).inverse=v.program(3,l,a),((g=f.call(t,g,b))||0===g)&&(_+=g),_}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback=e.template(function(e,t,s,n,a){function i(e){var t,n,a="";return a+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===y?n.call(e,t,{hash:{}}):n===D?A.call(e,"intl",t,{hash:{}}):n,a+=k(t)+"</div>\n"}function l(e,t){var n,a,i="";return i+="\n<div>\n  ",n=s.safari||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"safari"),a=s["if"],(v=N.program(4,o,t)).hash={},(v.fn=v).inverse=N.program(6,r,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n</div>\n"}function o(e){var t,n="";return n+='\n    <div class="message">\n    <div class="blocked">\n      <div class="host" title="',typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===y?t=t.call(e,{hash:{}}):t===D&&(t=A.call(e,"host",{hash:{}})),n+=k(t)+'">',typeof(t=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===y?t=t.call(e,{hash:{}}):t===D&&(t=A.call(e,"host",{hash:{}})),n+=k(t)+"</div>\n    </div>\n    </div>\n  "}function r(e,t){var n,a,i="";return i+="\n      ",n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),a=s["if"],(v=N.program(7,c,t)).hash={},(v.fn=v).inverse=N.program(12,p,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n  "}function c(e,t){var n,a,i="";return i+='\n        <div class="message">\n          <div class="blocked">\n            <div class="host" title="',typeof(n=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===y?n=n.call(e,{hash:{}}):n===D&&(n=A.call(e,"host",{hash:{}})),i+=k(n)+'">',typeof(n=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===y?n=n.call(e,{hash:{}}):n===D&&(n=A.call(e,"host",{hash:{}})),i+=k(n)+'</div>\n            <div class="count">\n              ',typeof(n=null===(n=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getBlocked"))===y?n=n.call(e,{hash:{}}):n===D&&(n=A.call(e,"trackers.getBlocked",{hash:{}})),i+=k(n)+"\n              ",n=s.understanding_tracker_clicked||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),a=s["if"],(v=N.program(8,d,t)).hash={},(v.fn=v).inverse=N.program(10,h,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n              ",n="mm_dntme_blocked",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===y?a.call(e,n,{hash:{}}):a===D?A.call(e,"intl",n,{hash:{}}):a,i+=k(n)+"\n            </div>\n          </div>\n        </div>\n      "}function d(e){var t,n,a,i="";return i+="\n                ",t=null===(t=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",t=typeof(a=s.plural||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"))===y?a.call(e,n,t,{hash:{}}):a===D?A.call(e,"plural",n,t,{hash:{}}):a,i+=k(t)+"\n              "}function h(e){var t,n,a,i="";return i+='\n                <a href=# class="understandingTrackers">',t=null===(t=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",t=typeof(a=s.plural||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"))===y?a.call(e,n,t,{hash:{}}):a===D?A.call(e,"plural",n,t,{hash:{}}):a,i+=k(t)+"</a>\n              "}function p(e,t){var n,a,i="";return i+='\n        <div class="message">\n            <div class="blocked">\n              <div class="host" title="',typeof(n=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===y?n=n.call(e,{hash:{}}):n===D&&(n=A.call(e,"host",{hash:{}})),i+=k(n)+'">',typeof(n=s.host||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"))===y?n=n.call(e,{hash:{}}):n===D&&(n=A.call(e,"host",{hash:{}})),i+=k(n)+'</div>\n                <div class="count">\n                  ',n=null===(n=s.blacklist||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"))||n===undefined||!1===n?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),a=s["if"],(v=N.program(13,m,t)).hash={},(v.fn=v).inverse=N.program(15,u,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n                </div>\n            </div>\n          </div>\n      "}function m(e){var t,n,a="";return a+="\n                    ",t="mm_dntme_trackers_allowed",t=typeof(n=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===y?n.call(e,t,{hash:{}}):n===D?A.call(e,"intl",t,{hash:{}}):n,a+=k(t)+"\n                  "}function u(e,t){var n,a,i="";return i+="\n                    <span>0</span>\n                    ",n=s.understanding_tracker_clicked||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),a=s["if"],(v=N.program(16,g,t)).hash={},(v.fn=v).inverse=N.program(18,f,t),((n=a.call(e,n,v))||0===n)&&(i+=n),i+="\n                    ",n="mm_dntme_blocked",n=typeof(a=s.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===y?a.call(e,n,{hash:{}}):a===D?A.call(e,"intl",n,{hash:{}}):a,i+=k(n)+"\n                  "}function g(e){var t,n,a,i="";return i+="\n                      ",t=null===(t=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",t=typeof(a=s.plural||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"))===y?a.call(e,n,t,{hash:{}}):a===D?A.call(e,"plural",n,t,{hash:{}}):a,i+=k(t)+"\n                    "}function f(e){var t,n,a,i="";return i+='\n                      <a href=# class="understandingTrackers">',t=null===(t=s.trackers||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"))||t===undefined||!1===t?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",t=typeof(a=s.plural||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"))===y?a.call(e,n,t,{hash:{}}):a===D?A.call(e,"plural",n,t,{hash:{}}):a,i+=k(t)+"</a>\n                    "}s=s||e.helpers;var b,_,v,E="",N=this,y="function",A=s.helperMissing,D=void 0,k=this.escapeExpression;return E+='<div class="go-back-tracker"><img src="',b="/pages/images/back.png",b=typeof(_=s.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===y?_.call(t,b,{hash:{}}):_===D?A.call(t,"assetUrl",b,{hash:{}}):_,E+=k(b)+'" width="18px;" style="padding-top:12px;"/></div>\n',b=s.reloadRequired||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),_=s["if"],(v=N.program(1,i,a)).hash={},(v.fn=v).inverse=N.program(3,l,a),((b=_.call(t,b,v))||0===b)&&(E+=b),E}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback}),ABINE_DNTME.define("abine/views/pageTracker",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,n,a,i,s,l){var o=n.View.extend({tagName:"div",templateName:"dntme_page_tracker",className:"dntme_tracker",events:{"click .suggested":"openSuggested","click .tracker":"toggleTracker"},openSuggested:function(e){e.preventDefault(),l.securityManager.openLink({type:"recommended",tracker:this.model.get("name")})},toggleTracker:function(e){e.target.className&&-1!=e.target.className.indexOf("suggested")||(this.model.save({blocked:!this.model.get("blocked")}),this.model.collection.trigger("changed"))},afterInitialize:function(){this.doc=this.el.ownerDocument}}),r=n.ListView.extend({tagName:"div",className:"",viewClass:o}),c=n.View.extend({tagName:"span",templateName:"dntme_page_tracker_title",className:"dntme_tracker_title",events:{"click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),d=n.View.extend({tagName:"span",templateName:"dntme_page_tracker_title_goback",className:"dntme_tracker_title",events:{"click .go-back-tracker":"goBack","click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},goBack:function(){this.trigger("change-dashboard","dashboard")},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),h=n.View.extend({events:{"click .section-header":"toggleSection","click a.trackerDashboard":"trackerDashboard"},tagName:"div",templateName:"dntme_page_tracker_list",className:"dntme_trackers",trackerDashboard:function(e){e.preventDefault(),l.webapp.openStats(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(e){e&&e.preventDefault(),this.options.compact&&this.trigger("show-dashboard")},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){var e=this.options.withGoBack?d:c;return this.children={trackersTitle:new e({model:this.model,doc:this.el.ownerDocument}),trackerList:new r({collection:this.model.trackers,doc:this.el.ownerDocument})},this.children.trackersTitle.transferEvents(["change-dashboard","open:understanding:tracker"],this),this.children}});return h.TitleView=c,h}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_panel=e.template(function(e,t,i,n,a){function s(e){var t,n,a="";return a+='\n          <span class="dashboard">',t="mm_dntme_premium_user",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+"</span>\n        "}function l(e){var t,n,a="";return a+='\n          <span class="premium-link">',
t="mm_dntme_go_premium",t=typeof(n=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"))===p?n.call(e,t,{hash:{}}):n===u?m.call(e,"intl",t,{hash:{}}):n,a+=g(t)+"</span>\n        "}i=i||e.helpers;var o,r,c,d="",h=this,p="function",m=i.helperMissing,u=void 0,g=this.escapeExpression;return d+='<div class="panel">\n  <div class="content-wrap">\n    <div class="page-content clearfix">\n      <img src="',o="pages/images/blur_xclose_ext.png",o=typeof(r=i.assetUrl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"assetUrl",o,{hash:{}}):r,d+=g(o)+'" class="close-link" style="cursor:pointer;position:absolute;left:280px;top:10px;z-index:1;"/>\n      <div class="one">',o="pageContent",o=typeof(r=i.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"child",o,{hash:{}}):r,d+=g(o)+'</div>\n      <div class="two" style="display:none;border-bottom: 1px solid #cccccc;">',o="settingsContent",o=typeof(r=i.child||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"child",o,{hash:{}}):r,d+=g(o)+'</div>\n    </div>\n  </div>\n  <div id="mapForm" style="display:none;text-align: center;padding: 5px;font-weight: bold;border-bottom:1px solid #3498db;"><a href="#">',o="mm_correct_blur",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'</a></div>\n  <div class="header dntme clearfix" style="height:auto;">\n    <div class="logo-link">\n      <img class="logo" id="blur-logo-action" style="margin-left:-4px;height:20px;width:auto;" src="',typeof(o=i.panelLogoBig||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoBig"))===p?o=o.call(t,{hash:{}}):o===u&&(o=m.call(t,"panelLogoBig",{hash:{}})),d+=g(o)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="links">\n        <strong style="color:green;">\n        ',o=i.premium||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"premium"),r=i["if"],(c=h.program(1,s,a)).hash={},(c.fn=c).inverse=h.program(3,l,a),((o=r.call(t,o,c))||0===o)&&(d+=o),d+='\n        </strong>\n      </div>\n      <div class="links help-link">\n         ',o="mm_dntme_help",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+'\n      </div>\n      <div class="links settings-link">\n        ',o="mm_dntme_settings",o=typeof(r=i.intl||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"))===p?r.call(t,o,{hash:{}}):r===u?m.call(t,"intl",o,{hash:{}}):r,d+=g(o)+"\n      </div>\n    </div>\n  </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_panel}),ABINE_DNTME.define("abine/views/dntmePanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","documentcloud/backbone","abine/proxies","abine/views/dntmePage","abine/views/settingsDashboard","abine/intl","abine/timer","abine/responseCodes"],function(h,p,e,a,t,i,n,s,m,l,o,u,g,r){function f(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var b=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,c=e.View.extend({tagName:"div",templateName:"dntme_empty",afterInitialize:function(){this.doc=this.el.ownerDocument},load:function(){var e=this.options.realView();e.load=e.reload,p(this.el).replaceWith(e.el),e.delegateEvents(),this.options.postLoad&&this.options.postLoad(e)}});return t.extend({templateName:"dntme_panel",events:{"click .close-link":"logClose","click .settings-link":"showSettingsView","click .premium-link":"showPremium","click .help-link":"showHelp","click .logo-link":"logoClick","click .home-link":"logoClick","click #pageView":"showPageView","click #mapForm":"mapForm","click .dashboard":"openDashboard","click .premium-a-link":"openPremiumA","click .premium-b-link":"openPremiumB","click .premium":"openPremiumC","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .weeklyReport":"openWeeklyReport","click .medal-notification":"clickedNormalMedalNotification","click .medal-with-card-notification":"clickedMedalWithCardNotification","click #complete-setup":"openPostInstall","click #not-now":"clickedNotNow","click #submit-email":"autoregFromIntrusive","click #seeBlur":"openBlurPage","click .more-options":"closePanel"},logoClick:function(e){e.preventDefault(),this.children.pageContent.model.get("maskmeInstalled")?m.securityManager.openLink({type:"dntme"}):m.webapp.openDashboard(),this.closePanel()},openPostInstall:function(){m.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int1:1}}),m.securityManager.openPostInstall()},clickedNotNow:function(){m.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int2:1}}),this.$("#complete-setup-div").hide(),(new a.Preference).save({key:"notNowClicked",value:"true"}),this.panelId&&this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId})},autoregFromIntrusive:function(){m.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int3:1}}),this.setupUser()},mapForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[0],forms:this.forms}),this.closePanel(e,!0),this.trigger("remove")},setupUser:function(n,a){function i(e,t){try{c.get(0).ownerDocument&&(a?p(".loading-message",c).text(u.getText("mm_loading_display_register_use"+Math.floor(e/5))):p(".loading-message",c).text(u.getText("mm_loading_display_register"+Math.floor(e/5))),e<t&&(d=g.setTimeout(function(){i(e+1,t)},500)))}catch(n){}}n&&n.preventDefault(),a=a||!1;var e=this.$("#protect-email").val(),t=this.$("#password-field").val(),s=0<this.$("#password-field").length,l=this.$("#error");if(l.hide(),!e.match(b))return this.$("#welcome-message").hide(),l.text(u.getText("mm_dntme_invalid_email")).show(),void this.autoResize();if(s&&0==t.length)return this.$("#welcome-message").hide(),l.text(u.getText("mm_dntme_invalid_password")).show(),void this.autoResize();var o=f(6),r={email:e,password:s?t:o,password_hint:u.getText("mm_pwhint_default"),generated_password:!s,register_type:"dnt_intrusive_panel",send_password_email:!s},c=this.$("#progress-section"),d=null;i(0,20),c.show(),this.$("#welcome-message, #form-div").hide(),m.licenseModule.register(r,h.bind(function(e,t){this.processRegistration(e,t,r,h.bind(function(e){e?(this.panelId&&this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),g.clearTimeout(d),c.hide()):(this.panelId&&this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),m.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int4:1}}),this.$("#complete-setup-div").hide(),this.openTour())},this))},this)),this.autoResize()},processRegistration:function(e,t,n,a){if(e){var i=u.getText("mm_dntme_register_error"),s=e.responseJSON&&e.responseJSON.data?e.responseJSON.data.errors:null;"invalid email address"==e.responseJSON.error_code?i=u.getText("mm_dntme_invalid_email_server_error"):e.responseJSON.error_code==r.SCHEDULED_DOWNTIME?i=u.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?i=u.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(i=u.getText("mm_dntme_version_not_allowed"))),this.$("#welcome-message").hide(),this.$("#error").html(i).show(),e.responseJSON&&e.responseJSON.data&&1==e.responseJSON.data.generated_password?this.$("#error #loginButton").click(h.bind(function(e){return m.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(h.bind(function(e){return m.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openLoginPage(),e.preventDefault(),!1},this)),this.$("#error #retryEmail").click(h.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(h.bind(this.openDnt2UpgradePage,this)),this.autoResize(),a(i)}else this.contentManager.preferences.fetchAll(),a()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div, #welcome-message").show(),this.triggerRender()},openDashboard:function(e){m.webapp.openDashboard(),e.preventDefault(),this.closePanel()},openWeeklyReport:function(e){(new a.Preference).save({key:"weeklyReportClickedOn",value:Date.now()}),m.webapp.openWeeklyReport(),e.preventDefault(),this.closePanel()},openCashForCardsSignup:function(e){m.webapp.openCashForCardsSignup(),e.preventDefault(),this.closePanel()},clickedNormalMedalNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000004})},clickedMedalWithCardNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000005})},openPremiumC:function(e){this.options.compact&&!this.options.premium?m.webapp.openPiwikCampaign("extIntFooterC","premium"):m.webapp.openPremium(),e.preventDefault(),this.closePanel()},openPremiumA:function(e){m.webapp.openPiwikCampaign("extIntFooterA","premium"),e.preventDefault(),this.closePanel()},openPremiumB:function(e){m.webapp.openPiwikCampaign("extIntFooterB","premium"),e.preventDefault(),this.closePanel()},showHelp:function(e){e.preventDefault(),m.webapp.openHelp("/faq/faq-configureSettings"),this.closePanel()},showPremium:function(e){e.preventDefault(),m.webapp.openPremium(),this.closePanel()},showPageView:function(e){e&&e.preventDefault(),this.children.pageContent.load(),this.changingView||(this.changingView=!0,this.$(".settings-link").removeClass("highlight"),this.$(".settings-link").show(),this.disableAnimation?(this.$(".one").show(),this.changingView=!1,this.$(".two").hide()):this.$(".one").animate({marginLeft:0},h.bind(function(){this.$(".one").show(),this.changingView=!1,this.$(".two").hide(),this.trigger("resize")},this)),this.$(".settings-link").show())},showSettingsView:function(e,t){if(e&&e.preventDefault&&e.preventDefault(),this.options.domain&&"about:home"==this.options.domain)return p(".settings-link",this.el).attr("title",u.getText("mm_dntme_reload_required_short")),void p(".settings-link",this.el).tooltip("show");if(t)this.trigger("show-settings",{switchTo:t.switchTo,highlight:t.highlight,subPage:t.subPage});else if(this.children.settingsContent.load(),this.$(".settings-link").hasClass("highlight")){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}this.showPageView(e)}else this.options.compact?"medals"==this.options.page?this.trigger("show-settings",{highlight:"showmedals"}):"weekly-report"==this.options.page?this.trigger("show-settings",{highlight:"showweeklyreports"}):this.trigger("show-settings",{highlight:"showtrackersonload"}):this.changingView||(this.changingView=!0,this.children.pageContent&&this.children.pageContent.model&&(this.children.pageContent.model.compact=!1),this.$(".settings-link").addClass("highlight"),this.disableAnimation?(this.$(".two").show(),this.changingView=!1,this.$(".one").hide()):this.$(".one").animate({marginLeft:-310},h.bind(function(){this.$(".two").show(),this.changingView=!1,this.$(".one").hide(),this.trigger("resize")},this)),this.$(".settings-link").hide())},goBack:function(e){e.preventDefault(),this.showPageView(e)},openBlurPage:function(e){e.preventDefault(),m.webapp.openPage("#blur"),this.logClose()},logClose:function(){this.options.cardAlertPanel&&(this.contentManager.preferences.getPref("entitledToPayments")?this.options.messenger.send("update:panelActivity:closed",{panelId:4000005}):this.options.messenger.send("update:panelActivity:closed",{panelId:4000006})),this.options.showBlurGrowl&&(this.contentManager.preferences.setPref("showBlurGrowl","false"),this.contentManager.preferences.setPref("blurGrowlTab","false")),this.closePanel()},bindAutoFade:function(){function e(){i.clearTimeout(n.autoCloseTimer)}function t(){e(),n.autoCloseTimer=i.setTimeout(h.bind(n.closePanel,n),7e3)}if(this.options.compact)if(this.options.cardAlertPanel||this.options.showBlurGrowl);else{var n=this;p(this.el).hover(e,t),t()}else this.doc.defaultView.focus(),this.doc.defaultView.addEventListener("blur",h.bind(function(){this._ignoreBlur||this.closePanel()},this),!1)},fetchFormIds:function(){this.forms=[],this.formIdFetchHooked||(this.formIdFetchHooked=!0,this.messenger.on("form:ids:response",h.bind(function(e){0==this.forms.length&&0<e.length&&this.$("#mapForm").show(),this.forms=this.forms.concat(e)},this))),this.messenger.sendToCS("CS","get:form:ids",this.options.contentManager.frameId)},afterInitialize:function(){this.doc=this.el.ownerDocument,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.options.compact&&(this.opacity="0.8",this.templateName="dntme_compact_panel_c",this.options.showBlurGrowl?(this.templateName="dntme_blur_panel",this.opacity="1.0"):this.options.cardAlertPanel||("weekly-report"==this.options.page?(this.templateName="dntme_compact_panel_weekly_report",this.opacity="1.0"):"medals"==this.options.page?this.templateName="dntme_compact_panel_medal":this.options.premium||(this.options.intrusiveSplit==r.SPLIT_INTRUSIVE_CONTROL?this.templateName="dntme_compact_panel_c":this.options.intrusiveSplit==r.SPLIT_INTRUSIVE_COMPLETE_SETUP_BUTTON?this.templateName="dntme_compact_panel_d":this.options.intrusiveSplit==r.SPLIT_INTRUSIVE_GOT_IT_REG?(this.panelId=4000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_e"):this.options.intrusiveSplit==r.SPLIT_INTRUSIVE_ALWAYS_REG&&(this.panelId=5000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_f"))),this.el.className=this.className=this.templateName),this.bindAutoFade(),this.model={compact:this.options.compact,notNow:this.options.notNow,premium:this.options.premium,registered:this.options.registered,safari:"Safari"!=ABINE_DNTME.config.browser},this.render();var e=this.children;"settings"==this.options.page?(this.disableAnimation=!0,this.options.settingsView="global-panel-settings",this.showSettingsView()):this.options.page in{accounts:1,masking:1,wallet:1}?(this.disableAnimation=!0,this.showSettingsView()):"trackers"==this.options.page?(e.pageContent.load(),i.setTimeout(h.bind(function(){this.children.pageContent.showTrackers()},this),100)):e.pageContent.load(),"Firefox"==ABINE_DNTME.config.browser&&this.$("#blur-logo-action").css("margin-top","3px")},getPageView:function(){var e=new l({doc:this.el.ownerDocument,contentManager:this.options.contentManager,messenger:this.messenger,dynamicPanel:this.options.dynamicPanel,domain:this.options.domain,compact:this.options.compact,cardAlertPanel:this.options.cardAlertPanel,showBlurGrowl:this.options.showBlurGrowl,highlight:this.options.highlight,switchTo:this.options.switchTo,page:this.options.page,premium:this.options.premium,timeout:this.options.timeout});return e.transferEvents(["resize","max-height","show-trackers","show-dashboard","show-medals","show-report","ignore-blur"],this),e.on("close",h.bind(function(){this.closePanel()},this)),e.on("show-settings",h.bind(this.showSettingsView,this)),e.on("fav-icons",h.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this)),e.on("ignore-blur",h.bind(function(e){this._ignoreBlur=e},this)),e.on("open:understanding:tracker",h.bind(function(){m.webapp.openPage("/#/understandingTracking"),(new a.Preference).save({key:"understanding_tracker_clicked",value:"true"}),this.contentManager.preferences.fetchAll(),this.closePanel()},this)),e.on("refresh-preferences",h.bind(function(){this.contentManager.preferences.fetchAll()},this)),e},getSettingsView:function(){var e=new a.TabData({messenger:this.options.messenger}),t=new a.GlobalData({messenger:this.options.messenger}),n=new o({tabData:e,globalData:t,doc:this.el.ownerDocument,messenger:this.messenger,highlight:this.options.highlight,contentManager:this.contentManager,settingsView:this.options.settingsView,switchTo:this.options.switchTo});return delete this.options.highlight,n.transferEvents(["resize","max-height"],this),n.on("close",h.bind(function(){this.closePanel()},this)),n.on("showPageView",h.bind(function(){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}this.showPageView()},this)),n},setDelayedView:function(t,e){var n=this;this.children[t]=new c({doc:this.el.ownerDocument,realView:h.bind(e,this),postLoad:function(e){n.children[t]=e}})},createChildren:function(){return this.children={},this.setDelayedView("pageContent",this.getPageView),this.setDelayedView("settingsContent",this.getSettingsView),this.children}})}),ABINE_DNTME.require(["abine/contentMessenger","abine/assets","abine/views/commonhelpers","abine/eventLogger"],function(e){function t(){ABINE_DNTME.startTime=Date.now(),n(function(){ABINE_DNTME.contentMessenger.on("init-"+ABINE_DNTME.context,function(e){e.message_id in i||(i[e.message_id]=!0,a(e))}),ABINE_DNTME.contentMessenger.sendToCS("CS","panel-ready-"+ABINE_DNTME.context)})}function n(e){ABINE_DNTME.requireDuckbone(function(){ABINE_DNTME.requireModels(e)})}function a(a){ABINE_DNTME.require(["abine/proxyContentManager"],function(e){var t=window.contentManager;if(!t){window.contentManager=t=new e.ContentManager(a);var n=function(){t.destroy()};window.addEventListener("unload",n,!1)}t.show(a.view)})}ABINE_DNTME.context=window.location.href.substr(window.location.href.indexOf("?")+1),ABINE_DNTME.contentMessenger=ABINE_DNTME.contentMessenger||new e.ContentMessenger({document:document});var i={};setInterval(function(){i={}},6e4),t()});