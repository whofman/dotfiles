/**
 * Blur Copyright (c) 2008-2015 by Abine, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information
 * of Abine, Inc. ("Confidential Information"), subject
 * to the Non-Disclosure Agreement and/or License Agreement you entered
 * into with Abine. You shall use such Confidential Information only
 * in accordance with the terms of said Agreement(s). Abine makes
 * no representations or warranties about the suitability of the
 * software. The software is provided with ABSOLUTELY NO WARRANTY
 * and Abine will NOT BE LIABLE for ANY DAMAGES resulting from
 * the use of the software.
 *
 * Contact license@getabine.com with any license-related questions.
 *
 * https://www.abine.com
 * @license
 *
 */ABINE_DNTME.define("abine/timer",[],function(){var a=1,r={},e=function(e,t){var n=a++,i=Cc["@mozilla.org/timer;1"].createInstance(Ci.nsITimer);return(r[n]=i).initWithCallback(function(){delete r[n],e()},t,Ci.nsITimer.TYPE_ONE_SHOT),n},t=function(e){try{e in r&&(r[e].cancel(),delete r[e])}catch(t){}},n=function(e,t){var n=a++,i=Cc["@mozilla.org/timer;1"].createInstance(Ci.nsITimer);return(r[n]=i).initWithCallback(e,t,Ci.nsITimer.TYPE_REPEATING_SLACK),n},i={};return"undefined"!=typeof window&&"function"==typeof window.setTimeout?i.setTimeout=function(e,t){return ABINE_DNTME.log,window.setTimeout.apply(window,arguments)}:i.setTimeout=e,"undefined"!=typeof window&&"function"==typeof window.clearTimeout?i.clearTimeout=function(){window.clearTimeout.apply(window,arguments)}:i.clearTimeout=t,"undefined"!=typeof window&&"function"==typeof window.setInterval?i.setInterval=function(){return window.setInterval.apply(window,arguments)}:i.setInterval=n,"undefined"!=typeof window&&"function"==typeof window.clearInterval?i.clearInterval=function(){window.clearInterval.apply(window,arguments)}:i.clearInterval=t,i}),ABINE_DNTME.define("abine/intl",[],function(){function i(e,t){if(e in o)if(e in s)r=BUNDLE[e],a=e,t();else{var n=document.createElement("script");n.setAttribute("src","locales/"+e+".js"),n.addEventListener("load",function(){s[e]=!0,r=BUNDLE[e],a=e,t()}),n.addEventListener("error",function(){i("en",t)}),document.getElementsByTagName("body")[0].appendChild(n)}else i("en",t)}var a=navigator.language.replace(/\-.*/,"").toLowerCase(),r=null,s={en:1},o={en:1,de:1,fr:1,it:1,nl:1,pl:1,pt:1,zh:1};return{setupLocale:i,getLang:function(){return a},getText:function(e,n){n&&"object"!=typeof n&&(n=[n]);var t=null;if(e=e.replace(/\./g,"_"),r)try{(t=r[e]||BUNDLE.en[e])&&n&&(t=t.replace(/\{([0-9]+)\}/g,function(e,t){return n[parseInt(t)]+""}))}catch(i){}return t&&""!=t||(t="***"+e),t}}});
/*!
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
var CryptoJS=CryptoJS||function(d,n){var e={},t=e.lib={},i=t.Base=function(){function n(){}return{extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=n?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,a=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<a;r++){var s=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=s<<24-(i+r)%4*8}else if(65535<n.length)for(r=0;r<a;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=a,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=d.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*d.random()|0);return new u.init(t,e)}}),a=e.enc={},r=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],a=0;a<n;a++){var r=t[a>>>2]>>>24-a%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(n,t/2)}},s=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],a=0;a<n;a++){var r=t[a>>>2]>>>24-a%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(n,t)}},o=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},l=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=o.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,a=this.blockSize,r=i/(4*a),s=(r=e?d.ceil(r):d.max((0|r)-this._minBufferSize,0))*a,o=d.min(4*s,i);if(s){for(var l=0;l<s;l+=a)this._doProcessBlock(n,l);var c=n.splice(0,s);t.sigBytes-=o}return new u.init(c,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),c=(t.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new c.HMAC.init(n,t).finalize(e)}}}),e.algo={});return e}(Math);
/*!
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
/*!
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
!function(){var e=CryptoJS,t=e.lib,n=t.WordArray,i=t.Hasher,a=e.algo,u=[],r=a.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],a=n[1],r=n[2],s=n[3],o=n[4],l=0;l<80;l++){if(l<16)u[l]=0|e[t+l];else{var c=u[l-3]^u[l-8]^u[l-14]^u[l-16];u[l]=c<<1|c>>>31}var d=(i<<5|i>>>27)+o+u[l];d+=l<20?1518500249+(a&r|~a&s):l<40?1859775393+(a^r^s):l<60?(a&r|a&s|r&s)-1894007588:(a^r^s)-899497514,o=s,s=r,r=a<<30|a>>>2,a=i,i=d}n[0]=n[0]+i|0,n[1]=n[1]+a|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(r),e.HmacSHA1=i._createHmacHelper(r)}(),
/*!
 CryptoJS v3.1.2
 code.google.com/p/crypto-js
 (c) 2009-2013 by Jeff Mott. All rights reserved.
 code.google.com/p/crypto-js/wiki/License
 */
ABINE_DNTME.define("cryptojs",function(){return{SHA1:function(e){return CryptoJS.SHA1(e).toString()}}}),ABINE_DNTME.define("abine/core",["documentcloud/underscore"],function(a){var e={on:function(e,t,n){var i=this._callbacks||(this._callbacks={}),a=i[e]||(i[e]={}),r=a.tail||(a.tail=a.next={});return r.callback=t,r.context=n,a.tail=r.next={},this},off:function(e,t){var n,i,a;if(e){if(n=this._callbacks)if(t){if(i=n[e])for(;(a=i)&&(i=i.next);)if(i.callback===t){a.next=i.next,i.context=i.callback=null;break}}else n[e]={}}else this._callbacks=null;return this},trigger:function(e){var t,n,i,a,r,s=["all",e];if(!(n=this._callbacks))return this;for(;r=s.pop();)if(t=n[r])for(a="all"==r?arguments:Array.prototype.slice.call(arguments,1);t=t.next;)(i=t.callback)&&i.apply(t.context||this,a);return this},once:function(e,t,n){function i(){return a.off(e,i),t.apply(this,arguments)}var a=this;return this.on(e,i,n)},onceAny:function(){function t(){for(var e=0;e<n.length;e++)this.off.apply(this,[n[e][0],t]),this.off.apply(this,n[e])}for(var n=arguments,e=0;e<arguments.length;e++)this.on.apply(this,arguments[e]),this.on.apply(this,[arguments[e][0],t]);return this},hasListeners:function(e){var t,n;if(!(n=this._callbacks))return!1;if(!(t=n[e]))return!1;for(;t=t.next;)if(t.callback)return!0;return!1}};e.bind=e.on,e.unbind=e.off;var r=function(){},i=function(e,t,n){var i;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},a.extend(i,e),r.prototype=e.prototype,i.prototype=new r,t&&a.extend(i.prototype,t),n&&a.extend(i,n),(i.prototype.constructor=i).__super__=e.prototype,i},t=function(e,t){var n=i(this,e,t);return n.extend=this.extend,n},n=function n(){this.initialize.apply(this,arguments)};return a.extend(n.prototype,e,{initialize:function s(){}}),n.extend=t,{BaseClass:n,Events:e}}),ABINE_DNTME.define("abine/simulateEvents",["documentcloud/underscore"],function(){return function(){function e(e,t,n){var i,a=e.ownerDocument,r=l(d,n||{}),s=null;for(var o in c)if(c[o].test(t)){s=o;break}if(!s)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return a.createEvent?("HTMLEvents"==s?(i=a.createEvent(s)).initEvent(t,r.bubbles,r.cancelable):i=new a.defaultView.MouseEvent(t,r),e.dispatchEvent(i)):(r.clientX=r.pointerX,r.clientY=r.pointerY,i=l(a.createEventObject(),r),e.fireEvent("on"+t,i)),e}function l(e,t){for(var n in t)e[n]=t[n];return e}function t(){!function(){function h(n,i,a){i=i||{};var r=n.ownerDocument||n,s=r.createEvent?r.createEvent("CustomEvent"):r.createEventObject();for(var e in s.initCustomEvent&&s.initCustomEvent(i.type,!!i.bubbles,!!i.cancelable,i.detail),i)s[e]=i[e];return setTimeout(function(){try{n.dispatchEvent?n.dispatchEvent(s):n.fireEvent("on"+i.type,r.createEventObject())}catch(o){var e=n["listen"+i.type];if(e)for(var t=0;t<e.length;++t)try{e[t].call(n,s)}catch(o){}}a()},0),this}function f(e,t,n){function i(e,t){try{var n=e.ownerDocument;if(n.createEventObject){var i=n.createEventObject();e.fireEvent("on"+t,i)}else(i=n.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(i)}catch(a){}}var a=!0,r=e.className&&-1!=e.className.indexOf("fancified");if(window.jQuery){var s=window.jQuery(e);try{if(s.selectBoxIt)s.selectBoxIt("selectOption",s.val());else if(s.data("chosen")||s.chosen)s.trigger("chosen:updated").trigger("liszt:updated");else if(s.data("chooserElement"))s.trigger("change");else if(s.fancySelect)s.get("fancySelect").select("value",s.val());else if(s.selectBox)s.selectBox("value",s.val());else if(s.selectric)s.selectric("refresh");else if(s.coreUISelect){var o=s.data("coreUISelect");o.isSelectShow=!0,o.changeDropdownData(),o.isSelectShow=!1}else if(s.data("myJSPulldownObject"))s.data("myJSPulldownObject").setToValue(s.val());else if(s.fancyfields)s.setVal(s.val());else if(s.data("select2"));else if(s.data("selectize"))a=!1,s.data("selectize").setValue(s.val());else if(s.hasClass("fancified"))s.trigger("update");else if(s.selectmenu){var l=s.val();try{s.selectmenu("value",s[0].options[0].value)}catch(c){}s.selectmenu("value",l)}else s.hasClass("select-hidden")&&s.next("div.select-styled").length&&s.next("div.select-styled").next(".select-options").length&&(ulElement=s.next("div.select-styled").next(".select-options"),liElement=ulElement.find("li[rel='"+s.val()+"']"),liElement.click());s.trigger("change")}catch(c){}}a&&(r&&i(e,"update"),i(e,"change"),i(e,"blur")),n()}function r(t,n,i,a){var r=t.value;h(t,{type:"keydown",keyCode:n,which:n,charCode:n,bubbles:!0},function(){h(t,{type:"keypress",keyCode:n,which:n,charCode:n,bubbles:!0},function(){setTimeout(function(){var e=t.value;r==e&&(t.value=i),h(t,{type:"input",keyCode:n,which:n,charCode:n,bubbles:!0},function(){h(t,{type:"keyup",keyCode:n,which:n,charCode:n,bubbles:!0},function(){a()})})},1)})})}function s(e,t,n,i){if(t&&""!=t){var a=t.charCodeAt(0);n+=t.charAt(0),r(e,a,n,function(){s(e,t.substring(1),n,i)})}else i()}function l(e,t,n){if(window.abineTriggerChangeInProgress)setTimeout(function(){l(e,t,n)},100);else{e.setAttribute("mmautofilling","now"),e.focus(),e.value=t;var i=!0;window.abineTriggerChangeInProgress=!0;try{if(window.jQuery){var a=window.jQuery(e);a.data("rawMaskFn")||a.mask||a.CardPhoneFormatting?a.focus().val(t).trigger("input").trigger("paste"):a.next(".inner").find(".options").length&&(i=!1,a.next(".inner").find(".options").find("span").each(function(){var e=$(this);-1<$(e).html().toLowerCase().indexOf(t)&&$(e).click()}))}}catch(o){}e.defaultValue=t;try{var r=e._valueTracker;r&&r.setValue(t+"old")}catch(o){}try{e.__preactattr_&&e.__preactattr_.onChange&&(e.value=t,e.__preactattr_.onChange({target:e}),e.click())}catch(o){}try{var s=new Event("input",{bubbles:!0,cancelable:!0,data:t});s.simulated=!0,e.dispatchEvent(s)}catch(o){}try{h(e,{type:"keyup",keyCode:38,which:38,charCode:38,bubbles:!0},function(){})}catch(o){}i?h(e,{type:"change"},function(){h(e,{type:"blur"},function(){window.abineTriggerChangeInProgress=!1,e.removeAttribute("mmautofilling"),n()})}):(e.removeAttribute("mmautofilling"),window.abineTriggerChangeInProgress=!1,n())}}function t(e,t,n){try{e.ownerDocument.defaultView.focus()}catch(i){}h(e,{type:"focus"},function(){h(e,{type:"click"},function(){s(e,t+"\n","",function(){l(e,t,function(){h(document,{type:"abineFilled"},function(){n()})})})})})}function i(e,t,n,i){var a=/[\s]+/g,r=(t||"").toLowerCase().replace(a,""),s=function(){h(document,{type:"abineFilled"},function(){i()})},o=!1,l=!1,c=e.getElementsByTagName("option");if(c&&0<c.length){for(var d=-1,u=0;u<c.length;u++){var m=(c[u].text||"").toLowerCase().replace(a,"");if((c[u].getAttribute("value")||"").toLowerCase().replace(a,"")==r||m==r){c[u].selected||(o=!0,c[u].selected=!0),l=!0;break}-1==d&&-1!=m.indexOf(r)&&(d=u)}l||-1==d||n||c[d].selected||(o=!0,l=c[d].selected=!0)}e.setAttribute("abineFillResponse",l),o?f(e,t,s):s()}function a(){if(0<(t=document.getElementsByClassName("abineFillTarget")).length)return t[0];for(var e=0;e<frames.length;e++)try{var t;if(0<(t=frames[e].document.getElementsByClassName("abineFillTarget")).length)return t[0]}catch(o){}return null}function e(){var n=document.createElement("div");n.id="abineFillElement","undefined"!=typeof paypal&&n.setAttribute("data-paypal","1"),"undefined"!=typeof OffAmazonPayments&&n.setAttribute("data-amazon","1"),"undefined"!=typeof MasterPass&&n.setAttribute("data-masterpass","1"),document.documentElement.appendChild(n),n.addEventListener("fill",function(){var e=a();e?t(e,n.getAttribute("value"),function(){}):h(document,{type:"abineFilled"},function(){})},!1),n.addEventListener("fillSelect",function(){var e=a();e?i(e,n.getAttribute("value"),!!n.getAttribute("skipPartial"),function(){}):h(document,{type:"abineFilled"},function(){})}),n.addEventListener("triggerChange",function(){var e=a(),t=n.getAttribute("value");e&&(e.nodeName.match(/select/i)?f(e,t,function(){}):l(e,t,function(){}))})}e()}()}function o(){return"("+t+")()"}var c={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},d={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0};return{simulate:e,getAsyncFillString:o,asyncFillFunctions:t}}.call(this)}),ABINE_DNTME.define("abine/filler",["documentcloud/underscore","jquery","abine/timer","abine/simulateEvents"],function(v,y,e,s){var _=e.setTimeout;return function(){var g={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AC:"Ascension Island",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",BQ:"British Antarctic Territory",IO:"British Indian Ocean Territory",VG:"British Virgin Islands",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",IC:"Canary Islands",CT:"Canton and Enderbury Islands",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",EA:"Ceuta and Melilla",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CP:"Clipperton Island",CC:"Cocos [Keeling] Islands",CO:"Colombia",KM:"Comoros",CD:"Congo [DRC]",CK:"Cook Islands",CR:"Costa Rica",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DG:"Diego Garcia",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",NQ:"Dronning Maud Land",TL:"East Timor",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands [Islas Malvinas]",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",FQ:"French Southern and Antarctic Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JT:"Johnston Island",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LS:"Lesotho",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau",MK:"Macedonia [FYROM]",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",FX:"Metropolitan France",MX:"Mexico",FM:"Micronesia",MI:"Midway Islands",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NT:"Neutral Zone",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",VD:"North Vietnam",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",QO:"Outlying Oceania",PC:"Pacific Islands Trust Territory",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territories",PA:"Panama",PZ:"Panama Canal Zone",PY:"Paraguay",YD:"People's Democratic Republic of Yemen",PE:"Peru",PH:"Philippines",PN:"Pitcairn Islands",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RO:"Romania",RU:"Russia",RW:"Rwanda",RE:"R&eacute;union",BL:"Saint Barth&eacute;lemy",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",CS:"Serbia and Montenegro",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",KR:"South Korea",ES:"Spain",LK:"Sri Lanka",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",ST:"S&atilde;o Tom&eacute; and Pr&iacute;ncipe",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TA:"Tristan da Cunha",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UM:"U.S. Minor Outlying Islands",PU:"U.S. Miscellaneous Pacific Islands",VI:"U.S. Virgin Islands",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:["United States of America","United States"],UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican City",VE:"Venezuela",VN:"Vietnam",WK:"Wake Island",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",AX:"&Aring;land Islands"},f={AK:"Alaska",AL:"Alabama",AP:"Armed Forces Pacific",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},b={1:"US",43:"AT",49:"DE",32:"BE",45:"DK",358:"FI",33:"FR",353:"IE",39:"IT",31:"NL",48:"PL",351:"PT",27:"ZA",34:"ES",46:"SE",44:"GB"},a={"short":"jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec".split(","),"long":"january,february,march,april,may,june,july,august,september,october,november,december".split(",")},p=/macys\.com|bathandbodyworks\.com/,m=/[\s]+/g,e=function(e,t,n,i){this.document=e,this.domain=t,this.asyncFilling="stripe.com"!=t&&t&&t.match(n),this.caller=i,this.injectFormFillingScript()};return e.prototype={injectFormFillingScript:function(){var e=s.getAsyncFillString(),t=this.document.createElement("script");if(t.textContent=e,(this.document.head||this.document.documentElement).appendChild(t),this.document.addEventListener("abineFilled",v.bind(this.fillFieldCallback,this),!0,!0),!this.document.getElementById("abineFillElement"))try{s.asyncFillFunctions()}catch(n){}},fillFieldCallback:function(){this.currentFillCB&&this.currentFillCB()},fillFieldAsync:function(e,t){this.currentFillCB=t;var n=this.document.createEvent("Event");n.initEvent("fill",!0,!0);var i=this.document.getElementById("abineFillElement");i.setAttribute("value",e),i.dispatchEvent(n)},triggerFieldChange:function(e,t){this.currentFillCB=null,y(e.element).addClass("abineFillTarget").attr("blurFilled",1);try{var n=this.document.createEvent("Event");n.initEvent("triggerChange",!0,!0);var i=this.document.getElementById("abineFillElement");i.setAttribute("value",t),i.removeAttribute("skipPartial");try{i.dispatchEvent(n)}catch(a){}}catch(a){}y(".abineFillTarget",e.element.ownerDocument).removeClass("abineFillTarget")},fillSelectFieldAsync:function(e,t,n){this.currentFillCB=n;var i=this.document.createEvent("Event");i.initEvent("fillSelect",!0,!0);var a=this.document.getElementById("abineFillElement");a.setAttribute("value",e),t?a.setAttribute("skipPartial","1"):a.removeAttribute("skipPartial"),a.dispatchEvent(i)},fillTextField:function(e,t){e.setAttribute("mmautofilling","now"),y(e).val(t);try{this.triggerKeyboardEvent("keydown",e),this.triggerKeyboardEvent("keyup",e),this.triggerKeyboardEvent("keypress",e),this.triggerKeyboardEvent("change",e)}catch(i){}try{var n=new Event("input",{bubbles:!0,cancelable:!0});e.dispatchEvent(n)}catch(i){}e.removeAttribute("mmautofilling","now")},triggerKeyboardEvent:function(e,t){var n=this.document.createEvent("KeyboardEvent");n.initKeyboardEvent?n.initKeyboardEvent(e,!0,!0,null,!1,!1,!1,!1,9,0):n.initKeyEvent&&n.initKeyEvent(e,!0,!0,null,!1,!1,!1,!1,9,0),t.dispatchEvent(n)},fillFields:function(e,t,n,i,a,r,s){this.formStrategy=e,"current"==t?this.fillCurrentFieldAsync(n,i,a,r,s):"email"==t?this.fillEmailFieldsAsync(n,i,a,r,s):"password"==t?this.fillPasswordFieldsAsync(n,i,a,r,s):"login"==t||"login-no-submit"==t?this.fillLoginFieldsAsync(n,i,a,r,s):"phone"==t?this.fillPhoneFieldsAsync(n,i,a,r,s):"address"==t?this.fillAddressFieldsAsync(n,i,a,r,s):"payment"==t?this.fillPaymentFieldsAsync(n,i,a,r,v.bind(function(){i.address&&this.hasVisibleField("/contact/postaladdress")?this.fillAddressFieldsAsync(n,i.address,a,r,s):s()},this)):"identity"==t&&this.fillIdentityFieldsAsync(n,i,a,r,s)},_elementInDocument:function(e){for(var t=e.ownerDocument;e=e.parentNode;)if(e==t)return!0;return!1},hasVisibleField:function(t){var e=this.formStrategy.getFields(),n=this;return!!v.find(e,function(e){return!(!e.dataType||e.dataType!=t&&-1==e.dataType.indexOf(t+"/"))&&n.isVisible(e.element)})},reloadFieldElement:function(e){try{if(!this._elementInDocument(e.element)){var t=e.element.ownerDocument,n=null;if(e.id&&(n=t.getElementById(e.id)),!n&&e.name){var i=y("input[name="+e.name+"]",t);1==i.length&&(n=i[0])}if(!n&&e.className){var a="."+e.className.replace(/(^[\s]+)|([\s]+$)/g,"").replace(/[\s]+/g,".");1==(i="select"==e.fieldType?y("select"+a):y("input"+a)).length&&(n=i[0])}n&&(e.element=n)}}catch(r){}},reloadFormIfRequired:function(e){var t=this;if(v.find(e,function(e){return!t.isVisible(e.element)})){var n=t.formStrategy.refreshOnFormChange(e);if(n!==e){for(var i in e)delete e[i];for(var i in n)e[i]=n[i]}}return e},fillFieldsValuesByType:function(t,n,i,e,a,r,s,o,l){if(y.isArray(e)){var c=this;v.async.series(e.map(function(e){return function(){c.fillFieldsByType(t,n,i,e,a,r,s,o,l)}}),l)}else this.fillFieldsByType(t,n,i,e,a,r,s,o,l)},fillFieldsByType:function(e,o,l,c,d,t,n,u,i){var m=!1;if(i=i||function(){},null===c||""==c||void 0===c)return i(!1),!1;var a=this.getFieldsOfType(o,e,t,l,n);if(a.length!=(a=this.removedFieldsAlreadyFilled(a,c)).length&&(m=!0),0==a.length)return i(m),m;v(a).each(v.bind(function(e){e.element.setAttribute("mmautofilling","now"),y(e.element).removeData("abineManualTyped"),e.oldVal=y(e.element).val(),e.oldVal&&""!=e.oldVal&&"select"!=e.fieldType&&y(e.element).val("")},this));var h=!1;v(["uniqlo.com"]).contains(this.domain)&&(h=!0);var f=this;return v(a).each(v.bind(function(e){function n(e){var t="select"!=e.fieldType&&!f.domain.match(p)&&e.oldVal!=y(e.element).val();if(y(e.element).data("mmFillType",l),t&&(f.triggerFieldChange(e,c),h))try{y(e.element).click()}catch(n){}delete e.oldVal,d&&(e.disposableGUID=d.disposableGUID,f.formStrategy.triggerPanelFillEvent({domain:d.domain,origin:d.origin,accountId:d.accountId,field:e}))}if("select"!=e.fieldType&&-1==["tdameritrade.com"].indexOf(f.domain)&&y(e.element).focus(),l&&l.match("/password")&&"text"==e.element.type){try{y(e.element).val(c)}catch(s){}var i=e.element.form;_(v.bind(function(e){var t=y("[type='password']",i);if(0<t.length){e=v(o).find(function(e){return e.element==t[0]})||e;try{t.focus()}catch(s){}y(t).val(c),f.markFieldFilled(e),n(e)}else n(e)},f,e),100)}else{if(c+="","select"!=e.fieldType?y(e.element).val(c):m=f.setSelectValue(e,c,u),("select"==e.fieldType?f.getSelectValue(e.element):y(e.element).val())==c){if(m=!0,"select"==e.fieldType&&l.match(/month/i)){var t=f.getSelectValues(e.element),a=t[t.length-1];if(11==parseInt(a)){var r=parseInt(c)-1;f.setSelectValue(e,r,u)}}e.maxlength&&c.length>e.maxlength&&(m=!1)}f.markFieldFilled(e),n(e)}},this)),v(a).each(v.bind(function(e){e.element.removeAttribute("mmautofilling")},this)),i(m),m},markFieldFilled:function(e){try{"rgba(0, 0, 0, 0)"!=e.element.defaultView.getComputedStyle(e.element).getPropertyValue("background-color")&&y(e.element).css({color:"#0000aa","background-color":"#ffffee"})}catch(t){}},isVisible:function(e){try{return y(e).is(":visible")&&"hidden"!=y(e).css("visibility")}catch(t){}return!0},getMonthAlternates:function(e,t){var n=[],i=parseInt(e);return t?i<10?n.push("0"+i):n.push(""+i):(n.push(a["long"][i-1]),n.push(a["short"][i-1]),i<10&&n.push("0"+i),n.push(""+i)),n},postFillAsync:function(e,t,n,i,a,r,s){var o,l=this;if(y(e.element).data("mmFillType",t),l.markFieldFilled(e),o="select"==e.fieldType?l.getSelectValue(e.element):y(e.element).val(),r||o==n){if(r=!0,"select"==e.fieldType&&t.match(/month/i)&&!isNaN(parseInt(n))){var c=l.getSelectValues(e.element),d=c[c.length-1];if(11==parseInt(d)){var u=parseInt(n)-1;l.setSelectValue(e,u)}}e.maxlength&&n.length>e.maxlength&&(r=!1)}delete e.oldVal,i&&(e.disposableGUID=i.disposableGUID,l.formStrategy.triggerPanelFillEvent({domain:i.domain,origin:i.origin,accountId:i.accountId,field:e})),s(r)},getSelectOptions:function(e){var t,n=y(e).data("selectize"),i=[];if(n)for(var a in t=n.options)i.push({text:t[a].text,value:t[a].value});else{t=e.options;for(var r=0;r<t.length;r++)i.push({text:t[r].text,value:t[r].value})}return i},getSelectTextValues:function(e){return v.map(this.getSelectOptions(e),function(e){return e.text})},getSelectValues:function(e){return v.map(this.getSelectOptions(e),function(e){return e.value})},getSelectValue:function(e){var t=y(e).data("selectize");return t?t.getValue():y(e).val()},setSelectValue:function(e,t,n){var i=e.element,a=!1,r=!1,s=(t||"").toString().toLowerCase().replace(m,""),o=i.getElementsByTagName("option");if(o&&0<o.length){for(var l=-1,c=0;c<o.length;c++){var d=(o[c].text||"").toLowerCase().replace(m,""),u=(o[c].value||"").toLowerCase().replace(m,"");if(u==t||d==s){o[c].selected||(a=o[c].selected=!0),r=!0;break}-1!=l||-1==d.indexOf(s)&&-1==u.indexOf(s)||(l=c)}r||-1==l||n||(o[l].selected||(a=!0,o[l].selected=!0),r=!0)}return a&&this.triggerFieldChange(e,t),r},fillFieldOfTypeAsync:function(t,n,i,a,r,s){var o=this;"select"==t.fieldType?(y(t.element).addClass("abineFillTarget"),this.fillSelectFieldAsync(i,r,function(){y(".abineFillTarget",t.element.ownerDocument).removeClass("abineFillTarget");var e="true"==y(t.element).attr("abineFillResponse");y(t.element).removeAttr("abineFillResponse"),o.postFillAsync(t,n,i,a,r,e,s)})):(y(t.element).addClass("abineFillTarget"),this.fillFieldAsync(i,function(){y(".abineFillTarget",t.element.ownerDocument).removeClass("abineFillTarget");var e="true"==y(t.element).attr("abineFillResponse");y(t.element).removeAttr("abineFillResponse"),o.postFillAsync(t,n,i,a,r,e,s)}))},findAndFillRemovedFieldAsync:function(e,t,n,i,a,r){var s,o=this;if(e.id&&""!=e.id&&(s=o.document.getElementById(e.id)),!s&&e.name&&""!=e.name){var l=o.document.getElementsByName(e.name);1==l.length&&(s=l[0])}s?(e.element=s,o.fillFieldOfTypeAsync(e,t,n,i,a,function(e){r(e)})):r(!1)},fillFieldsOfTypeAsync:function(n,i,a,r,s,o,l){var c=this,d=null;0!=n.length?(d=n.shift(),c.fillFieldOfTypeAsync(d,i,a,r,s,function(e){o=o||e;var t=d.element.ownerDocument;y.contains(t.documentElement,d.element)?_(function(){c.fillFieldsOfTypeAsync(n,i,a,r,s,o,l)},100):c.findAndFillRemovedFieldAsync(d,i,a,r,s,function(e){o=o||e,c.fillFieldsOfTypeAsync(n,i,a,r,s,o,l)})})):l(o)},getFieldsOfType:function(e,n,i,a,r){var s=this;return v(e).filter(function(e){if(s.reloadFieldElement(e),null==a&&e.signature==n)return!0;if(e.signature!=n){var t=y(e.element);if(t.data("abineManualTyped")){if(""!=t.val())return!1;t.removeData("abineManualTyped")}}return e.dataType&&(!i&&-1!=e.dataType.indexOf(a)||i&&e.dataType==a)&&(r||s.isVisible(e.element))})},removedFieldsAlreadyFilled:function(e,a){var r=(a+"").toLowerCase().replace(m,"");return v(e).filter(function(e){if("select"==e.fieldType&&0<=e.element.selectedIndex){var t=(y(e.element).val()||"").toString();if(t==a||t.toLowerCase().replace(m,"")==r)return!1;try{var n=e.element.options[e.element.selectedIndex].text;if(n==a||n.toLowerCase().replace(m,"")==r)return!1}catch(i){}}return!0})},fillFieldsValuesByTypeAsync:function(n,i,a,e,r,s,o,l,t){if(y.isArray(e)){var c=this;v.async.series(e.map(function(t){return function(e){c.fillFieldsByTypeAsync(n,i,a,t,r,s,o,l,e)}}),t)}else this.fillFieldsByTypeAsync(n,i,a,e,r,s,o,l,t)},fillFieldsByTypeAsync:function(e,t,n,i,a,r,s,o,l){if(!this.asyncFilling)return this.fillFieldsByType(e,t,n,i,a,r,s,o,l);var c=!1;if(l=l||function(){},null===i||""==i||void 0===i)return l(),c;i+="";var d=this.getFieldsOfType(t,e,r,n,s);if(d.length!=(d=this.removedFieldsAlreadyFilled(d,i)).length&&(c=!0),0==d.length)return l(c),c;v(d).each(v.bind(function(e){e.element.setAttribute("mmautofilling","now"),y(e.element).removeData("abineManualTyped"),e.oldVal=y(e.element).val(),e.oldVal&&""!=e.oldVal&&y(e.element).val("")},this)),this.fillFieldsOfTypeAsync(v.clone(d),n,i,a,o,c,function(e){v(d).each(function(e){e.element.removeAttribute("mmautofilling")}),l(e)})},fillCurrentFieldAsync:function(e,t,n,i,a){var r=this.formStrategy.getFields(),s={domain:n,origin:i};a=a||function(){},i&&i.origin&&((s=i).domain=n),this.fillFieldsByTypeAsync(e,r,null,t,s,!1,null,null,a)},fillEmailFieldsAsync:function(e,t,n,i,a){var r=this.formStrategy.getFields(),s={domain:n,origin:i};a=a||function(){},i&&i.origin&&((s=i).domain=n),this.fillFieldsByTypeAsync(e,r,"/contact/email",t,s,!1,null,null,a)},fillPasswordFieldsAsync:function(e,t,n,i,a){var r=this.formStrategy.getFields(),s={domain:n,origin:i},o=!1;a=a||function(){},i&&i.origin&&((s=i).domain=n,o=s.exactTypeMatch),this.fillFieldsByTypeAsync(e,r,"/password",t,s,o,null,null,a)},fillPhoneFieldsAsync:function(n,e,t,i,a){var r=this.formStrategy.getFields(),s={domain:t,origin:i};a=a||function(){};var o=r[n],l="";o&&o.dataType&&o.dataType.match(/work|home|mobile/)&&o.dataType.match(/phone/)&&(l="/"+o.dataType.split("/").pop());var c,d,u,m,h=e.country_code,f=e.number;1===parseInt(h)?(c=f.substr(0,3),u=f.substr(3,3),m=f.substr(6,4),d=u+"-"+m):d="+"+h+f;var p=this,y=!1;v.async.series([function(t){p.fillFieldsByTypeAsync(n,r,"/contact/phone/countrycode"+l,h,null,null,null,!0,function(e){e?(y=!0,t()):p.fillFieldsByType(n,r,"/contact/phone/countrycode"+l,b[h],null,null,null,!0,function(e){e?(y=!0,t()):p.fillFieldsValuesByType(n,r,"/contact/phone/countrycode"+l,g[b[h]],null,null,null,!1,function(e){e?(y=!0,t()):p.fillFieldsByType(n,r,"/contact/phone/countrycode"+l,b[h],null,null,null,!1,function(e){e?(y=!0,t()):p.fillFieldsByType(n,r,"/contact/phone/countrycode"+l,"+"+h,null,null,null,!1,function(e){y=e,t()})})})})})},function(e){y||"3"!=h[0]&&"4"!=h[0]||(f="0"+f),p.fillFieldsByTypeAsync(n,r,"/contact/phone/full",f,s,!0,null,null,function(){e()})},function(e){p.fillFieldsByTypeAsync(n,r,"/contact/phone"+l,f,s,!0,null,null,function(){e()})},function(e){p.fillFieldsByTypeAsync(n,r,"/contact/phone/number"+l,d,null,null,null,null,function(){e()})},function(e){p.fillFieldsByTypeAsync(n,r,"/contact/phone/areacode"+l,c,null,null,null,null,function(){e()})},function(e){p.fillFieldsByTypeAsync(n,r,"/contact/phone/exchange"+l,u,null,null,null,null,function(){e()})},function(e){p.fillFieldsByTypeAsync(n,r,"/contact/phone/local"+l,m,null,null,null,null,function(){e()})}],function(){a()})},fillBirthDateAsync:function(e,t,n,i,a,r,s){var o=this.getMonthAlternates(i),l=this;this.fillAlternatesAsync(e,t,"/birthdate/birthmonth",o,!1,!0,function(){l.fillFieldsByTypeAsync(e,t,"/birthdate/birthyear",n,r,!1,null,null,function(){l.fillFieldsByTypeAsync(e,t,"/birthdate/birthday",a,r,!1,null,null,s)})})},fillIdentityFieldsAsync:function(n,i,t,a,e){var r=this.formStrategy.getFields(),s={domain:t,origin:a};e=e||function(){};var o=this;v.async.series([function(e){var t=[];i.first_name&&t.push(i.first_name),i.middle_name&&t.push(i.middle_name),i.last_name&&t.push(i.last_name),o.fillFieldsByTypeAsync(n,r,"/nameperson/full",t.join(" "),s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/nameperson/first",i.first_name,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/nameperson/middle",i.middle_name,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/nameperson/last",i.last_name,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/person/gender",i.gender,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/nameperson/friendly",i.username,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/url",i.url,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/company/name",i.company,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/company/position",i.designation,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/socialSecurityNumber",i.ssn,s,!1,null,null,function(){e()})},function(e){o.fillFieldsByTypeAsync(n,r,"/driverLicense",i.ssn,s,!1,null,null,function(){e()})},function(e){i.dob_year&&i.dob_day?o.fillBirthDateAsync(n,r,i.dob_year,i.dob_month,i.dob_day,s,function(){e()}):e()},function(e){i.address?(delete i.address.first_name,delete i.address.last_name,o.hasVisibleField("/contact/postaladdress")?o.fillAddressFieldsAsync(n,i.address,t,a,function(){e()}):e()):e()},function(e){i.email?o.fillEmailFieldsAsync(n,i.email,t,a,function(){e()}):i.masked_email?o.fillEmailFieldsAsync(n,i.masked_email,t,"disposable",function(){e()}):e()},function(e){i.password?o.fillPasswordFieldsAsync(n,i.password,t,{origin:"strong",exactTypeMatch:!0},function(){e()}):e()},function(e){i.phone?o.fillPhoneFieldsAsync(n,i.phone,t,a,function(){e()}):e()},function(e){var t=v.find(r,function(e){return"/financial/creditcard/number"==e.dataType&&y(e.element).is(":visible")});t&&"mask"==i.card&&_(function(){t.element.scrollIntoView(),y(t.element).data("abine-params",{step:"new_card"}),y(t.element).trigger("showpanel")},100),e()}],function(){e()})},fillLoginFieldsAsync:function(e,t,n,i,a){var r=this.formStrategy.getFields(),s={domain:n,origin:i,accountId:t.accountId};i&&i.origin&&((s=i).domain=n);var o=r[e],l="";o&&o.dataType&&-1!=o.dataType.indexOf("/login")&&(l="/login");var c=function(e){n.match(/squarespace.com/)&&y("input[mmautofilling]",d.document).each(function(e,t){t.removeAttribute("mmautofilling")}),a(e)},d=this,u=n in{"myclubwyndham.com":1,"identityiq.com":1};d.fillFieldsByTypeAsync(e,r,"/contact/email"+l,t.email,s,null,u,null,function(){d.fillFieldsByTypeAsync(e,r,"/nameperson/friendly",t.username,s,null,u,null,function(){"changepassword"!=s.origin?d.fillFieldsByTypeAsync(e,r,"/password"+l,t.password,s,!0,u,null,c):d.fillFieldsByTypeAsync(e,r,"/passwordold",t.password,s,!0,null,null,c)})})},fillCountryFieldsAsync:function(t,n,i,a,r,s,o){function l(){var e=1;v.contains(["ebay.com"],i)&&(e=500),v.contains(["sierratradingpost.com"],i)&&(e=1500),_(function(){o()},e)}var c=this,d=!0;n&&n in g?c.fillFieldsValuesByTypeAsync(t,a,"/contact/country"+r,g[n],s,!1,d,!0,function(e){e?l():c.fillFieldsByTypeAsync(t,a,"/contact/countrycode"+r,n,s,!1,d,!0,function(e){e?l():c.fillFieldsByTypeAsync(t,a,"/contact/country"+r,n,s,!1,d,!0,function(e){e?l():c.fillFieldsByType(t,a,"/contact/country"+r,"US"==n?"USA":null,s,!1,d,!0,function(e){e?l():c.fillFieldsValuesByTypeAsync(t,a,"/contact/country"+r,g[n],s,!1,d,null,function(){l()})})})})}):c.fillFieldsByTypeAsync(t,a,"/contact/country"+r,n,s,!1,d,null,function(){l()})},fillAddressFieldsAsync:function(n,i,a,e,t){var r=this.formStrategy.getFields(),s={domain:a,origin:e},o=(t=t||function(){},""),l=r[n];if(l&&l.dataType){var c=l.dataType.split("/");if(3<c.length&&((o="/"+c.pop()).match(/bill|ship|home|business/)||(o="")),""==o&&l.multipleAddress){var d={};v.each(r,function(e){"addressGroup"in e?e.addressGroup===l.addressGroup&&(d[e.signature]=e):d[e.signature]=e}),r=d}}l&&"addressGroup"in l?v.each(r,function(e){"addressGroup"in e&&e.addressGroup===l.addressGroup&&(e.addressFilled=!0)}):(d={},v.each(r,function(e){e.addressFilled||(d[e.signature]=e),!e.addressFilled&&"addressGroup"in e&&(e.addressFilled=!0)}),r=d);var u=this,m=this.getFieldsOfType(r,n,!1,"/contact/state"+o,!1),h=!0;0<m.length&&(h=!1),v.async.series([function(e){u.fillCountryFieldsAsync(n,i.country,a,r,o,s,function(){e()})},function(e){r=u.formStrategy.refreshOnFormChange(r),e()},function(e){var t=[];i.first_name&&t.push(i.first_name),i.last_name&&t.push(i.last_name),u.fillFieldsByTypeAsync(n,r,"/nameperson/full",t.join(" "),s,!1,null,null,function(){e()})},function(e){u.fillFieldsByTypeAsync(n,r,"/nameperson/first",i.first_name,s,null,null,null,function(){e()})},function(e){u.fillFieldsByTypeAsync(n,r,"/nameperson/last",i.last_name,s,null,null,null,function(){e()})},function(e){u.fillFieldsByTypeAsync(n,r,"/contact/postaladdress"+o,i.address1,s,!0,null,null,function(){e()})},function(e){o?e(
):u.fillFieldsByTypeAsync(n,r,"/contact/postaladdress/",i.address1,s,!1,null,null,function(){e()})},function(e){u.fillFieldsByTypeAsync(n,r,"/contact/postaladdressAdditional"+o,i.address2,s,null,null,null,function(){e()})},function(e){u.fillFieldsByTypeAsync(n,r,"/contact/city"+o,i.city,s,null,null,null,function(){e()})},function(e){var t=1;v.contains(["express.com"],a)&&(t=1500),_(e,t)},function(e){r=u.formStrategy.refreshOnFormChange(r),u.fillFieldsByTypeAsync(n,r,"/contact/postalcode"+o,i.zip,s,null,null,null,function(){e()})},function(e){var t=500;v.contains(["express.com"],a)&&(t=1500),_(e,t)},function(t){r=u.formStrategy.refreshOnFormChange(r),u.fillFieldsByTypeAsync(n,r,"/contact/state/code"+o,i.state,s,!1,h,null,function(e){e?t():i.state&&i.state in f?u.fillFieldsByTypeAsync(n,r,"/contact/state"+o,f[i.state],s,!1,h,!1,function(e){e?t():u.fillFieldsByTypeAsync(n,r,"/contact/state"+o,i.state,s,!1,h,!0,function(){t()})}):u.fillFieldsByTypeAsync(n,r,"/contact/state"+o,i.state,s,!1,h,null,function(){t()})})}],function(){t()})},fillIssuedToFieldsAsync:function(n,i,a,r){var s=this;if(a){var o=!1;s.fillFieldsByTypeAsync(n,i,"/financial/creditcard/issuedto",a,null,!0,null,null,function(e){e&&(o=!0);var t=a.split(" ");s.fillFieldsByTypeAsync(n,i,"/financial/creditcard/issuedto/first",t[0],null,null,null,null,function(e){e&&(o=!0),1<t.length?s.fillFieldsByTypeAsync(n,i,"/financial/creditcard/issuedto/last",t[1],null,null,null,null,function(e){e&&(o=!0),o?r():s.fillFieldsByTypeAsync(n,i,"/nameperson/full",a,null,!0,null,null,function(e){e?r():s.fillFieldsByTypeAsync(n,i,"/nameperson/first",t[0],null,null,null,null,function(){s.fillFieldsByTypeAsync(n,i,"/nameperson/last",t[1],null,null,null,null,function(){r()})})})}):r()})})}else r()},fillAlternatesAsync:function(t,n,i,a,r,s,o){var l=this,e=null;a&&0!=a.length?(e=a.shift(),this.fillFieldsByTypeAsync(t,n,i,e,null,r,s,null,function(e){e?o():l.fillAlternatesAsync(t,n,i,a,r,s,o)})):o()},fillPaymentFieldsAsync:function(i,e,a,t,r){r=r||function(){};var s={domain:a,origin:t},o=this.formStrategy.getFields(),n=e.number,l=e.type,c=((e.first_name||"")+" "+(e.last_name||"")).replace(/(^[\s]+)|([\s]+$)/g,""),d=(parseInt(e.expiry_month)<10?"0":"")+parseInt(e.expiry_month),u=e.expiry_year,m=e.cvc,h=this,f=[l],p=!1;-1!=l.toLowerCase().indexOf("master")?f=["master","master card","mastercard"]:l.match(/amex|american/i)&&(f=["american_express","amex","american express"],p=!0),h.fillAlternatesAsync(i,o,"/financial/creditcard/type",f,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number",n,s,null,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number/part1",n.substr(0,4),s,null,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number/part2",n.substr(4,4),s,null,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number/part3",n.substr(8,4),s,null,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number/part4",n.substr(12,4),s,null,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number/amex/part1",p?n.substr(0,4):null,s,null,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number/amex/part2",p?n.substr(4,6):null,s,null,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/number/amex/part3",p?n.substr(10,5):null,s,null,null,null,function(){var e=500;v.contains(["jjill.com"],a)&&(e=2500),v.contains(["bestbuy.com"],a)&&(h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/verification",m,s,null,null,null,function(){}),e=1e3),_(v.bind(function(){o=h.formStrategy.refreshOnFormChange(o);var e=h.getFieldsOfType(o,i,!0,"/financial/creditcard/expirymonth",!0),t=!1;0<e.length&&"text"==e[0].fieldType&&(t=!0);var n=h.getMonthAlternates(d,t);h.fillAlternatesAsync(i,o,"/financial/creditcard/expirymonth",n,!1,!0,function(){var n=parseInt(u)%100;h.fillAlternatesAsync(i,o,"/financial/creditcard/expiryyear",[u,n],!0,!0,function(){var e=[n],t=!1;v.each(o,function(e){e&&e.dataType&&"/financial/creditcard/expiryyear2"==e.dataType&&(t="select"==e.fieldType)}),t&&e.unshift(u),h.fillAlternatesAsync(i,o,"/financial/creditcard/expiryyear2",e,!1,!0,function(){h.fillIssuedToFieldsAsync(i,o,c,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/expiry",d+"/"+u,null,!0,null,null,function(){h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/expiry2",d+"/"+n,null,!0,null,null,function(){v.contains(["target.com"],a)&&y("#cvv").focus(),h.fillFieldsByTypeAsync(i,o,"/financial/creditcard/verification",m,s,null,null,null,r)})})})})})})},this),e)})})})})})})})})})},autoLogin:function(e,t){var n,i=0<t.length?t.at(0):null,a=i?i.get("submit_btn"):"",r=!1;a&&0<a.length&&0<(n=y(a,e.ownerDocument).first()).length&&(s.simulate(n[0],"mousedown"),s.simulate(n[0],"click"),r=!0),r||(0<(n=y(":submit",e).first()).length?(s.simulate(n[0],"mousedown"),s.simulate(n[0],"click")):y(e).submit())}},e}.apply(this,[])}),ABINE_DNTME.define("abine/proxies",["documentcloud/underscore","abine/core","abine/contentMessenger","abine/timer"],function(n,e){function t(e,t){if(!a){t=t||function(){},a=e||ABINE_DNTME.contentMessenger;var n=""+Math.random();a.once("background:stub:response:"+n,function(e){t(e)}),a.send("contentManager:proxy:connect",{id:n})}}function i(){a&&(a=null)}var a,r=e.BaseClass.extend({initialize:function(e){var t=this;n.each(e.methods,function(e){t.addMethod(e)}),n.each(e.asyncMethods,function(e){t.addAsyncMethod(e)}),this._require=e.require},addMethod:function(n){this[n]=function(){var e=function(){},t=arguments;0<arguments.length&&"function"==typeof arguments[arguments.length-1]?(e=arguments[arguments.length-1],t=Array.prototype.slice.call(arguments,0,-1)):t=Array.prototype.slice.call(arguments,0),this.call({method:n,params:t},e)}},addAsyncMethod:function(n){this[n]=function(){var e=function(){},t=arguments;0<arguments.length&&"function"==typeof arguments[arguments.length-1]?(e=arguments[arguments.length-1],t=Array.prototype.slice.call(arguments,0,-1)):t=Array.prototype.slice.call(arguments,0),this.callAsync({method:n,params:t},e)}},call:function(e,t){var n=""+Math.random();e.proxyId=this._proxyId,e.callId=n,e.require=this._require,t&&a.once("background:stub:response:"+n,function(e){t(e)}),a.send("contentManager:proxy:call",e)},callAsync:function(e,t){var n=""+Math.random();e.proxyId=this._proxyId,e.callId=n,e.require=this._require,t&&a.once("background:stub:response:"+n,function(e){t(e.err,e.data)}),a.send("contentManager:proxy:callAsync",e)}}),s=new r({require:"abine/securityManager",methods:["isLocked","login","isInitialized","openPage","openPostInstall","openLink","refreshData","refreshRules","resetData","openWindow","isMaskmeInstalled","getBillingManager"]}),o=new r({require:"abine/webapp",methods:["openHome","openDashboard","openWallet","openMasking","openEmails","openPhones","openCards","openLogin","openMaskedEmailsIn30","openPremium","openNewFeatureAdded","openSnowman","openBlacklist","openSettings","openStats","openHelp","openPasswordSetup","openDnt2UpgradePage","openPiwikCampaign","openWeeklyReport","openDntAnywhere","openForgotPassword","openFAQ","openPage","openCashForCardsFaq","openCashForCardsSignup","openUnderstandingTracking","openTour","openAccounts"]}),l=new r({require:"abine/modules/license",methods:[],asyncMethods:["sendFeedbackEmail","refreshEntitlements","refreshLastFourCardDigits","register","login","subscribe","incrementMedalsEarned","incrementMedalsEarnedWithCurrentMedals","retrieveMedalsEarned","logAction","logSplitData","logPasswordFillData","getGenericBiometricKey","logCheckout"]}),c=new r({require:"abine/modules/payments",methods:[],asyncMethods:["retrieveCardCredit","retrieveCardFee","verifyCardRequest"]}),d=new r({require:"abine/modules/panels",methods:[],asyncMethods:["getDNTMePanel","changePanelShowRate","getDNTMeGrowl"]}),u=new r({require:"abine/modules/email",methods:[],asyncMethods:["sendDomainFeedback"]}),m=new r({require:"abine/pageEvents",asyncMethods:["processAction"],methods:[]}),h=new r({require:"abine/modules/mappings",asyncMethods:["makeDailyMappingCheck","getOneFormMappings","getFormRules"],methods:[]}),f=new r({require:"abine/memoryStore",methods:["set"],asyncMethods:["get"]});return{Proxy:r,connect:t,disconnect:i,securityManager:s,webapp:o,licenseModule:l,emailsModule:u,paymentsModule:c,panelsModule:d,pageEventsModule:m,mappingsModule:h,memoryStore:f}}),ABINE_DNTME.define("abine/responseCodes",[],function(){return{UNKNOWN_ERROR:"unknown error",SUCCESS:"successful",ERROR:"error",SERVICE_UNAVAILABLE_ERROR:"service unavailable error",SCHEDULED_DOWNTIME:"scheduled downtime",MISSING_PARAMETERS:"missing parameters",UNAUTHORIZED:"unauthorized bad token",NO_ACCESS_FOR_FEATURE:"no access to requested feature",INVALID_PASSWORD:"invalid password",BIOMETRIC_AUTH_FAILED:"biometric auth failed",ACCOUNT_ALREADY_EXISTS:"account already exists for that email",SAVE_NEW_USER_ERROR:"error saving new user",FAILED_CREATING_TARGET_EMAIL:"failed to create target email",FAILED_TO_UPDATE_USER:"error updating user",NO_ACCOUNT_FOUND_FOR_EMAIL:"no account found for email",ACCOUNT_MARKED_FOR_DELETION:"account has been marked for deletion",ACCOUNT_HAS_BEEN_LOCKED:"account has been locked",ACCOUNT_HAS_BEEN_BANNED:"account has been banned",WRONG_PASSWORD:"wrong password",INVALID_EMAIL_ADDRESS:"invalid email address",NO_RECURLY_ACCOUNT_FOUND:"no recurly account found",MFA_CODE_REQUIRED:"mfa code required",DOWNGRADE_SCHEMA_NOT_ALLOWED:"downgrade of schema_version is not allowed",SAVE_CLIENT_DATA_ERROR:"errors saving client data",DESTROY_CLIENT_DATA_ERROR:"errors destroying client data",NO_CLIENT_DATA_FOUND:"no client data found",USER_EXISTS_FOR_CLIENT_DATA_DELETION:"cannot destroy client data when user exists",UPGRADE_REQUIRED:"upgrade required",PHONE_NOT_FOUND:"phone not found",NO_DISPOSABLE_PHONE:"no disposable phone",FAILED_TO_SAVE_PHONE:"failed to save phone",PHONE_ALREADY_VALIDATED:"phone already validated",NO_NUMBERS_AVAILABLE:"no numbers available",FAILED_TO_SEND_VERIFICATION_CODE:"failed to send verification code",WRONG_VERIFICATION_CODE:"wrong verification code",OLD_PHONE_NOT_FOUND:"old phone not found",COUNTRY_NOT_SUPPORTED:"country not supported",COUNTRY_CHANGE_NOT_SUPPORTED:"country change not supported",ERROR_CREATING_DISPOSABLE:"error creating disposable",MISSING_USER_PARAMS_ERROR_CODE:"missing user params",NO_BILLING_ACCOUNT_FOR_USER_ERROR_CODE:"no billing account for user",REQUEST_ALREADY_EXISTS_ERROR_CODE:"request already exists",NO_CARDS_AVAILABLE_ERROR_CODE:"no cards available",REQUESTED_AMOUNT_OVER_LIMIT_ERROR_CODE:"requested amount over limit",REQUESTED_AMOUNT_BELOW_MINIMUM_ERROR_CODE:"requested amount below minimum",REQUESTED_AMOUNT_INVALID_ERROR_CODE:"requested amount invalid",BILLING_FAILED_ERROR_CODE:"billing failed",BILLING_DECLINED_ERROR_CODE:"billing declined",BILLING_COMPANY_FAILED_ERROR_CODE:"billing company failed",NO_CARD_FOUND_ERROR_CODE:"no card found",NO_BILLING_TRANSACTION_FOUND_ERROR_CODE:"no billing transaction found",FRAUD_SOFT_LIMIT_REACHED:"fraud soft limit",REFUND_FAILED_ERROR_CODE:"refund failed",PROVIDER_CANCEL_FAILED_ERROR_CODE:"provider cancel failed",PROVIDER_READ_FAILED_ERROR_CODE:"provider read failed",PROVIDER_CARD_CREATION_FAILED_ERROR_CODE:"provider card creation failed",FRAUD_HARD_LIMIT_REACHED:"fraud hard limit reached",FRAUD_GLOBAL_BAN:"card creation disabled",CARD_ALREADY_DEACTIVATED_ERROR_CODE:"card already deactivated",FRAUD_VERIFIED_SOFT_LIMIT_REACHED:"fraud verified soft limit",FRAUD_PLATFORM_UNAVAILABLE:"fraud verification unavailable",FRAUD_HIGH_RISK_COUNTRY_ERROR_CODE:"high risk country ban",BILLING_IN_NON_US_ERROR_CODE:"billing in non us",GREY_LISTED_ERROR_CODE:"grey listed user",GLOBAL_SOFT_LIMIT_REACHED:"global soft limit",DUPLICATE_CARD_ERROR_CODE:"duplicate card used ban",REJECTED_DOMAIN_ERROR_CODE:"domains known to not accept masked cards",BANNED_DOMAIN_ERROR_CODE:"banned domain",SPLIT_INTRUSIVE_NON_INTRUSIVE:"7",SPLIT_INTRUSIVE_CONTROL:"8",SPLIT_INTRUSIVE_ALWAYS_REG:"9",SPLIT_INTRUSIVE_GOT_IT_REG:"10",SPLIT_INTRUSIVE_COMPLETE_SETUP_BUTTON:"11",SPLIT_WALLET_OFF:"12",SPLIT_WALLET_ON:"13",SPLIT_ICON_PANELS_CLICK_ICON_FOR_PANEL:"32",SPLIT_ICON_PANELS_SHOW_ICON_WITH_NORMAL_PANELS:"33",SPLIT_ICON_PANELS_NORMAL:"34"}}),ABINE_DNTME.define("abine/url",function(){function a(e){return e?e.toLowerCase().replace(/\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1)}):e}function s(e){var t=e.match(n);return t&&1<t.length?t[1].toString():e}function r(e){var t=s(e);if(t.match(c)||t.match(d))return t;var n=t.split(".");if(n.length<2)return t;var i=n.pop(),a=n.pop(),r=a+"."+i;return o.test(r)&&0<n.length&&(i=r,r=(a=n.pop())+"."+i),l.test(r)&&0<n.length&&!t.match(/signup.wordpress.com|new.aol.com|(oauth|www).squarespace.com|secure.onsugar.com|www.tumblr.com/i)&&(r=n.pop()+"."+r),r}function e(e){if((e=r(e)).match(c))return e;var t=e.split(".");if(2<t.length){var n=t.pop(),i=t.pop();return e=i+"."+n,o.test(e)&&0<t.length&&(n=e,e=(i=t.pop())+"."+n),l.test(e)&&0<t.length?a(i+" "+t.pop()):a(i)}return a(t[0])}var o=/^(((co|ac|go|ed|ga|mn|nj|nc|or|ne|in|gr|ca|on|pa|qc|bc|sh|at|va|us|il|tv|me|lg|at|ny|gv|com|edu|org|net|gov|mil|biz)\...)|(163\.com)|(kiev\.ua)|(gob\.pe)|(gen\.tr)|(waw.pl)|(jus.br))$/,l=/^(((go|typepad|tumblr|blogspot|squarespace|wordpress|myshopify|blogfa|blog|blogs|blinkweb|ning|posterous|over-blog|mihanblog|appspot|webs|weebly|onsugar|ucoz|uk|pch|ecwid)(\.com|\.in))|(nic\.in)|((ucoz|spb|narod)\.ru)|(blog\.163\.com)|((gouv|free)\.fr)|(uol\.com\.br)|(web\.id)|(gob\.mx)|(blogg\.se)|(home.pl))$/,n=/^http(?:s)?\:\/\/([^/\?\#]+)/im,c=/^[0-9\.]+(:[0-9]+)?$/,d=/^localhost(:[0-9]+)?$/;return{getHostname:s,getTLD:r,getSiteName:e}}),ABINE_DNTME.define("abine/window",["documentcloud/underscore","abine/timer","jquery"],function(o,n,m){function l(e){var n=[];return o.each(e,function(e,t){n.push(t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})+":"+e)}),n.join(" !important;")}function c(n,e){o.each(e,function(e,t){n.setAttribute(t,e)})}var d="panel.html",t=function(){},u=function(e,t){e.documentElement?e.documentElement.appendChild(t):n.setTimeout(function(){u(e,t)},100)};return{createTab:function(n,i){function e(e){var t=o.find(e,function(e){return-1!=e.url.indexOf(r)});t||n.doNotOpenNewTab?t&&(chrome.tabs.update(t.id,{active:!n.doNotActivate,url:a}),chrome.windows.get(t.windowId,function(e){"minimized"==e.state&&chrome.windows.update(e.id,{state:"normal"}),chrome.windows.update(e.id,{focused:!0}),i()})):(chrome.tabs.create({active:!0,url:a}),i())}i=i||t;var a=n.localUrl?chrome.extension.getURL(n.localUrl):n.url;if(n.force)return chrome.tabs.create({active:!0,url:a}),void i();var r=a.replace(/http[s]?/i,"").replace(/\?.*/i,"").replace(/\#.*/i,"");chrome.tabs.query({},e)},getWebappTabs:function(n){chrome.tabs.query({url:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/*"},function(e){var t=[];o.each(e,function(e){t.push(e.id)}),n(t)})},openWindow:function(e,t,n){chrome.windows.create({url:e,width:t,height:n,focused:!0,type:"popup"})},reloadTab:function(n,i){function e(e){var t=o.find(e,function(e){return-1!=e.url.indexOf(r)});t||n.doNotOpenNewTab?t&&(chrome.tabs.reload(t.id),n.doNotActivate||(chrome.tabs.update(t.id,{active:!0}),chrome.windows.get(t.windowId,function(e){"minimized"==e.state&&chrome.windows.update(e.id,{state:"normal"}),chrome.windows.update(e.id,{focused:!0}),i()}))):(chrome.tabs.create({active:!0,url:a}),i())}i=i||t;var a=n.localUrl?chrome.extension.getURL(n.localUrl):n.url,r=a.replace(/http[s]?/i,"").replace(/\?.*/i,"").replace(/\#.*/i,"");chrome.tabs.query({},e)},createPanel:function(e){var t=e.localUrl?chrome.extension.getURL(e.localUrl):e.url,n=e.document||document||window.document,i=e.panelWidth?e.panelWidth:368;if(!n)throw"Error. abine/window createPanel called without a document context.";var a=e.id||"abine"+Math.floor(1e8*Math.random());t=t||chrome.extension.getURL(d)+"?"+a;var r=n.createElement("iframe"),s=n.createElement("div");return s.className=e.className||"abineContentPanel",r.className="abineContentFrame",c(s,{style:l(o.extend({backgroundColor:"transparent",margin:"0",padding:"0",display:"none",opacity:"1",filter:"alpha(opacity:100)"},e.style))}),c(r,{width:i+"px",allowTransparency:"true",frameborder:0,height:e.panelHeight+"px",scrolling:"no",src:t,id:a,style:l(o.extend({position:"relative",display:"block",background:"transparent",borderWidth:"0px",left:"0px",top:"0px",visibility:"visible",opacity:1,filter:"alpha(opacity:100)",margin:"0",padding:"0",height:e.panelHeight+"px",width:i+"px"}))}),s.appendChild(r),u(n,s,r),r},autoResizePanels:function(u){var e,t=u.document||document||window.document;t.getElementsByTagName("body")[0];if(u.frameId){var n=t.getElementById(u.frameId);n&&(e=[n.parentElement])}e||(e=t.getElementsByClassName(u.className||"abineContentPanel")),o(e).each(function(e){var t=m("iframe",e)[0];t.scrolling="no",m(t).height("auto");var n=m(t).width(),i=u.documentHeight;u.extraWidth&&(n+=u.extraWidth),u.extraHeight&&(i+=u.extraHeight),m(t).width(n),m(t).height(i),e.style.width=n+"px",e.style.height=i+"px";try{var a=parseInt(e.style.left),r=a+e.offsetWidth,s=e.ownerDocument.defaultView.innerWidth,o=e.ownerDocument.documentElement.scrollLeft+s;if(o<r){var l=r-o;if(0<a-l)e.style.left=a-l+"px";else if(e.style.left="0px",s<r-a){var c=Math.round(s/(r-a)*100);(c-=1)<80&&(c=80),t.style.zoom=c+"%",t.contentDocument.body.style.zoom=c+"%"}}}catch(d){}})},removePanels:function(e){function t(e,t){if(!t){var n=m("iframe",e);if(0<n.length&&(t=n[0]),!t)return}-1!=t.id.indexOf("doNotRemove")?m(t.parentNode).hide():t.parentNode.parentNode.removeChild(t.parentNode)}var n=e.document||document||window.document;if(e.iframe)t(null,e.iframe);else{var i=n.getElementsByClassName("abineContentPanel");o(i).each(function(e){t(e)})}}}}),ABINE_DNTME.define("abine/contentMessenger",["documentcloud/underscore","abine/core"],function(e,t){var n=function n(e){"FWD"==e.eventName?e.via_bg&&e.payload.to==ABINE_DNTME.context&&this.trigger(e.payload.eventName,e.payload.payload,e.payload.from):this.trigger(e.eventName,e.payload)},i=function(){throw"Error. Attempt to call destroyed ContentMessenger."};return{ContentMessenger:t.BaseClass.extend({initialize:function(){this.listener=e.bind(n,this),chrome.extension.onRequest.addListener(this.listener)},sendToCS:function(e,t,n){chrome&&chrome.extension&&chrome.extension.sendRequest({eventName:"FWD",payload:{to:e,from:ABINE_DNTME.context,eventName:t,payload:void 0===n?{}:n}})},send:function(e,t){this.trigger(e,t),chrome&&chrome.extension&&chrome.extension.sendRequest({eventName:e,payload:void 0===t?{}:t})},destroy:function(){this.off();try{chrome.extension.onRequest.removeListener(this.listener)}catch(e){}this.on=this.off=this.trigger=i}})}}),ABINE_DNTME.define("abine/assets",["wycats/handlebars"],function(e){function t(e,t,n){return chrome.extension.getURL(e+("string"==typeof t?t+("string"==typeof n?n:""):""))}function n(e,t,n){var i=e+t+n;return chrome.extension.getURL(i)}return e.registerHelper("assetUrl",t),e.registerHelper("cardAssetUrl",n),{assetUrl:t,cardAssetUrl:n}}),ABINE_DNTME.define("abine/browserSyncStorage",["documentcloud/underscore","abine/core"],function(n,e){return new(chrome&&chrome.storage&&chrome.storage.sync?e.BaseClass.extend({initialize:function(){},set:function(e,t){chrome.storage.sync.set(e,t)},remove:function(e,t){chrome.storage.sync.remove(e,t)},get:function(e,t){chrome.storage.sync.get(e,t)},clear:function(e){chrome.storage.sync.clear(e)}}):e.BaseClass.extend({initialize:function(){this.storage={}},set:function(e,t){n.extend(this.storage,e),t&&t()},remove:function(e,t){e="string"==typeof e?[e]:e,n.each(e,n.bind(function(e){delete this.storage[e]},this)),t&&t()},get:function(e,t){e="string"==typeof e?[e]:e,t&&t(n.pick(this.storage,e))},clear:function(e){this.storage={},e&&e()}}))({})}),ABINE_DNTME.define("documentcloud/backbone",["documentcloud/underscore","jquery"],function(){return Backbone}),ABINE_DNTME.define("wycats/handlebars",[],function(){var s={VERSION:"1.0.beta.6",helpers:{},partials:{},registerHelper:function(e,t,n){n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){this.partials[e]=t}};s.registerHelper("helperMissing",function(e){if(2===arguments.length)return undefined;throw new Error("Could not find property '"+e+"'")});var t,n,i,a,l=Object.prototype.toString,c="[object Function]";return s.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse||function(){},i=t.fn,a="",r=l.call(e);if(r===c&&(e=e.call(this)),!0===e)return i(this);if(!1===e||null==e)return n(this);if("[object Array]"!==r)return i(e);if(0<e.length)for(var s=0,o=e.length;s<o;s++)a+=i(e[s]);else a=n(this);return a}),s.registerHelper("each",function(e,t){var n=t.fn,i=t.inverse,a="";if(e&&0<e.length)for(var r=0,s=e.length;r<s;r++)a+=n(e[r]);else a=i(this);return a}),s.registerHelper("if",function(e,t){return l.call(e)===c&&(e=e.call(this)),!e||s.Utils.isEmpty(e)?t.inverse(this):t.fn(this)}),s.registerHelper("unless",function(e,t){var n=t.fn,i=t.inverse;return t.fn=i,t.inverse=n,s.helpers["if"].call(this,e,t)}),s.registerHelper("with",function(e,t){return t.fn(e)}),s.registerHelper("log",function(e){s.log(e)}),s.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},s.Exception.prototype=new Error,s.SafeString=function(e){this.string=e},s.SafeString.prototype.toString=function(){return this.string.toString()},t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[<>"'`]/g,i=/[&<>"'`]/,a=function(e){return t[e]||"&amp;"},s.Utils={escapeExpression:function(e){return e instanceof s.SafeString?e.toString():null==e||!1===e?"":i.test(e)?e.replace(n,a):e},isEmpty:function(e){return null==e||!1===e||"[object Array]"===Object.prototype.toString.call(e)&&0===e.length}},s.VM={template:function(n){var i={escapeExpression:s.Utils.escapeExpression,invokePartial:s.VM.invokePartial,programs:[],program:function(e,t,n){var i=this.programs[e];return n?s.VM.program(t,n):i||(i=this.programs[e]=s.VM.program(t))},programWithDepth:s.VM.programWithDepth,noop:s.VM.noop};return function(e,t){return t=t||{},n.call(i,s,e,t.helpers,t.partials,t.data)}},programWithDepth:function(n,i,e){var a=Array.prototype.slice.call(arguments,2);return function(e,t){return t=t||{},n.apply(this,[e,t.data||i].concat(a))}},program:function(n,i){return function(e,t){return n(e,(t=t||{}).data||i)}},noop:function(){return""},invokePartial:function(e,t,n,i,a,r){if(options={helpers:i,partials:a,data:r},e===undefined)throw new s.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,options);if(s.compile)return a[t]=s.compile(e),a[t](n,options);throw new s.Exception("The partial "+t+" could not be compiled when running in runtime-only mode")}},s.template=s.VM.template,s}),ABINE_DNTME.define("duckbone/core",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars"],function(a,e){var i={};return i.helpers=i.helpers||{},i.forms=i.forms||{},i.TemplatesData=i.TemplatesData||{},i.PartialsData=i.PartialsData||{},a.extend(i,e.Events),a.extend(i,{serverError:function(e){a.log("500 Server Error"),e&&a.log(e)},fileNotFound:function(e){a.log("404 File Not Found"),e&&a.log(e)},register:function(e,t){t=t||!1;var n=a.uniqueId("regfunc");return a.isUndefined(i.registeredFunctions)&&(i.registeredFunctions={}),t&&(e=a.wrap(e,function(e){e(arguments),delete i.registeredFunctions[n]})),i.registeredFunctions[n]=e,"Duckbone.registeredFunctions."+n},wrapMethods:function(n,i){var e=Array.prototype.slice.call(arguments,2);a.isArray(e[0])&&(e=e[0]),a.each(e,function(e){var t=n[e];n[e]=function(){var e=[t].concat(Array.prototype.slice.call(arguments));return i.apply(n,e)}})},log:function(e){window.console&&console.log&&console.log(e)},include:function(n){if(void 0===n)throw"Attempt to include into undefined object.";return a.each(a.toArray(arguments).slice(1),function(e){if(void 0===e)throw"Attempt to include undefined object.";for(var t in e)"included"!=t&&void 0!==e[t]&&(n.hasOwnProperty(t)||(n[t]=e[t]));"function"==typeof e.included&&e.included.call(n)}),n}}),a.extend(i.helpers,{dateToPrettyTimeAgo:function(e){var t=Math.floor(((new Date).getTime()-e.getTime())/6e4);t<0&&(t=0);var n,i,a,r=t||0;return 0===r?"just now":(1440<=r?(r-=1440*(i=Math.floor(r/1440)),n=i,n+=1<i?" days":" day"):60<=r?(r-=60*(a=Math.floor(r/60)),n=a,n+=1<a?" hours":" hour"):0<r&&(n=r,n+=1<r?" minutes":" minute"),n+" ago")}}),a.mixin({log:i.log}),i}),ABINE_DNTME.define("duckbone/model",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core","abine/eventLogger"],function(l,c,e,t,d){function n(i,e,a,r){var t=m("set_"+e),s=m(e),n=function(e,t){if(e instanceof c.Model){if(e===i[s])return e;i[s]&&(i.trigger("remove:"+s),r&&(i[s][r]=null)),i[s]=e,r&&u(i,i[s],r,t),i.trigger("add:"+s)}else if(e)if(i[s]){var n=function(){i.trigger("change:"+s)};i[s].on("change",n),i[s].set(e),i[s].off("change",n)}else i[s]=new a(e),r&&u(i,i[s],r,t),i.trigger("add:"+s);else i[s]&&(i.trigger("remove:"+s),r&&(i[s][r]=null)),i[s]=null;return e&&i.messenger&&!e.messenger&&(e.messenger=i.messenger),e};try{n.call(i,i.get(e),!0)}catch(o){d.error("Error creating association for "+e+":\n"+o)}delete i.attributes[e],i[t]=l.bind(n,i)}function i(t,e,n,i){try{var a=m(e),r=t.get(e),s=t[a]=new n(r);delete t.attributes[e],i&&(s[i]=t,s.each(function(e){u(t,e,i)}),s.on("add",function(e){u(t,e,i)}),s.on("remove",function(e){e[i]=null}),s.on("reset",function(e){e.each(function(e){u(t,e,i)})})),t.messenger&&!s.messenger&&(s.messenger=t.messenger)}catch(o){d.error("Error creating association for "+e+":\n"+o)}}function u(e,t,n,i){var a="set"+n.slice(0,1).toUpperCase()+n.slice(1);"function"==typeof t[a]?t[a].call(t,e,i):i?t[n]=e:d.error("To use belongsTo, model must define hasOne for "+n)}function a(e,t){var a={};return e instanceof c.Model||!this._associations?a=e:l(e).each(function(e,t){var n=this._associations[t];if("hasOne"==n)this[m("set_"+t)](e);else if("hasMany"==n){var i=m(t);"function"==typeof this[i].freshen?this[i].freshen(e):this[i].reset(e)}else a[t]=e},this),this.setWithoutAssociations.call(this,a,t)}function m(e){return e.replace(/(\_[a-z])/g,function(e){return e.toUpperCase().replace("_","")})}function r(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})}t.AssociableModel={isAssociableModel:!0,included:function(){this.setWithoutAssociations||(this.setWithoutAssociations=this.set,this.set=a)},hasOne:function(e){l.each(e,function(e,t){this._associations=this._associations||{},this._associations[t]="hasOne",n(this,t,e.model,e.belongsTo)},this)},hasMany:function(e){l.each(e,function(e,t){this._associations=this._associations||{},this._associations[t]="hasMany",i(this,t,e.collection,e.belongsTo)},this)}},t.ModelHelpers={simpleSave:function(e){var t={};this.id&&(e.id=this.id),this.paramRoot?t[this.paramRoot]=e:t=e;var n=JSON.stringify(t);return this.save({},{contentType:"application/json",data:n})},url:function(){var e="function"==typeof this.urlRoot?this.urlRoot():this.urlRoot,t=s(this.collection)||e||urlError();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},setOne:function(e,t,n){var i={};return i[e]=t,this.set(i,n)},createGetters:function(){var t=this,e=arguments,n={};l.each(e,function(e){getterFuncName=m(e),getterFuncName="get"+r(getterFuncName),t[getterFuncName]||(n[getterFuncName]=function(){return this.get(e)})}),l.extend(this,n)},isValidAttribute:function(e){return!l.isNaN(e)&&!l.isUndefined(e)}};var s=function(e){return e&&e.url?l.isFunction(e.url)?e.url():e.url:null}}),ABINE_DNTME.define("duckbone/syncable",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(l,c,e,t,d){function u(e){return e&&e.url?l.isFunction(e.url)?e.url():e.url:null}function m(){throw new Error("A 'url' property or function must be specified")}function h(e){for(var t,n,i,a,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="",l="",c="",d=0;i=(t=e.charCodeAt(d++))>>2,a=(3&t)<<4|(n=e.charCodeAt(d++))>>4,r=(15&n)<<2|(l=e.charCodeAt(d++))>>6,c=63&l,isNaN(n)?r=c=64:isNaN(l)&&(c=64),o=o+s.charAt(i)+s.charAt(a)+s.charAt(r)+s.charAt(c),t=n=l="",i=a=r=c="",d<e.length;);return o}d.Syncable={isSyncable:!0,sync:function(e,n,t){var i,a=p[e],r=n.defaultSyncOptions||{},s=l.extend({type:a,dataType:"json",beforeSend:function(e){var t=c('meta[name="csrf-token"]').attr("content");t&&e.setRequestHeader("X-CSRF-Token",t)}},r,t);if(c.browser.msie&&(s.cache=!1),s.url||(s.url=u(n)||m()),!s.data&&n&&("create"==e||"update"==e)){s.contentType="application/json";var o={};n.paramRoot?o[n.paramRoot]=n.toJSON():o=n.toJSON(),s.data=JSON.stringify(o)}return"GET"!==s.type&&(s.processData=!1),f.username&&(s.username=f.username,s.password=f.password,s.headers=s.headers||{},s.headers.Authorization="Basic "+h(s.username+":"+s.password)),(i=c.ajax(s)).params=s,n.trigger("sync:"+e.toLowerCase()),i.complete(function(){n.trigger("sync:complete",i)}),i.success(function(){delete n.errors,n.trigger("sync:success",i)}),i.error(function(e){400<=e.status&&d.trigger("sync:"+e.status,i)}),i.error(function(e){if(422==e.status){var t=JSON.parse(e.responseText);t.errors?n.errors=t.errors:n.errors=t,n.trigger("sync:invalid",i)}else n.trigger("sync:error",i)}),i}},d.setAuthenticatedUser=function(e,t){f.username=e,f.password=t},d.removeAuthenticatedUser=function(){delete f.username,delete f.password};var f={},p={create:"POST",update:"PUT","delete":"DELETE",read:"GET"}}),ABINE_DNTME.define("duckbone/collection",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(i,e,t,n){n.CollectionHelpers={hasDuckboneCollectionHelpers:!0,slice:function(){return this.models.slice(arguments)},toSelectOptions:function(t,e){var n={};return t=t||"title",e&&(n[" "]=" "),this.each(function(e){n[e.id]=e.get(t)}),n},freshen:function(e){var t;this.each(function(e){e._remove=!0}),i(e).each(function(e){(t=this.get(e.id))?(t.set(e),delete t._remove):this.add(e)},this);var n=this.filter(function(e){return e._remove});i(n).each(function(e){this.remove(e)},this),this.trigger("freshen",this)},fetch:function(i){i||(i={});var a=this,r=i.success;i.success=function(e,t,n){a[i.add?"add":i.freshen?"freshen":"reset"](a.parse(e,n),i),a.trigger("sync"),r&&r(a,e)};var t=i.error;return i.error=function(e){t?t(a,e,i):a.trigger("error",a,e,i)},(this.sync||e.sync).call(this,"read",this,i)}}}),ABINE_DNTME.define("duckbone/routeable_application",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(r,n,i,e,t){t.RouteableApplication={isRouteableApplication:!0,setContainer:function(e){this.mainContainer=e},mapRoutes:function(a){r.each(r.keys(a),function(i){try{var e=a[i].routeName||a[i].prototype.templateName;if(!e)throw"Missing or bad routeName for "+i;if("function"!=typeof a[i].routeAction)throw"Missing or bad routeAction for "+i;this.route(i,e,a[i].routeAction),this.route(i+"?*params",e,function(){var e=r.toArray(arguments),t=e.pop(),n=r(t.split("&")).reduce(function(e,t){return e[t.split("=")[0]]=t.split("=")[1],e},{});return a[i].routeAction.apply(this,e.concat(n))})}catch(t){throw r.log(t),"Bad route for "+i}},this)},loadView:function(e,t){return t===undefined&&(t={}),this._removableFlashes&&(this._removableFlashes.remove(),delete this._removableFlashes),this.mainView&&this.mainView.remove(),(t.application=this).mainView=new e(t),n(this.mainView.el).appendTo(this.mainContainer),this.mainView},navigate:function(e,t){this.isFlashableView&&(this._removableFlashes=this.activeFlashes()),i.history.navigate(e,t)},bindNavigationBars:function(){this.on("all",function(e){if("route"==e.split(":")[0]){var t=e.split(":")[1];n("nav ul li").removeClass("active"),n("nav ul li."+t).addClass("active")}})}}}),ABINE_DNTME.define("duckbone/view_lifecycle_extensions",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(a,e,t,n,i){i.ViewLifecycleExtensions={hasViewLifecycleExtensions:!0,initialize:function(){this.application=this.options.application,this.messenger=this.options.messenger,this.isEditableView&&(r(this,"beforeClone"),this.cloneModelForEditing(),r(this,"afterClone")),this.render(),this.isStylizeableView&&this.applyStyles(),this.isBindableView&&this.bindAttributes(),this.isEditableView&&(this.bindModelSyncEvents(),this.createForm(),r(this,"afterCreateForm")),r(this,"afterInitialize")},render:function(){return this.isTemplateableView&&this.renderTemplate(),this.isStylizeableView&&this.applyStyles(),this},
remove:function(){return this.isEditableView&&this.expireClone(),r(this,"beforeRemove"),this.removeWeakBindings(),this.isNestableView&&this.removeNestedViews(),t.View.prototype.remove.call(this),r(this,"afterRemove"),this},weakBindToModel:function(e,t,n){this.weakBindTo(this.model,e,t,n)},weakBindTo:function(e,t,n,i){this._weakBindings=this._weakBindings||[],this._weakBindings.push([e,t,n]),e.bind.apply(e,a.toArray(arguments).slice(1))},removeWeakBindings:function(){a.each(this._weakBindings,function(e){e[0].unbind(e[1],e[2])}),delete this._weakBindings,this.isBindableView&&this.unbindLiveTimestamps()}};var r=function(e,t){e[t]&&e[t].call(e)}}),ABINE_DNTME.define("duckbone/handlebars_extensions",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){((ABINE_DNTME.Duckbone=a).Handlebars=i).getAttr=function(e,t){return/^[0-9]+$/.test(t)?e[parseInt(t)]:e[t]!=undefined?"function"==typeof e[t]?e[t].call(e):e[t]:e.get?e.get(t):void 0}}),ABINE_DNTME.define("duckbone/idme_template_registry",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){function r(n){n.templatesCompiled||(e.each(e.keys(ABINE_DNTME.CompiledTemplates),function(e){var t=e.replace("views/","").replace("/","_");n.compiledTemplates[t]=ABINE_DNTME.CompiledTemplates[e]}),n.templatesCompiled=!0)}a.TemplateRegistry=function(e){e=e||{},this.compiledTemplates={},this.templatesCompiled=!1,this.partialsCompiled=!1},e.extend(a.TemplateRegistry.prototype,{refresh:function(){},compile:function(){r(this)},get:function(e){return r(this),this.compiledTemplates[e]}})}),ABINE_DNTME.define("duckbone/nestable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.NestableView={isNestableView:!0,setupNestedViews:function(){this.createChildren&&(this.children=this.createChildren())},removeNestedViews:function(){this.children&&(e.each(this.children,function(e){e.remove()}),delete this.children)}}}),ABINE_DNTME.define("duckbone/templateable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core","abine/eventLogger"],function(n,r,s,o,i,l){var e=new i.TemplateRegistry;o&&(o.helpers.oldIf=o.helpers["if"],o.registerHelper("if",function(e,t,n){var i="function"==typeof e?e.call(this):e;return o.helpers.oldIf.call(this,i,t,n)}),o.registerHelper("attr",function(e){return new o.SafeString('<span data-bind="attr_'+o.Utils.escapeExpression(e)+'">'+o.Utils.escapeExpression(this.get(e))+"</span>")}),o.registerHelper("child",function(e,t){return t=n.isObject(t)?"div":t,new o.SafeString("<"+t+' data-child-view="'+o.Utils.escapeExpression(e)+'"></'+t+">")}),o.helpers.oldEach=o.helpers.each,o.registerHelper("each",function(e,t,n){return e.models&&(e=e.models),o.helpers.oldEach.call(this,e,t,n)})),i.TemplateableView={isTemplateableView:!0,included:function(){this.hasViewLifecycleExtensions||i.include(this,i.ViewLifecycleExtensions),this.isNestableView||i.include(this,i.NestableView)},templateRegistry:e,getTemplate:function(e,t){if(this.templateData=this.options.templateData||this.templateData||null,this.templateData)throw l.error("Cannot compile template."),"Cannot compile template";return e=e||this.options.templateName||this.templateName||"",this.template=this.templateRegistry.get(e),this.template||t||(this.template=i.Handlebars.compile('<div>Missing Template "'+e+'"</div>')),this.template},renderTemplate:function(a){a=a||this.model||{};if(n.isFunction(this.options.template)?this.template=this.options.template:this.template||this.getTemplate(),!this.template)throw"renderTemplate called without a template.";this.removeNestedViews(),this.isBindableView&&this.unbindAttributes();try{r(this.el).empty().html(this.template(a))}catch(e){l.error("Handlebars threw an exception rendering your template:"),l.error(e.message,e.stack),l.error("Context:"),l.error(a),r(this.el).html('<div class="duckbone_error">Handlebars exception: '+o.Utils.escapeExpression(e.message)+"</div>")}this.isBindableView&&a instanceof s.Model&&r(this.el).find("span[data-bind]").each(n.bind(function(e,t){var n=r(t).attr("data-bind").slice(5),i='span[data-bind="attr_'+n+'"]';this.bindAttribute(a,n,i)},this)),this.setupNestedViews(),r(this.el).find("*[data-child-view]").each(n.bind(function(e,t){var n=r(t).attr("data-child-view"),i=this.children[n];i instanceof s.View?(r(t).replaceWith(i.el),r(i.el).attr({"data-child-view":n}),i.delegateEvents()):l.error("Unknown child view "+n)},this));this.options.templateName||this.templateName;return this.templateName&&r(this.el).addClass(this.templateName),this.templateRendered=!0,this},renderTemplateOnce:function(e){return this.templateRendered||this.renderTemplate(e),this}}}),ABINE_DNTME.define("duckbone/stylizeable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,a,t,n,i){i.StylizeableView={isStylizeableView:!0,included:function(){this.hasViewLifecycleExtensions||i.include(this,i.ViewLifecycleExtensions)},applyStyles:function(e){var t,n;for(var i in e=e||this.styles||{})t=i.split(".")[0],n=i.split(".")[1],"el"==i?a(this.el).css(e.el):"el"==t&&n&&a(this.el).hasClass(n)?a(this.el).css(e[i]):a(this.el).find(i).css(e[i])}}}),ABINE_DNTME.define("duckbone/pageable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(i,n,e,t,a){a.PageableView={isPageableView:!0,included:function(){this.isTemplateableView||a.include(this,a.TemplateableView)},getTemplate:function(e){a.TemplateableView.getTemplate.call(this,e,!0),this.template=this.template||a.Handlebars.compile('{{child "list"}}{{child "pager"}}')},createChildren:function(){var e=this.createListView(),t=this.createPagerView();return this.application=this.options.application||this.application,this.application&&this.collection.on("pageChange",function(e,t){var n=window.location.hash.split("?")[0]+"?";n+=i(i.keys(t)).map(function(e){return e+"="+t[e]}).join("&"),this.application.navigate(n,!1)},this),{list:e,pager:t}},createListView:function(){return new a.ListView({viewClass:this.viewClass,pageableView:this,tagName:"ul",className:"listable_view",collection:this.collection})},createPagerView:function(){return new(this.options.pagerClass||this.pagerClass||Pager)({collection:this.collection,pageableView:this})},showPage:function(e){e=parseInt(e)||1,this.collection.setPage(e)},showNextPage:function(){this.showPage(this.collection.currentPage+1)},showPreviousPage:function(){this.showPage(this.collection.currentPage-1)},scrollToTopOfList:function(){var e=n(this.children.list.el).offset().top-20;n("html body").animate({scrollTop:e},400,"swing")}};var r='<div class="pager">&nbsp;<br/>    {{#if showPrevious}}      <a href="#" class="previous_link">&laquo;&nbsp;Previous</a>&nbsp;    {{else}}      <span class="inactive">&laquo;&nbsp;Previous</span>&nbsp;    {{/if}}    {{#each pages}}      {{#if currentPage}}        <span class="current">{{title}}</span>&nbsp;      {{else}}        <a href="#" class="page_link" data-page="{{id}}">{{title}}</a>&nbsp;      {{/if}}    {{/each}}    {{#if showNext}}      <a href="#" class="next_link">Next&nbsp;&raquo;</a>    {{else}}      <span class="inactive">Next&nbsp;&raquo;</span>    {{/if}}  </div>';Pager=e.View.extend({el:'<div class="pager_view"></div>',templateData:r,events:{"click a.previous_link":"showPreviousPage","click a.next_link":"showNextPage","click a.page_link":"showPage"},initialize:function(){this.render(),this.collection.on("all",this.render,this)},render:function(){return this.collection.numPages&&this.renderTemplate(this.paginationData()),1<this.collection.numPages?n(this.el).show():n(this.el).hide(),this},paginationData:function(){var e=this.collection.numPages;return{showPrevious:1<this.collection.currentPage,numPages:e,showNext:this.collection.currentPage<this.collection.numPages,pages:i(i.range(1,e+1)).map(function(e){return{id:e,title:""+e,currentPage:e==this.collection.currentPage}},this)}},showPage:function(e){e.preventDefault();var t=parseInt(n(e.target).data("page"));return this.options.pageableView.showPage(t),this.options.pageableView.scrollToTopOfList(),!1},showPreviousPage:function(e){return e.preventDefault(),this.options.pageableView.showPreviousPage(),this.options.pageableView.scrollToTopOfList(),!1},showNextPage:function(e){return e.preventDefault(),this.options.pageableView.showNextPage(),this.options.pageableView.scrollToTopOfList(),!1}}),a.include(Pager.prototype,a.TemplateableView)}),ABINE_DNTME.define("duckbone/pageable_collection",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(n,e,i,t,a){function r(e,t){t=t||{};var n="function"==typeof e.url?e.url():e.url;for(var i in n.indexOf("?")<0&&(n+="?"),t)n+=i+"="+t[i]+"&";return n}a.PageableCollection={isPageableCollection:!0,parse:function(e){return this.numPages=e.num_pages,this.limitValue=e.limit_value,this.currentPage=e.current_page,this.totalCount=e.total_count,e.records},fetch:function(){this.fetchPage(1)},fetchPage:function(e,t){return e=e||1,t=t||n.clone(this.params)||{},i.Collection.prototype.fetch.call(this,{url:r(this,n.extend(t,{page:e})),success:function(e){e.trigger("pageChange",e.currentPage,t)}})},setParam:function(e,t){this.params=this.params||{},this.params[e]=t},setPage:function(e){if(e!=this.currentPage&&0<e&&e<=this.numPages)return this.fetchPage(e)},nextPage:function(){return this.fetchPage(this.currentPage+1)},prevPage:function(){return this.fetchPage(this.currentPage-1)},updateTotalCountOnCollectionEvents:function(){this.on("add",function(){this.totalCount&&(this.totalCount+=1)},this),this.on("remove",function(){this.totalCount&&(this.totalCount-=1)},this)}}}),ABINE_DNTME.define("duckbone/bindable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,s,o,l,i){i.BindableView={isBindableView:!0,included:function(){this.hasViewLifecycleExtensions||i.include(this,i.ViewLifecycleExtensions)},bindAttributes:function(e){if(this.attributeChanges)for(var t in e=e||this.model||new o.Model,this.attributeChanges)this.bindAttribute(e,t,this.attributeChanges[t])},bindAttribute:function(e,t,n){e=e||this.model||new o.Model;var i,a=l.Utils.escapeExpression(e.get(t));"function"==typeof n?(n.call(this,a),i=function(){n.call(this,l.Utils.escapeExpression(e.get(t)))}):"string"==typeof n&&(s(this.el).find(n).html(a),i=function(){s(this.el).find(n).html(l.Utils.escapeExpression(e.get(t)))}),this._attributeBindings=this._attributeBindings||[];var r="change:"+t;this._attributeBindings.push([e,r,i]),this.weakBindTo(e,r,i,this)},unbindAttributes:function(){this._attributeBindings&&(e(this._attributeBindings).each(function(e){e[0].unbind(e[1],e[2])}),delete this._attributeBindings)},bindLiveTimestamps:function(){},unbindLiveTimestamps:function(){}},l&&l.registerHelper("live_timestamp",function(e){var t=i.Handlebars.getAttr(this,e);if(!t)return"";var n=new Date(t);return n?new l.SafeString('<span data-live-timestamp="'+n.getTime()+'">'+i.helpers.dateToPrettyTimeAgo(n)+"</span>"):""})}),ABINE_DNTME.define("duckbone/listable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(a,r,t,e,n){function i(e){e.viewClass=e.options.viewClass||e.viewClass||new t.View}function s(e){e.collection=e.options.collection||e.collection||new t.Collection}n.ListableView={isListableView:!0,tagName:"ul",className:"listable_view",included:function(){this.hasViewLifecycleExtensions||n.include(this,n.ViewLifecycleExtensions),this.isBindableView||n.include(this,n.BindableView),this.isNestableView||n.include(this,n.NestableView)},render:function(e){return this.doc=this.doc||this.options.doc||document,this._viewsRendered&&!e||(this.renderItems(),this.collectionEventsBound||(this.bindCollectionEvents(),this.collectionEventsBound=!0),this._viewsRendered=!0),this},createChildren:function(){return a.reduce(this.collection.models,function(e,t){return e[t.cid]=new this.viewClass({model:t,doc:this.doc}),e},{},this)},renderItems:function(){i(this),s(this),this.setupNestedViews();var t=this.doc.createDocumentFragment();a.each(this.children,function(e){t.appendChild(e.el)}),this.el.appendChild(t)},bindCollectionEvents:function(e){var t;for(var n in s(this),e=e||this.collectionEvents||o){if("string"==typeof(t=e[n])&&(t=this[t]),"function"!=typeof t)throw"Duckbone.ListableView.bindCollectionEvents() called with bad handler for "+n;this.weakBindTo(this.collection,n,t,this)}},refresh:function(e){e=e||{},this.empty(),this.collection.fetch()},getViewByModel:function(e){return this.children[e.cid]},collectionReset:function(){this.removeNestedViews(),this.render(!0)},collectionAdd:function(e){var t=new this.viewClass({model:e,doc:this.doc});this.children[e.cid]=t;var n=a(this.collection.models).indexOf(e);if(0==n)r(this.el).prepend(t.el);else{var i=r(this.el).children().eq(n-1);r(i).after(t.el)}},collectionRemove:function(e){this.children[e.cid].remove(),delete this.children[e.cid]}};var o={reset:"collectionReset",add:"collectionAdd",remove:"collectionRemove"}}),ABINE_DNTME.define("duckbone/flashable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(n,i,e,t,a){a.FlashableView={isFlashableView:!0,configureFlash:function(e){if(!e.container)throw"configureFlash called without a container";var t={noticeDuration:1e4,fadeDuration:300};this.flashOptions=n.extend(t,e),r.fadeDuration=this.flashOptions.fadeDuration,e.noticeTemplate&&"string"==typeof e.noticeTemplate?o.prototype.templateData=e.noticeTemplate:"function"==typeof e.noticeTemplate&&(o.prototype.template=e.noticeTemplate),e.errorTemplate&&"string"==typeof e.errorTemplate?FlashErrorView.prototype.templateData=e.errorTemplate:"function"==typeof e.errorTemplate&&(FlashErrorView.prototype.template=e.errorTemplate)},flashNotice:function(e,t){var n=new o({model:{message:e},duration:t=t||1e4});return i(this.flashOptions.container).append(n.el),i(n.el).hide().slideDown(300),n},flashAlert:function(e){var t=new l({model:{message:e}});return i(this.flashOptions.container).append(t.el),i(t.el).hide().slideDown(300),t},activeFlashes:function(){return i(this.flashOptions.container).find("div.flash_notice, div.flash_alert")},clearFlashes:function(e){if(this.flashOptions){var t=this.activeFlashes();e?t.remove():t.fadeOut(this.flashOptions.fadeDuration)}}};var r=e.View.extend({events:{"click a.close":"dismiss"},fadeDuration:300,dismiss:function(e){return e&&e.preventDefault(),i(this.el).fadeOut(this.fadeDuration),n.delay(n.bind(this.remove,this),this.fadeDuration),!1}});a.include(r.prototype,a.TemplateableView);var s='<div class="message">{{{message}}}</div>     <div class="close"><a href="#" class="close">X</a></div>',o=r.extend({className:"flash_notice",templateData:s,afterInitialize:function(){this.options.duration&&n.delay(n.bind(this.dismiss,this),this.options.duration)}}),l=r.extend({className:"flash_alert",templateData:s})}),ABINE_DNTME.define("duckbone/bindable_field",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,r,t,n,a){function s(e,t,n,i){i=i||!1,void 0===n&&(n=null),a.ModelHelpers.setOne.call(e,t,n,{silent:i})}a.BindableField={isBindableField:!0,get:function(){var e=this.domToModelTransform(r(this.el).val());return this.stripWhitespace&&!1!==this.options.stripWhitespace&&(e=e.replace(/^\s+|\s+$/g,"")),e},set:function(e){r(this.el).val(this.modelToDomTransform(e))},modelToDomTransform:function(e){return e!==undefined||e!==NaN?e:""},domToModelTransform:function(e){return e},bindToModel:function(t){if(!(t=t||this.options.modelAttribute||this.modelAttribute||this.options.name||this.name))throw"Duckbone.BindableField.bindToModel() called without a modelAttribute";this.modelAttribute=t;var n=this,i=this.model,e="change:"+t;n.form.view.weakBindToModel(e,function(){var e=i.get(t);e!==n.get()&&a.ModelHelpers.isValidAttribute(e)&&n.set(e)}),n.set(i.get(t))},bindToDOM:function(e,t,n){if(!(e=e||this.options.modelAttribute||this.modelAttribute||this.options.name||this.name))throw"Duckbone.BindableField.bindToDOM() called without a modelAttribute";this.modelAttribute=e;t=this.options.changeEvent||this.changeEvent||"change";n=n||this.el;var i=this,a=this.model;r(n).bind(t,function(){s(a,e,i.get())}),s(a,e,i.get())}}}),ABINE_DNTME.define("duckbone/validateable_field",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,o,t,n,a){a.ValidateableField={isValidateableField:!0,bindValidation:function(e,t){if(this.options.validate||this.options.required){var n=this;e=e||this.options.validateEvent||"change",t=t||this.el;var i=o(window),a=null,r=function(){a=new Date},s=function(){i.unbind("mouseup",s),n.validate()};this.form.view&&this.form.view.isBindableView?this.form.view.weakBindTo(i,"mousedown",r):i.bind("mousedown",r),o(t).bind(e,function(){a&&new Date-a<10?i.bind("mouseup",s):n.validate()})}},validate:function(e,t){if((t=t||!1)||this.clearErrors(),this.valid=!0,!this.options.validate&&this.options.required&&(this.options.validate="required",this.options.invalidMessage=this.options.invalidMessage||"Required"),"string"==typeof(e=e||this.options.validate)&&(e=a.forms.validators[e]),!e)return!0;var n=this.options.invalidMessage||"Invalid";if(0==e.call(this,this.get())&&(this.valid=!1),this.valid||t){var i=this.get();a.ModelHelpers.isValidAttribute(i)&&this.set(i)}else this.addError(n);return this.valid},addError:function(e){if(!this.errorList){this.errorList=o("<ul>").addClass("error");var t=o(this.el).parents("form").find("div."+this.name+"_errors").get(0);t?o(t).append(this.errorList):o(this.el).after(this.errorList)}this.errorList.append(o("<li>").html(e))},clearErrors:function(){this.errorList&&(this.errorList.remove(),this.errorList=null)}}}),ABINE_DNTME.define("duckbone/form_fields",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core","abine/intl"],function(t,s,e,o,n,a){o.registerHelper("form",function(e,t){var n=e;return(n=n.replace(/^(new_)(.*)/,"$2").replace(/^(edit_)(.*)/,"$2"))!=e&&(n+=" "+e),'<form action="#" name="'+e+'" class="'+n+'">\n'+t(this)+"\n</form>"}),o.registerHelper("form_error_banner",function(e){return e="string"==typeof e?e:"mm_duckbone_default_form_error",e=a.getText(e),new o.SafeString('<div class="error_banner alert alert-error" style="display: none">'+o.Utils.escapeExpression(e)+"</div>")}),o.registerHelper("form_error",function(e){return new o.SafeString('<div class="'+o.Utils.escapeExpression(e)+'_errors"></div>')}),o.registerHelper("form_label",function(e,t){var n;return n="object"==typeof t?(n=(n=e).replace(/^(.)/,function(e){return e.toUpperCase()})).replace(/(\_[a-z])/g,function(e){return e.toUpperCase().replace("_"," ")}):"function"==typeof t?new o.SafeString(t(this)):a.getText(t),new o.SafeString('<label data-field-name="'+o.Utils.escapeExpression(e)+'">'+o.Utils.escapeExpression(n)+"</label>")}),o.registerHelper("form_text",function(e){return new o.SafeString('<input class="form_text" type="text" name="'+o.Utils.escapeExpression(e)+'"/>')}),o.registerHelper("form_select",function(e){return new o.SafeString('<select class="form_select" name="'+o.Utils.escapeExpression(e)+'"></select>')}),o.registerHelper("form_radio_set",function(e){return new o.SafeString('<div class="form_radio_set" name="'+o.Utils.escapeExpression(e)+'"></div>')}),o.registerHelper("form_checkbox",function(e){return new o.SafeString('<input class="form_checkbox" type="checkbox" name="'+o.Utils.escapeExpression(e)+'"/>')}),o.registerHelper("form_textarea",function(e){return new o.SafeString('<textarea class="form_textarea" name="'+o.Utils.escapeExpression(e)+'"></textarea>')}),o.registerHelper("form_password",function(e){return new o.SafeString('<input class="form_password" type="password" name="'+o.Utils.escapeExpression(e)+'"></input>')}),o.registerHelper("form_submit",function(e,t){return void 0===t&&(t="mm_duckbone_default_form_submit_text"),"object"==typeof t&&(t="mm_duckbone_default_form_submit_text"),t=a.getText(t),new o.SafeString('<button class="form_submit" name="'+o.Utils.escapeExpression(e)+'">'+o.Utils.escapeExpression(t)+"</button>")}),o.registerHelper("form_submit_with_spinner",function(e,t,n){n="object"==typeof n?"/pages/images/ajax_loader.gif":n,void 0===t&&(t="mm_duckbone_default_form_submit_text"),"object"==typeof t&&(t="mm_duckbone_default_form_submit_text"),t=a.getText(t);var i='<button class="form_submit" name="'+o.Utils.escapeExpression(e)+'">'+o.Utils.escapeExpression(t)+"</button>";return i+='<img src="'+o.Utils.escapeExpression(n)+'" class="ajax_loading '+o.Utils.escapeExpression(e)+'_loading" style="display: none"/>',new o.SafeString(i)}),n.FormFieldBase=e.View.extend(),t.extend(n.FormFieldBase.prototype,n.BindableField,n.ValidateableField,{initialize:function(e){this.name=this.options.name||s(this.el).attr("name"),this.form=this.options.form,e.elAttributes&&s(this.el).attr(e.elAttributes),this.afterInitialize(e),this.createChildren(),this.bindToModel(),this.bindToDOM(),this.bindValidation()},afterInitialize:function(){},createChildren:function(){}}),n.TextFormField=n.FormFieldBase.extend({type:"text",stripWhitespace:!0}),n.SelectFormField=n.FormFieldBase.extend({type:"select",createChildren:function(){var e=this.options.selectOptions,t="function"==typeof e?e.call(this):e;for(var n in t){var i=s("<option></option>").attr({value:n});i.html(o.Utils.escapeExpression(t[n])),s(this.el).append(i)}}}),n.RadioSetFormField=n.FormFieldBase.extend({type:"radio_set",createChildren:function(){var e=this.options.selectOptions,t="function"==typeof e?e.call(this):e;for(var n in t){var i=this.form.name+"_"+this.name+"_"+n,a=s('<div><input type="radio"/><label for="'+i+'" class="radio_label"></label></div>');s(a).find("input").attr({id:i,name:this.name,value:n}),s(a).find("label").html(o.Utils.escapeExpression(this.options.selectOptions[n])),s(this.el).append(a)}var r=this.el;s(this.el).find("input").bind("change",function(){s(r).trigger("change")})},get:function(){return s(this.el).find("input:checked").attr("value")},set:function(e){var t=s(this.el).find("input:checked").get(0);t&&(t.checked=!1);var n=s(this.el).find('input[value="'+e+'"]').get(0);n&&(n.checked=!0)}}),n.CheckboxFormField=n.FormFieldBase.extend({type:"checkbox",get:function(){return s(this.el).is(":checked")},set:function(e){s(this.el).attr({checked:e})}}),n.TextAreaFormField=n.FormFieldBase.extend({type:"textarea",stripWhitespace:!0}),n.PasswordFormField=n.FormFieldBase.extend({type:"password"}),n.SubmitFormField=e.View.extend(),t.extend(n.SubmitFormField.prototype,n.BindableField,{type:"submit",initialize:function(e){this.form=e.form,this.name=e.name,this.spinnerEl=s(this.el).next("img.ajax_loading"),s(this.el).bind("click",t.bind(this.bindDisableAndSpin,this)),this.submitForm="undefined"==typeof e.submitForm||e.submitForm},bindDisableAndSpin:function(e){e.preventDefault(),this.form.model.off("sync:create",this.disableAndSpin),this.form.model.off("sync:update",this.disableAndSpin),this.form.model.on("sync:create",this.disableAndSpin,this),this.form.model.on("sync:update",this.disableAndSpin,this),this.submitForm&&this.form.submit()},disableAndSpin:function(){this.form.model.off("sync:create",this.disableAndSpin),this.form.model.off("sync:update",this.disableAndSpin),this.spinnerEl&&s(this.spinnerEl).fadeIn(),s(this.el).addClass("loading"),s(this.el).unbind("click"),s(this.el).bind("click",this.stealClick),this.form.model.on("sync:complete",this.syncComplete,this)},stealClick:function(e){return e.preventDefault(),!1},syncComplete:function(){s(this.el).unbind("click"),s(this.el).removeClass("loading"),this.spinnerEl&&s(this.spinnerEl).fadeOut(),s(this.el).bind("click",t.bind(this.bindDisableAndSpin,this))}}),n.forms.fieldTypes={text:n.TextFormField,select:n.SelectFormField,radio_set:n.RadioSetFormField,checkbox:n.CheckboxFormField,textarea:n.TextAreaFormField,password:n.PasswordFormField,submit:n.SubmitFormField}}),ABINE_DNTME.define("duckbone/editable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(r,s,o,e,l){function t(e,t){for(var n in t){var i=e[t[n]];"function"==typeof i&&e.weakBindToModel(n,i,e)}}function c(e,t){return e.name+"_"+t.name}function d(e){return"[name="+e+"]"}function u(e){var t=/^form_(.*)/.exec(s(e).attr("class"))[1];return l.forms.fieldTypes[t]}function n(e){var t=s(e).offset().top;t=f<t?t-f:0,s("html body").animate({scrollTop:t},m,h)}l.EditableView={isEditableView:!0,included:function(){this.hasViewLifecycleExtensions||l.include(this,l.ViewLifecycleExtensions)},createForm:function(e){var t=(e=e||{}).el||s(this.el).find("form").get(0)||s(this.el).get(0),n=e.fields||this.options.fields||this.fields,i=e.model||this.model,a=new l.FormManager({el:t,fields:n,model:i||new o.Model,view:this});return this.form=this.form||a,a},bindModelSyncEvents:function(){t(this,a),this.modelSyncEvents&&t(this,this.modelSyncEvents)},cloneModelForEditing:function(){if(!this.model)throw"Found not, has your model been. Cloned, it can not be.";this.originalModel=this.model,this.model=this.originalModel.clone(),this.weakBindToModel("sync:success",function(){var t=r.clone(this.model.attributes);r(this.form.fields).each(function(e){e.options.temporary&&delete t[e.modelAttribute]}),this.originalModel.set(t),i.call(this)},this)},expireClone:function(){if(this.originalModel){this.model.clear({silent:!0});var e=function(){throw"Attempted get/set on expired clone from Duckbone.EditableView. Use original model instead."};this.model.set=e,this.model.get=e,this.model=this.originalModel,delete this.originalModel}},resetModel:function(){if(!this.originalModel)throw"Cloned not, has your model been. Reset, we can not do.";this.model.set(this.originalModel.attributes)},defaultModelSyncSavingHandler:function(){s(this.el).find("div.error_banner").hide(),r.each(this.form.fields,function(e){e.isValidateableField&&e.clearErrors()},this)},defaultModelSyncInvalidHandler:function(){s(this.el).find("div.error_banner").show(),r.each(this.model.errors,function(e,t){var n=this.form.getFieldForModelAttribute(t);r.each(this.model.errors[t],function(e){n&&n.isValidateableField?n.addError(e):r.log("Cannot add error for field "+t+": "+e)},this)},this),s(this.el).find("div.error_banner").show(),n(this.el)},defaultModelSyncSuccessHandler:function(){},defaultModelSyncErrorHandler:function(){},defaultModelSyncCompleteHandler:function(){}},l.FormManager=function(e){this.el=e.el||s('<form action="#"></form>').get(0),this.fieldOptions=r.clone(e.fields)||{},this.model=e.model||new o.Model({}),this.view=e.view,this.name=s(this.el).attr("name")||"untitled_form",this.createFields()},r.extend(l.FormManager.prototype,o.Events),r.extend(l.FormManager.prototype,{createFields:function(){var e,t,n=this;for(t in this.fieldOptions)e=this.createField(t,this.fieldOptions[t]);s(this.el).find("button.form_submit").each(function(){t=s(this).attr("name"),n.fields[t]||(e=new l.forms.fieldTypes.submit({name:t,el:this,form:n}),n.fields[e.name]=e)}),s(this.el).find("label").each(function(){var e=s(this).attr("data-field-name");e&&n.fields[e]&&s(this).attr("for",c(n,n.fields[e]))})},createField:function(e,t){var n,i,a;if(this.fields=this.fields||{},!(n=s(this.el).find(d(e)).get(0)))throw"Form field "+e+" defined in view, missing in template";if(!(i=t.type?l.forms.fieldTypes[t.type]:u(n)))throw"Bad form field type "+e;return(a=new i(r.extend(t,{el:n,model:this.model,form:this,name:e}))).name=e,s(a.el).attr("id",c(this,a)),this.fields[e]=a},getField:function(e){return this.fields[e]},getFieldForModelAttribute:function(t){return r.detect(this.fields,function(e){return e.modelAttribute==t},this)},validate:function(){for(var e in this.isValid=!0,this.fields)!this.fields[e].validate||this.fields[e].validate()||(this.isValid=!1);return this.isValid},submit:function(t){this.validate()?(t=r.clone(t)||{},r.each(["success","error"],function(e){if("function"==typeof t[e]){var n=t[e];t[e]=function(e,t){r.defer(r.bind(n,e,e,t))}}},this),this.model.save(null,t)):(r.log("Form is invalid."),s(this.el).find("div.error_banner").show(),n(this.el))}});var i=function(){var e=this.options.afterSaveDestination||this.afterSaveDestination;e&&(e instanceof Array||(e=[e]),r.each(e,function(e){if(e.collection)e.collection.add(this.originalModel);else{var t="set"+e.association.slice(0,1).toUpperCase()+e.association.slice(1);e.model[t].call(e.model,this.originalModel)}},this))},a={"sync:create":"defaultModelSyncSavingHandler","sync:update":"defaultModelSyncSavingHandler","sync:success":"defaultModelSyncSuccessHandler","sync:invalid":"defaultModelSyncInvalidHandler","sync:error":"defaultModelSyncErrorHandler","sync:complete":"defaultModelSyncCompleteHandler"},m=400,h="swing",f=100}),ABINE_DNTME.define("duckbone/form_validations",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.forms=a.forms||{},a.forms.validators=a.forms.validators||{},e.extend(a.forms.validators,{required:function(e){return!(e==undefined||null==e||""==e)},USPhone:function(e){return/^\(?(\d{3})\)?[\- ]?\d{3}[\- ]?\d{4}$/.test(e)},date:function(e){return/^(?:0?[1-9]|1[0-2])\/(?:0?[1-9]|[12][0-9]|3[01])\/\d{2}?\d{2}$/.test(e)},email:function(e){return/^([A-Za-z0-9\._%\+\-]+)@([A-Za-z0-9\-]+\.)+([A-Za-z]{2,})$/.test(e)},numeric:function(e){return parseFloat(e)!=NaN}})}),ABINE_DNTME.define("duckbone/simple_queue",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(t,e,n,i){i.SimpleQueue=function(e){this.interval=e.interval||400,this.elements=[],this.callback=e.callback,this.running=!1},t.extend(i.SimpleQueue.prototype,{push:function(e){this.elements.push(e),this.comparator&&t(this.elements).sortBy(this.comparator),this.running||(this.running=!0,this.timer=setInterval(t.bind(this.shift,this),this.interval))},shift:function(){if(0==this.elements.length)this.running=!1,clearInterval(this.timer);else{var e=this.elements.shift();this.callback.call(e,e,this)}}})}),ABINE_DNTME.define("duckbone/base_classes",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core","jquery","abine/timer"],function(t,e,n,i,a,r){i.Model=e.Model.extend(),i.include(i.Model.prototype,i.AssociableModel,i.ModelHelpers,i.Syncable),i.Collection=e.Collection.extend(),i.include(i.Collection.prototype,i.CollectionHelpers,i.Syncable),i.View=e.View.extend(),i.include(i.View.prototype,i.TemplateableView,i.BindableView),i.View.prototype.transferEvents=function(e,i){t.each(e,t.bind(function(n){"resize"!=n?this.on(n,function(e,t){i.trigger.apply(i,[n,e,t])}):this.on(n,function(e){r.setTimeout(t.bind(function(){i.trigger.apply(i,[n,e])},this),50)})},this))},e.View.prototype.make=function(e,t,n){var i=(this.doc||this.options.doc||document).createElement(e);return t&&a(i).attr(t),n&&a(i).html(n),i},i.FormView=i.View.extend(),i.include(i.FormView.prototype,i.EditableView),i.ListView=e.View.extend(),i.include(i.ListView.prototype,i.ListableView,i.BindableView),i.Application=e.Router.extend(),i.include(i.Application.prototype,i.RouteableApplication,i.FlashableView)}),ABINE_DNTME.define("duckbone/security",["documentcloud/underscore","jquery","duckbone/core"],function(e,t,n){function i(e,t,n){if(!e._unlockHooked){e._unlockHooked=!0;var i=function(){a(e,t,n)};ABINE_DNTME.App.on("unlocked",i),t.prototype._oldBeforeRemove=t.prototype.beforeRemove,t.prototype.beforeRemove=function(){t.prototype.beforeRemove=t.prototype._oldBeforeRemove,t.prototype.beforeRemove&&t.prototype.beforeRemove.apply(e,arguments),e._unlockHooked=!1,ABINE_DNTME.App.off("unlocked",i)}}}function a(e,t,n){if(ABINE_DNTME.App.isLocked())return i(e,t,n),e;t.prototype._oldRender.apply(e,n)}function r(e,t){ABINE_DNTME.App.isLocked()?ABINE_DNTME.App.renderPage():e._oldRouteAction.apply(e,t)}n.Security={showBlankWhenLocked:function(e){e.prototype._oldRender=e.prototype.render,e.prototype.render=function(){a(this,e,arguments)}},showLoginWhenLocked:function(e){e._oldRouteAction=e.routeAction,e.routeAction=function(){r(e,arguments)}}}}),ABINE_DNTME.requireDuckbone=function(e){ABINE_DNTME.require(["duckbone/core","duckbone/model","duckbone/syncable","duckbone/collection","duckbone/routeable_application","duckbone/view_lifecycle_extensions","duckbone/handlebars_extensions","duckbone/idme_template_registry","duckbone/nestable_view",
"duckbone/templateable_view","duckbone/stylizeable_view","duckbone/pageable_view","duckbone/pageable_collection","duckbone/bindable_view","duckbone/listable_view","duckbone/flashable_view","duckbone/bindable_field","duckbone/validateable_field","duckbone/form_fields","duckbone/editable_view","duckbone/form_validations","duckbone/simple_queue","duckbone/base_classes"],function(){e()})},ABINE_DNTME.define("models",[],function(){return{}}),ABINE_DNTME.requireModels=function(e){ABINE_DNTME.require(["abine/models/base","abine/models/blacklist","abine/models/disposableCard","abine/models/disposableEmail","abine/models/disposablePhone","abine/models/dntStats","abine/models/preference","abine/models/autofillFeedback","abine/models/mappedForm","abine/models/pageData","abine/models/mappedField","abine/models/mappingMenu","abine/models/shieldedCard","abine/models/shieldedEmail","abine/models/shieldedPhone","abine/models/emailDomain","abine/models/tabData","abine/models/address","abine/models/account","abine/models/identity","abine/models/realCard","abine/models/globalData","abine/models/feedback","abine/models/trackerInfo","abine/models/advt","abine/models/extensionVersion","abine/models/loginUrl"],function(){e()})},ABINE_DNTME.define("abine/models/base",["abine/contentMessenger","documentcloud/backbone","duckbone/core","models"],function(e,t,n,i){function d(){return a||(a=ABINE_DNTME.contentMessenger||new e.ContentMessenger({messengerId:"model"})),a}var a,r=function(e,t,n){var i,a,r,s=n.payload||{};!t||"create"!=e&&"update"!=e||delete(s=t.toJSON()).messenger,n.eventName?i=n.eventName:(i=t.model?e+":"+t.model.storageEntity:e+":"+t.storageEntity,"create"!=e&&(i+=":"+t.id)),a="response:"+i.split(":").slice(1).join(":"),r="error:"+i.split(":").slice(1).join(":");var o=t.messenger;!o&&t.collection&&t.collection.messenger&&(o=t.collection.messenger),o||(o=d());var l=function(e){o.off(a,l),o.off(r,c),delete t.errors,n.success.call(t,e,200,null),t.trigger("sync:success",e)},c=function(e){o.off(r,c),o.off(a,l),delete t.errors,n.error.call(t,e,500,null),t.trigger("sync:error",e)};o.on(a,l,t),o.on(r,c,t),t.trigger("sync:"+e.toLowerCase()),o.send(i,s)},s=function(e){var t=this.get(e);return"1"===t||"true"===t||!0===t||1===t},o=function(e){return!s(e)},l=t.Model.extend({sync:r,getMessenger:d,isTrue:s,isFalse:o});n.include(l.prototype,n.AssociableModel,n.ModelHelpers);var c=t.Collection.extend({sync:r,getMessenger:d,fetchAll:function(e){(e=e||{}).eventName=["read",this.model.prototype.storageEntity,"all"].join(":"),this.fetch(e)},search:function(e,t){var n={success:t};n.eventName=["search",this.model.prototype.storageEntity,btoa(e)].join(":"),this.fetch(n)}});return n.include(c.prototype,n.CollectionHelpers),{BaseModel:i.BaseModel=l,BaseCollection:i.BaseCollection=c}}),ABINE_DNTME.define("abine/models/blacklist",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"blacklist",initialize:function(){this.messenger=this.getMessenger()},getDomain:function(){return this.get("domain")},getId:function(){return this.get("id")},fetchByDomain:function(e,t){var n=this,i=e?"create":"read",a=this.get("domain");a&&(a=a.replace(":","::"));var r=i+":blacklist:domain:"+a;this.sync(i,this,{eventName:r,success:function(e){n.set(e),t(null)},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/site]#[loadAccounts]# error event in model.sync eventName: create/read:blacklist:domain:domain"),t("No blacklist")}})},emailEnabled:function(){return this.get("globalEmail")&&!this.get("email")},phoneEnabled:function(){return this.get("globalPhone")&&this.get("premium")&&!this.get("phone")},cardEnabled:function(){return this.get("globalCard")&&this.get("hasEnabledCard")&&!this.get("card")},accountsEnabled:function(){return this.get("hasEnabledAccounts")},passwordsEnabled:function(){return this.get("globalPassword")&&!this.get("password")},loginsEnabled:function(){return this.get("globalLogin")&&!this.get("login")}}),i=t.BaseCollection.extend({model:n});return{Blacklist:t.Blacklist=n,BlacklistCollection:t.BlacklistCollection=i}}),ABINE_DNTME.define("abine/models/disposableCard",["models","abine/eventLogger","abine/assets"],function(e,t,n){var i=e.BaseModel.extend({storageEntity:"disposableCard",initialize:function(){},isGift:function(){return this.isTrue("gift")},getCreatedDate:function(){var e=this.get("createdAt").substring(0,10).split("-");return e[1]+"/"+e[2]+"/"+e[0]},isOldMaskedCard:function(){return"old_masked_card"==this.get("cardType")},getBrand:function(){return this.get("brand").toLowerCase()},isCompany:function(){return this.isTrue("company")},getRecipientEmail:function(){return this.get("recipient_email")},getTotalFee:function(){return this.get("total_fee")},isActive:function(){return this.isTrue("active")},getID:function(){return this.id},getGUID:function(){return this.get("guid")},getAmountRefunded:function(){return"$"+(this.get("amount_refunded")/100).toFixed(2)},getOriginalValue:function(){return"$"+(this.get("original_amount")/100).toFixed(2)},getMaskedCardImage:function(){return this.get("type").match(/visa/i)?n.assetUrl("/pages/images/2015panels/masked_card_visa.png"):n.assetUrl("/pages/images/2015panels/masked_card_blank.png")},getTotalCharge:function(){return"$"+((this.get("original_amount")+this.get("total_fee"))/100).toFixed(2)},isAch:function(){return this.get("payment_source")&&("checking"==this.get("payment_source")||"savings"==this.get("payment_source"))},refundDate:function(){return new Date(Date.now()+6048e5).toLocaleDateString()},getCardDetails:function(){return this.getCardNumber()+" - "+this.getExpiry()},getLastFour:function(){return this.get("number")?this.get("number").substr(this.get("number").length-4):this.get("last_four")},getCardNumber:function(){return this.get("number")},getSeparatedCardNumber:function(){var e=this.get("number");return 16==e.length?e.substring(0,4)+" "+e.substring(4,8)+" "+e.substring(8,12)+" "+e.substring(12,16):e},getSeparatedMaskedCardNumber:function(){var e=this.get("number");if(16==e.length)return Array(4).join("**** ")+e.substring(12,16);var t=this.get("type");return t&&t.match(/amex|american/i)?"**** ****** *"+e.substr(-4):Array(e.length-3).join("*")+e.substr(-4)},getMaskedVerification:function(){return Array(this.get("cvc").length+1).join("*")},getMaskedExpiry:function(){return this.getExpiry().replace(/[0-9]/g,"*")},getType:function(){return this.get("type").toLowerCase()},getPrettyNumber:function(){for(var e="",t=0;t<this.get("number").length;t++)e+=this.get("number").charAt(t),t%4==3&&(e+="  ");return e},getPlainLabelOrLastFour:function(){return"x"+this.getLastFour()},getCVC:function(){return this.get("cvc")},getExpiry:function(){var e=parseInt(this.get("expiry_month"));return e<10&&(e="0"+e),e+"/"+this.get("expiry_year")},getLabel:function(){var e=this.get("label");return e&&15<e.length&&(e=e.substr(0,12)+"..."),e},getDomain:function(){var e=this.get("domain");return e&&15<e.length&&(e=e.substr(0,12)+"..."),e},getProtectedNumber:function(){var e=this.get("number")+"";return e.substr(0,e.length-12).replace(/./g,"x")+e.substr(e.length-4)},getProtectedVerification:function(){var e=this.get("verification")+"";return e.substr(0,e.length-1).replace(/./g,"x")+e.substr(e.length-1)},toggleDisposable:function(){this.save({active:1===this.get("active")?0:1})}});i.convertStringToCents=function(e){return parseFloat(e).toFixed(2).toString().replace(".","")};var a=e.BaseCollection.extend({model:i,fetchAllLocal:function(e){"undefined"==typeof(e=e||{}).reset&&(e.reset=!0),e.eventName=["read",this.model.prototype.storageEntity,"allLocal"].join(":"),this.fetch(e)},fetchAllBySite:function(e){this.sync("read",this,{eventName:"read:disposableCard:site:"+e,success:function(e){this.reset(e)},error:function(){t.error("[ERROR HANDLER][abine/models/disposableCard][fetchAllBySite]: error event in model.sync event: read:disposableCard:site:id")}})},fetchAllFromServer:function(t){this.sync("read",this,{eventName:"read:disposableCard:server",success:function(e){this.reset(e),t.success(e)},error:function(){t.error(),ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableCard]#[fetchAllFromServer]# error event in model.sync eventName: read:disposableCard:server")}})},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:disposableCard:domain:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableCard]#[fetchAllByDomain]# error event in model.sync eventName: read:disposableCard:domain:domain")}})},comparator:function(e){return new Date-new Date(e.get("createdAt"))}});return{DisposableCard:e.DisposableCard=i,DisposableCardCollection:e.DisposableCardCollection=a}}),ABINE_DNTME.define("abine/models/disposableEmail",["models","documentcloud/underscore"],function(e,t){var n=e.BaseModel.extend({storageEntity:"disposableEmail",highlighted:!1,initialize:function(){this.hasOne({account:{model:e.Account}})},getId:function(){return this.get("id")},hasWebmail:function(){return!!(this.has("webmails")&&0<this.get("webmails").length)},getWebmailCount:function(){return this.hasWebmail()?this.get("webmails").length:0},hasAccount:function(){return!!(this.has("accountId")&&""!=this.get("accountId")&&this.account&&this.account.accountFields)&&t.any(this.account.accountFields.models,function(e){return e.get("value")==this.getAddress()},this)},getAddress:function(){return this.get("user")+"@"+this.get("domain")},getHighlightedClass:function(){return this.get("highlighted")?"highlighted":""},noConnectionError:function(){return!this.get("err")},isActive:function(){return 1==this.get("active")},toggleDisposable:function(e){this.save({active:1==this.get("active")?0:1},e)},needsTruncation:function(){return 20<this.getDomain().length},getTruncatedDomain:function(){return this.getDomain().substring(0,20)+"..."},getDomain:function(){return this.attributes.label?this.attributes.label:"Unknown"}}),i=e.BaseCollection.extend({model:n,interestedBroadcasts:/broadcast:saveForm:(new|update)/i,initialize:function(){this.messenger=this.getMessenger()},totalWebmails:function(){return t.reduce(this.models,function(e,t){return e+t.getWebmailCount()},0)},countUserCreated:function(){return t.reduce(this.models,function(e,t){return"abine.com"!=t.getDomain()?e+1:e},0)},fetchAllLocal:function(e){"undefined"==typeof(e=e||{}).reset&&(e.reset=!0),e.eventName=["read",this.model.prototype.storageEntity,"allLocal"].join(":"),this.fetch(e)},fetchAllBySite:function(e){this.sync("read",this,{eventName:"read:disposableEmail:site:"+e,success:function(e){this.reset(e)},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableEmail]#[fetchAllBySite]# error event in model.sync eventName: read:disposableEmail:site:id")}})},fetchAllFromServer:function(t){this.sync("read",this,{eventName:"read:disposableEmail:server",success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableEmail]#[fetchAllFromServer]# error event in model.sync eventName: read:disposableEmail:server")}})},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:disposableEmail:domain:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableEmail]#[fetchAllByDomain]# error event in model.sync eventName: read:disposableEmail:domain:domain")}})},comparator:function(e){return new Date-new Date(e.get("createdAt"))}});return{DisposableEmail:e.DisposableEmail=n,DisposableEmailCollection:e.DisposableEmailCollection=i}}),ABINE_DNTME.define("abine/models/disposablePhone",["models"],function(e){var t=e.BaseModel.extend({storageEntity:"disposablePhone",initialize:function(){this.hasOne({account:{model:e.Account}})},getCountryCode:function(){return this.get("country_code")||"1"},getAreaCode:function(){return this.get("number").substr(0,3)},getExchange:function(){return this.get("number").substr(3,3)},getLocal:function(){return this.get("number").substr(6,4)},getPrettyNumber:function(){return this.isNorthAmericaFormat()?"("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():this.get("number")},getFullPrettyNumber:function(){return this.isNorthAmericaFormat()?"+"+this.getCountryCode()+" ("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():"+"+this.getCountryCode()+" "+this.get("number")},getFormattedText:function(){return this.getFullPrettyNumber()},isNorthAmericaFormat:function(){return"1"==this.getCountryCode()},isSuspended:function(){return"true"==this.get("isSuspended")},toggleDisposable:function(){this.save({active:1===this.get("active")?0:1})},toFillData:function(){var e,t=this.toJSON(),n=t.country_code,i=t.number,a="",r="",s="",o="";return"1"==n?(a=i.substring(0,3),r=(s=i.substring(3,6))+"-"+(o=i.substring(6,10)),e="+1 ("+a+") "+s+"-"+o):(r="+"+n+i,e="+"+n+" "+i),t.label=e,t.area=a,t.exchange=s,t.local=o,t.last7=r,t}}),n=e.BaseCollection.extend({model:t,fetchAllBySite:function(e){this.sync("read",this,{eventName:"read:disposablePhone:site:"+e,success:function(e){this.reset(e)},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposablePhone]#[fetchAllBySite]# error event in model.sync event: read:disposablePhone:site:id")}})}});return{DisposablePhone:e.DisposablePhone=t,DisposablePhoneCollection:e.DisposablePhoneCollection=n}}),ABINE_DNTME.define("abine/models/dntStats",["documentcloud/underscore","models","jquery","abine/intl"],function(e,t,n,i){function a(e){for(var t=(e+="").split("."),n=t[0],i=1<t.length?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1,$2");return n+i}var r=t.BaseModel.extend({storageEntity:"dntStats",initialize:function(){this.messenger=this.getMessenger()},addCommas:function(e){for(var t=(e+="").split("."),n=t[0],i=1<t.length?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1,$2");return n+i},showMedals:function(){return this.get("showMedals")},viewedBadge:function(){return this.get("viewedBadge")},canAutoShowBadge:function(){if(this.get("viewedBadge")||!this.get("showMedals"))return!1;var e=this.get("earnedOn");return!e||Date.now()-e<2592e5},toggleViewedBadge:function(){this.save({viewedBadge:!this.get("viewedBadge")})},achievedBronze:function(){return-1<this.get("currentBadgeIndex")},achievedSilver:function(){return 0<this.get("currentBadgeIndex")},achievedGold:function(){return 1<this.get("currentBadgeIndex")},achievedPlatinum:function(){return 2<this.get("currentBadgeIndex")},getPlatinumCount:function(){return this.achievedPlatinum()?"x"+(this.get("currentBadgeIndex")-2):"X"},nextMedalAtFormatted:function(){return this.addCommas(this.nextMedalAt())},nextMedalAt:function(){return this.achievedPlatinum()?this.platinumLimit*(this.get("currentBadgeIndex")-1)-this.get("totalAllTimeTrackers"):this.achievedGold()?this.platinumLimit-this.get("totalAllTimeTrackers"):this.achievedSilver()?this.goldLimit-this.get("totalAllTimeTrackers"):this.achievedBronze()?this.silverLimit-this.get("totalAllTimeTrackers"):this.bronzeLimit-this.get("totalAllTimeTrackers")},getFunword:function(){var e=this.get("totalAllTimeTrackers");return e<=100?i.getText("mm_dntme_funword1"):e<=1e3?i.getText("mm_dntme_funword2"):e<=1e4?i.getText("mm_dntme_funword3"):i.getText("mm_dntme_funword4")},getBadgeCount:function(){var e=JSON.parse(this.get("currentBadge"));return this.addCommas(e.limit)},getBadgeType:function(){return JSON.parse(this.get("currentBadge")).cssClass},getAllTimeTotalTrackers:function(){return this.get("totalAllTimeTrackers")},formattedTotal:function(){return a(this.get("totalAllTimeTrackers")+"")},totalGreaterThan10000:function(){return 1e4<this.get("totalAllTimeTrackers")},totalGreaterThan1000000:function(){return 1e6<this.get("totalAllTimeTrackers")},getDailyTotalsByYear:function(e){var t=JSON.parse(this.get("dailyTrackerCounts"));return e in t?t[e]:{}},getBadTrackerDataByYear:function(e){var t=JSON.parse(this.get("badTrackers"));if(!t.totals)return{};var n=t.totals,i={},a=[e,e-1];for(var r in n)for(var s=0;s<a.length;s++){var o=r+"."+a[s];t.daily&&o in t.daily&&(i[r]={},i[r][a[s]]=t.daily[o])}return{totals:n,daily:i,links:{}}}});return{DntStats:t.DntStats=r}}),ABINE_DNTME.define("abine/models/preference",["documentcloud/underscore","models"],function(i,a){var n=a.BaseModel.extend({storageEntity:"preference",initialize:function(){},parse:function(e){return"true"==e.value?e.value=!0:"false"==e.value&&(e.value=!1),e},toJSON:function(){var e=i.clone(this.attributes);return!0===e.value?e.value="true":!1===e.value&&(e.value="false"),e}}),e=a.BaseCollection.extend({model:n,interestedBroadcasts:/broadcast:preference:reload/i,parse:function(e){return i(e).map(function(e){return"true"==e.value?e.value=!0:"false"==e.value&&(e.value=!1),e})},restoreDefaults:function(t){this.sync("update",this,{eventName:"update:preference:restore",success:i.bind(function(e){this.reset(this.parse(e)),t()},this),error:function(e){t(e)}})},getPrefFromStorage:function(e,t){this.sync("read",this,{eventName:"read:preference:name:"+e,success:function(e){i.isArray(e)&&0===e.length?t(null):i.isObject(e)?t(new n(e)):t(null)},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/preference]#[getPrefFromStorage]# error event in model.sync eventName: read:preference:name:key"),t(null)}})},isPrefTrue:function(t){var e=i(this.models).find(function(e){return e.get("key")===t});return!!e&&e.isTrue("value")},getPref:function(t){var e=i(this.models).find(function(e){return e.get("key")===t});return e?e.get("value"):null},isMapper:function(){return!0},setPref:function(t,e){var n=i(this.models).find(function(e){return e.get("key")===t});n?n.save({value:e}):((n=new a.Preference).save({key:t,value:e}),this.add(n))},removePref:function(t){var e=i(this.models).find(function(e){return e.get("key")===t});e&&(e.destroy(),this.remove(e))},hasPref:function(t){return!!i(this.models).find(function(e){return e.get("key")===t})},getSplitTest:function(e){var t=this.getPref("splitTests")||{};try{t=JSON.parse(t)}catch(n){}return t[e]||"default"}});return a.Preference=n,a.PreferenceCollection=e,{Preference:n,PreferenceCollection:e}}),ABINE_DNTME.define("abine/models/loginUrl",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"loginUrl"}),i=t.BaseCollection.extend({model:n,initialize:function(){},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:loginUrl:site:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/loginUrl]#[fetchAllByDomain]# error event in read:loginUrl:site:domain"),t(!0)}})}});return{LoginUrl:t.LoginUrl=n,LoginUrlCollection:t.LoginUrlCollection=i}}),ABINE_DNTME.define("abine/models/extensionVersion",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"extensionVersion",initialize:function(){this.messenger=this.getMessenger()}});return{ExtensionVersion:t.ExtensionVersion=n}}),ABINE_DNTME.define("abine/models/autofillFeedback",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"autofillFeedback"});return{AutofillFeedback:t.AutofillFeedback=n}}),ABINE_DNTME.define("abine/models/mappedForm",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"mappedForm",initialize:function(){this.hasMany({fields:{collection:t.MappedFieldCollection}})},searchSignature:function(t){this.sync("read",this,{eventName:"read:mappedForm:signature:"+this.get("signature"),success:e.bind(function(e){e?(this.set(e),t()):t(!0)},this),error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/mappedForm]#[searchSignature]# error event in searchSignature"),t(!0)}})}}),i=t.BaseCollection.extend({model:n,initialize:function(e){this.messenger=e.messenger},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:mappedForm:site:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/mappedForm]#[fetchAllByDomain]# error event in read:mappedForm:site:domain"),t(!0)}})},fetchLocalAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:mappedForm:local:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/mappedForm]#[fetchAllByDomain]# error event in read:mappedForm:site:domain"),t(!0)}})}});return{MappedForm:t.MappedForm=n,MappedFormCollection:t.MappedFormCollection=i}}),ABINE_DNTME.define("abine/models/mappedField",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"mappedField",initialize:function(){}}),i=t.BaseCollection.extend({model:n,initialize:function(){}});return{MappedField:t.MappedField=n,MappedFieldCollection:t.MappedFieldCollection=i}}),ABINE_DNTME.define("abine/models/mappingMenu",["documentcloud/underscore","models"],function(e,t){function i(e){if(e.children)for(var t=0;t<e.children.length;t++)i(e.children[t]);else if(e.type){if(a[e.type])return;var n;if(-1!=(n=(n=e.label?e.label:e.name).replace(/\([^\)]+\)/g,"").replace(/^[\s]+|[\s]+$/g,"")).indexOf("{"))return;a[e.type]=n}}function D(e){if(null==a)for(var t in a={},R)0<=R[t].length||i(R[t]);return a[e]||"Unknown"}function M(e){if(null==e)return"Other";var t={loginForm:"Login",registrationForm:"Register",checkoutForm:"Checkout",addressForm:"Address",changePasswordForm:"Change Password"};return e in t?t[e]:"Other"}function B(e,t,n,i,a){var r=[];if(!a)return r;var s={};for(var o in t)s[o]=t[o];var l=0;for(o=0;o<a.length;o++){var c={};u(t,n,a.at(o).toFillData(),c),-1==c.label.indexOf("{")&&(d(t,n,c),c.path=e+"."+i+"."+l,c.hasChildren=!0,r.push(new m(c)),l++)}return r}function S(e,t,n,i,a,r){var s={},o=a.toFillData();return u(t,n,o,s),-1!=s.label.indexOf("{")?null:(s.path=e+"."+i+"."+r,n.children&&(s.hasChildren=!0),d(t,n,s),l(n,s),null!=s.value&&(s.value=c(o,s.value),-1!=s.value.indexOf("{"))?null:new m(s))}function I(e,t,n,i,a){var r={};return r.label=c(n,i.name),-1!=r.label.indexOf("{")&&i.alternate_name&&(r.label=c(n,i.alternate_name)),-1!=r.label.indexOf("{")?null:(r.path=e+"."+a,d(n,i,r),i.children?r.hasChildren=!0:(l(i,r),t&&-1!=r.label.indexOf("never show auto-fill here")&&(r.label="Auto-fill disabled here, please enable.<br/>(show auto-fill here)",r.action="show_here")),new m(r))}function l(e,t){e.action&&(t.action=e.action),e.type&&(t.type=e.type),e.formType&&(t.formType=e.formType),e.value&&(t.value=e.value)}function d(e,t,n){t.panel_title&&(n.panelTitle=c(e,t.panel_title),-1!=n.panelTitle.indexOf("{")&&(n.panelTitle=n.panelTitle.replace(/\{[^\}]+\}/g,"Unknown")))}function u(e,t,n,i){i.label=c(e,t.name),i.label=c(n,i.label),-1!=i.label.indexOf("{")&&t.alternate_name&&(i.label=c(e,t.alternate_name),i.label=c(n,i.label))}function k(e,t){if(e.match(L))return"Address";if(e.match(O))return"Name";if(e.match(V))return"Card";if(e.match(z))return"Phone";if(e.match(n)){if("loginForm"==t)return"Login";if("registrationForm"==t)return"Register"}return null}function P(e,t){if(t.ref){var n=null;t.name&&(n=t.name),t=e[t.ref],null!=n&&(t.name=n)}return t}function c(e,t){for(var n in e)if(e[n]){if(-1==n.indexOf("{"))var i="{"+n+"}";else i=n;i=i.replace(/[\{\}]/g,"\\$&");t=t.replace(new RegExp(i,"g"),e[n])}return t}var R={loginForm:["dont_show","fill_logins","correct_login","mapping","list_accounts","list_emails","list_phones","report"],registrationForm:["dont_show","register","login_on_register","mapping","list_emails","list_phones","report"],checkoutForm:["dont_show","wallet","mapping","list_cards","list_emails","list_phones","report"],identityForm:["dont_show","identity","mapping","list_identities","list_emails","list_phones","list_phones","report"],addressForm:["dont_show","address","mapping","list_addresses","list_emails","list_phones","report"],phoneForm:["dont_show","phone","mapping","list_phones","report"],otherForm:["dont_show","mapping","report"],mapping:{id:"mapping",name:"Fill something different than {data_type}",alternate_name:"Fill unknown field with",children:[{ref:"register",name:"Fill Email, Username, or Password"},{ref:"wallet",name:"Fill Credit Cards or Masked Cards"},{ref:"address",name:"Fill Addresses"},{ref:"phone",name:"Fill Phones"},{ref:"others"}]},more:{id:"more",name:"More",action:"show_more"},report:{id:"report",name:"Report a problem (improve Blur) >",action:"report_problem"},dont_show_extension:{id:"dont_show",name:"Don't show again here",panel_title:"Blur sees: <u>{data_type}</u> on <u class=formType>{form_type}</u> Page",action:"dont_show_here"},dont_show:{id:"dont_show",name:"Don't show again here?",panel_title:"Blur sees: <u>{data_type}</u> on <u class=formType>{form_type}</u> Page",children:[{id:"field",name:"Don't show again on this field",action:"dont_show_on_field"},{id:"form",name:"Don't show again on this form",action:"dont_show_on_form"},{id:"site",name:"Don't show again on this {app}",action:"dont_show_on_site"}]},fill_logins:{id:"accounts",name:"Fill existing account info",when:"account_has_data",children:[{id:"{account}",name:"{label}",panel_title:"Select existing account info to fill",entities:"account",children:[{id:"{email}",name:"{email}",label:"Email",entity:"account",action:"fill",type:"/contact/email",formType:"loginForm"},{id:"{username}",name:"{username}",label:"Username",entity:"account",action:"fill",type:"/nameperson/friendly",formType:"loginForm"},{id:"{password}",name:"Password for {label}",label:"Password",entity:"account",value:"{password}",action:"fill",type:"/password",formType:"loginForm"}]}]},correct_login:{id:"correct",name:"Correct how the <b>{data_type}</b> is filled",children:[{id:"email",name:"Email",type:"/contact/email",formType:"loginForm"},{id:"username",name:"Username",type:"/nameperson/friendly",formType:"loginForm"},{id:"password",name:"Password",type:"/password",formType:"loginForm"},{id:"otp",name:"One Time Password",type:"/auth/otp"}]},list_accounts:{id:"list_accounts",name:"Add/Edit My Accounts",action:"show_list_accounts"},list_emails:{id:"list_emails",name:"Add/Edit My Emails",forType:"email",action:"show_list_identities"},list_phones:{id:"list_phones",name:"Add/Edit My Phones",forType:"phone",action:"show_list_identities"},list_cards:{id:"list_cards",name:"Add/Edit My Cards",action:"show_list_cards"},list_addresses:{id:"list_addresses",name:"Add/Edit My Addresses",action:"show_list_addresses"},list_identities:{id:"list_identities",name:"Add/Edit My Identities",action:"show_list_identities"},register:{id:"register",name:"Correct how the <b>{data_type}</b> is filled",panel_title:"Blur sees: <u>{data_type}</u> on <u class=formType>{form_type}</u> Page",children:[{id:"mask_email",name:"Fill New Masked Email",label:"Email",panel_title:"Blur sees: <u>{data_type}</u> on <u class=formType>{form_type}</u> Page",action:"mask_email",type:"/contact/email"},{id:"real_email",name:"Fill My Email ({email})",action:"real_email"},{id:"password1",name:"Fill New Strong Password",type:"/password/differentSpecialChars",action:"strong_password"},{id:"security",name:"Fill New Custom Password",label:"Password",children:[{id:"password2",name:"Limited special chars (.-_)",label:"Password with limited special chars",type:"/password/differentSpecialChars",action:"strong_password"},{id:"password3",name:"No special characters",label:"Password without special",type:"/password/noSpecialChars",action:"strong_password"},{id:"password4",name:"No numbers",label:"Password without numbers",type:"/password/noNumbers",action:"strong_password"}]},{id:"username",name:"Fill Username",label:"Username",type:"/nameperson/friendly"}]},login_on_register:{id:"login",name:"Login fields on register form",children:[{id:"loginemail",name:"Login Username or Email",panel_title:"Fill <u>email/password</u> Login info on this combined form",type:"/contact/email/login"},{id:"loginpassword",name:"Login Password",type:"/password/login"}]},wallet:{id:"cards",name:"Correct how the <b>{data_type}</b> is filled",when:"card_has_data",children:[{id:"mask",name:"Fill Masked Card",panel_title:"Blur sees: <u>{data_type}</u> on <u class=formType>{form_type}</u> Page",action:"mask_card"},{id:"{card}",name:"Fill {label} (x{last_4})",page_title:"Select existing card info to fill",entities:"card",children:[{id:"number",name:"Fill Card # - <small>x{last_4}</small>",page_title:"Fill {label} (x{last_4})",entity:"card",children:[{id:"number",name:"Fill Card # - <small>x{last_4}</small>",label:"Card Number",page_title:"Fill Full Card #",entity:"card",value:"{number}",action:"fill",type:"/financial/creditcard/number"},{id:"part1",name:"Fill Card # - first 4",label:"Card Number Part 1",entity:"card",value:"{first_4}",action:"fill",type:"/financial/creditcard/part1"},{id:"part2",name:"Fill Card # - second 4",label:"Card Number Part 2",entity:"card",value:"{second_4}",action:"fill",type:"/financial/creditcard/part2"},{id:"part3",name:"Fill Card # - third 4",label:"Card Number Part 3",entity:"card",value:"{third_4}",action:"fill",type:"/financial/creditcard/part3"},{id:"part4",name:"Fill Card # - last 4",label:"Card Number Part 4",entity:"card",value:"{last_4}",action:"fill",type:"/financial/creditcard/part4"},{id:"amex1",name:"Fill Card # - first 4",label:"Amex Number Part 1",entity:"card",value:"{amex_4}",type:"/financial/creditcard/amex/part1"},{id:"amex2",name:"Fill Card # - second 6",label:"Amex Number Part 2",entity:"card",value:"{amex_6}",type:"/financial/creditcard/amex/part2"},{id:"amex3",name:"Fill Card # - last 4",label:"Amex Number Part 3",entity:"card",value:"{amex_5}",type:"/financial/creditcard/amex/part3"}]},{id:"holder_name",name:"Card holder name - <small>{full_name}</small>",entity:"card",children:[{id:"issued",name:"Full Name - <small>{full_name}</small>",label:"Card Holder Name",value:"{full_name}",page_title:"Fill {label} (x{last_4})",entity:"card",action:"fill",type:"/financial/creditcard/issuedto"},{id:"first",name:"First Name - <small>{first_name}</small>",label:"Card Holder First Name",value:"{first_name}",entity:"card",action:"fill",type:"/financial/creditcard/issuedto/first"},{id:"last",name:"Last Name - <small>{last_name}</small>",label:"Card Holder Last Name",value:"{last_name}",entity:"card",action:"fill",type:"/financial/creditcard/issuedto/last"}]},{id:"cvv",name:"Fill CVV/CVC/CVV2",label:"CVV/CVC/CVV2",value:"{cvc}",entity:"card",action:"fill",type:"/financial/creditcard/verification"},{id:"expiry",name:"Fill Expiry Date - <small>{expiry}</small>",label:"Card Expiry (mm/yyyy)",value:"{expiry}",entity:"card",action:"fill",type:"/financial/creditcard/expiry"},{id:"expiry2",name:"Fill Expiry Date - <small>{expiry2}</small>",label:"Card Expiry (mm/yy)",value:"{expiry2}",entity:"card",action:"fill",type:"/financial/creditcard/expiry2"},{id:"month",name:"Fill Expiry month - <small>{expiry_month}</small>",label:"Card Expiry Month",value:"{expiry_month}",entity:"card",action:"fill",type:"/financial/creditcard/expirymonth"},{id:"year",name:"Fill Expiry year - <small>{expiry_year}</small>",label:"Card Expiry Year (yyyy)",value:"{expiry_year}",entity:"card",action:"fill",type:"/financial/creditcard/expiryyear"},{id:"year2",name:"Fill Expiry year - <small>{expiry_year2}</small>",label:"Card Expiry Year (yy)",value:"{expiry_year2}",entity:"card",action:"fill",type:"/financial/creditcard/expiryyear2"},{id:"type",name:"Fill Card type - <small>{type}</small>",label:"Card Type",value:"{type}",entity:"card",action:"fill",type:"/financial/creditcard/type"},{id:"address",name:"Fill Card Billing Address - <small>{address1}</small>",entity:"card",children:[{id:"address1",name:"Fill Address Line 1 - <small>{address1}</small> ",label:"Address Line 1",value:"{address1}",entity:"card",action:"fill",type:"/contact/postaladdress/billing"},{id:"address2",name:"Fill Address Line 2 - <small>{address2}</small>",label:"Address Line 2",value:"{address2}",entity:"card",action:"fill",type:"/contact/postaladdressAdditional/billing"},{id:"address3",name:"Fill Address Line 3 - <small>{address3}</small>",label:"Address Line 3",value:"{address3}",entity:"card",action:"fill",type:"/contact/postaladdress3/billing"},{id:"city",name:"Fill City - <small>{city}</small>",label:"City",value:"{city}",entity:"card",action:"fill",type:"/contact/city/billing"},{id:"state",name:"Fill State - <small>{state}</small>",label:"State",value:"{state}",action:"fill",entity:"card",type:"/contact/state/billing"},{id:"statecode",name:"Fill State Code - <small>{state}</small>",label:"State Code",value:"{state}",entity:"card",action:"fill",type:"/contact/state/code/billing"},{
id:"country",name:"Fill Country - <small>{country}</small>",label:"Country",value:"{country}",entity:"card",action:"fill",type:"/contact/country/billing"},{id:"zip",name:"Fill Zip/Postal Code - <small>{zip}</small>",label:"Zip/Postal Code",entity:"card",value:"{zip}",action:"fill",type:"/contact/postalcode/billing"},{id:"zip+",name:"Fill Zip+4 - <small>{zip4}</small>",label:"Zip+4",entity:"card",value:"{zip4}",action:"fill",type:"/contact/zip4/billing"}]}]},{ref:"list_cards"}]},identity:{id:"identity",name:"Correct how the <b>{data_type}</b> is filled",when:"identity_has_data",children:[{id:"{identity}",name:"Fill {label} - <small>{full_name}</small>",page_title:"Select existing identity info to fill",entities:"identity",children:[{id:"full",name:"Full Name - <small>{full_name}</small>",label:"Full Name",value:"{full_name}",entity:"identity",action:"fill",type:"/nameperson/full"},{id:"first",name:"Fill First name - <small>{first_name}</small>",label:"First Name",value:"{first_name}",entity:"identity",action:"fill",type:"/nameperson/first"},{id:"middle",name:"Fill Middle name - <small>{middle_name}</small>",label:"Middle Name",value:"{middle_name}",entity:"identity",action:"fill",type:"/nameperson/middle"},{id:"last",name:"Fill Last name - <small>{last_name}</small>",label:"Last Name",value:"{last_name}",entity:"identity",action:"fill",type:"/nameperson/last"},{id:"email",name:"Fill Email - <small>{real_email}</small>",value:"{real_email}",entity:"identity",action:"fill",type:"/contact/email"},{id:"username",name:"Fill Username - <small>{username}</small>",label:"Username",value:"{username}",entity:"identity",action:"fill",type:"/nameperson/friendly"},{id:"dob",name:"Date of birth - <small>{dob_month}/{dob_day}/{dob_year}</small>",entity:"identity",children:[{id:"month",name:"Birth month - <small>{dob_month}</small>",label:"Birth month",value:"{dob_month}",entity:"identity",action:"fill",type:"/birthdate/birthmonth"},{id:"day",name:"Birth day - <small>{dob_day}</small>",label:"Birth day",value:"{dob_day}",entity:"identity",action:"fill",type:"/birthdate/birthday"},{id:"year",name:"Birth year - <small>{dob_year}</small>",label:"Birth year",value:"{dob_year}",entity:"identity",action:"fill",type:"/birthdate/birthyear"},{id:"mmddyyyy1",name:"Birth Date - <small>{dob_month}-{dob_day}-{dob_year}</small>",label:"Birth Date",value:"{dob_month}-{dob_day}-{dob_year}",entity:"identity",action:"fill",type:"/birthdate/MM-DD-YYYY"},{id:"mmddyyyy2",name:"Birth Date - <small>{dob_month}/{dob_day}/{dob_year}</small>",label:"Birth Date",value:"{dob_month}/{dob_day}/{dob_year}",entity:"identity",action:"fill",type:"/birthdate/MM/DD/YYYY"},{id:"ddmmyyyy1",name:"Birth Date - <small>{dob_day}-{dob_month}-{dob_year}</small>",label:"Birth Date",value:"{dob_day}-{dob_month}-{dob_year}",entity:"identity",action:"fill",type:"/birthdate/DD-MM-YYYY"},{id:"ddmmyyyy2",name:"Birth Date - <small>{dob_day}/{dob_month}/{dob_year}</small>",label:"Birth Date",value:"{dob_day}/{dob_month}/{dob_year}",entity:"identity",action:"fill",type:"/birthdate/DD/MM/YYYY"}]},{id:"company",name:"Fill Company - <small>{company}</small>",value:"{company}",entity:"identity",action:"fill",type:"/company/name"},{id:"position",name:"Company Position",value:"{designation}",entity:"identity",action:"fill",type:"/company/position"},{id:"website",name:"Website Url",value:"{url}",entity:"identity",action:"fill",type:"/website"},{id:"ssn",name:"SSN #",value:"{ssn}",entity:"identity",action:"fill",type:"/socialSecurityNumber"},{id:"dl",name:"Driver License",value:"{driver_license}",entity:"identity",action:"fill",type:"/driverLicense"}]},{ref:"list_identities"}]},address:{id:"address",name:"Correct how the <b>{data_type}</b> is filled",children:[{id:"{address}",name:"Fill {label} - <small>{address1}</small>",page_title:"Select existing address info to fill",entities:"address",children:[{id:"address1",name:"Fill Address Line 1 - <small>{address1}</small> ",page_title:"Fill Address - <small>{address1}</small>",value:"{address1}",entity:"address",action:"fill",type:"/contact/postaladdress"},{id:"address2",name:"Fill Address Line 2 - <small>{address2}</small>",value:"{address2}",entity:"address",action:"fill",type:"/contact/postaladdressAdditional"},{id:"address3",name:"Fill Address Line 3 - <small>{address3}</small>",value:"{address3}",entity:"address",action:"fill",type:"/contact/postaladdress3"},{id:"city",name:"Fill City - <small>{city}</small>",value:"{city}",entity:"address",action:"fill",type:"/contact/city"},{id:"state",name:"Fill State - <small>{state}</small>",value:"{state}",action:"fill",entity:"address",type:"/contact/state"},{id:"statecode",name:"Fill State Code - <small>{state}</small>",value:"{state}",entity:"address",action:"fill",type:"/contact/state/code"},{id:"country",name:"Fill Country - <small>{country}</small>",value:"{country}",entity:"address",action:"fill",type:"/contact/country"},{id:"zip",name:"Fill Zip/Postal Code - <small>{zip}</small>",label:"Zip/Postal Code",entity:"address",value:"{zip}",action:"fill",type:"/contact/postalcode"},{id:"zip+",name:"Fill Zip+4 - <small>{zip4}</small>",label:"Zip+4",entity:"address",value:"{zip4}",action:"fill",type:"/contact/zip4"}]},{id:"mask_address",name:"Fill Masked Card Address - <small>50 Franklin Street</small>",children:[{id:"address1",name:"Fill Address Line 1 - <small>50 Franklin Street</small> ",label:"Address Line 1",page_title:"Fill Masked Card Address - <small>50 Franklin Street, 3rd Floor, 02110</small>",value:"50 Franklin Street",action:"fill",type:"/contact/postaladdress"},{id:"city",name:"Fill City - <small>Boston</small>",label:"City",value:"Boston",action:"fill",type:"/contact/city"},{id:"state",name:"Fill State - <small>MA</small>",label:"State",value:"MA",action:"fill",type:"/contact/state"},{id:"country",name:"Fill Country - <small>US</small>",label:"Country",value:"US",action:"fill",type:"/contact/country"},{id:"zip",name:"Fill Zip/Postal Code - <small>02110</small>",label:"Zip/Postal Code",value:"02110",action:"fill",type:"/contact/postalcode"}]},{ref:"list_addresses"}]},phone:{id:"phone",name:"Correct how the <b>{data_type}</b> is filled",children:[{id:"{phone}",name:"{label}",page_title:"Select existing phone info to fill",entities:"phone",children:[{id:"full",name:"Phone - <small>{number}</small>",label:"Phone Number (xxx-yyy-zzzz)",entity:"phone",value:"{number}",action:"fill",type:"/contact/phone"},{id:"area",name:"Phone areacode - <small>{area}</small>",label:"Phone Areacode (xxx)",entity:"phone",value:"{area}",action:"fill",type:"/contact/phone/areacode"},{id:"exchange",name:"Phone exchange - <small>{exchange}</small>",label:"Phone Exchange (yyy)",entity:"phone",value:"{exchange}",action:"fill",type:"/contact/phone/exchange"},{id:"local",name:"Phone local - <small>{local}</small>",label:"Phone Local (zzzz)",entity:"phone",value:"{local}",action:"fill",type:"/contact/phone/local"},{id:"number",name:"Phone last 7 - <small>{last7}</small>",label:"Phone Last 7 (yyy-zzzz)",entity:"phone",value:"{last7}",action:"fill",type:"/contact/phone/number"},{id:"country",name:"Phone country code - <small>{country_code}</small>",label:"Phone Country Code",entity:"phone",value:"{country_code}",action:"fill",type:"/contact/phone/countrycode"},{id:"ext",name:"Phone extension",label:"Phone Extension",entity:"phone",value:"{ext}",action:"fill",type:"/contact/phone/extension"}]},{id:"list",name:"Add/Edit My Phones",action:"show_list_identities"}]},others:{id:"others",name:"Others",children:[{id:"name_types",name:"Name",children:[{id:"full",name:"Full Name",type:"/nameperson/full"},{id:"first",name:"First Name",type:"/nameperson/first"},{id:"last",name:"Last Name",type:"/nameperson/last"},{id:"middle",name:"Middle Name",type:"/nameperson/middle"},{id:"prefix",name:"Title (Mr/Mrs/Ms)",type:"/nameperson/prefix"},{id:"suffix",name:"Suffix (Jr/Sr/II)",type:"/nameperson/suffix"}]},{id:"dob",name:"Date of birth",children:[{id:"age",name:"Age",type:"/birthdate/age"},{id:"month",name:"Birth month",type:"/birthdate/birthmonth"},{id:"day",name:"Birth day",type:"/birthdate/birthday"},{id:"year",name:"Birth year",type:"/birthdate/birthyear"},{id:"mmddyyyy1",name:"Birth Date (MM-DD-YYYY)",type:"/birthdate/MM-DD-YYYY"},{id:"mmddyyyy2",name:"Birth Date (MM/DD/YYYY)",type:"/birthdate/MM/DD/YYYY"},{id:"ddmmyyyy1",name:"Birth Date (DD-MM-YYYY)",type:"/birthdate/DD-MM-YYYY"},{id:"ddmmyyyy2",name:"Birth Date (DD/MM/YYYY)",type:"/birthdate/DD/MM/YYYY"}]},{id:"gender",name:"Gender",type:"/person/gender"},{id:"website",name:"Website Url",type:"/website"},{id:"company",name:"Company Name",type:"/company/name"},{id:"position",name:"Company Position",type:"/company/position"},{id:"ssn",name:"SSN #",type:"/socialSecurityNumber"},{id:"dl",name:"Driver License",type:"/driverLicense"},{id:"ff",name:"Frequent Flier #",type:"/loyalty/flier"},{id:"lc",name:"Loyalty Card #",type:"/loyalty/card"},{id:"captcha",name:"Captcha",type:"/captcha"},{id:"otp",name:"One Time Password",type:"/auth/otp"},{id:"hint",name:"Password Hint",type:"/auth/hint"},{id:"question",name:"Security Question",type:"/auth/question"},{id:"answer",name:"Security Answer",type:"/auth/answer"},{id:"comment",name:"Comment",type:"/comment"},{id:"subject",name:"Subject",type:"/subject"},{id:"message",name:"Message",type:"/message"}]},change:{id:"change",name:"Fill Change Password Form",forForm:"changePassword",children:[{id:"email",name:"Email",type:"/contact/email"},{id:"password1",name:"Old Password",type:"/passwordold"},{id:"password2",name:"New Password",children:[{id:"password1",name:"Password",type:"/password"},{id:"password2",name:"Limited special chars (.-_)",label:"Password with .-_",type:"/password/differentSpecialChars"},{id:"password3",name:"No special characters",label:"Password without special",type:"/password/noSpecialChars"},{id:"password4",name:"No numbers",label:"Password without numbers",type:"/password/noNumbers"}]}]},address_mapping:{id:"correct",name:"Correct an Address Auto-fill Problem",children:[{id:"default",name:"Default Address",children:[{id:"address1",name:"Address Line 1",type:"/contact/postaladdress"},{id:"address2",name:"Address Line 2",type:"/contact/postaladdressAdditional"},{id:"address3",name:"Address Line 3",type:"/contact/postaladdress3"},{id:"city",name:"City",type:"/contact/city"},{id:"state",name:"State",type:"/contact/state"},{id:"statecode",name:"State Code",type:"/contact/state/code"},{id:"country",name:"Country",type:"/contact/country"},{id:"zip",name:"Zip/Postal Code",type:"/contact/postalcode"},{id:"zip+",name:"Zip+4",type:"/contact/zip4"}]},{id:"billing",name:"Billing Address",children:[{id:"address1",name:"Address Line 1",type:"/contact/postaladdress/billing"},{id:"address2",name:"Address Line 2",type:"/contact/postaladdressAdditional/billing"},{id:"address3",name:"Address Line 3",type:"/contact/postaladdress3/billing"},{id:"city",name:"City",type:"/contact/city/billing"},{id:"state",name:"State",type:"/contact/state/billing"},{id:"statecode",name:"State Code",type:"/contact/state/code/billing"},{id:"country",name:"Country",type:"/contact/country/billing"},{id:"zip",name:"Zip/Postal Code",type:"/contact/postalcode/billing"},{id:"zip+",name:"Zip+4",type:"/contact/zip4/billing"}]},{id:"shipping",name:"Shipping Address",children:[{id:"address1",name:"Address Line 1",type:"/contact/postaladdress/shipping"},{id:"address2",name:"Address Line 2",type:"/contact/postaladdressAdditional/shipping"},{id:"address3",name:"Address Line 3",type:"/contact/postaladdress3/shipping"},{id:"city",name:"City",type:"/contact/city/shipping"},{id:"state",name:"State",type:"/contact/state/shipping"},{id:"statecode",name:"State Code",type:"/contact/state/code/shipping"},{id:"country",name:"Country",type:"/contact/country/shipping"},{id:"zip",name:"Zip/Postal Code",type:"/contact/postalcode/shipping"},{id:"zip+",name:"Zip+4",type:"/contact/zip4/shipping"}]},{id:"business",name:"Business Address",children:[{id:"address1",name:"Address Line 1",type:"/contact/postaladdress/business"},{id:"address2",name:"Address Line 2",type:"/contact/postaladdressAdditional/business"},{id:"address3",name:"Address Line 3",type:"/contact/postaladdress3/business"},{id:"city",name:"City",type:"/contact/city/business"},{id:"state",name:"State",type:"/contact/state/business"},{id:"statecode",name:"State Code",type:"/contact/state/code/business"},{id:"country",name:"Country",type:"/contact/country/business"},{id:"zip",name:"Zip/Postal Code",type:"/contact/postalcode/business"},{id:"zip+",name:"Zip+4",type:"/contact/zip4/business"}]},{id:"home",name:"Home Address",children:[{id:"address1",name:"Address Line 1",type:"/contact/postaladdress/home"},{id:"address2",name:"Address Line 2",type:"/contact/postaladdressAdditional/home"},{id:"address3",name:"Address Line 3",type:"/contact/postaladdress3/home"},{id:"city",name:"City",type:"/contact/city/home"},{id:"state",name:"State",type:"/contact/state/home"},{id:"statecode",name:"State Code",type:"/contact/state/code/home"},{id:"country",name:"Country",type:"/contact/country/home"},{id:"zip",name:"Zip/Postal Code",type:"/contact/postalcode/home"},{id:"zip+",name:"Zip+4",type:"/contact/zip4/home"}]}]},phone_mapping:{id:"correct",name:"Correct an Phone Auto-fill Problem",children:[{id:"default",name:"Default Phone",children:[{id:"full",name:"Phone (xxx-yyy-zzzz)",type:"/contact/phone"},{id:"area",name:"Phone areacode (xxx)",type:"/contact/phone/areacode"},{id:"exchange",name:"Phone exchange (yyy)",type:"/contact/phone/exchange"},{id:"local",name:"Phone local (zzzz)",type:"/contact/phone/local"},{id:"number",name:"Phone last 7 (yyy-zzzz)",type:"/contact/phone/number"},{id:"country",name:"Phone country code",type:"/contact/phone/countrycode"},{id:"ext",name:"Phone extension",type:"/contact/phone/extension"}]},{id:"home",name:"Home Phone",children:[{id:"full",name:"Phone (xxx-yyy-zzzz)",type:"/contact/phone/home"},{id:"area",name:"Phone areacode (xxx)",type:"/contact/phone/areacode/home"},{id:"exchange",name:"Phone exchange (yyy)",type:"/contact/phone/exchange/home"},{id:"local",name:"Phone local (zzzz)",type:"/contact/phone/local/home"},{id:"number",name:"Phone last 7 (yyy-zzzz)",type:"/contact/phone/number/home"},{id:"country",name:"Phone country code",type:"/contact/phone/countrycode/home"},{id:"ext",name:"Phone extension",type:"/contact/phone/extension/home"}]},{id:"work",name:"Work Phone",children:[{id:"full",name:"Phone (xxx-yyy-zzzz)",type:"/contact/phone/work"},{id:"area",name:"Phone areacode (xxx)",type:"/contact/phone/areacode/work"},{id:"exchange",name:"Phone exchange (yyy)",type:"/contact/phone/exchange/work"},{id:"local",name:"Phone local (zzzz)",type:"/contact/phone/local/work"},{id:"number",name:"Phone last 7 (yyy-zzzz)",type:"/contact/phone/number/work"},{id:"country",name:"Phone country code",type:"/contact/phone/countrycode/work"},{id:"ext",name:"Phone extension",type:"/contact/phone/extension/work"}]},{id:"mobile",name:"Mobile Phone",children:[{id:"full",name:"Phone (xxx-yyy-zzzz)",type:"/contact/phone/mobile"},{id:"area",name:"Phone areacode (xxx)",type:"/contact/phone/areacode/mobile"},{id:"exchange",name:"Phone exchange (yyy)",type:"/contact/phone/exchange/mobile"},{id:"local",name:"Phone local (zzzz)",type:"/contact/phone/local/mobile"},{id:"number",name:"Phone last 7 (yyy-zzzz)",type:"/contact/phone/number/mobile"},{id:"country",name:"Phone country code",type:"/contact/phone/countrycode/mobile"},{id:"ext",name:"Phone extension",type:"/contact/phone/extension/mobile"}]},{id:"fax",name:"Fax Phone",children:[{id:"full",name:"Phone (xxx-yyy-zzzz)",type:"/contact/phone/fax"},{id:"area",name:"Phone areacode (xxx)",type:"/contact/phone/areacode/fax"},{id:"exchange",name:"Phone exchange (yyy)",type:"/contact/phone/exchange/fax"},{id:"local",name:"Phone local (zzzz)",type:"/contact/phone/local/fax"},{id:"number",name:"Phone last 7 (yyy-zzzz)",type:"/contact/phone/number/fax"},{id:"country",name:"Phone country code",type:"/contact/phone/countrycode/fax"},{id:"ext",name:"Phone extension",type:"/contact/phone/extension/fax"}]}]}},a=null,L=/postal|city|state|contact\/country/i,O=/(nameperson\/(first|last|middle|full))|social|company|dob|driver|website/i,V=/financial/i,z=/phone/i,n=/\/email|\/friendly|\/password/i,m=t.BaseModel.extend({initialize:function(){}}),r=t.BaseCollection.extend({model:m,initialize:function(){},loadMenu:function(e,t,n,i,a){var r={},s=-1;if(e.match(/.*\.[0-9]+$/)){var o=e.lastIndexOf(".");s=parseInt(e.substr(o+1)),e=e.substring(0,o)}if(null!=t&&(r["{data_type}"]=D(t)),null!=n&&(r["{form_type}"]=M(n)),null!=t&&null!=n){var l=k(t,n);null!=l&&(r["{group}"]=l)}r["{app}"]="site",a.email&&(r["{email}"]=a.email);var c=-1!=e.indexOf(".more"),d=[],u=e.replace(".more","").split(/\./),m=R,h={},f={children:[]};h.root=f,null!=t&&(t.match(L)?n="addressForm":t.match(z)?n="phoneForm":t.match(V)?n="checkoutForm":t.match(O)&&(n="identityForm")),m[n]||(n="otherForm");for(var p=m[n],y=0;y<p.length;y++){var g=p[y];if("more"!=g||!c){"dont_show"==g&&(g="dont_show_extension");var b=m[g];if((!b.forType||null!=t&&t.match(new RegExp(b.forType,"i")))&&(f.children.push(b),!c&&"more"==g))break}}for(y=0;y<u.length;y++){var v=u[y];if(h[v])h=h[v];else if(h.children)for(var _=h.children,E=0;E<_.length;E++){(A=P(m,A=_[E])).id==v&&(h=A)}}if(h.children)for(_=h.children,y=0;y<_.length;y++){var A,w=(A=P(m,A=_[y])).id;if(A.when){var T=A.when;if(-1!=T.indexOf("has_data")&&0==a[T.replace("_has_data","")].length)continue}if("mask_card"!=A.action)if(A.entities){var C=B(e,r,A,w,a[A.entities]);d=d.concat(C),a.CurrentEntity=null}else if(A.entity){var N,F=a[A.entity];-1==s?N=a.CurrentEntity:(N=F.at(s),a.CurrentEntity=N),null!=(x=S(e,r,A,w,N,s))&&d.push(x)}else{var x;null!=(x=I(e,i,r,A,w))&&d.push(x)}}for(y=0;y<d.length;y++)d[y].set("idx",y);this.reset(d)}});return t.MappingMenu=m,t.MappingMenuCollection=r,{MappingMenu:m,MappingMenuCollection:r}}),ABINE_DNTME.define("abine/models/shieldedCard",["models","documentcloud/underscore","abine/eventLogger"],function(e){var t=e.BaseModel.extend({storageEntity:"shieldedCard",interestedBroadcasts:/broadcast:billinginfo:updated/i,generateDisposable:function(){return new e.DisposableCard({shielded_card_id:this.get("id")})},getName:function(){return this.get("first_name")+" "+this.get("last_name")},getExpiry:function(){return parseInt(this.get("month"))+" / "+parseInt(this.get("year"))},getFirstName:function(){return this.get("first_name").toUpperCase()},getLastName:function(){return this.get("last_name").toUpperCase()},getLastFour:function(){return this.get("last_four")},getProtectedNumber:function(){if(!this.get("number"))return"---";var e=this.get("number")+"";return e.substr(0,e.length-4).replace(/./g,"x")+e.substr(e.length-4)},getProtectedVerification:function(){if(!this.get("number"))return"---";var e=this.get("verification")+"";return e.substr(0,e.length-1).replace(/./g,"x")+e.substr(e.length-1)}}),n=e.BaseCollection.extend({model:t,getPrimaryCardName:function(){return 0<this.models.length?this.models[0].getFirstName+" "+this.models[0].getLastName():""},getPrimaryCardLastFour:function(){return 0<this.models.length?this.models[0].getLastFour():""},getPrimaryCardExpiry:function(){return 0<this.models.length?this.models[0].get:""}});return{ShieldedCard:e.ShieldedCard=t,ShieldedCardCollection:e.ShieldedCardCollection=n}}),ABINE_DNTME.define("abine/models/shieldedEmail",["models"],function(a){var e=a.BaseModel.extend({}),t=a.BaseModel.extend({storageEntity:"shieldedEmail",initialize:function(e){this.messenger=e.messenger||this.getMessenger(),this.hasMany({altEmails:{collection:i}})},generateDisposable:function(e,t,n,i){return new a.DisposableEmail({targetGuid:this.get("guid"),label:e,customName:n,customDomain:i,source:t})},getAddress:function(){return this.get("email")},getCustomName:function(){var e=this.get("first_name");return e||(e=this.get("last_name")),e||(e=this.get("email").replace(/@.+/,"").replace(/[^a-z0-9].+/,"")),e.toLowerCase().replace(/[^a-z0-9-_+.]+/g,"")},isValidated:function(){return 1==this.get("active")},resendValidationEmail:function(t){this.sync("update",this,{eventName:"update:shieldedEmail:resendValidationEmail:"+this.get("id"),success:function(e){t(e)},error:function(e){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/shieldedEmail]#[resendValidationEmail]# error event in model.sync eventName: update:shieldedEmail:resendValidationEmail:id"),t(e)}})}}),n=a.BaseCollection.extend({model:t,interestedBroadcasts:/broadcast:register:success/i}),i=a.BaseCollection.extend({model:e});return{ShieldedEmail:a.ShieldedEmail=t,ShieldedEmailCollection:a.ShieldedEmailCollection=n}}),ABINE_DNTME.define("abine/models/shieldedPhone",["models","documentcloud/underscore"],function(e){var t=e.BaseModel.extend({storageEntity:"shieldedPhone",generateDisposable:function(){return new e.DisposablePhone({shielded_phone_id:this.get("id")})},hasNumber:function(){return!(!this.has("number")||""==this.get("number"))},registerNumber:function(e){this.sync("create",this,{eventName:"create:shieldedPhone",success:e.success,error:e.error})},verifySecret:function(e){this.sync("update",this,{eventName:"update:shieldedPhone:secret",success:e.success,error:e.error})},getCountryCode:function(){return this.get("country_code")||"1"},getAreaCode:function(){return this.get("number").substr(0,3)},getExchange:function(){return this.get("number").substr(3,3)},getLocal:function(){return this.get("number").substr(6,4)},getPrettyNumber:function(){return this.isNorthAmericaFormat()?"("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():this.isEuropeanFormat()?"0"+this.get("number"):this.get("number")},getFullPrettyNumber:function(){return this.isNorthAmericaFormat()?"+"+this.getCountryCode()+" ("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():"+"+this.getCountryCode()+" "+this.get("number")},isNorthAmericaFormat:function(){return"1"==this.getCountryCode()},isEuropeanFormat:function(){var e=this.getCountryCode()[0];return"3"==e||"4"==e},isTextAllowed:function(){return this.getCountryCode()in{1:1,44:1}},isValidated:function(){return"true"==this.get("is_validated")}}),n=e.BaseCollection.extend({model:t});return{ShieldedPhone:e.ShieldedPhone=t,ShieldedPhoneCollection:e.ShieldedPhoneCollection=n}}),ABINE_DNTME.define("abine/models/emailDomain",["models","documentcloud/underscore"],function(e){var t=e.BaseModel.extend({storageEntity:"emailDomain"}),n=e.BaseCollection.extend({model:t,initialize:function(){this.messenger=this.getMessenger()}});return{EmailDomain:e.EmailDomain=t,EmailDomainCollection:e.EmailDomainCollection=n}}),ABINE_DNTME.define("abine/models/tabData",["documentcloud/underscore","models","jquery","abine/intl"],function(e,t,n,i){var a=t.BaseModel.extend({storageEntity:"pageTracker",hasSuggested:function(){return!0}}),r=t.BaseCollection.extend({model:a,getBlocked:function(){for(var e=0,t=0;t<this.length;t++)1==this.at(t).get("blocked")&&e++;return e},getAllowed:function(){for(var e=0,t=0;t<this.length;t++)1!=this.at(t).get("blocked")&&e++;return e}}),s=t.BaseModel.extend({storageEntity:"blacklistOrPreference"}),o=t.BaseModel.extend({storageEntity:"customTabData"}),l=t.BaseCollection.extend({model:o,isFeedbackShown:function(){for(var e=0;e<this.length;e++)if("feedbackShown"==this.at(e).get("name"))return this.at(e).get("value");return!1},changedFeature:function(){for(var e=0;e<this.length;e++)if("changedFeature"==this.at(e).get("name")){var t=this.at(e).get("value");if(""==t)break;var n=this.changedFeatureOffStatus()?"off":"on";return i.getText("mm_dntme_toggled_"+t+"_"+n)}return null},changedFeatureOffStatus:function(){for(var e=0;e<this.length;e++)if("changedFeatureOffStatus"==this.at(e).get("name"))return this.at(e).get("value");return null},setCustomTabData:function(e,t){for(var n=null,i=0;i<this.length;i++)this.at(i).get("name")==e&&(n=this.at(i));n||(n=new o,this.add(n)),n.save({name:e,value:t})}}),c=t.BaseModel.extend({storageEntity:"tabData",initialize:function(e){this.messenger=e.messenger||this.getMessenger(),this.hasMany({trackers:{collection:r},custom:{collection:l}}),this.hasOne({blacklist:{model:t.Blacklist},dntStats:{model:t.DntStats}})},hasFiveOrMoreTrackers:function(){return 5<=this.trackers.length},hasTwoOrMoreTrackers:function(){return 2<=this.trackers.length},hasOneTracker:function(){return 1==this.trackers.length},hasMobileAppAndDropboxEnabled:function(){return this.get("hasMobileApp")&&this.get("dropboxEnabled")&&this.get("entitledToSync")},fetchTrackers:function(e){(e=e||{}).eventName="read:"+this.storageEntity+":trackers",this.fetch(e)}});return t.TabData=c,t.CustomTabData=o,t.BlacklistOrPreference=s,{TabData:c}}),ABINE_DNTME.define("abine/models/pageData",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"pageData"});return{PageData:t.PageData=n}}),ABINE_DNTME.define("abine/models/address",["models","documentcloud/underscore"],function(e){var t=e.BaseModel.extend({storageEntity:"address",getFormattedText:function(){var e=[this.get("address1"),this.get("address2"),this.get("city"),this.get("state"),this.get("zip")].join(",");return e=e.replace(/(\s*,\s*)+/g,", ")},toFillData:function(){return this.toJSON()}}),n=e.BaseCollection.extend({model:t,initialize:function(){this.messenger=this.getMessenger()}});return{Address:e.Address=t,AddressCollection:e.AddressCollection=n}}),ABINE_DNTME.define("abine/models/account",["models","documentcloud/underscore"],function(e){var t=e.BaseModel.extend({storageEntity:"account",getFormattedText:function(){var e=[];return this.get("email")&&e.push("Email: "+this.get("email")),this.get("username")&&e.push("Username: "+this.get("username")),this.get("password")&&e.push("Password: "+this.get("password")),e.join("\n")},getAddressX:function(){return this.getAddress(!0)},getAddress:function(e){var t=this.get("label");if(t&&0<t.length&&t!=this.get("domain"))return t;var n=this.get("email");if(n&&0<n.length)return n;var i=this.get("username");if(i&&0<i.length)return i;var a=this.get("password");return a&&0<a.length?e?"********":"Fill Password: *********":"- Not set -"},toFillData:function(){return{label:this.getAddress(),email:this.get("email"),username:this.get("username"),password:this.get("password")}}}),n=e.BaseCollection.extend({model:t,initialize:function(){this.messenger=this.getMessenger()},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:account:domain:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/account]#[fetchAllByDomain]# error event in model.sync eventName: read:account:domain:domain")}})},fetchLoginsByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:logins:domain:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/account]#[fetchAllByDomain]# error event in model.sync eventName: read:account:domain:domain")}})},fetchAccountsByPassword:function(e,t){this.sync("read",this,{eventName:"read:accounts:password:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/account]#[fetchAllByDomain]# error event in model.sync eventName: read:account:domain:domain")}})}});return{Account:e.Account=t,AccountCollection:e.AccountCollection=n}}),ABINE_DNTME.define("abine/models/identity",["models","documentcloud/underscore","abine/intl","abine/assets"],function(e){var t=e.BaseModel.extend({storageEntity:"identity",getLabel:function(){var e=this.get("label");return e&&15<e.length&&(e=e.substr(0,12)+"..."),e},toFillData:function(){var e=this.toJSON();return e.full_name=(this.get("first_name")+" "+this.get("last_name")).replace(/^[\s]+|[\s]+$/g,"").replace(/[\s]+$/g," "),e.email&&-1!=e.email.indexOf("@")&&(e.real_email=e.email),e}}),n=e.BaseCollection.extend({model:t,initialize:function(){this.messenger=this.getMessenger()}});return{Identity:e.Identity=t,IdentityCollection:e.IdentityCollection=n}}),ABINE_DNTME.define("abine/models/realCard",["models","documentcloud/underscore","abine/intl","abine/assets"],function(e,t,n,i){var a=e.BaseModel.extend({storageEntity:"realCard",getLastFour:function(){return this.get("number").substr(this.get("number").length-4)},getNonDefaultLabel:function(){var e=this.get("label");return e&&e.toLowerCase()==(this.getType()+" "+this.getLastFour()).toLowerCase()?null:e},labelChangeRequired:function(){var e=this.get("label");return!(!e||!(15<e.length||e.toLowerCase()==(this.getType()+" "+this.getLastFour()).toLowerCase()))},getLabelOrLastFour:function(){if(this.getNonDefaultLabel())return n.getText("mm_payment_helper_useCardName",[this.getLabel()]);var e=this.getDisplayType();return e?n.getText("mm_payment_helper_useCardName",[e+"-"+this.getLastFour()]):n.getText("mm_payment_helper_useCardName",["x"+this.getLastFour()])},getPlainLabelOrLastFour:function(){if(this.getNonDefaultLabel())return this.getLabel();var e=this.getDisplayType();return e?e+"-"+this.getLastFour():"x"+this.getLastFour()},getCardNumber:function(){return this.get("number")},getSeparatedCardNumber:function(){var e=this.get("number");return 16==e.length?e.substring(0,4)+" "+e.substring(4,8)+" "+e.substring(8,12)+" "+e.substring(12,16):this.get("type")&&this.get("type").match(/amex|american/i)?e.substr(0,4)+" "+e.substr(4,6)+" "+e.substr(10):e},getSeparatedMaskedCardNumber:function(){var e=this.get("number");if(16==e.length)return Array(4).join("**** ")+e.substring(12,16);var t=this.get("type");return t&&t.match(/amex|american/i)?"**** ****** *"+e.substr(-4):Array(e.length-3).join("*")+e.substr(-4)},getMaskedVerification:function(){return Array(this.get("cvc").length+1).join("*")},getMaskedExpiry:function(){return this.getExpiry().replace(/[0-9]/g,"*")},getBrandImage:function(){var e=this.getBrand();return e&&e.match(/asd/)||(e="no_match"),i.assetUrl("/pages/images/blank_cards/"+e+".png")},getTypeImage:function(){var e=this.getType();return e.match(/american_express|diners_club|discover|jcb|laser|maestro|mastercard|visa/)||(e="no_match"),i.assetUrl("/pages/images/credit_cards/"+e+".png")},getAddress:function(){var e=this.get("address");if(!e)return null;var t=[e.address1,e.address2,e.city,e.state,e.zip].join(",");return t=t.replace(/(\s*,\s*)+/g,", ")},getFormattedText:function(){var e=[this.get("first_name")+" "+this.get("last_name"),this.getPrettyNumber(),"Exp: "+this.getExpiry()+" CVC: "+this.getCVC(),this.getAddress()].join("\n");return e=e.replace(/[\n]+/g,"\n")},getAddress1:function(){var e=this.get("address");return e?e.address1.replace(/(\s*,\s*)+/g,", "):null},getAddress2:function(){var e=this.get("address");return e?e.address2.replace(/(\s*,\s*)+/g,", "):null},getCityState:function(){var e=this.get("address");if(!e)return null;var t=[e.city,e.state].join(",");return t=t.replace(/(\s*,\s*)+/g,", ")},getPostal:function(){var e=this.get("address");return e?e.zip.replace(/(\s*,\s*)+/g,", "):null},getType:function(){return this.get("type").toLowerCase()},getDisplayType:function(){var e=this.getType();return e.match(/visa/)?"Visa":e.match(/master/)?"Master":e.match(/amex|american/)?"Amex":e.match(/diner/)?"Diners":e.match(/discover/)?"Discover":e.match(/jcb/)?"Jcb":e.match(/laser/)?"Lazer":e.match(/maestro/)?"Maestro":null},getBrand:function(){return this.get("brand").toLowerCase()},getPrettyNumber:function(){for(var e="",t=0;t<this.get("number").length;t++)e+=this.get("number").charAt(t),t%4==3&&(e+="  ");return e},getCVC:function(){return this.get("cvc")},getExpiry:function(){var e=parseInt(this.get("expiry_month"));return e<10&&(e="0"+e),e+"/"+this.get("expiry_year")},getLabel:function(){var e=this.get("label");return e&&15<e.length&&(e=e.substr(0,12)+"..."),e},getProtectedNumber:function(){var e=this.get("number")+"";return e.substr(0,e.length-12).replace(/./g,"x")+e.substr(e.length-4)},getProtectedVerification:function(){var e=this.get("verification")+"";return e.substr(0,e.length-1).replace(/./g,"x")+e.substr(e.length-1)},isRealCard:function(){return"real_card"==this.get("cardType")},isOfferCard:function(){return"offer"==this.get("cardType")},isNewMaskedCard:function(){return"new_masked_card"==this.get("cardType")},isNewRealCard:function(){return"new_real_card"==this.get("cardType")},toFillData:function(){var e=this.toJSON(),t=e.number;return e.last_4=t.substr(t.length-4),16==t.length?(e.first_4=t.substring(0,4),e.second_4=t.substring(4,8),e.third_4=t.substring(8,12)):e.type&&e.type.match(/ame/i)&&(e.amex_4=t.substring(0,4),e.amex_6=t.substring(4,10),e.amex_5=t.substring(10,15)),e.expiry_year&&e.expiry_month&&(e.expiry=e.expiry_month+"/"+e.expiry_year,
e.expiry2=e.expiry_month+"/"+e.expiry_year.substring(2)),e.expiry_year&&(e.expiry_year2=e.expiry_year.substring(2)),e.full_name=(e.first_name+" "+e.last_name).replace(/^[\s]+|[\s]+$/g,"").replace(/[\s]+$/g," "),null!=this.get("address")&&(e.address=this.get("address")),e}}),r=e.BaseCollection.extend({model:a,initialize:function(){this.messenger=this.getMessenger()},fetchOfferCardsForDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:realCard:offers:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/realCard]#[fetchAllForDomain]# error event in read:realCard:offers:domain"),t(!0)}})},fetchAllForDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:realCard:site:"+e,success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/realCard]#[fetchAllForDomain]# error event in read:realCard:site:domain"),t(!0)}})}});return{RealCard:e.RealCard=a,RealCardCollection:e.RealCardCollection=r}}),ABINE_DNTME.define("abine/models/globalData",["documentcloud/underscore","models","jquery","abine/intl"],function(e,t,n,i){var a=t.BaseModel.extend({storageEntity:"globalTracker",hasSuggested:function(){return!1}}),r=t.BaseCollection.extend({model:a}),s=t.BaseModel.extend({storageEntity:"globalPreference",getLabel:function(){return i.getText("mm_dntme_"+this.get("name").toLowerCase())},getId:function(){return this.get("name").toLowerCase()},getTooltip:function(){return i.getText("mm_dntme_help_"+this.get("name").toLowerCase())}}),o=t.BaseCollection.extend({model:s}),l=t.BaseModel.extend({storageEntity:"globalFeature",getLabel:function(){switch(this.get("name")){case"suggestStrongPassword":return i.getText("mm_dntme_accounts_password");case"suggestAddresses":return i.getText("mm_dntme_wallet_address");case"suggestRealCard":return i.getText("mm_dntme_wallet_real_card");case"rememberCards":return i.getText("mm_dntme_wallet_save_card");case"suggestIdentities":return i.getText("mm_dntme_wallet_identity");case"browsing":return i.getText("mm_dntme_tracking_blocker");case"email":return i.getText("mm_dntme_masking_email");case"phone":return i.getText("mm_dntme_masking_phone");case"card":return i.getText("mm_dntme_masking_card");case"search":return i.getText("mm_dntme_masking_search");case"helpMeLogin":return i.getText("mm_dntme_accounts_help_login");case"submitAccount":return i.getText("mm_dntme_accounts_submit_account");case"rememberAccounts":return i.getText("mm_dntme_accounts_save_account");case"showCheckoutPanelGrowl":return i.getText("mm_dntme_showcheckoutpanelgrowl")}},isBrowsing:function(){return"browsing"==this.get("name")},getTooltip:function(){var e=this.get("value")?"off":"on";return this.isBrowsing()?i.getText("mm_dntme_help_what_will_happen_"+e+"_"+this.get("name").toLowerCase(),"all sites"):i.getText("mm_dntme_help_what_will_happen_"+e+"_"+this.get("name").toLowerCase())}}),c=t.BaseCollection.extend({model:l}),d=t.BaseModel.extend({storageEntity:"globalData",initialize:function(e){this.messenger=e.messenger||this.getMessenger(),this.hasMany({trackers:{collection:r},preferences:{collection:o},globalFeatures:{collection:c},blacklist:{collection:t.BlacklistCollection}})}});return{GlobalData:t.GlobalData=d}}),ABINE_DNTME.define("abine/models/feedback",["documentcloud/underscore","documentcloud/backbone","models"],function(e,t,n){var i=n.BaseModel.extend({initialize:function(){},getSuccessLeadMsg:function(){return this.attributes.leadMsg},getSuccessMsg:function(){return this.attributes.successMsg},clone:function(){var e=new this.constructor(this);return e.user=this.user,e}});return{Feedback:n.Feedback=i}}),ABINE_DNTME.define("abine/models/trackerInfo",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"trackerInfo",initialize:function(){this.messenger=this.getMessenger()}}),i=t.BaseCollection.extend({model:n,fetchAllForDomains:function(e,t){this.sync("read",this,{eventName:"read:trackerInfo:index",payload:{domains:e},success:function(e){this.reset(e),t()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableEmail]#[fetchAllByDomain]# error event in model.sync eventName: read:disposableEmail:domain:domain")}})}});return{TrackerInfo:t.TrackerInfo=n,TrackerInfoCollection:t.TrackerInfoCollection=i}}),ABINE_DNTME.define("abine/models/advt",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"advt",initialize:function(){this.messenger=this.getMessenger()}}),i=t.BaseCollection.extend({model:n,fetchAllForQuery:function(e,t,n){this.sync("read",this,{eventName:"read:advt:index",payload:{query:e,url:t},success:function(e){this.reset(e),n()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/advt]#[fetchAllByQuery]# error event in model.sync eventName: read:advt:index")}})}});return{Advt:t.Advt=n,AdvtCollection:t.AdvtCollection=i}});